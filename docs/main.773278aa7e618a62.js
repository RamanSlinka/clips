(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{8697:(tn,ht,z)=>{"use strict";z.d(ht,{nm:()=>Da});var T=z(8186);z(5879),z(3182);var te=z(5861),Ee=z(534),Te=z(4537),Ae=z(9058),gt=z(7879);const Y=new Map,oe={activated:!1,tokenObservers:[]},Fe={initialized:!1,enabled:!1};function At(bt){return Y.get(bt)||Object.assign({},oe)}function Gt(){return Fe}const Xt="https://content-firebaseappcheck.googleapis.com/v1",Yt="exchangeDebugToken",qe={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ot{constructor(vt,Ot,xt,un,Jt){if(this.operation=vt,this.retryPolicy=Ot,this.getWaitDuration=xt,this.lowerBound=un,this.upperBound=Jt,this.pending=null,this.nextErrorWaitInterval=un,un>Jt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(vt){var Ot=this;return(0,te.Z)(function*(){Ot.stop();try{Ot.pending=new Ae.BH,yield function dt(bt){return new Promise(vt=>{setTimeout(vt,bt)})}(Ot.getNextRun(vt)),Ot.pending.resolve(),yield Ot.pending.promise,Ot.pending=new Ae.BH,yield Ot.operation(),Ot.pending.resolve(),yield Ot.pending.promise,Ot.process(!0).catch(()=>{})}catch(xt){Ot.retryPolicy(xt)?Ot.process(!1).catch(()=>{}):Ot.stop()}})()}getNextRun(vt){if(vt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ot=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ot}}}const ft=new Ae.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function zt(bt){if(!At(bt).activated)throw ft.create("use-before-activation",{appName:bt.name})}function xn(bt,vt){return $n.apply(this,arguments)}function $n(){return($n=(0,te.Z)(function*({url:bt,body:vt},Ot){const xt={"Content-Type":"application/json"},un=Ot.getImmediate({optional:!0});if(un){const hs=yield un.getHeartbeatsHeader();hs&&(xt["X-Firebase-Client"]=hs)}const Jt={method:"POST",body:JSON.stringify(vt),headers:xt};let Dn,Kn;try{Dn=yield fetch(bt,Jt)}catch(hs){throw ft.create("fetch-network-error",{originalErrorMessage:hs?.message})}if(200!==Dn.status)throw ft.create("fetch-status-error",{httpStatus:Dn.status});try{Kn=yield Dn.json()}catch(hs){throw ft.create("fetch-parse-error",{originalErrorMessage:hs?.message})}const Mr=Kn.ttl.match(/^([\d.]+)(s)$/);if(!Mr||!Mr[2]||isNaN(Number(Mr[1])))throw ft.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Kn.ttl}`});const Ys=1e3*Number(Mr[1]),vs=Date.now();return{token:Kn.token,expireTimeMillis:vs+Ys,issuedAtTimeMillis:vs}})).apply(this,arguments)}function Bn(bt,vt){const{projectId:Ot,appId:xt,apiKey:un}=bt.options;return{url:`${Xt}/projects/${Ot}/apps/${xt}:${Yt}?key=${un}`,body:{debug_token:vt}}}const dr="firebase-app-check-database",xr=1,hr="firebase-app-check-store";let Gr=null;function Dr(){return(Dr=(0,te.Z)(function*(bt,vt){const xt=(yield function Sr(){return Gr||(Gr=new Promise((bt,vt)=>{try{const Ot=indexedDB.open(dr,xr);Ot.onsuccess=xt=>{bt(xt.target.result)},Ot.onerror=xt=>{var un;vt(ft.create("storage-open",{originalErrorMessage:null===(un=xt.target.error)||void 0===un?void 0:un.message}))},Ot.onupgradeneeded=xt=>{0===xt.oldVersion&&xt.target.result.createObjectStore(hr,{keyPath:"compositeKey"})}}catch(Ot){vt(ft.create("storage-open",{originalErrorMessage:Ot?.message}))}}),Gr)}()).transaction(hr,"readwrite"),Jt=xt.objectStore(hr).put({compositeKey:bt,value:vt});return new Promise((Dn,Kn)=>{Jt.onsuccess=Mr=>{Dn()},xt.onerror=Mr=>{var Ys;Kn(ft.create("storage-set",{originalErrorMessage:null===(Ys=Mr.target.error)||void 0===Ys?void 0:Ys.message}))}})})).apply(this,arguments)}const fi=new gt.Yd("@firebase/app-check");function Qi(bt,vt){return(0,Ae.hl)()?function Rr(bt,vt){return function Nn(bt,vt){return Dr.apply(this,arguments)}(function Kr(bt){return`${bt.options.appId}-${bt.name}`}(bt),vt)}(bt,vt).catch(Ot=>{fi.warn(`Failed to write token to IndexedDB. Error: ${Ot}`)}):Promise.resolve()}function br(){return Gt().enabled}function is(){return ci.apply(this,arguments)}function ci(){return(ci=(0,te.Z)(function*(){const bt=Gt();if(bt.enabled&&bt.token)return bt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const li={error:"UNKNOWN_ERROR"};function vi(bt){return Ae.US.encodeString(JSON.stringify(bt),!1)}function Nr(bt){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,te.Z)(function*(bt,vt=!1){const Ot=bt.app;zt(Ot);const xt=At(Ot);let Jt,un=xt.token;if(un&&!Pe(un)&&(xt.token=void 0,un=void 0),!un){const Mr=yield xt.cachedTokenPromise;Mr&&(Pe(Mr)?un=Mr:yield Qi(Ot,void 0))}if(!vt&&un&&Pe(un))return{token:un.token};let Kn,Dn=!1;if(br()){xt.exchangeTokenPromise||(xt.exchangeTokenPromise=xn(Bn(Ot,yield is()),bt.heartbeatServiceProvider).finally(()=>{xt.exchangeTokenPromise=void 0}),Dn=!0);const Mr=yield xt.exchangeTokenPromise;return yield Qi(Ot,Mr),xt.token=Mr,{token:Mr.token}}try{xt.exchangeTokenPromise||(xt.exchangeTokenPromise=xt.provider.getToken().finally(()=>{xt.exchangeTokenPromise=void 0}),Dn=!0),un=yield At(Ot).exchangeTokenPromise}catch(Mr){"appCheck/throttled"===Mr.code?fi.warn(Mr.message):fi.error(Mr),Jt=Mr}return un?Jt?Kn=Pe(un)?{token:un.token,internalError:Jt}:Et(Jt):(Kn={token:un.token},xt.token=un,yield Qi(Ot,un)):Kn=Et(Jt),Dn&&function be(bt,vt){const Ot=At(bt).tokenObservers;for(const xt of Ot)try{"EXTERNAL"===xt.type&&null!=vt.error?xt.error(vt.error):xt.next(vt)}catch{}}(Ot,Kn),Kn})).apply(this,arguments)}function Ar(bt){return ls.apply(this,arguments)}function ls(){return(ls=(0,te.Z)(function*(bt){const vt=bt.app;zt(vt);const{provider:Ot}=At(vt);if(br()){const xt=yield is(),{token:un}=yield xn(Bn(vt,xt),bt.heartbeatServiceProvider);return{token:un}}{const{token:xt}=yield Ot.getToken();return{token:xt}}})).apply(this,arguments)}function lt(bt,vt){const Ot=At(bt),xt=Ot.tokenObservers.filter(un=>un.next!==vt);0===xt.length&&Ot.tokenRefresher&&Ot.tokenRefresher.isRunning()&&Ot.tokenRefresher.stop(),Ot.tokenObservers=xt}function _e(bt){const{app:vt}=bt,Ot=At(vt);let xt=Ot.tokenRefresher;xt||(xt=function Ce(bt){const{app:vt}=bt;return new ot((0,te.Z)(function*(){let xt;if(xt=At(vt).token?yield Nr(bt,!0):yield Nr(bt),xt.error)throw xt.error;if(xt.internalError)throw xt.internalError}),()=>!0,()=>{const Ot=At(vt);if(Ot.token){let xt=Ot.token.issuedAtTimeMillis+.5*(Ot.token.expireTimeMillis-Ot.token.issuedAtTimeMillis)+3e5;return xt=Math.min(xt,Ot.token.expireTimeMillis-3e5),Math.max(0,xt-Date.now())}return 0},qe.RETRIAL_MIN_WAIT,qe.RETRIAL_MAX_WAIT)}(bt),Ot.tokenRefresher=xt),!xt.isRunning()&&Ot.isTokenAutoRefreshEnabled&&xt.start()}function Pe(bt){return bt.expireTimeMillis-Date.now()>0}function Et(bt){return{token:vi(li),error:bt}}class Qt{constructor(vt,Ot){this.app=vt,this.heartbeatServiceProvider=Ot}_delete(){const{tokenObservers:vt}=At(this.app);for(const Ot of vt)lt(this.app,Ot.next);return Promise.resolve()}}const hi="app-check-internal";!function to(){(0,Ee._registerComponent)(new Te.wA("app-check",bt=>function En(bt,vt){return new Qt(bt,vt)}(bt.getProvider("app").getImmediate(),bt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((bt,vt,Ot)=>{bt.getProvider(hi).initialize()})),(0,Ee._registerComponent)(new Te.wA(hi,bt=>function ve(bt){return{getToken:vt=>Nr(bt,vt),getLimitedUseToken:()=>Ar(bt),addTokenListener:vt=>function mr(bt,vt,Ot,xt){const{app:un}=bt,Jt=At(un);if(Jt.tokenObservers=[...Jt.tokenObservers,{next:Ot,error:xt,type:vt}],Jt.token&&Pe(Jt.token)){const Kn=Jt.token;Promise.resolve().then(()=>{Ot({token:Kn.token}),_e(bt)}).catch(()=>{})}Jt.cachedTokenPromise.then(()=>_e(bt))}(bt,"INTERNAL",vt),removeTokenListener:vt=>lt(bt.app,vt)}}(bt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)("@firebase/app-check","0.8.0")}();class Da{constructor(){return(0,T.vb)("app-check")}}typeof window<"u"&&window},6796:(tn,ht,z)=>{"use strict";z.d(ht,{zQ:()=>Xt,ww:()=>pn,rT:()=>Fe,f7:()=>Ht,L6:()=>Y,_Q:()=>oe,lh:()=>At,Qv:()=>gt,nw:()=>Gt});var T=z(5879),me=z(8645),le=z(2096),B=z(5592),Re=z(2459),Ne=z(3019),Qe=z(3093),at=z(4664),ut=z(7398),xe=z(4552);class je extends me.x{constructor(Yt=1/0,qe=1/0,Xe=xe.l){super(),this._bufferSize=Yt,this._windowTime=qe,this._timestampProvider=Xe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=qe===1/0,this._bufferSize=Math.max(1,Yt),this._windowTime=Math.max(1,qe)}next(Yt){const{isStopped:qe,_buffer:Xe,_infiniteTimeWindow:ot,_timestampProvider:dt,_windowTime:It}=this;qe||(Xe.push(Yt),!ot&&Xe.push(dt.now()+It)),this._trimBuffer(),super.next(Yt)}_subscribe(Yt){this._throwIfClosed(),this._trimBuffer();const qe=this._innerSubscribe(Yt),{_infiniteTimeWindow:Xe,_buffer:ot}=this,dt=ot.slice();for(let It=0;It<dt.length&&!Yt.closed;It+=Xe?1:2)Yt.next(dt[It]);return this._checkFinalizedStatuses(Yt),qe}_trimBuffer(){const{_bufferSize:Yt,_timestampProvider:qe,_buffer:Xe,_infiniteTimeWindow:ot}=this,dt=(ot?1:2)*Yt;if(Yt<1/0&&dt<Xe.length&&Xe.splice(0,Xe.length-dt),!ot){const It=qe.now();let ft=0;for(let jt=1;jt<Xe.length&&Xe[jt]<=It;jt+=2)ft=jt;ft&&Xe.splice(0,ft+1)}}}var $e=z(3020);function kt(Zt,Yt,qe){let Xe,ot=!1;return Zt&&"object"==typeof Zt?({bufferSize:Xe=1/0,windowTime:Yt=1/0,refCount:ot=!1,scheduler:qe}=Zt):Xe=Zt??1/0,(0,$e.B)({connector:()=>new je(Xe,Yt,qe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ot})}var ge=z(1374),St=z(4674);function Ze(Zt,Yt){return(0,St.m)(Yt)?(0,at.w)(()=>Zt,Yt):(0,at.w)(()=>Zt)}var rt=z(5137),et=z(2181),Ke=z(8186),W=z(6304),te=z(6814),Ee=z(8697),Te=z(7142);const gt=new T.OlP("angularfire2.auth.use-emulator"),Y=new T.OlP("angularfire2.auth.settings"),oe=new T.OlP("angularfire2.auth.tenant-id"),Fe=new T.OlP("angularfire2.auth.langugage-code"),At=new T.OlP("angularfire2.auth.use-device-language"),Ht=new T.OlP("angularfire.auth.persistence"),Gt=(Zt,Yt,qe,Xe,ot,dt,It,ft)=>(0,W.cc)(`${Zt.name}.auth`,"AngularFireAuth",Zt.name,()=>{const jt=Yt.runOutsideAngular(()=>Zt.auth());if(qe&&jt.useEmulator(...qe),Xe&&(jt.tenantId=Xe),jt.languageCode=ot,dt&&jt.useDeviceLanguage(),It)for(const[zt,In]of Object.entries(It))jt.settings[zt]=In;return ft&&jt.setPersistence(ft),jt},[qe,Xe,ot,dt,It,ft]);let Xt=(()=>{class Zt{constructor(qe,Xe,ot,dt,It,ft,jt,zt,In,Tn,xn,$n){const Gn=new me.x,ir=(0,le.of)(void 0).pipe((0,Qe.Q)(It.outsideAngular),(0,at.w)(()=>dt.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,5967)))),(0,ut.U)(()=>(0,W.on)(qe,dt,Xe)),(0,ut.U)(Bn=>Gt(Bn,dt,ft,zt,In,Tn,jt,xn)),kt({bufferSize:1,refCount:!1}));if((0,te.PM)(ot))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,le.of)(null);else{ir.pipe((0,ge.P)()).subscribe();const dr=ir.pipe((0,at.w)(qr=>qr.getRedirectResult().then(Gr=>Gr,()=>null)),Ke.iC,kt({bufferSize:1,refCount:!1})),xr=ir.pipe((0,at.w)(qr=>new B.y(Gr=>({unsubscribe:dt.runOutsideAngular(()=>qr.onAuthStateChanged(Sr=>Gr.next(Sr),Sr=>Gr.error(Sr),()=>Gr.complete()))})))),hr=ir.pipe((0,at.w)(qr=>new B.y(Gr=>({unsubscribe:dt.runOutsideAngular(()=>qr.onIdTokenChanged(Sr=>Gr.next(Sr),Sr=>Gr.error(Sr),()=>Gr.complete()))}))));this.authState=dr.pipe(Ze(xr),(0,rt.R)(It.outsideAngular),(0,Qe.Q)(It.insideAngular)),this.user=dr.pipe(Ze(hr),(0,rt.R)(It.outsideAngular),(0,Qe.Q)(It.insideAngular)),this.idToken=this.user.pipe((0,at.w)(qr=>qr?(0,Re.D)(qr.getIdToken()):(0,le.of)(null))),this.idTokenResult=this.user.pipe((0,at.w)(qr=>qr?(0,Re.D)(qr.getIdTokenResult()):(0,le.of)(null))),this.credential=(0,Ne.T)(dr,Gn,this.authState.pipe((0,et.h)(qr=>!qr))).pipe((0,ut.U)(qr=>qr?.user?qr:null),(0,rt.R)(It.outsideAngular),(0,Qe.Q)(It.insideAngular))}return(0,W.pX)(this,ir,dt,{spy:{apply:(Bn,dr,xr)=>{(Bn.startsWith("signIn")||Bn.startsWith("createUser"))&&xr.then(hr=>Gn.next(hr))}}})}}return Zt.\u0275fac=function(qe){return new(qe||Zt)(T.LFG(W.Dh),T.LFG(W.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Ke.HU),T.LFG(gt,8),T.LFG(Y,8),T.LFG(oe,8),T.LFG(Fe,8),T.LFG(At,8),T.LFG(Ht,8),T.LFG(Ee.nm,8))},Zt.\u0275prov=T.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"any"}),Zt})(),pn=(()=>{class Zt{constructor(){Te.Z.registerVersion("angularfire",Ke.q4.full,"auth-compat")}}return Zt.\u0275fac=function(qe){return new(qe||Zt)},Zt.\u0275mod=T.oAB({type:Zt}),Zt.\u0275inj=T.cJS({providers:[Xt]}),Zt})()},8330:(tn,ht,z)=>{"use strict";z.d(ht,{ST:()=>ni,yb:()=>Q_});var T=z(5879),me=z(6321),le=z(5592),B=z(2459),Re=z(2096),Ne=z(8186),Qe=z(7921),at=z(9360),ut=z(8251);function xe(){return(0,at.e)((s,e)=>{let t,c=!1;s.subscribe((0,ut.x)(e,f=>{const v=t;t=f,c&&e.next([v,f]),c=!0}))})}var Y,je=z(7398),$e=z(6699),kt=z(3997),ge=z(2181),St=z(6304),Ze=z(6814),et=(z(5967),z(3106)),Ke=z(5861),W=z(534),te=z(4537),Ee=z(7879),Te=z(9058),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gt={},oe=oe||{},Fe=Ae||self;function At(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function Ht(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),pn=0;function Zt(s,e,t){return s.call.apply(s.bind,arguments)}function Yt(s,e,t){if(!s)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,c),s.apply(e,f)}}return function(){return s.apply(e,arguments)}}function qe(s,e,t){return(qe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:Yt).apply(null,arguments)}function Xe(s,e){var t=Array.prototype.slice.call(arguments,1);return function(){var c=t.slice();return c.push.apply(c,arguments),s.apply(this,c)}}function ot(s,e){function t(){}t.prototype=e.prototype,s.$=e.prototype,s.prototype=new t,s.prototype.constructor=s,s.ac=function(c,f,v){for(var C=Array(arguments.length-2),N=2;N<arguments.length;N++)C[N-2]=arguments[N];return e.prototype[f].apply(c,C)}}function dt(){this.s=this.s,this.o=this.o}dt.prototype.s=!1,dt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Gt(s){Object.prototype.hasOwnProperty.call(s,Xt)&&s[Xt]||(s[Xt]=++pn)}(this)},dt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ft=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let t=0;t<s.length;t++)if(t in s&&s[t]===e)return t;return-1};function jt(s){const e=s.length;if(0<e){const t=Array(e);for(let c=0;c<e;c++)t[c]=s[c];return t}return[]}function zt(s,e){for(let t=1;t<arguments.length;t++){const c=arguments[t];if(At(c)){const f=s.length||0,v=c.length||0;s.length=f+v;for(let C=0;C<v;C++)s[f+C]=c[C]}else s.push(c)}}function In(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var Tn=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{Fe.addEventListener("test",()=>{},e),Fe.removeEventListener("test",()=>{},e)}catch{}return s}();function xn(s){return/^[\s\xa0]*$/.test(s)}function $n(){var s=Fe.navigator;return s&&(s=s.userAgent)?s:""}function Gn(s){return-1!=$n().indexOf(s)}function ir(s){return ir[" "](s),s}ir[" "]=function(){};var Rr,s,dr=Gn("Opera"),xr=Gn("Trident")||Gn("MSIE"),hr=Gn("Edge"),qr=hr||xr,Gr=Gn("Gecko")&&!(-1!=$n().toLowerCase().indexOf("webkit")&&!Gn("Edge"))&&!(Gn("Trident")||Gn("MSIE"))&&!Gn("Edge"),Sr=-1!=$n().toLowerCase().indexOf("webkit")&&!Gn("Edge");function mi(){var s=Fe.document;return s?s.documentMode:void 0}e:{var an="",Un=(s=$n(),Gr?/rv:([^\);]+)(\)|;)/.exec(s):hr?/Edge\/([\d\.]+)/.exec(s):xr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Sr?/WebKit\/(\S+)/.exec(s):dr?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Un&&(an=Un?Un[1]:""),xr){var Nn=mi();if(null!=Nn&&Nn>parseFloat(an)){Rr=String(Nn);break e}}Rr=an}var Ui=Fe.document&&xr&&(mi()||parseInt(Rr,10))||void 0;function Kr(s,e){if(In.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var t=this.type=s.type,c=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Gr){e:{try{ir(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==t?e=s.fromElement:"mouseout"==t&&(e=s.toElement);this.relatedTarget=e,c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:fi[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Kr.$.h.call(this)}}ot(Kr,In);var fi={2:"touch",3:"pen",4:"mouse"};Kr.prototype.h=function(){Kr.$.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),Fr=0;function Qi(s,e,t,c,f){this.listener=s,this.proxy=null,this.src=e,this.type=t,this.capture=!!c,this.la=f,this.key=++Fr,this.fa=this.ia=!1}function Tr(s){s.fa=!0,s.listener=null,s.proxy=null,s.src=null,s.la=null}function qi(s,e,t){for(const c in s)e.call(t,s[c],c,s)}function is(s){const e={};for(const t in s)e[t]=s[t];return e}const ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ri(s,e){let t,c;for(let f=1;f<arguments.length;f++){for(t in c=arguments[f],c)s[t]=c[t];for(let v=0;v<ci.length;v++)t=ci[v],Object.prototype.hasOwnProperty.call(c,t)&&(s[t]=c[t])}}function li(s){this.src=s,this.g={},this.h=0}function vi(s,e){var t=e.type;if(t in s.g){var v,c=s.g[t],f=ft(c,e);(v=0<=f)&&Array.prototype.splice.call(c,f,1),v&&(Tr(e),0==s.g[t].length&&(delete s.g[t],s.h--))}}function Nr(s,e,t,c){for(var f=0;f<s.length;++f){var v=s[f];if(!v.fa&&v.listener==e&&v.capture==!!t&&v.la==c)return f}return-1}li.prototype.add=function(s,e,t,c,f){var v=s.toString();(s=this.g[v])||(s=this.g[v]=[],this.h++);var C=Nr(s,e,c,f);return-1<C?(e=s[C],t||(e.ia=!1)):((e=new Qi(e,this.src,v,!!c,f)).ia=t,s.push(e)),e};var Vi="closure_lm_"+(1e6*Math.random()|0),Ar={};function ls(s,e,t,c,f){if(c&&c.once)return _e(s,e,t,c,f);if(Array.isArray(e)){for(var v=0;v<e.length;v++)ls(s,e[v],t,c,f);return null}return t=ve(t),s&&s[eo]?s.O(e,t,Ht(c)?!!c.capture:!!c,f):mr(s,e,t,!1,c,f)}function mr(s,e,t,c,f,v){if(!e)throw Error("Invalid event type");var C=Ht(f)?!!f.capture:!!f,N=Qt(s);if(N||(s[Vi]=N=new li(s)),(t=N.add(e,t,c,C,v)).proxy)return t;if(c=function lt(){const e=Et;return function s(t){return e.call(s.src,s.listener,t)}}(),t.proxy=c,c.src=s,c.listener=t,s.addEventListener)Tn||(f=C),void 0===f&&(f=!1),s.addEventListener(e.toString(),c,f);else if(s.attachEvent)s.attachEvent(Pe(e.toString()),c);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(c)}return t}function _e(s,e,t,c,f){if(Array.isArray(e)){for(var v=0;v<e.length;v++)_e(s,e[v],t,c,f);return null}return t=ve(t),s&&s[eo]?s.P(e,t,Ht(c)?!!c.capture:!!c,f):mr(s,e,t,!0,c,f)}function Ce(s,e,t,c,f){if(Array.isArray(e))for(var v=0;v<e.length;v++)Ce(s,e[v],t,c,f);else c=Ht(c)?!!c.capture:!!c,t=ve(t),s&&s[eo]?(s=s.i,(e=String(e).toString())in s.g&&-1<(t=Nr(v=s.g[e],t,c,f))&&(Tr(v[t]),Array.prototype.splice.call(v,t,1),0==v.length&&(delete s.g[e],s.h--))):s&&(s=Qt(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Nr(e,t,c,f)),(t=-1<s?e[s]:null)&&be(t))}function be(s){if("number"!=typeof s&&s&&!s.fa){var e=s.src;if(e&&e[eo])vi(e.i,s);else{var t=s.type,c=s.proxy;e.removeEventListener?e.removeEventListener(t,c,s.capture):e.detachEvent?e.detachEvent(Pe(t),c):e.addListener&&e.removeListener&&e.removeListener(c),(t=Qt(e))?(vi(t,s),0==t.h&&(t.src=null,e[Vi]=null)):Tr(s)}}}function Pe(s){return s in Ar?Ar[s]:Ar[s]="on"+s}function Et(s,e){if(s.fa)s=!0;else{e=new Kr(e,this);var t=s.listener,c=s.la||s.src;s.ia&&be(s),s=t.call(c,e)}return s}function Qt(s){return(s=s[Vi])instanceof li?s:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(s){return"function"==typeof s?s:(s[En]||(s[En]=function(e){return s.handleEvent(e)}),s[En])}function ye(){dt.call(this),this.i=new li(this),this.S=this,this.J=null}function He(s,e){var t,c=s.J;if(c)for(t=[];c;c=c.J)t.push(c);if(s=s.S,c=e.type||e,"string"==typeof e)e=new In(e,s);else if(e instanceof In)e.target=e.target||s;else{var f=e;Ri(e=new In(c,s),f)}if(f=!0,t)for(var v=t.length-1;0<=v;v--){var C=e.g=t[v];f=Tt(C,c,!0,e)&&f}if(f=Tt(C=e.g=s,c,!0,e)&&f,f=Tt(C,c,!1,e)&&f,t)for(v=0;v<t.length;v++)f=Tt(C=e.g=t[v],c,!1,e)&&f}function Tt(s,e,t,c){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,v=0;v<e.length;++v){var C=e[v];if(C&&!C.fa&&C.capture==t){var N=C.listener,X=C.la||C.src;C.ia&&vi(s.i,C),f=!1!==N.call(X,c)&&f}}return f&&!c.defaultPrevented}ot(ye,dt),ye.prototype[eo]=!0,ye.prototype.removeEventListener=function(s,e,t,c){Ce(this,s,e,t,c)},ye.prototype.N=function(){if(ye.$.N.call(this),this.i){var e,s=this.i;for(e in s.g){for(var t=s.g[e],c=0;c<t.length;c++)Tr(t[c]);delete s.g[e],s.h--}}this.J=null},ye.prototype.O=function(s,e,t,c){return this.i.add(String(s),e,!1,t,c)},ye.prototype.P=function(s,e,t,c){return this.i.add(String(s),e,!0,t,c)};var ln=Fe.JSON.stringify;function Hr(){var s=Er;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Ut=new class Xn{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Pt,s=>s.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nn(s){var e=1;s=s.split(":");const t=[];for(;0<e&&s.length;)t.push(s.shift()),e--;return s.length&&t.push(s.join(":")),t}function On(s){Fe.setTimeout(()=>{throw s},0)}let Jn,fr=!1,Er=new class ui{constructor(){this.h=this.g=null}add(e,t){const c=Ut.get();c.set(e,t),this.h?this.h.next=c:this.g=c,this.h=c}},ri=()=>{const s=Fe.Promise.resolve(void 0);Jn=()=>{s.then(pi)}};var pi=()=>{for(var s;s=Hr();){try{s.h.call(s.g)}catch(t){On(t)}var e=Ut;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}fr=!1};function di(s,e){ye.call(this),this.h=s||1,this.g=e||Fe,this.j=qe(this.qb,this),this.l=Date.now()}function gs(s){s.ga=!1,s.T&&(s.g.clearTimeout(s.T),s.T=null)}function qs(s,e,t){if("function"==typeof s)t&&(s=qe(s,t));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=qe(s.handleEvent,s)}return 2147483647<Number(e)?-1:Fe.setTimeout(s,e||0)}function Lo(s){s.g=qs(()=>{s.g=null,s.i&&(s.i=!1,Lo(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}ot(di,ye),(Y=di.prototype).ga=!1,Y.T=null,Y.qb=function(){if(this.ga){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-s):(this.T&&(this.g.clearTimeout(this.T),this.T=null),He(this,"tick"),this.ga&&(gs(this),this.start()))}},Y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Y.N=function(){di.$.N.call(this),gs(this),delete this.g};class si extends dt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(s){dt.call(this),this.h=s,this.g={}}ot($o,dt);var cs=[];function Go(s,e,t,c){Array.isArray(t)||(t&&(cs[0]=t.toString()),t=cs);for(var f=0;f<t.length;f++){var v=ls(e,t[f],c||s.handleEvent,!1,s.h||s);if(!v)break;s.g[v.key]=v}}function ms(s){qi(s.g,function(e,t){this.g.hasOwnProperty(t)&&be(e)},s),s.g={}}function _i(){this.g=!0}function Ks(s,e,t,c){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Da(s,e){if(!s.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(s=0;s<t.length;s++)if(Array.isArray(t[s])){var c=t[s];if(!(2>c.length)){var f=c[1];if(Array.isArray(f)&&!(1>f.length)){var v=f[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var C=1;C<f.length;C++)f[C]=""}}}return ln(t)}catch{return e}}(s,t)+(c?" "+c:"")})}$o.prototype.N=function(){$o.$.N.call(this),ms(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_i.prototype.Ea=function(){this.g=!1},_i.prototype.info=function(){};var no={},bs=null;function Ia(){return bs=bs||new ye}function Bu(s){In.call(this,no.Ta,s)}function Rs(s){const e=Ia();He(e,new Bu(e))}function xa(s,e){In.call(this,no.STAT_EVENT,s),this.stat=e}function Xi(s){const e=Ia();He(e,new xa(e,s))}function du(s,e){In.call(this,no.Ua,s),this.size=e}function As(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return Fe.setTimeout(function(){s()},e)}no.Ta="serverreachability",ot(Bu,In),no.STAT_EVENT="statevent",ot(xa,In),no.Ua="timingevent",ot(du,In);var Ir={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ds={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yi(){}function ss(){}yi.prototype.h=null;var Ot,Zs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function bt(){In.call(this,"d")}function vt(){In.call(this,"c")}function xt(){}function un(s,e,t,c){this.l=s,this.j=e,this.m=t,this.W=c||1,this.U=new $o(this),this.P=Dn,this.V=new di(s=qr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jt}function Jt(){this.i=null,this.g="",this.h=!1}ot(bt,In),ot(vt,In),ot(xt,yi),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Ot=new xt;var Dn=45e3,Kn={},Mr={};function Ys(s,e,t){s.L=1,s.v=da(Ti(e)),s.s=t,s.S=!0,vs(s,null)}function vs(s,e){s.G=Date.now(),Us(s),s.A=Ti(s.v);var t=s.A,c=s.W;Array.isArray(c)||(c=[String(c)]),Ss(t.i,"t",c),s.C=0,t=s.l.J,s.h=new Jt,s.g=Su(s.l,t?e:null,!s.s),0<s.O&&(s.M=new si(qe(s.Pa,s,s.g),s.O)),Go(s.U,s.g,"readystatechange",s.nb),e=s.I?is(s.I):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ha(s.A,s.u,s.s,e)):(s.u="GET",s.g.ha(s.A,s.u,null,e)),Rs(),function hi(s,e,t,c,f,v){s.info(function(){if(s.g)if(v)for(var C="",N=v.split("&"),X=0;X<N.length;X++){var he=N[X].split("=");if(1<he.length){var ke=he[0];he=he[1];var ct=ke.split("_");C=2<=ct.length&&"type"==ct[1]?C+(ke+"=")+he+"&":C+(ke+"=redacted&")}}else C=null;else C=v;return"XMLHTTP REQ ("+c+") [attempt "+f+"]: "+e+"\n"+t+"\n"+C})}(s.j,s.u,s.A,s.m,s.W,s.s)}function hs(s){return!!s.g&&"GET"==s.u&&2!=s.L&&s.l.Ha}function Fi(s,e,t){let f,c=!0;for(;!s.J&&s.C<t.length;){if(f=ys(s,t),f==Mr){4==e&&(s.o=4,Xi(14),c=!1),Ks(s.j,s.m,null,"[Incomplete Response]");break}if(f==Kn){s.o=4,Xi(15),Ks(s.j,s.m,t,"[Invalid Chunk]"),c=!1;break}Ks(s.j,s.m,f,null),Hi(s,f)}hs(s)&&f!=Mr&&f!=Kn&&(s.h.g="",s.C=0),4!=e||0!=t.length||s.h.h||(s.o=1,Xi(16),c=!1),s.i=s.i&&c,c?0<t.length&&!s.ba&&(s.ba=!0,(e=s.l).g==s&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ga(e),e.M=!0,Xi(11))):(Ks(s.j,s.m,t,"[Invalid Chunked Response]"),Es(s),eu(s))}function ys(s,e){var t=s.C,c=e.indexOf("\n",t);return-1==c?Mr:(t=Number(e.substring(t,c)),isNaN(t)?Kn:(c+=1)+t>e.length?Mr:(e=e.slice(c,c+t),s.C=c+t,e))}function Us(s){s.Y=Date.now()+s.P,kr(s,s.P)}function kr(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=As(qe(s.lb,s),e)}function jr(s){s.B&&(Fe.clearTimeout(s.B),s.B=null)}function eu(s){0==s.l.H||s.J||ll(s.l,s)}function Es(s){jr(s);var e=s.M;e&&"function"==typeof e.sa&&e.sa(),s.M=null,gs(s.V),ms(s.U),s.g&&(e=s.g,s.g=null,e.abort(),e.sa())}function Hi(s,e){try{var t=s.l;if(0!=t.H&&(t.g==s||ul(t.i,s)))if(!s.K&&ul(t.i,s)&&3==t.H){try{var c=t.Ja.g.parse(e)}catch{c=null}if(Array.isArray(c)&&3==c.length){var f=c;if(0==f[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<s.G))break e;Eu(t),Yr(t)}Ql(t),Xi(18)}}else t.Fa=f[1],0<t.Fa-t.V&&37500>f[2]&&t.G&&0==t.A&&!t.v&&(t.v=As(qe(t.ib,t),6e3));if(1>=Ka(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else io(t,11)}else if((s.K||t.g==s)&&Eu(t),!xn(e))for(f=t.Ja.g.parse(e),e=0;e<f.length;e++){let he=f[e];if(t.V=he[0],he=he[1],2==t.H)if("c"==he[0]){t.K=he[1],t.pa=he[2];const ke=he[3];null!=ke&&(t.ra=ke,t.l.info("VER="+t.ra));const ct=he[4];null!=ct&&(t.Ga=ct,t.l.info("SVER="+t.Ga));const Bt=he[5];null!=Bt&&"number"==typeof Bt&&0<Bt&&(t.L=c=1.5*Bt,t.l.info("backChannelRequestTimeoutMs_="+c)),c=t;const on=s.g;if(on){const Mn=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var v=c.i;v.g||-1==Mn.indexOf("spdy")&&-1==Mn.indexOf("quic")&&-1==Mn.indexOf("h2")||(v.j=v.l,v.g=new Set,v.h&&(Uo(v,v.h),v.h=null))}if(c.F){const rr=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(c.Da=rr,bi(c.I,c.F,rr))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-s.G,t.l.info("Handshake RTT: "+t.S+"ms"));var C=s;if((c=t).wa=Cu(c,c.J?c.pa:null,c.Y),C.K){ka(c.i,C);var N=C,X=c.L;X&&N.setTimeout(X),N.B&&(jr(N),Us(N)),c.g=C}else Hu(c);0<t.j.length&&vo(t)}else"stop"!=he[0]&&"close"!=he[0]||io(t,7);else 3==t.H&&("stop"==he[0]||"close"==he[0]?"stop"==he[0]?io(t,7):Gi(t):"noop"!=he[0]&&t.h&&t.h.Aa(he),t.A=0)}Rs()}catch{}}function go(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(At(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var t=function ro(s){if(s.ta&&"function"==typeof s.ta)return s.ta();if(!s.Z||"function"!=typeof s.Z){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(At(s)||"string"==typeof s){var e=[];s=s.length;for(var t=0;t<s;t++)e.push(t);return e}e=[],t=0;for(const c in s)e[t++]=c;return e}}}(s),c=function zo(s){if(s.Z&&"function"==typeof s.Z)return s.Z();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(At(s)){for(var e=[],t=s.length,c=0;c<t;c++)e.push(s[c]);return e}for(c in e=[],t=0,s)e[t++]=s[c];return e}(s),f=c.length,v=0;v<f;v++)e.call(void 0,c[v],t&&t[v],s)}(Y=un.prototype).setTimeout=function(s){this.P=s},Y.nb=function(s){s=s.target;const e=this.M;e&&3==zr(s)?e.l():this.Pa(s)},Y.Pa=function(s){try{if(s==this.g)e:{const ke=zr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ke)&&(3!=ke||qr||this.g&&(this.h.h||this.g.ja()||Mi(this.g)))){this.J||4!=ke||7==e||Rs(),jr(this);var t=this.g.da();this.ca=t;t:if(hs(this)){var c=Mi(this.g);s="";var f=c.length,v=4==zr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),eu(this);var C="";break t}this.h.i=new Fe.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,s+=this.h.i.decode(c[e],{stream:v&&e==f-1});c.splice(0,f),this.h.g+=s,this.C=0,C=this.h.g}else C=this.g.ja();if(this.i=200==t,function to(s,e,t,c,f,v,C){s.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+f+"]: "+e+"\n"+t+"\n"+v+" "+C})}(this.j,this.u,this.A,this.m,this.W,ke,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xn(N)){var he=N;break t}}he=null}if(!(t=he)){this.i=!1,this.o=3,Xi(12),Es(this),eu(this);break e}Ks(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,t)}this.S?(Fi(this,ke,C),qr&&this.i&&3==ke&&(Go(this.U,this.V,"tick",this.mb),this.V.start())):(Ks(this.j,this.m,C,null),Hi(this,C)),4==ke&&Es(this),this.i&&!this.J&&(4==ke?ll(this.l,this):(this.i=!1,Us(this)))}else(function Ln(s){const e={};s=(s.g&&2<=zr(s)&&s.g.getAllResponseHeaders()||"").split("\r\n");for(let c=0;c<s.length;c++){if(xn(s[c]))continue;var t=nn(s[c]);const f=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const v=e[f]||[];e[f]=v,v.push(t)}!function br(s,e){for(const t in s)e.call(void 0,s[t],t,s)}(e,function(c){return c.join(", ")})})(this.g),400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),Es(this),eu(this)}}}catch{}},Y.mb=function(){if(this.g){var s=zr(this.g),e=this.g.ja();this.C<e.length&&(jr(this),Fi(this,s,e),this.i&&4!=s&&Us(this))}},Y.cancel=function(){this.J=!0,Es(this)},Y.lb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function wa(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Rs(),Xi(17)),Es(this),this.o=2,eu(this)):kr(this,this.Y-s)};var ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vs(s){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof Vs){this.h=s.h,Aa(this,s.j),this.s=s.s,this.g=s.g,jo(this,s.m),this.l=s.l;var e=s.i,t=new Ei;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$r(this,t),this.o=s.o}else s&&(e=String(s).match(ca))?(this.h=!1,Aa(this,e[1]||"",!0),this.s=ji(e[2]||""),this.g=ji(e[3]||"",!0),jo(this,e[4]),this.l=ji(e[5]||"",!0),$r(this,e[6]||"",!0),this.o=ji(e[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}function Ti(s){return new Vs(s)}function Aa(s,e,t){s.j=t?ji(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function jo(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function $r(s,e,t){e instanceof Ei?(s.i=e,function Ai(s,e){e&&!s.j&&(mo(s),s.i=null,s.g.forEach(function(t,c){var f=c.toLowerCase();c!=f&&(Ji(this,c),Ss(this,f,t))},s)),s.j=e}(s.i,s.h)):(t||(e=fs(e,Yl)),s.i=new Ei(e,s.h))}function bi(s,e,t){s.i.set(e,t)}function da(s){return bi(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ji(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function fs(s,e,t){return"string"==typeof s?(s=encodeURI(s).replace(e,Hs),t&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Hs(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Vs.prototype.toString=function(){var s=[],e=this.j;e&&s.push(fs(e,ha,!0),":");var t=this.g;return(t||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(fs(e,ha,!0),"@"),s.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&s.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&s.push("/"),s.push(fs(t,"/"==t.charAt(0)?Cs:tu,!0))),(t=this.i.toString())&&s.push("?",t),(t=this.o)&&s.push("#",fs(t,Lr)),s.join("")};var ha=/[#\/\?@]/g,tu=/[#\?:]/g,Cs=/[#\?]/g,Yl=/[#\?@]/g,Lr=/#/g;function Ei(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function mo(s){s.g||(s.g=new Map,s.h=0,s.i&&function Uu(s,e){if(s){s=s.split("&");for(var t=0;t<s.length;t++){var c=s[t].indexOf("="),f=null;if(0<=c){var v=s[t].substring(0,c);f=s[t].substring(c+1)}else v=s[t];e(v,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(s.i,function(e,t){s.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ji(s,e){mo(s),e=xi(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Bo(s,e){return mo(s),e=xi(s,e),s.g.has(e)}function Ss(s,e,t){Ji(s,e),0<t.length&&(s.i=null,s.g.set(xi(s,e),jt(t)),s.h+=t.length)}function xi(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Vu(s){this.l=s||fu,s=Fe.PerformanceNavigationTiming?0<(s=Fe.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(Fe.g&&Fe.g.Ka&&Fe.g.Ka()&&Fe.g.Ka().ec),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Y=Ei.prototype).add=function(s,e){mo(this),this.i=null,s=xi(this,s);var t=this.g.get(s);return t||this.g.set(s,t=[]),t.push(e),this.h+=1,this},Y.forEach=function(s,e){mo(this),this.g.forEach(function(t,c){t.forEach(function(f){s.call(e,f,c,this)},this)},this)},Y.ta=function(){mo(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let c=0;c<e.length;c++){const f=s[c];for(let v=0;v<f.length;v++)t.push(e[c])}return t},Y.Z=function(s){mo(this);let e=[];if("string"==typeof s)Bo(this,s)&&(e=e.concat(this.g.get(xi(this,s))));else{s=Array.from(this.g.values());for(let t=0;t<s.length;t++)e=e.concat(s[t])}return e},Y.set=function(s,e){return mo(this),this.i=null,Bo(this,s=xi(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Y.get=function(s,e){return s&&0<(s=this.Z(s)).length?String(s[0]):e},Y.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var c=e[t];const v=encodeURIComponent(String(c)),C=this.Z(c);for(c=0;c<C.length;c++){var f=v;""!==C[c]&&(f+="="+encodeURIComponent(String(C[c]))),s.push(f)}}return this.i=s.join("&")};var fu=10;function Ma(s){return!!s.h||!!s.g&&s.g.size>=s.j}function Ka(s){return s.h?1:s.g?s.g.size:0}function ul(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Uo(s,e){s.g?s.g.add(e):s.h=e}function ka(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Pa(s){if(null!=s.h)return s.i.concat(s.h.F);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const t of s.g.values())e=e.concat(t.F);return e}return jt(s.i)}Vu.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}};var nu=class{stringify(s){return Fe.JSON.stringify(s,void 0)}parse(s){return Fe.JSON.parse(s,void 0)}};function pu(){this.g=new nu}function lo(s,e,t){const c=t||"";try{go(s,function(f,v){let C=f;Ht(f)&&(C=ln(f)),e.push(c+v+"="+encodeURIComponent(C))})}catch(f){throw e.push(c+"type="+encodeURIComponent("_badmap")),f}}function Za(s,e,t,c,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(c)}catch{}}function ie(s){this.l=s.fc||null,this.j=s.ob||!1}function Q(s,e){ye.call(this),this.F=s,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ot(ie,yi),ie.prototype.g=function(){return new Q(this.l,this.j)},ie.prototype.i=function(s){return function(){return s}}({}),ot(Q,ye);var q=0;function Oe(s){s.j.read().then(s.Xa.bind(s)).catch(s.ka.bind(s))}function qt(s){s.readyState=4,s.l=null,s.j=null,s.A=null,J(s)}function J(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Y=Q.prototype).open=function(s,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,J(this)},Y.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.F||Fe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=q},Y.$a=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,J(this)),this.g&&(this.readyState=3,J(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Fe.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oe(this)}else s.text().then(this.Za.bind(this),this.ka.bind(this))},Y.Xa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?qt(this):J(this),3==this.readyState&&Oe(this)}},Y.Za=function(s){this.g&&(this.response=this.responseText=s,qt(this))},Y.Ya=function(s){this.g&&(this.response=s,qt(this))},Y.ka=function(){this.g&&qt(this)},Y.setRequestHeader=function(s,e){this.v.append(s,e)},Y.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Y.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var t=e.next();!t.done;)s.push((t=t.value)[0]+": "+t[1]),t=e.next();return s.join("\r\n")},Object.defineProperty(Q.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ne=Fe.JSON.parse;function Me(s){ye.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tt,this.L=this.M=!1}ot(Me,ye);var tt="",mt=/^https?$/i,Vt=["POST","PUT"];function Yn(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Wn(s),Zr(s)}function Wn(s){s.F||(s.F=!0,He(s,"complete"),He(s,"error"))}function pr(s){if(s.h&&typeof oe<"u"&&(!s.C[1]||4!=zr(s)||2!=s.da()))if(s.v&&4==zr(s))qs(s.La,0,s);else if(He(s,"readystatechange"),4==zr(s)){s.h=!1;try{const C=s.da();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var c;if(c=0===C){var f=String(s.I).match(ca)[1]||null;!f&&Fe.self&&Fe.self.location&&(f=Fe.self.location.protocol.slice(0,-1)),c=!mt.test(f?f.toLowerCase():"")}t=c}if(t)He(s,"complete"),He(s,"success");else{s.m=6;try{var v=2<zr(s)?s.g.statusText:""}catch{v=""}s.j=v+" ["+s.da()+"]",Wn(s)}}finally{Zr(s)}}}function Zr(s,e){if(s.g){ii(s);const t=s.g,c=s.C[0]?()=>{}:null;s.g=null,s.C=null,e||He(s,"ready");try{t.onreadystatechange=c}catch{}}}function ii(s){s.g&&s.L&&(s.g.ontimeout=null),s.A&&(Fe.clearTimeout(s.A),s.A=null)}function zr(s){return s.g?s.g.readyState:0}function Mi(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.K){case tt:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(s){let e="";return qi(s,function(t,c){e+=c,e+=":",e+=t,e+="\r\n"}),e}function _s(s,e,t){e:{for(c in t){var c=!1;break e}c=!0}c||(t=$i(t),"string"==typeof s?null!=t&&encodeURIComponent(String(t)):bi(s,e,t))}function $s(s,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[s]||e}function Gs(s){this.Ga=0,this.j=[],this.l=new _i,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$s("failFast",!1,s),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$s("baseRetryDelayMs",5e3,s),this.hb=$s("retryDelaySeedMs",1e4,s),this.eb=$s("forwardChannelMaxRetries",2,s),this.xa=$s("forwardChannelRequestTimeoutMs",2e4,s),this.va=s&&s.xmlHttpFactory||void 0,this.Ha=s&&s.dc||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.i=new Vu(s&&s.concurrentRequestLimit),this.Ja=new pu,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=s&&s.bc||!1,s&&s.Ea&&this.l.Ea(),s&&s.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&s&&s.detectBufferingProxy||!1,this.qa=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.qa=s.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Gi(s){if(zs(s),3==s.H){var e=s.W++,t=Ti(s.I);if(bi(t,"SID",s.K),bi(t,"RID",e),bi(t,"TYPE","terminate"),pa(s,t),(e=new un(s,s.l,e)).L=2,e.v=da(Ti(t)),t=!1,Fe.navigator&&Fe.navigator.sendBeacon)try{t=Fe.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Fe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Su(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Us(e)}Gu(s)}function Yr(s){s.g&&(ga(s),s.g.cancel(),s.g=null)}function zs(s){Yr(s),s.u&&(Fe.clearTimeout(s.u),s.u=null),Eu(s),s.i.cancel(),s.m&&("number"==typeof s.m&&Fe.clearTimeout(s.m),s.m=null)}function vo(s){if(!Ma(s.i)&&!s.m){s.m=!0;var e=s.Na;Jn||ri(),fr||(Jn(),fr=!0),Er.add(e,s),s.C=0}}function es(s,e){var t;t=e?e.m:s.W++;const c=Ti(s.I);bi(c,"SID",s.K),bi(c,"RID",t),bi(c,"AID",s.V),pa(s,c),s.o&&s.s&&_s(c,s.o,s.s),t=new un(s,s.l,t,s.C+1),null===s.o&&(t.I=s.s),e&&(s.j=e.F.concat(s.j)),e=yo(s,t,1e3),t.setTimeout(Math.round(.5*s.xa)+Math.round(.5*s.xa*Math.random())),Uo(s.i,t),Ys(t,c,e)}function pa(s,e){s.na&&qi(s.na,function(t,c){bi(e,c,t)}),s.h&&go({},function(t,c){bi(e,c,t)})}function yo(s,e,t){t=Math.min(s.j.length,t);var c=s.h?qe(s.h.Va,s.h,s):null;e:{var f=s.j;let v=-1;for(;;){const C=["count="+t];-1==v?0<t?(v=f[0].g,C.push("ofs="+v)):v=0:C.push("ofs="+v);let N=!0;for(let X=0;X<t;X++){let he=f[X].g;const ke=f[X].map;if(he-=v,0>he)v=Math.max(0,f[X].g-100),N=!1;else try{lo(ke,C,"req"+he+"_")}catch{c&&c(ke)}}if(N){c=C.join("&");break e}}}return s=s.j.splice(0,t),e.F=s,c}function Hu(s){if(!s.g&&!s.u){s.ba=1;var e=s.Ma;Jn||ri(),fr||(Jn(),fr=!0),Er.add(e,s),s.A=0}}function Ql(s){return!(s.g||s.u||3<=s.A||(s.ba++,s.u=As(qe(s.Ma,s),Oa(s,s.A)),s.A++,0))}function ga(s){null!=s.B&&(Fe.clearTimeout(s.B),s.B=null)}function $u(s){s.g=new un(s,s.l,"rpc",s.ba),null===s.o&&(s.g.I=s.s),s.g.O=0;var e=Ti(s.wa);bi(e,"RID","rpc"),bi(e,"SID",s.K),bi(e,"AID",s.V),bi(e,"CI",s.G?"0":"1"),!s.G&&s.qa&&bi(e,"TO",s.qa),bi(e,"TYPE","xmlhttp"),pa(s,e),s.o&&s.s&&_s(e,s.o,s.s),s.L&&s.g.setTimeout(s.L);var t=s.g;s=s.pa,t.L=1,t.v=da(Ti(e)),t.s=null,t.S=!0,vs(t,s)}function Eu(s){null!=s.v&&(Fe.clearTimeout(s.v),s.v=null)}function ll(s,e){var t=null;if(s.g==e){Eu(s),ga(s),s.g=null;var c=2}else{if(!ul(s.i,e))return;t=e.F,ka(s.i,e),c=1}if(0!=s.H)if(e.i)if(1==c){t=e.s?e.s.length:0,e=Date.now()-e.G;var f=s.C;He(c=Ia(),new du(c,t)),vo(s)}else Hu(s);else if(3==(f=e.o)||0==f&&0<e.ca||!(1==c&&function Wo(s,e){return!(Ka(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.j=e.F.concat(s.j),0):1==s.H||2==s.H||s.C>=(s.cb?0:s.eb)||(s.m=As(qe(s.Na,s,e),Oa(s,s.C)),s.C++,0)))}(s,e)||2==c&&Ql(s)))switch(t&&0<t.length&&(e=s.i,e.i=e.i.concat(t)),f){case 1:io(s,5);break;case 4:io(s,10);break;case 3:io(s,6);break;default:io(s,2)}}function Oa(s,e){let t=s.ab+Math.floor(Math.random()*s.hb);return s.isActive()||(t*=2),t*e}function io(s,e){if(s.l.info("Error code "+e),2==e){var t=null;s.h&&(t=null);var c=qe(s.pb,s);t||(t=new Vs("//www.google.com/images/cleardot.gif"),Fe.location&&"http"==Fe.location.protocol||Aa(t,"https"),da(t)),function fa(s,e){const t=new _i;if(Fe.Image){const c=new Image;c.onload=Xe(Za,t,c,"TestLoadImage: loaded",!0,e),c.onerror=Xe(Za,t,c,"TestLoadImage: error",!1,e),c.onabort=Xe(Za,t,c,"TestLoadImage: abort",!1,e),c.ontimeout=Xe(Za,t,c,"TestLoadImage: timeout",!1,e),Fe.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=s}else e(!1)}(t.toString(),c)}else Xi(2);s.H=0,s.h&&s.h.za(e),Gu(s),zs(s)}function Gu(s){if(s.H=0,s.ma=[],s.h){const e=Pa(s.i);(0!=e.length||0!=s.j.length)&&(zt(s.ma,e),zt(s.ma,s.j),s.i.i.length=0,jt(s.j),s.j.length=0),s.h.ya()}}function Cu(s,e,t){var c=t instanceof Vs?Ti(t):new Vs(t);if(""!=c.g)e&&(c.g=e+"."+c.g),jo(c,c.m);else{var f=Fe.location;c=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var v=new Vs(null);c&&Aa(v,c),e&&(v.g=e),f&&jo(v,f),t&&(v.l=t),c=v}return e=s.Da,(t=s.F)&&e&&bi(c,t,e),bi(c,"VER",s.ra),pa(s,c),c}function Su(s,e,t){if(e&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Me(t&&s.Ha&&!s.va?new ie({ob:!0}):s.va)).Oa(s.J),e}function Xl(){}function ma(){if(xr&&!(10<=Number(Ui)))throw Error("Environmental error: no available transport.")}function _o(s,e){ye.call(this),this.g=new Gs(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(s?s["X-WebChannel-Client-Profile"]=e.Ca:s={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=s,(s=e&&e.cc)&&!xn(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xn(e)&&(this.g.F=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new ea(this)}function cl(s){bt.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var e=s.__sm__;if(e){e:{for(const t in e){s=t;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function ws(){vt.call(this),this.status=1}function ea(s){this.g=s}function Qr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ta(s,e,t){t||(t=0);var c=Array(16);if("string"==typeof e)for(var f=0;16>f;++f)c[f]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(f=0;16>f;++f)c[f]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var v=s.g[3],C=(e=s.g[0])+(v^(t=s.g[1])&((f=s.g[2])^v))+c[0]+3614090360&4294967295;C=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=(t=(f=(v=(e=t+(C<<7&4294967295|C>>>25))+((C=v+(f^e&(t^f))+c[1]+3905402710&4294967295)<<12&4294967295|C>>>20))+((C=f+(t^v&(e^t))+c[2]+606105819&4294967295)<<17&4294967295|C>>>15))+((C=t+(e^f&(v^e))+c[3]+3250441966&4294967295)<<22&4294967295|C>>>10))+((C=e+(v^t&(f^v))+c[4]+4118548399&4294967295)<<7&4294967295|C>>>25))+((C=v+(f^e&(t^f))+c[5]+1200080426&4294967295)<<12&4294967295|C>>>20))+((C=f+(t^v&(e^t))+c[6]+2821735955&4294967295)<<17&4294967295|C>>>15))+((C=t+(e^f&(v^e))+c[7]+4249261313&4294967295)<<22&4294967295|C>>>10))+((C=e+(v^t&(f^v))+c[8]+1770035416&4294967295)<<7&4294967295|C>>>25))+((C=v+(f^e&(t^f))+c[9]+2336552879&4294967295)<<12&4294967295|C>>>20))+((C=f+(t^v&(e^t))+c[10]+4294925233&4294967295)<<17&4294967295|C>>>15))+((C=t+(e^f&(v^e))+c[11]+2304563134&4294967295)<<22&4294967295|C>>>10))+((C=e+(v^t&(f^v))+c[12]+1804603682&4294967295)<<7&4294967295|C>>>25))+((C=v+(f^e&(t^f))+c[13]+4254626195&4294967295)<<12&4294967295|C>>>20))+((C=f+(t^v&(e^t))+c[14]+2792965006&4294967295)<<17&4294967295|C>>>15))+((C=t+(e^f&(v^e))+c[15]+1236535329&4294967295)<<22&4294967295|C>>>10))+((C=e+(f^v&(t^f))+c[1]+4129170786&4294967295)<<5&4294967295|C>>>27))+((C=v+(t^f&(e^t))+c[6]+3225465664&4294967295)<<9&4294967295|C>>>23))+((C=f+(e^t&(v^e))+c[11]+643717713&4294967295)<<14&4294967295|C>>>18))+((C=t+(v^e&(f^v))+c[0]+3921069994&4294967295)<<20&4294967295|C>>>12))+((C=e+(f^v&(t^f))+c[5]+3593408605&4294967295)<<5&4294967295|C>>>27))+((C=v+(t^f&(e^t))+c[10]+38016083&4294967295)<<9&4294967295|C>>>23))+((C=f+(e^t&(v^e))+c[15]+3634488961&4294967295)<<14&4294967295|C>>>18))+((C=t+(v^e&(f^v))+c[4]+3889429448&4294967295)<<20&4294967295|C>>>12))+((C=e+(f^v&(t^f))+c[9]+568446438&4294967295)<<5&4294967295|C>>>27))+((C=v+(t^f&(e^t))+c[14]+3275163606&4294967295)<<9&4294967295|C>>>23))+((C=f+(e^t&(v^e))+c[3]+4107603335&4294967295)<<14&4294967295|C>>>18))+((C=t+(v^e&(f^v))+c[8]+1163531501&4294967295)<<20&4294967295|C>>>12))+((C=e+(f^v&(t^f))+c[13]+2850285829&4294967295)<<5&4294967295|C>>>27))+((C=v+(t^f&(e^t))+c[2]+4243563512&4294967295)<<9&4294967295|C>>>23))+((C=f+(e^t&(v^e))+c[7]+1735328473&4294967295)<<14&4294967295|C>>>18))+((C=t+(v^e&(f^v))+c[12]+2368359562&4294967295)<<20&4294967295|C>>>12))+((C=e+(t^f^v)+c[5]+4294588738&4294967295)<<4&4294967295|C>>>28))+((C=v+(e^t^f)+c[8]+2272392833&4294967295)<<11&4294967295|C>>>21))+((C=f+(v^e^t)+c[11]+1839030562&4294967295)<<16&4294967295|C>>>16))+((C=t+(f^v^e)+c[14]+4259657740&4294967295)<<23&4294967295|C>>>9))+((C=e+(t^f^v)+c[1]+2763975236&4294967295)<<4&4294967295|C>>>28))+((C=v+(e^t^f)+c[4]+1272893353&4294967295)<<11&4294967295|C>>>21))+((C=f+(v^e^t)+c[7]+4139469664&4294967295)<<16&4294967295|C>>>16))+((C=t+(f^v^e)+c[10]+3200236656&4294967295)<<23&4294967295|C>>>9))+((C=e+(t^f^v)+c[13]+681279174&4294967295)<<4&4294967295|C>>>28))+((C=v+(e^t^f)+c[0]+3936430074&4294967295)<<11&4294967295|C>>>21))+((C=f+(v^e^t)+c[3]+3572445317&4294967295)<<16&4294967295|C>>>16))+((C=t+(f^v^e)+c[6]+76029189&4294967295)<<23&4294967295|C>>>9))+((C=e+(t^f^v)+c[9]+3654602809&4294967295)<<4&4294967295|C>>>28))+((C=v+(e^t^f)+c[12]+3873151461&4294967295)<<11&4294967295|C>>>21))+((C=f+(v^e^t)+c[15]+530742520&4294967295)<<16&4294967295|C>>>16))+((C=t+(f^v^e)+c[2]+3299628645&4294967295)<<23&4294967295|C>>>9))+((C=e+(f^(t|~v))+c[0]+4096336452&4294967295)<<6&4294967295|C>>>26))+((C=v+(t^(e|~f))+c[7]+1126891415&4294967295)<<10&4294967295|C>>>22))+((C=f+(e^(v|~t))+c[14]+2878612391&4294967295)<<15&4294967295|C>>>17))+((C=t+(v^(f|~e))+c[5]+4237533241&4294967295)<<21&4294967295|C>>>11))+((C=e+(f^(t|~v))+c[12]+1700485571&4294967295)<<6&4294967295|C>>>26))+((C=v+(t^(e|~f))+c[3]+2399980690&4294967295)<<10&4294967295|C>>>22))+((C=f+(e^(v|~t))+c[10]+4293915773&4294967295)<<15&4294967295|C>>>17))+((C=t+(v^(f|~e))+c[1]+2240044497&4294967295)<<21&4294967295|C>>>11))+((C=e+(f^(t|~v))+c[8]+1873313359&4294967295)<<6&4294967295|C>>>26))+((C=v+(t^(e|~f))+c[15]+4264355552&4294967295)<<10&4294967295|C>>>22))+((C=f+(e^(v|~t))+c[6]+2734768916&4294967295)<<15&4294967295|C>>>17))+((C=t+(v^(f|~e))+c[13]+1309151649&4294967295)<<21&4294967295|C>>>11))+((v=(e=t+((C=e+(f^(t|~v))+c[4]+4149444226&4294967295)<<6&4294967295|C>>>26))+((C=v+(t^(e|~f))+c[11]+3174756917&4294967295)<<10&4294967295|C>>>22))^((f=v+((C=f+(e^(v|~t))+c[2]+718787259&4294967295)<<15&4294967295|C>>>17))|~e))+c[9]+3951481745&4294967295,s.g[0]=s.g[0]+e&4294967295,s.g[1]=s.g[1]+(f+(C<<21&4294967295|C>>>11))&4294967295,s.g[2]=s.g[2]+f&4294967295,s.g[3]=s.g[3]+v&4294967295}function L(s,e){this.h=e;for(var t=[],c=!0,f=s.length-1;0<=f;f--){var v=0|s[f];c&&v==e||(t[f]=v,c=!1)}this.g=t}(Y=Me.prototype).Oa=function(s){this.M=s},Y.ha=function(s,e,t,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+s);e=e?e.toUpperCase():"GET",this.I=s,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ot.g(),this.C=function Fo(s){return s.h||(s.h=s.i())}(this.u?this.u:Ot),this.g.onreadystatechange=qe(this.La,this);try{this.G=!0,this.g.open(e,String(s),!0),this.G=!1}catch(v){return void Yn(this,v)}if(s=t||"",t=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var f in c)t.set(f,c[f]);else{if("function"!=typeof c.keys||"function"!=typeof c.get)throw Error("Unknown input type for opt_headers: "+String(c));for(const v of c.keys())t.set(v,c.get(v))}c=Array.from(t.keys()).find(v=>"content-type"==v.toLowerCase()),f=Fe.FormData&&s instanceof Fe.FormData,!(0<=ft(Vt,e))||c||f||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[v,C]of t)this.g.setRequestHeader(v,C);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ii(this),0<this.B&&((this.L=function fn(s){return xr&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qe(this.ua,this)):this.A=qs(this.ua,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(v){Yn(this,v)}},Y.ua=function(){typeof oe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,He(this,"timeout"),this.abort(8))},Y.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,He(this,"complete"),He(this,"abort"),Zr(this))},Y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zr(this,!0)),Me.$.N.call(this)},Y.La=function(){this.s||(this.G||this.v||this.l?pr(this):this.kb())},Y.kb=function(){pr(this)},Y.isActive=function(){return!!this.g},Y.da=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},Y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Y.Wa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ne(e)}},Y.Ia=function(){return this.m},Y.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Y=Gs.prototype).ra=8,Y.H=1,Y.Na=function(s){if(this.m)if(this.m=null,1==this.H){if(!s){this.W=Math.floor(1e5*Math.random()),s=this.W++;const f=new un(this,this.l,s);let v=this.s;if(this.U&&(v?(v=is(v),Ri(v,this.U)):v=this.U),null!==this.o||this.O||(f.I=v,v=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var c=this.j[t];if(void 0===(c="__data__"in c.map&&"string"==typeof(c=c.map.__data__)?c.length:void 0))break;if(4096<(e+=c)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yo(this,f,e),bi(t=Ti(this.I),"RID",s),bi(t,"CVER",22),this.F&&bi(t,"X-HTTP-Session-Id",this.F),pa(this,t),v&&(this.O?e="headers="+encodeURIComponent(String($i(v)))+"&"+e:this.o&&_s(t,this.o,v)),Uo(this.i,f),this.bb&&bi(t,"TYPE","init"),this.P?(bi(t,"$req",e),bi(t,"SID","null"),f.aa=!0,Ys(f,t,null)):Ys(f,t,e),this.H=2}}else 3==this.H&&(s?es(this,s):0==this.j.length||Ma(this.i)||es(this))},Y.Ma=function(){if(this.u=null,$u(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var s=2*this.S;this.l.info("BP detection timer enabled: "+s),this.B=As(qe(this.jb,this),s)}},Y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xi(10),Yr(this),$u(this))},Y.ib=function(){null!=this.v&&(this.v=null,Yr(this),Ql(this),Xi(19))},Y.pb=function(s){s?(this.l.info("Successfully pinged google.com"),Xi(2)):(this.l.info("Failed to ping google.com"),Xi(1))},Y.isActive=function(){return!!this.h&&this.h.isActive(this)},(Y=Xl.prototype).Ba=function(){},Y.Aa=function(){},Y.za=function(){},Y.ya=function(){},Y.isActive=function(){return!0},Y.Va=function(){},ma.prototype.g=function(s,e){return new _o(s,e)},ot(_o,ye),_o.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var s=this.g,e=this.l,t=this.h||void 0;Xi(0),s.Y=e,s.na=t||{},s.G=s.aa,s.I=Cu(s,null,s.Y),vo(s)},_o.prototype.close=function(){Gi(this.g)},_o.prototype.u=function(s){var e=this.g;if("string"==typeof s){var t={};t.__data__=s,s=t}else this.v&&((t={}).__data__=ln(s),s=t);e.j.push(new class{constructor(s,e){this.g=s,this.map=e}}(e.fb++,s)),3==e.H&&vo(e)},_o.prototype.N=function(){this.g.h=null,delete this.j,Gi(this.g),delete this.g,_o.$.N.call(this)},ot(cl,bt),ot(ws,vt),ot(ea,Xl),ea.prototype.Ba=function(){He(this.g,"a")},ea.prototype.Aa=function(s){He(this.g,new cl(s))},ea.prototype.za=function(s){He(this.g,new ws)},ea.prototype.ya=function(){He(this.g,"b")},ot(Qr,function Jl(){this.blockSize=-1}),Qr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qr.prototype.j=function(s,e){void 0===e&&(e=s.length);for(var t=e-this.blockSize,c=this.m,f=this.h,v=0;v<e;){if(0==f)for(;v<=t;)ta(this,s,v),v+=this.blockSize;if("string"==typeof s){for(;v<e;)if(c[f++]=s.charCodeAt(v++),f==this.blockSize){ta(this,c),f=0;break}}else for(;v<e;)if(c[f++]=s[v++],f==this.blockSize){ta(this,c),f=0;break}}this.h=f,this.i+=e},Qr.prototype.l=function(){var s=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);s[0]=128;for(var e=1;e<s.length-8;++e)s[e]=0;var t=8*this.i;for(e=s.length-8;e<s.length;++e)s[e]=255&t,t/=256;for(this.j(s),s=Array(16),e=t=0;4>e;++e)for(var c=0;32>c;c+=8)s[t++]=this.g[e]>>>c&255;return s};var ce={};function K(s){return-128<=s&&128>s?function Bn(s,e){var t=ce;return Object.prototype.hasOwnProperty.call(t,s)?t[s]:t[s]=e(s)}(s,function(e){return new L([0|e],0>e?-1:0)}):new L([0|s],0>s?-1:0)}function Se(s){if(isNaN(s)||!isFinite(s))return en;if(0>s)return wr(Se(-s));for(var e=[],t=1,c=0;s>=t;c++)e[c]=s/t|0,t*=wt;return new L(e,0)}var wt=4294967296,en=K(0),sr=K(1),Ci=K(16777216);function Pr(s){if(0!=s.h)return!1;for(var e=0;e<s.g.length;e++)if(0!=s.g[e])return!1;return!0}function Vr(s){return-1==s.h}function wr(s){for(var e=s.g.length,t=[],c=0;c<e;c++)t[c]=~s.g[c];return new L(t,~s.h).add(sr)}function os(s,e){return s.add(wr(e))}function Br(s,e){for(;(65535&s[e])!=s[e];)s[e+1]+=s[e]>>>16,s[e]&=65535,e++}function Ki(s,e){this.g=s,this.h=e}function Ws(s,e){if(Pr(e))throw Error("division by zero");if(Pr(s))return new Ki(en,en);if(Vr(s))return e=Ws(wr(s),e),new Ki(wr(e.g),wr(e.h));if(Vr(e))return e=Ws(s,wr(e)),new Ki(wr(e.g),e.h);if(30<s.g.length){if(Vr(s)||Vr(e))throw Error("slowDivide_ only works with positive integers.");for(var t=sr,c=e;0>=c.X(s);)t=ur(t),c=ur(c);var f=qo(t,1),v=qo(c,1);for(c=qo(c,2),t=qo(t,2);!Pr(c);){var C=v.add(c);0>=C.X(s)&&(f=f.add(t),v=C),c=qo(c,1),t=qo(t,1)}return e=os(s,f.R(e)),new Ki(f,e)}for(f=en;0<=s.X(e);){for(t=Math.max(1,Math.floor(s.ea()/e.ea())),c=48>=(c=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,c-48),C=(v=Se(t)).R(e);Vr(C)||0<C.X(s);)C=(v=Se(t-=c)).R(e);Pr(v)&&(v=sr),f=f.add(v),s=os(s,C)}return new Ki(f,s)}function ur(s){for(var e=s.g.length+1,t=[],c=0;c<e;c++)t[c]=s.D(c)<<1|s.D(c-1)>>>31;return new L(t,s.h)}function qo(s,e){var t=e>>5;e%=32;for(var c=s.g.length-t,f=[],v=0;v<c;v++)f[v]=0<e?s.D(v+t)>>>e|s.D(v+t+1)<<32-e:s.D(v+t);return new L(f,s.h)}(Y=L.prototype).ea=function(){if(Vr(this))return-wr(this).ea();for(var s=0,e=1,t=0;t<this.g.length;t++){var c=this.D(t);s+=(0<=c?c:wt+c)*e,e*=wt}return s},Y.toString=function(s){if(2>(s=s||10)||36<s)throw Error("radix out of range: "+s);if(Pr(this))return"0";if(Vr(this))return"-"+wr(this).toString(s);for(var e=Se(Math.pow(s,6)),t=this,c="";;){var f=Ws(t,e).g,v=((0<(t=os(t,f.R(e))).g.length?t.g[0]:t.h)>>>0).toString(s);if(Pr(t=f))return v+c;for(;6>v.length;)v="0"+v;c=v+c}},Y.D=function(s){return 0>s?0:s<this.g.length?this.g[s]:this.h},Y.X=function(s){return Vr(s=os(this,s))?-1:Pr(s)?0:1},Y.abs=function(){return Vr(this)?wr(this):this},Y.add=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],c=0,f=0;f<=e;f++){var v=c+(65535&this.D(f))+(65535&s.D(f)),C=(v>>>16)+(this.D(f)>>>16)+(s.D(f)>>>16);c=C>>>16,t[f]=(C&=65535)<<16|(v&=65535)}return new L(t,-2147483648&t[t.length-1]?-1:0)},Y.R=function(s){if(Pr(this)||Pr(s))return en;if(Vr(this))return Vr(s)?wr(this).R(wr(s)):wr(wr(this).R(s));if(Vr(s))return wr(this.R(wr(s)));if(0>this.X(Ci)&&0>s.X(Ci))return Se(this.ea()*s.ea());for(var e=this.g.length+s.g.length,t=[],c=0;c<2*e;c++)t[c]=0;for(c=0;c<this.g.length;c++)for(var f=0;f<s.g.length;f++){var v=this.D(c)>>>16,C=65535&this.D(c),N=s.D(f)>>>16,X=65535&s.D(f);t[2*c+2*f]+=C*X,Br(t,2*c+2*f),t[2*c+2*f+1]+=v*X,Br(t,2*c+2*f+1),t[2*c+2*f+1]+=C*N,Br(t,2*c+2*f+1),t[2*c+2*f+2]+=v*N,Br(t,2*c+2*f+2)}for(c=0;c<e;c++)t[c]=t[2*c+1]<<16|t[2*c];for(c=e;c<2*e;c++)t[c]=0;return new L(t,0)},Y.gb=function(s){return Ws(this,s).h},Y.and=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)&s.D(c);return new L(t,this.h&s.h)},Y.or=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)|s.D(c);return new L(t,this.h|s.h)},Y.xor=function(s){for(var e=Math.max(this.g.length,s.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)^s.D(c);return new L(t,this.h^s.h)},ma.prototype.createWebChannel=ma.prototype.g,_o.prototype.send=_o.prototype.u,_o.prototype.open=_o.prototype.m,_o.prototype.close=_o.prototype.close,Ir.NO_ERROR=0,Ir.TIMEOUT=8,Ir.HTTP_ERROR=6,ds.COMPLETE="complete",ss.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",ye.prototype.listen=ye.prototype.O,Me.prototype.listenOnce=Me.prototype.P,Me.prototype.getLastError=Me.prototype.Sa,Me.prototype.getLastErrorCode=Me.prototype.Ia,Me.prototype.getStatus=Me.prototype.da,Me.prototype.getResponseJson=Me.prototype.Wa,Me.prototype.getResponseText=Me.prototype.ja,Me.prototype.send=Me.prototype.ha,Me.prototype.setWithCredentials=Me.prototype.Oa,Qr.prototype.digest=Qr.prototype.l,Qr.prototype.reset=Qr.prototype.reset,Qr.prototype.update=Qr.prototype.j,L.prototype.add=L.prototype.add,L.prototype.multiply=L.prototype.R,L.prototype.modulo=L.prototype.gb,L.prototype.compare=L.prototype.X,L.prototype.toNumber=L.prototype.ea,L.prototype.toString=L.prototype.toString,L.prototype.getBits=L.prototype.D,L.fromNumber=Se,L.fromString=function it(s,e){if(0==s.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==s.charAt(0))return wr(it(s.substring(1),e));if(0<=s.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Se(Math.pow(e,8)),c=en,f=0;f<s.length;f+=8){var v=Math.min(8,s.length-f),C=parseInt(s.substring(f,f+v),e);8>v?(v=Se(Math.pow(e,v)),c=c.R(v).add(Se(C))):c=(c=c.R(t)).add(Se(C))}return c};var na=gt.createWebChannelTransport=function(){return new ma},Ds=gt.getStatEventTarget=function(){return Ia()},Ko=gt.ErrorCode=Ir,va=gt.EventType=ds,Oc=gt.Event=no,Ra=gt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Dl=gt.FetchXmlHttpFactory=ie,Il=gt.WebChannel=ss,Rc=gt.XhrIo=Me,xl=gt.Md5=Qr,ra=gt.Integer=L;const vn="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let zu="9.23.0";const Ns=new Ee.Yd("@firebase/firestore");function wo(){return Ns.logLevel}function Cn(s,...e){if(Ns.logLevel<=Ee.in.DEBUG){const t=e.map(ec);Ns.debug(`Firestore (${zu}): ${s}`,...t)}}function zi(s,...e){if(Ns.logLevel<=Ee.in.ERROR){const t=e.map(ec);Ns.error(`Firestore (${zu}): ${s}`,...t)}}function To(s,...e){if(Ns.logLevel<=Ee.in.WARN){const t=e.map(ec);Ns.warn(`Firestore (${zu}): ${s}`,...t)}}function ec(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function An(s="Unexpected state"){const e=`FIRESTORE (${zu}) INTERNAL ASSERTION FAILED: `+s;throw zi(e),new Error(e)}function lr(s,e){s||An()}function Sn(s,e){return s}const $t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dn extends Te.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Na{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ya{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class nc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _a{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var c=this;let f=this.i;const v=he=>this.i!==f?(f=this.i,t(he)):Promise.resolve();let C=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new oi,e.enqueueRetryable(()=>v(this.currentUser))};const N=()=>{const he=C;e.enqueueRetryable((0,Ke.Z)(function*(){yield he.promise,yield v(c.currentUser)}))},X=he=>{Cn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=he,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(he=>X(he)),setTimeout(()=>{if(!this.auth){const he=this.t.getImmediate({optional:!0});he?X(he):(Cn("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new oi)}},0),N()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(c=>this.i!==e?(Cn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(lr("string"==typeof c.accessToken),new Na(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lr(null===e||"string"==typeof e),new Or(e)}}class so{constructor(e,t,c){this.h=e,this.l=t,this.m=c,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ru{constructor(e,t,c){this.h=e,this.l=t,this.m=c}getToken(){return Promise.resolve(new so(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const c=v=>{null!=v.error&&Cn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const C=v.token!==this.T;return this.T=v.token,Cn("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>c(v))};const f=v=>{Cn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.I.onInit(v=>f(v)),setTimeout(()=>{if(!this.appCheck){const v=this.I.getImmediate({optional:!0});v?f(v):Cn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lr("string"==typeof t.token),this.T=t.token,new dl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function La(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let c=0;c<s;c++)t[c]=Math.floor(256*Math.random());return t}class ts{static A(){const t=62*Math.floor(256/62);let c="";for(;c.length<20;){const f=La(40);for(let v=0;v<f.length;++v)c.length<20&&f[v]<t&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(f[v]%62))}return c}}function Cr(s,e){return s<e?-1:s>e?1:0}function Wu(s,e,t){return s.length===e.length&&s.every((c,f)=>t(c,e[f]))}function oo(s){return s+"\0"}class as{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dn($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dn($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new dn($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dn($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return as.fromMillis(Date.now())}static fromDate(e){return as.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),c=Math.floor(1e6*(e-1e3*t));return new as(t,c)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cr(this.nanoseconds,e.nanoseconds):Cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vr(e)}static min(){return new vr(new as(0,0))}static max(){return new vr(new as(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bo{constructor(e,t,c){void 0===t?t=0:t>e.length&&An(),void 0===c?c=e.length-t:c>e.length-t&&An(),this.segments=e,this.offset=t,this.len=c}get length(){return this.len}isEqual(e){return 0===bo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(c=>{t.push(c)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,c=this.limit();t<c;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const c=Math.min(e.length,t.length);for(let f=0;f<c;f++){const v=e.get(f),C=t.get(f);if(v<C)return-1;if(v>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ni extends bo{construct(e,t,c){return new Ni(e,t,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const c of e){if(c.indexOf("//")>=0)throw new dn($t.INVALID_ARGUMENT,`Invalid segment (${c}). Paths must not contain // in them.`);t.push(...c.split("/").filter(f=>f.length>0))}return new Ni(t)}static emptyPath(){return new Ni([])}}const qd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends bo{construct(e,t,c){return new gi(e,t,c)}static isValidIdentifier(e){return qd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gi(["__name__"])}static fromServerFormat(e){const t=[];let c="",f=0;const v=()=>{if(0===c.length)throw new dn($t.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(c),c=""};let C=!1;for(;f<e.length;){const N=e[f];if("\\"===N){if(f+1===e.length)throw new dn($t.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[f+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new dn($t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);c+=X,f+=2}else"`"===N?(C=!C,f++):"."!==N||C?(c+=N,f++):(v(),f++)}if(v(),C)throw new dn($t.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gi(t)}static emptyPath(){return new gi([])}}class Fn{constructor(e){this.path=e}static fromPath(e){return new Fn(Ni.fromString(e))}static fromName(e){return new Fn(Ni.fromString(e).popFirst(5))}static empty(){return new Fn(Ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fn(new Ni(e.slice()))}}class k{constructor(e,t,c,f){this.indexId=e,this.collectionGroup=t,this.fields=c,this.indexState=f}}function R(s){return s.fields.find(e=>2===e.kind)}function I(s){return s.fields.filter(e=>2!==e.kind)}k.UNKNOWN_ID=-1;class de{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ue{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ue(0,er.min())}}function Mt(s,e){const t=s.toTimestamp().seconds,c=s.toTimestamp().nanoseconds+1,f=vr.fromTimestamp(1e9===c?new as(t+1,0):new as(t,c));return new er(f,Fn.empty(),e)}function sn(s){return new er(s.readTime,s.key,-1)}class er{constructor(e,t,c){this.readTime=e,this.documentKey=t,this.largestBatchId=c}static min(){return new er(vr.min(),Fn.empty(),-1)}static max(){return new er(vr.max(),Fn.empty(),-1)}}function jn(s,e){let t=s.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fn.comparator(s.documentKey,e.documentKey),0!==t?t:Cr(s.largestBatchId,e.largestBatchId))}const Li="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ta(s){return gu.apply(this,arguments)}function gu(){return gu=(0,Ke.Z)(function*(s){if(s.code!==$t.FAILED_PRECONDITION||s.message!==Li)throw s;Cn("LocalStore","Unexpectedly lost primary lease")}),gu.apply(this,arguments)}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&An(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((c,f)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(c,f)},this.catchCallback=v=>{this.wrapFailure(t,v).next(c,f)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,c)=>{t(e)})}static reject(e){return new Je((t,c)=>{c(e)})}static waitFor(e){return new Je((t,c)=>{let f=0,v=0,C=!1;e.forEach(N=>{++f,N.next(()=>{++v,C&&v===f&&t()},X=>c(X))}),C=!0,v===f&&t()})}static or(e){let t=Je.resolve(!1);for(const c of e)t=t.next(f=>f?Je.resolve(f):c());return t}static forEach(e,t){const c=[];return e.forEach((f,v)=>{c.push(t.call(this,f,v))}),this.waitFor(c)}static mapArray(e,t){return new Je((c,f)=>{const v=e.length,C=new Array(v);let N=0;for(let X=0;X<v;X++){const he=X;t(e[he]).next(ke=>{C[he]=ke,++N,N===v&&c(C)},ke=>f(ke))}})}static doWhile(e,t){return new Je((c,f)=>{const v=()=>{!0===e()?t().next(()=>{v()},f):c()};v()})}}class Al{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new oi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Fa(e,t.error)):this.v.resolve()},this.transaction.onerror=c=>{const f=Ya(c.target.error);this.v.reject(new Fa(e,f))}}static open(e,t,c,f){try{return new Al(t,e.transaction(f,c))}catch(v){throw new Fa(t,v)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Cn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Do(t)}}class Ls{constructor(e,t,c){this.name=e,this.version=t,this.V=c,12.2===Ls.S((0,Te.z$)())&&zi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Cn("SimpleDb","Removing database:",e),ja(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Te.hl)())return!1;if(Ls.C())return!0;const e=(0,Te.z$)(),t=Ls.S(e),c=0<t&&t<10,f=Ls.N(e),v=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||c||v)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static N(e){const t=e.match(/Android ([\d.]+)/i),c=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(c)}$(e){var t=this;return(0,Ke.Z)(function*(){return t.db||(Cn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((c,f)=>{const v=indexedDB.open(t.name,t.version);v.onsuccess=C=>{c(C.target.result)},v.onblocked=()=>{f(new Fa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=C=>{const N=C.target.error;f("VersionError"===N.name?new dn($t.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new dn($t.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new Fa(e,N))},v.onupgradeneeded=C=>{Cn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.V.O(C.target.result,v.transaction,C.oldVersion,t.version).next(()=>{Cn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=c=>t.F(c)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,c,f){var v=this;return(0,Ke.Z)(function*(){const C="readonly"===t;let N=0;for(;;){++N;try{v.db=yield v.$(e);const X=Al.open(v.db,e,C?"readonly":"readwrite",c),he=f(X).next(ke=>(X.P(),ke)).catch(ke=>(X.abort(ke),Je.reject(ke))).toPromise();return he.catch(()=>{}),yield X.R,he}catch(X){const he=X,ke="FirebaseError"!==he.name&&N<3;if(Cn("SimpleDb","Transaction failed with error:",he.message,"Retrying:",ke),v.close(),!ke)return Promise.reject(he)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class sc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ja(this.L.delete())}}class Fa extends dn{constructor(e,t){super($t.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qu(s){return"IndexedDbTransactionError"===s.name}class Do{constructor(e){this.store=e}put(e,t){let c;return void 0!==t?(Cn("SimpleDb","PUT",this.store.name,e,t),c=this.store.put(t,e)):(Cn("SimpleDb","PUT",this.store.name,"<auto-key>",e),c=this.store.put(e)),ja(c)}add(e){return Cn("SimpleDb","ADD",this.store.name,e,e),ja(this.store.add(e))}get(e){return ja(this.store.get(e)).next(t=>(void 0===t&&(t=null),Cn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Cn("SimpleDb","DELETE",this.store.name,e),ja(this.store.delete(e))}count(){return Cn("SimpleDb","COUNT",this.store.name),ja(this.store.count())}j(e,t){const c=this.options(e,t);if(c.index||"function"!=typeof this.store.getAll){const f=this.cursor(c),v=[];return this.W(f,(C,N)=>{v.push(N)}).next(()=>v)}{const f=this.store.getAll(c.range);return new Je((v,C)=>{f.onerror=N=>{C(N.target.error)},f.onsuccess=N=>{v(N.target.result)}})}}H(e,t){const c=this.store.getAll(e,null===t?void 0:t);return new Je((f,v)=>{c.onerror=C=>{v(C.target.error)},c.onsuccess=C=>{f(C.target.result)}})}J(e,t){Cn("SimpleDb","DELETE ALL",this.store.name);const c=this.options(e,t);c.Y=!1;const f=this.cursor(c);return this.W(f,(v,C,N)=>N.delete())}X(e,t){let c;t?c=e:(c={},t=e);const f=this.cursor(c);return this.W(f,t)}Z(e){const t=this.cursor({});return new Je((c,f)=>{t.onerror=v=>{const C=Ya(v.target.error);f(C)},t.onsuccess=v=>{const C=v.target.result;C?e(C.primaryKey,C.value).next(N=>{N?C.continue():c()}):c()}})}W(e,t){const c=[];return new Je((f,v)=>{e.onerror=C=>{v(C.target.error)},e.onsuccess=C=>{const N=C.target.result;if(!N)return void f();const X=new sc(N),he=t(N.primaryKey,N.value,X);if(he instanceof Je){const ke=he.catch(ct=>(X.done(),Je.reject(ct)));c.push(ke)}X.isDone?f():null===X.K?N.continue():N.continue(X.K)}}).next(()=>Je.waitFor(c))}options(e,t){let c;return void 0!==e&&("string"==typeof e?c=e:t=e),{index:c,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const c=this.store.index(e.index);return e.Y?c.openKeyCursor(e.range,t):c.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ja(s){return new Je((e,t)=>{s.onsuccess=c=>{e(c.target.result)},s.onerror=c=>{const f=Ya(c.target.error);t(f)}})}let Ml=!1;function Ya(s){const e=Ls.S((0,Te.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const c=new dn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ml||(Ml=!0,setTimeout(()=>{throw c},0)),c}}return s}class Kd{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Cn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ke.Z)(function*(){t.task=null;try{Cn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(c){qu(c)?Cn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",c):yield Ta(c)}yield t.et(6e4)}))}}class Nc{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ke.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",c=>t.st(c,e))})()}st(e,t){const c=new Set;let f=t,v=!0;return Je.doWhile(()=>!0===v&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!c.has(C))return Cn("IndexBackiller",`Processing collection: ${C}`),this.it(e,C,f).next(N=>{f-=N,c.add(C)});v=!1})).next(()=>t-f)}it(e,t,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(f=>this.localStore.localDocuments.getNextDocuments(e,t,f,c).next(v=>{const C=v.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.rt(f,v)).next(N=>(Cn("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,t,N))).next(()=>C.size)}))}rt(e,t){let c=e;return t.changes.forEach((f,v)=>{const C=sn(v);jn(C,c)>0&&(c=C)}),new er(c.readTime,c.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Io=(()=>{class s{constructor(t,c){this.previousValue=t,c&&(c.sequenceNumberHandler=f=>this.ot(f),this.ut=f=>c.writeSequenceNumber(f))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return s.ct=-1,s})();function xo(s){return null==s}function kl(s){return 0===s&&1/s==-1/0}function Du(s){return"number"==typeof s&&Number.isInteger(s)&&!kl(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Fs(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=od(e)),e=oc(s.get(t),e);return od(e)}function oc(s,e){let t=e;const c=s.length;for(let f=0;f<c;f++){const v=s.charAt(f);switch(v){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=v}}return t}function od(s){return s+"\x01\x01"}function Ao(s){const e=s.length;if(lr(e>=2),2===e)return lr("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Ni.emptyPath();const t=e-2,c=[];let f="";for(let v=0;v<e;){const C=s.indexOf("\x01",v);switch((C<0||C>t)&&An(),s.charAt(C+1)){case"\x01":const N=s.substring(v,C);let X;0===f.length?X=N:(f+=N,X=f,f=""),c.push(X);break;case"\x10":f+=s.substring(v,C),f+="\0";break;case"\x11":f+=s.substring(v,C+1);break;default:An()}v=C+2}return new Ni(c)}const ac=["userId","batchId"];function ad(s,e){return[s,Fs(e)]}function mu(s,e,t){return[s,Fs(e),t]}const Fh={},Zd=["prefixPath","collectionGroup","readTime","documentId"],ud=["prefixPath","collectionGroup","documentId"],Yd=["collectionGroup","readTime","prefixPath","documentId"],ld=["canonicalId","targetId"],uc=["targetId","path"],Nf=["path","targetId"],Lc=["collectionId","parent"],Qd=["indexId","uid"],cd=["uid","sequenceNumber"],Fc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mg=["indexId","uid","orderedDocumentKey"],lc=["userId","collectionPath","documentId"],Pl=["userId","collectionPath","largestBatchId"],cc=["userId","collectionGroup","largestBatchId"],dd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jh=[...dd,"documentOverlays"],Ku=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lf=Ku,Bh=[...Lf,"indexConfiguration","indexState","indexEntries"];class dc extends Vo{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ao(s,e){const t=Sn(s);return Ls.M(t.ht,e)}function iu(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ia(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Eo(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Wi{constructor(e,t){this.comparator=e,this.root=t||js.EMPTY}insert(e,t){return new Wi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,js.BLACK,null,null))}remove(e){return new Wi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const c=this.comparator(e,t.key);if(0===c)return t.value;c<0?t=t.left:c>0&&(t=t.right)}return null}indexOf(e){let t=0,c=this.root;for(;!c.isEmpty();){const f=this.comparator(e,c.key);if(0===f)return t+c.left.size;f<0?c=c.left:(t+=c.left.size+1,c=c.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,c)=>(e(t,c),!1))}toString(){const e=[];return this.inorderTraversal((t,c)=>(e.push(`${t}:${c}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ki(this.root,e,this.comparator,!0)}}class ki{constructor(e,t,c,f){this.isReverse=f,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=t?c(e.key,t):1,t&&f&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class js{constructor(e,t,c,f,v){this.key=e,this.value=t,this.color=c??js.RED,this.left=f??js.EMPTY,this.right=v??js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,c,f,v){return new js(e??this.key,t??this.value,c??this.color,f??this.left,v??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,c){let f=this;const v=c(e,f.key);return f=v<0?f.copy(null,null,null,f.left.insert(e,t,c),null):0===v?f.copy(null,t,null,null,null):f.copy(null,null,null,null,f.right.insert(e,t,c)),f.fixUp()}removeMin(){if(this.left.isEmpty())return js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let c,f=this;if(t(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,t),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===t(e,f.key)){if(f.right.isEmpty())return js.EMPTY;c=f.right.min(),f=f.copy(c.key,c.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,t))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw An();const e=this.left.check();if(e!==this.right.check())throw An();return e+(this.isRed()?0:1)}}js.EMPTY=null,js.RED=!0,js.BLACK=!1,js.EMPTY=new class{constructor(){this.size=0}get key(){throw An()}get value(){throw An()}get color(){throw An()}get left(){throw An()}get right(){throw An()}copy(s,e,t,c,f){return this}insert(s,e,t){return new js(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ns{constructor(e){this.comparator=e,this.data=new Wi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,c)=>(e(t),!1))}forEachInRange(e,t){const c=this.data.getIteratorFrom(e[0]);for(;c.hasNext();){const f=c.getNext();if(this.comparator(f.key,e[1])>=0)return;t(f.key)}}forEachWhile(e,t){let c;for(c=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();c.hasNext();)if(!e(c.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qa(this.data.getIterator())}getIteratorFrom(e){return new Qa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(c=>{t=t.add(c)}),t}isEqual(e){if(!(e instanceof ns)||this.size!==e.size)return!1;const t=this.data.getIterator(),c=e.data.getIterator();for(;t.hasNext();){const f=t.getNext().key,v=c.getNext().key;if(0!==this.comparator(f,v))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ns(this.comparator);return t.data=e,t}}class Qa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hc(s){return s.hasNext()?s.getNext():void 0}class sa{constructor(e){this.fields=e,e.sort(gi.comparator)}static empty(){return new sa([])}unionWith(e){let t=new ns(gi.comparator);for(const c of this.fields)t=t.add(c);for(const c of e)t=t.add(c);return new sa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wu(this.fields,e.fields,(t,c)=>t.isEqual(c))}}class Xd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new Xd("Invalid base64 string: "+f):f}}(e);return new Mo(t)}static fromUint8Array(e){const t=function(c){let f="";for(let v=0;v<c.length;++v)f+=String.fromCharCode(c[v]);return f}(e);return new Mo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let c=0;c<e.length;c++)t[c]=e.charCodeAt(c);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mo.EMPTY_BYTE_STRING=new Mo("");const Dp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ol(s){if(lr(!!s),"string"==typeof s){let e=0;const t=Dp.exec(s);if(lr(!!t),t[1]){let f=t[1];f=(f+"000000000").substr(0,9),e=Number(f)}const c=new Date(s);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:ko(s.seconds),nanos:ko(s.nanos)}}function ko(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function Xa(s){return"string"==typeof s?Mo.fromBase64String(s):Mo.fromUint8Array(s)}function hd(s){var e,t;return"server_timestamp"===(null===(t=((null===(e=s?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zu(s){const e=s.mapValue.fields.__previous_value__;return hd(e)?Zu(e):e}function Qs(s){const e=Ol(s.mapValue.fields.__local_write_time__.timestampValue);return new as(e.seconds,e.nanos)}class Ip{constructor(e,t,c,f,v,C,N,X,he){this.databaseId=e,this.appId=t,this.persistenceKey=c,this.host=f,this.ssl=v,this.forceLongPolling=C,this.autoDetectLongPolling=N,this.longPollingOptions=X,this.useFetchStreams=he}}class Ho{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}const Ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Co={nullValue:"NULL_VALUE"};function Zo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?hd(s)?4:Hn(s)?9007199254740991:10:An()}function Iu(s,e){if(s===e)return!0;const t=Zo(s);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Qs(s).isEqual(Qs(e));case 3:return function(c,f){if("string"==typeof c.timestampValue&&"string"==typeof f.timestampValue&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const v=Ol(c.timestampValue),C=Ol(f.timestampValue);return v.seconds===C.seconds&&v.nanos===C.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return f=e,Xa(s.bytesValue).isEqual(Xa(f.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(c,f){return ko(c.geoPointValue.latitude)===ko(f.geoPointValue.latitude)&&ko(c.geoPointValue.longitude)===ko(f.geoPointValue.longitude)}(s,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return ko(c.integerValue)===ko(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const v=ko(c.doubleValue),C=ko(f.doubleValue);return v===C?kl(v)===kl(C):isNaN(v)&&isNaN(C)}return!1}(s,e);case 9:return Wu(s.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:return function(c,f){const v=c.mapValue.fields||{},C=f.mapValue.fields||{};if(iu(v)!==iu(C))return!1;for(const N in v)if(v.hasOwnProperty(N)&&(void 0===C[N]||!Iu(v[N],C[N])))return!1;return!0}(s,e);default:return An()}var f}function Rl(s,e){return void 0!==(s.values||[]).find(t=>Iu(t,e))}function su(s,e){if(s===e)return 0;const t=Zo(s),c=Zo(e);if(t!==c)return Cr(t,c);switch(t){case 0:case 9007199254740991:return 0;case 1:return Cr(s.booleanValue,e.booleanValue);case 2:return function(f,v){const C=ko(f.integerValue||f.doubleValue),N=ko(v.integerValue||v.doubleValue);return C<N?-1:C>N?1:C===N?0:isNaN(C)?isNaN(N)?0:-1:1}(s,e);case 3:return fd(s.timestampValue,e.timestampValue);case 4:return fd(Qs(s),Qs(e));case 5:return Cr(s.stringValue,e.stringValue);case 6:return function(f,v){const C=Xa(f),N=Xa(v);return C.compareTo(N)}(s.bytesValue,e.bytesValue);case 7:return function(f,v){const C=f.split("/"),N=v.split("/");for(let X=0;X<C.length&&X<N.length;X++){const he=Cr(C[X],N[X]);if(0!==he)return he}return Cr(C.length,N.length)}(s.referenceValue,e.referenceValue);case 8:return function(f,v){const C=Cr(ko(f.latitude),ko(v.latitude));return 0!==C?C:Cr(ko(f.longitude),ko(v.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(f,v){const C=f.values||[],N=v.values||[];for(let X=0;X<C.length&&X<N.length;++X){const he=su(C[X],N[X]);if(he)return he}return Cr(C.length,N.length)}(s.arrayValue,e.arrayValue);case 10:return function(f,v){if(f===Ja.mapValue&&v===Ja.mapValue)return 0;if(f===Ja.mapValue)return 1;if(v===Ja.mapValue)return-1;const C=f.fields||{},N=Object.keys(C),X=v.fields||{},he=Object.keys(X);N.sort(),he.sort();for(let ke=0;ke<N.length&&ke<he.length;++ke){const ct=Cr(N[ke],he[ke]);if(0!==ct)return ct;const Bt=su(C[N[ke]],X[he[ke]]);if(0!==Bt)return Bt}return Cr(N.length,he.length)}(s.mapValue,e.mapValue);default:throw An()}}function fd(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return Cr(s,e);const t=Ol(s),c=Ol(e),f=Cr(t.seconds,c.seconds);return 0!==f?f:Cr(t.nanos,c.nanos)}function pd(s){return ou(s)}function ou(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(c){const f=Ol(c);return`time(${f.seconds},${f.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Xa(s.bytesValue).toBase64():"referenceValue"in s?Fn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(c){let f="[",v=!0;for(const C of c.values||[])v?v=!1:f+=",",f+=ou(C);return f+"]"}(s.arrayValue):"mapValue"in s?function(c){const f=Object.keys(c.fields||{}).sort();let v="{",C=!0;for(const N of f)C?C=!1:v+=",",v+=`${N}:${ou(c.fields[N])}`;return v+"}"}(s.mapValue):An();var e}function H(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function fe(s){return!!s&&"integerValue"in s}function We(s){return!!s&&"arrayValue"in s}function yt(s){return!!s&&"nullValue"in s}function Rt(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kt(s){return!!s&&"mapValue"in s}function Vn(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ia(s.mapValue.fields,(t,c)=>e.mapValue.fields[t]=Vn(c)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vn(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Hn(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function yr(s){return"nullValue"in s?Co:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?H(Ho.empty(),Fn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:An()}function ei(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?H(Ho.empty(),Fn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Ja:An()}function Xr(s,e){const t=su(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function Ba(s,e){const t=su(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let c=0;c<e.length-1;++c)if(t=(t.mapValue.fields||{})[e.get(c)],!Kt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vn(t)}setAll(e){let t=gi.emptyPath(),c={},f=[];e.forEach((C,N)=>{if(!t.isImmediateParentOf(N)){const X=this.getFieldsMap(t);this.applyChanges(X,c,f),c={},f=[],t=N.popLast()}C?c[N.lastSegment()]=Vn(C):f.push(N.lastSegment())});const v=this.getFieldsMap(t);this.applyChanges(v,c,f)}delete(e){const t=this.field(e.popLast());Kt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let c=0;c<e.length;++c){let f=t.mapValue.fields[e.get(c)];Kt(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},t.mapValue.fields[e.get(c)]=f),t=f}return t.mapValue.fields}applyChanges(e,t,c){ia(t,(f,v)=>e[f]=v);for(const f of c)delete e[f]}clone(){return new Si(Vn(this.value))}}function vu(s){const e=[];return ia(s.fields,(t,c)=>{const f=new gi([t]);if(Kt(c)){const v=vu(c.mapValue).fields;if(0===v.length)e.push(f);else for(const C of v)e.push(f.child(C))}else e.push(f)}),new sa(e)}class Bi{constructor(e,t,c,f,v,C,N){this.key=e,this.documentType=t,this.version=c,this.readTime=f,this.createTime=v,this.data=C,this.documentState=N}static newInvalidDocument(e){return new Bi(e,0,vr.min(),vr.min(),vr.min(),Si.empty(),0)}static newFoundDocument(e,t,c,f){return new Bi(e,1,t,vr.min(),c,f,0)}static newNoDocument(e,t){return new Bi(e,2,t,vr.min(),vr.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new Bi(e,3,t,vr.min(),vr.min(),Si.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ba{constructor(e,t){this.position=e,this.inclusive=t}}function oa(s,e,t){let c=0;for(let f=0;f<s.position.length;f++){const v=e[f],C=s.position[f];if(c=v.field.isKeyField()?Fn.comparator(Fn.fromName(C.referenceValue),t.key):su(C,t.data.field(v.field)),"desc"===v.dir&&(c*=-1),0!==c)break}return c}function Yu(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Iu(s.position[t],e.position[t]))return!1;return!0}class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vh(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Jd{}class Pi extends Jd{constructor(e,t,c){super(),this.field=e,this.op=t,this.value=c}static create(e,t,c){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,c):new kg(e,t,c):"array-contains"===t?new Bc(e,c):"in"===t?new Og(e,c):"not-in"===t?new Pp(e,c):"array-contains-any"===t?new $h(e,c):new Pi(e,t,c)}static createKeyFieldInFilter(e,t,c){return"in"===t?new kp(e,c):new Pg(e,c)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(su(t,this.value)):null!==t&&Zo(this.value)===Zo(t)&&this.matchesComparison(su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return An()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class us extends Jd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new us(e,t)}matches(e){return fc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function fc(s){return"and"===s.op}function hl(s){return"or"===s.op}function jc(s){return Hh(s)&&fc(s)}function Hh(s){for(const e of s.filters)if(e instanceof us)return!1;return!0}function xp(s){if(s instanceof Pi)return s.field.canonicalString()+s.op.toString()+pd(s.value);if(jc(s))return s.filters.map(e=>xp(e)).join(",");{const e=s.filters.map(t=>xp(t)).join(",");return`${s.op}(${e})`}}function eh(s,e){return s instanceof Pi?(t=s,(c=e)instanceof Pi&&t.op===c.op&&t.field.isEqual(c.field)&&Iu(t.value,c.value)):s instanceof us?function(t,c){return c instanceof us&&t.op===c.op&&t.filters.length===c.filters.length&&t.filters.reduce((f,v,C)=>f&&eh(v,c.filters[C]),!0)}(s,e):void An();var t,c}function Ap(s,e){const t=s.filters.concat(e);return us.create(t,s.op)}function Mp(s){return s instanceof Pi?`${(e=s).field.canonicalString()} ${e.op} ${pd(e.value)}`:s instanceof us?function(e){return e.op.toString()+" {"+e.getFilters().map(Mp).join(" ,")+"}"}(s):"Filter";var e}class kg extends Pi{constructor(e,t,c){super(e,t,c),this.key=Fn.fromName(c.referenceValue)}matches(e){const t=Fn.comparator(e.key,this.key);return this.matchesComparison(t)}}class kp extends Pi{constructor(e,t){super(e,"in",t),this.keys=Ff(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pg extends Pi{constructor(e,t){super(e,"not-in",t),this.keys=Ff(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ff(s,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(c=>Fn.fromName(c.referenceValue))}class Bc extends Pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return We(t)&&Rl(t.arrayValue,this.value)}}class Og extends Pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rl(this.value.arrayValue,t)}}class Pp extends Pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rl(this.value.arrayValue,t)}}class $h extends Pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!We(t)||!t.arrayValue.values)&&t.arrayValue.values.some(c=>Rl(this.value.arrayValue,c))}}class Op{constructor(e,t=null,c=[],f=[],v=null,C=null,N=null){this.path=e,this.collectionGroup=t,this.orderBy=c,this.filters=f,this.limit=v,this.startAt=C,this.endAt=N,this.dt=null}}function jf(s,e=null,t=[],c=[],f=null,v=null,C=null){return new Op(s,e,t,c,f,v,C)}function Uc(s){const e=Sn(s);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(c=>xp(c)).join(","),t+="|ob:",t+=e.orderBy.map(c=>{return(f=c).field.canonicalString()+f.dir;var f}).join(","),xo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(c=>pd(c)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(c=>pd(c)).join(",")),e.dt=t}return e.dt}function th(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Vh(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!eh(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Yu(s.startAt,e.startAt)&&Yu(s.endAt,e.endAt)}function pc(s){return Fn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Gh(s,e){return s.filters.filter(t=>t instanceof Pi&&t.field.isEqual(e))}function Rp(s,e,t){let c=Co,f=!0;for(const v of Gh(s,e)){let C=Co,N=!0;switch(v.op){case"<":case"<=":C=yr(v.value);break;case"==":case"in":case">=":C=v.value;break;case">":C=v.value,N=!1;break;case"!=":case"not-in":C=Co}Xr({value:c,inclusive:f},{value:C,inclusive:N})<0&&(c=C,f=N)}if(null!==t)for(let v=0;v<s.orderBy.length;++v)if(s.orderBy[v].field.isEqual(e)){const C=t.position[v];Xr({value:c,inclusive:f},{value:C,inclusive:t.inclusive})<0&&(c=C,f=t.inclusive);break}return{value:c,inclusive:f}}function nh(s,e,t){let c=Ja,f=!0;for(const v of Gh(s,e)){let C=Ja,N=!0;switch(v.op){case">=":case">":C=ei(v.value),N=!1;break;case"==":case"in":case"<=":C=v.value;break;case"<":C=v.value,N=!1;break;case"!=":case"not-in":C=Ja}Ba({value:c,inclusive:f},{value:C,inclusive:N})>0&&(c=C,f=N)}if(null!==t)for(let v=0;v<s.orderBy.length;++v)if(s.orderBy[v].field.isEqual(e)){const C=t.position[v];Ba({value:c,inclusive:f},{value:C,inclusive:t.inclusive})>0&&(c=C,f=t.inclusive);break}return{value:c,inclusive:f}}class Xu{constructor(e,t=null,c=[],f=[],v=null,C="F",N=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=c,this.filters=f,this.limit=v,this.limitType=C,this.startAt=N,this.endAt=X,this.wt=null,this._t=null}}function zh(s,e,t,c,f,v,C,N){return new Xu(s,e,t,c,f,v,C,N)}function rh(s){return new Xu(s)}function ih(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function Np(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function gd(s){for(const e of s.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Nl(s){return null!==s.collectionGroup}function Ju(s){const e=Sn(s);if(null===e.wt){e.wt=[];const t=gd(e),c=Np(e);if(null!==t&&null===c)t.isKeyField()||e.wt.push(new Qu(t)),e.wt.push(new Qu(gi.keyField(),"asc"));else{let f=!1;for(const v of e.explicitOrderBy)e.wt.push(v),v.field.isKeyField()&&(f=!0);if(!f){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Qu(gi.keyField(),v))}}}return e.wt}function Ea(s){const e=Sn(s);if(!e._t)if("F"===e.limitType)e._t=jf(e.path,e.collectionGroup,Ju(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const v of Ju(e))t.push(new Qu(v.field,"desc"===v.dir?"asc":"desc"));const c=e.endAt?new ba(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new ba(e.startAt.position,e.startAt.inclusive):null;e._t=jf(e.path,e.collectionGroup,t,e.filters,e.limit,c,f)}return e._t}function Vc(s,e){e.getFirstInequalityField(),gd(s);const t=s.filters.concat([e]);return new Xu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Hc(s,e,t){return new Xu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function el(s,e){return th(Ea(s),Ea(e))&&s.limitType===e.limitType}function Bf(s){return`${Uc(Ea(s))}|lt:${s.limitType}`}function $c(s){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(c=>Mp(c)).join(", ")}]`),xo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(c=>{return`${(f=c).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(c=>pd(c)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(c=>pd(c)).join(",")),`Target(${t})`}(Ea(s))}; limitType=${s.limitType})`}function Ll(s,e){return e.isFoundDocument()&&function(t,c){const f=c.key.path;return null!==t.collectionGroup?c.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(f):Fn.isDocumentKey(t.path)?t.path.isEqual(f):t.path.isImmediateParentOf(f)}(s,e)&&function(t,c){for(const f of Ju(t))if(!f.field.isKeyField()&&null===c.data.field(f.field))return!1;return!0}(s,e)&&function(t,c){for(const f of t.filters)if(!f.matches(c))return!1;return!0}(s,e)&&(c=e,!((t=s).startAt&&!function(f,v,C){const N=oa(f,v,C);return f.inclusive?N<=0:N<0}(t.startAt,Ju(t),c)||t.endAt&&!function(f,v,C){const N=oa(f,v,C);return f.inclusive?N>=0:N>0}(t.endAt,Ju(t),c)));var t,c}function sh(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function tl(s){return(e,t)=>{let c=!1;for(const f of Ju(s)){const v=Rg(f,e,t);if(0!==v)return v;c=c||f.field.isKeyField()}return 0}}function Rg(s,e,t){const c=s.field.isKeyField()?Fn.comparator(e.key,t.key):function(f,v,C){const N=v.data.field(f),X=C.data.field(f);return null!==N&&null!==X?su(N,X):An()}(s.field,e,t);switch(s.dir){case"asc":return c;case"desc":return-1*c;default:return An()}}class nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),c=this.inner[t];if(void 0!==c)for(const[f,v]of c)if(this.equalsFn(f,e))return v}has(e){return void 0!==this.get(e)}set(e,t){const c=this.mapKeyFn(e),f=this.inner[c];if(void 0===f)return this.inner[c]=[[e,t]],void this.innerSize++;for(let v=0;v<f.length;v++)if(this.equalsFn(f[v][0],e))return void(f[v]=[e,t]);f.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),c=this.inner[t];if(void 0===c)return!1;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return 1===c.length?delete this.inner[t]:c.splice(f,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(t,c)=>{for(const[f,v]of c)e(f,v)})}isEmpty(){return Eo(this.inner)}size(){return this.innerSize}}const Ng=new Wi(Fn.comparator);function Ua(){return Ng}const Wh=new Wi(Fn.comparator);function Fl(...s){let e=Wh;for(const t of s)e=e.insert(t.key,t);return e}function Lp(s){let e=Wh;return s.forEach((t,c)=>e=e.insert(t,c.overlayedDocument)),e}function rl(){return oh()}function Uf(){return oh()}function oh(){return new nl(s=>s.toString(),(s,e)=>s.isEqual(e))}const Lg=new Wi(Fn.comparator),au=new ns(Fn.comparator);function ai(...s){let e=au;for(const t of s)e=e.add(t);return e}const ah=new ns(Cr);function Gc(){return ah}function co(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(e)?"-0":e}}function md(s){return{integerValue:""+s}}function qh(s,e){return Du(e)?md(e):co(s,e)}class Kh{constructor(){this._=void 0}}function xu(s,e,t){return s instanceof vd?function(c,f){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&hd(f)&&(f=Zu(f)),f&&(v.fields.__previous_value__=f),{mapValue:v}}(t,e):s instanceof fl?Zh(s,e):s instanceof zc?jp(s,e):function(c,f){const v=Fp(c,f),C=pl(v)+pl(c.gt);return fe(v)&&fe(c.gt)?md(C):co(c.serializer,C)}(s,e)}function uh(s,e,t){return s instanceof fl?Zh(s,e):s instanceof zc?jp(s,e):t}function Fp(s,e){return s instanceof gc?fe(t=e)||(c=t)&&"doubleValue"in c?e:{integerValue:0}:null;var c,t}class vd extends Kh{}class fl extends Kh{constructor(e){super(),this.elements=e}}function Zh(s,e){const t=Bp(e);for(const c of s.elements)t.some(f=>Iu(f,c))||t.push(c);return{arrayValue:{values:t}}}class zc extends Kh{constructor(e){super(),this.elements=e}}function jp(s,e){let t=Bp(e);for(const c of s.elements)t=t.filter(f=>!Iu(f,c));return{arrayValue:{values:t}}}class gc extends Kh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function pl(s){return ko(s.integerValue||s.doubleValue)}function Bp(s){return We(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class mc{constructor(e,t){this.field=e,this.transform=t}}class gr{constructor(e,t){this.version=e,this.transformResults=t}}class Ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ms}static exists(e){return new Ms(void 0,e)}static updateTime(e){return new Ms(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aa(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class vc{}function gl(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new _d(s.key,Ms.none()):new Bl(s.key,s.data,Ms.none());{const t=s.data,c=Si.empty();let f=new ns(gi.comparator);for(let v of e.fields)if(!f.has(v)){let C=t.field(v);null===C&&v.length>1&&(v=v.popLast(),C=t.field(v)),null===C?c.delete(v):c.set(v,C),f=f.add(v)}return new _u(s.key,c,new sa(f.toArray()),Ms.none())}}function yd(s,e,t){s instanceof Bl?function(c,f,v){const C=c.value.clone(),N=Yh(c.fieldTransforms,f,v.transformResults);C.setAll(N),f.convertToFoundDocument(v.version,C).setHasCommittedMutations()}(s,e,t):s instanceof _u?function(c,f,v){if(!aa(c.precondition,f))return void f.convertToUnknownDocument(v.version);const C=Yh(c.fieldTransforms,f,v.transformResults),N=f.data;N.setAll(yc(c)),N.setAll(C),f.convertToFoundDocument(v.version,N).setHasCommittedMutations()}(s,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yu(s,e,t,c){return s instanceof Bl?function(f,v,C,N){if(!aa(f.precondition,v))return C;const X=f.value.clone(),he=Qh(f.fieldTransforms,N,v);return X.setAll(he),v.convertToFoundDocument(v.version,X).setHasLocalMutations(),null}(s,e,t,c):s instanceof _u?function(f,v,C,N){if(!aa(f.precondition,v))return C;const X=Qh(f.fieldTransforms,N,v),he=v.data;return he.setAll(yc(f)),he.setAll(X),v.convertToFoundDocument(v.version,he).setHasLocalMutations(),null===C?null:C.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(ke=>ke.field))}(s,e,t,c):(C=t,aa(s.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):C);var v,C}function Xs(s,e){let t=null;for(const c of s.fieldTransforms){const f=e.data.field(c.field),v=Fp(c.transform,f||null);null!=v&&(null===t&&(t=Si.empty()),t.set(c.field,v))}return t||null}function jl(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(t=s.fieldTransforms)&&void 0===c||t&&c&&Wu(t,c,(f,v)=>function Up(s,e){return s.field.isEqual(e.field)&&(c=e.transform,(t=s.transform)instanceof fl&&c instanceof fl||t instanceof zc&&c instanceof zc?Wu(t.elements,c.elements,Iu):t instanceof gc&&c instanceof gc?Iu(t.gt,c.gt):t instanceof vd&&c instanceof vd);var t,c}(f,v))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var t,c}class Bl extends vc{constructor(e,t,c,f=[]){super(),this.key=e,this.value=t,this.precondition=c,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class _u extends vc{constructor(e,t,c,f,v=[]){super(),this.key=e,this.data=t,this.fieldMask=c,this.precondition=f,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function yc(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const c=s.data.field(t);e.set(t,c)}}),e}function Yh(s,e,t){const c=new Map;lr(s.length===t.length);for(let f=0;f<t.length;f++){const v=s[f],C=v.transform,N=e.data.field(v.field);c.set(v.field,uh(C,N,t[f]))}return c}function Qh(s,e,t){const c=new Map;for(const f of s){const v=f.transform,C=t.data.field(f.field);c.set(f.field,xu(v,C,e))}return c}class _d extends vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Td extends vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class D{constructor(e,t,c,f){this.batchId=e,this.localWriteTime=t,this.baseMutations=c,this.mutations=f}applyToRemoteDocument(e,t){const c=t.mutationResults;for(let f=0;f<this.mutations.length;f++){const v=this.mutations[f];v.key.isEqual(e.key)&&yd(v,e,c[f])}}applyToLocalView(e,t){for(const c of this.baseMutations)c.key.isEqual(e.key)&&(t=yu(c,e,t,this.localWriteTime));for(const c of this.mutations)c.key.isEqual(e.key)&&(t=yu(c,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const c=Uf();return this.mutations.forEach(f=>{const v=e.get(f.key),C=v.overlayedDocument;let N=this.applyToLocalView(C,v.mutatedFields);N=t.has(f.key)?null:N;const X=gl(C,N);null!==X&&c.set(f.key,X),C.isValidDocument()||C.convertToNoDocument(vr.min())}),c}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ai())}isEqual(e){return this.batchId===e.batchId&&Wu(this.mutations,e.mutations,(t,c)=>jl(t,c))&&Wu(this.baseMutations,e.baseMutations,(t,c)=>jl(t,c))}}class _{constructor(e,t,c,f){this.batch=e,this.commitVersion=t,this.mutationResults=c,this.docVersions=f}static from(e,t,c){lr(e.mutations.length===c.length);let f=Lg;const v=e.mutations;for(let C=0;C<v.length;C++)f=f.insert(v[C].key,c[C].version);return new _(e,t,c,f)}}class E{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class se{constructor(e,t){this.count=e,this.unchangedNames=t}}var Z,st;function Nt(s){switch(s){default:return An();case $t.CANCELLED:case $t.UNKNOWN:case $t.DEADLINE_EXCEEDED:case $t.RESOURCE_EXHAUSTED:case $t.INTERNAL:case $t.UNAVAILABLE:case $t.UNAUTHENTICATED:return!1;case $t.INVALID_ARGUMENT:case $t.NOT_FOUND:case $t.ALREADY_EXISTS:case $t.PERMISSION_DENIED:case $t.FAILED_PRECONDITION:case $t.ABORTED:case $t.OUT_OF_RANGE:case $t.UNIMPLEMENTED:case $t.DATA_LOSS:return!0}}function mn(s){if(void 0===s)return zi("GRPC error has no .code"),$t.UNKNOWN;switch(s){case Z.OK:return $t.OK;case Z.CANCELLED:return $t.CANCELLED;case Z.UNKNOWN:return $t.UNKNOWN;case Z.DEADLINE_EXCEEDED:return $t.DEADLINE_EXCEEDED;case Z.RESOURCE_EXHAUSTED:return $t.RESOURCE_EXHAUSTED;case Z.INTERNAL:return $t.INTERNAL;case Z.UNAVAILABLE:return $t.UNAVAILABLE;case Z.UNAUTHENTICATED:return $t.UNAUTHENTICATED;case Z.INVALID_ARGUMENT:return $t.INVALID_ARGUMENT;case Z.NOT_FOUND:return $t.NOT_FOUND;case Z.ALREADY_EXISTS:return $t.ALREADY_EXISTS;case Z.PERMISSION_DENIED:return $t.PERMISSION_DENIED;case Z.FAILED_PRECONDITION:return $t.FAILED_PRECONDITION;case Z.ABORTED:return $t.ABORTED;case Z.OUT_OF_RANGE:return $t.OUT_OF_RANGE;case Z.UNIMPLEMENTED:return $t.UNIMPLEMENTED;case Z.DATA_LOSS:return $t.DATA_LOSS;default:return An()}}(st=Z||(Z={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";class Pn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return zn}static getOrCreateInstance(){return null===zn&&(zn=new Pn),zn}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let zn=null;function nr(){return new TextEncoder}const Zi=new ra([4294967295,4294967295],0);function Au(s){const e=nr().encode(s),t=new xl;return t.update(e),new Uint8Array(t.digest())}function Ul(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),c=e.getUint32(4,!0),f=e.getUint32(8,!0),v=e.getUint32(12,!0);return[new ra([t,c],0),new ra([f,v],0)]}class bd{constructor(e,t,c){if(this.bitmap=e,this.padding=t,this.hashCount=c,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(c<0)throw new Wc(`Invalid hash count: ${c}`);if(e.length>0&&0===this.hashCount)throw new Wc(`Invalid hash count: ${c}`);if(0===e.length&&0!==t)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ra.fromNumber(this.It)}Et(e,t,c){let f=e.add(t.multiply(ra.fromNumber(c)));return 1===f.compare(Zi)&&(f=new ra([f.getBits(0),f.getBits(1)],0)),f.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Au(e),[c,f]=Ul(t);for(let v=0;v<this.hashCount;v++){const C=this.Et(c,f,v);if(!this.At(C))return!1}return!0}static create(e,t,c){const f=e%8==0?0:8-e%8,v=new Uint8Array(Math.ceil(e/8)),C=new bd(v,f,t);return c.forEach(N=>C.insert(N)),C}insert(e){if(0===this.It)return;const t=Au(e),[c,f]=Ul(t);for(let v=0;v<this.hashCount;v++){const C=this.Et(c,f,v);this.Rt(C)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qc{constructor(e,t,c,f,v){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=c,this.documentUpdates=f,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,t,c){const f=new Map;return f.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,t,c)),new qc(vr.min(),f,new Wi(Cr),Ua(),ai())}}class Kc{constructor(e,t,c,f,v){this.resumeToken=e,this.current=t,this.addedDocuments=c,this.modifiedDocuments=f,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,t,c){return new Kc(c,t,ai(),ai(),ai())}}class _c{constructor(e,t,c,f){this.Pt=e,this.removedTargetIds=t,this.key=c,this.bt=f}}class Mu{constructor(e,t){this.targetId=e,this.Vt=t}}class Vf{constructor(e,t,c=Mo.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=t,this.resumeToken=c,this.cause=f}}class Ed{constructor(){this.St=0,this.Dt=Cd(),this.Ct=Mo.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ai(),t=ai(),c=ai();return this.Dt.forEach((f,v)=>{switch(v){case 0:e=e.add(f);break;case 2:t=t.add(f);break;case 1:c=c.add(f);break;default:An()}}),new Kc(this.Ct,this.xt,e,t,c)}Ft(){this.Nt=!1,this.Dt=Cd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class lh{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ua(),this.zt=Xh(),this.Wt=new Wi(Cr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const c=this.Zt(t);switch(e.state){case 0:this.te(t)&&c.$t(e.resumeToken);break;case 1:c.Ut(),c.kt||c.Ft(),c.$t(e.resumeToken);break;case 2:c.Ut(),c.kt||this.removeTarget(t);break;case 3:this.te(t)&&(c.Kt(),c.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),c.$t(e.resumeToken));break;default:An()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((c,f)=>{this.te(f)&&t(f)})}ne(e){var t;const c=e.targetId,f=e.Vt.count,v=this.se(c);if(v){const C=v.target;if(pc(C))if(0===f){const N=new Fn(C.path);this.Yt(c,N,Bi.newNoDocument(N,vr.min()))}else lr(1===f);else{const N=this.ie(c);if(N!==f){const X=this.re(e,N);0!==X&&(this.ee(c),this.Wt=this.Wt.insert(c,2===X?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Pn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(he,ke,ct){var Bt,on,Mn,rr,cr,wi;const Yi={localCacheCount:ke,existenceFilterCount:ct.count},Di=ct.unchangedNames;return Di&&(Yi.bloomFilter={applied:0===he,hashCount:null!==(Bt=Di?.hashCount)&&void 0!==Bt?Bt:0,bitmapLength:null!==(rr=null===(Mn=null===(on=Di?.bits)||void 0===on?void 0:on.bitmap)||void 0===Mn?void 0:Mn.length)&&void 0!==rr?rr:0,padding:null!==(wi=null===(cr=Di?.bits)||void 0===cr?void 0:cr.padding)&&void 0!==wi?wi:0}),Yi}(X,N,e.Vt))}}}}re(e,t){const{unchangedNames:c,count:f}=e.Vt;if(!c||!c.bits)return 1;const{bits:{bitmap:v="",padding:C=0},hashCount:N=0}=c;let X,he;try{X=Xa(v).toUint8Array()}catch(ke){if(ke instanceof Xd)return To("Decoding the base64 bloom filter in existence filter failed ("+ke.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ke}try{he=new bd(X,C,N)}catch(ke){return To(ke instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",ke),1}return 0===he.It?1:f!==t-this.oe(e.targetId,he)?2:0}oe(e,t){const c=this.Gt.getRemoteKeysForTarget(e);let f=0;return c.forEach(v=>{const C=this.Gt.ue(),N=`projects/${C.projectId}/databases/${C.database}/documents/${v.path.canonicalString()}`;t.vt(N)||(this.Yt(e,v,null),f++)}),f}ce(e){const t=new Map;this.Qt.forEach((v,C)=>{const N=this.se(C);if(N){if(v.current&&pc(N.target)){const X=new Fn(N.target.path);null!==this.jt.get(X)||this.ae(C,X)||this.Yt(C,X,Bi.newNoDocument(X,e))}v.Mt&&(t.set(C,v.Ot()),v.Ft())}});let c=ai();this.zt.forEach((v,C)=>{let N=!0;C.forEachWhile(X=>{const he=this.se(X);return!he||"TargetPurposeLimboResolution"===he.purpose||(N=!1,!1)}),N&&(c=c.add(v))}),this.jt.forEach((v,C)=>C.setReadTime(e));const f=new qc(e,t,this.Wt,this.jt,c);return this.jt=Ua(),this.zt=Xh(),this.Wt=new Wi(Cr),f}Jt(e,t){if(!this.te(e))return;const c=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,c),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,c){if(!this.te(e))return;const f=this.Zt(e);this.ae(e,t)?f.Bt(t,1):f.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),c&&(this.jt=this.jt.insert(t,c))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ed,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ns(Cr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Cn("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ed),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new Wi(Fn.comparator)}function Cd(){return new Wi(Fn.comparator)}const ch={asc:"ASCENDING",desc:"DESCENDING"},Qv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xv={and:"AND",or:"OR"};class E0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(s,e){return s.useProto3Json||xo(e)?e:{value:e}}function Jh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ef(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Um(s,e){return Jh(s,e.toTimestamp())}function Po(s){return lr(!!s),vr.fromTimestamp(function(e){const t=Ol(e);return new as(t.seconds,t.nanos)}(s))}function Vp(s,e){return(t=s,new Ni(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dh(s){const e=Ni.fromString(s);return lr(Hm(e)),e}function tf(s,e){return Vp(s.databaseId,e.path)}function ml(s,e){const t=dh(e);if(t.get(1)!==s.databaseId.projectId)throw new dn($t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new dn($t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Fn(ty(t))}function Jv(s,e){return Vp(s.databaseId,e)}function ey(s){const e=dh(s);return 4===e.length?Ni.emptyPath():ty(e)}function hh(s){return new Ni(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ty(s){return lr(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function fh(s,e,t){return{name:tf(s,e),fields:t.value.mapValue.fields}}function nf(s,e,t){const c=ml(s,e.name),f=Po(e.updateTime),v=e.createTime?Po(e.createTime):vr.min(),C=new Si({mapValue:{fields:e.fields}}),N=Bi.newFoundDocument(c,f,v,C);return t&&N.setHasCommittedMutations(),t?N.setHasCommittedMutations():N}function Va(s,e){let t;if(e instanceof Bl)t={update:fh(s,e.key,e.value)};else if(e instanceof _d)t={delete:tf(s,e.key)};else if(e instanceof _u)t={update:fh(s,e.key,e.data),updateMask:S0(e.fieldMask)};else{if(!(e instanceof Td))return An();t={verify:tf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(c=>function(f,v){const C=v.transform;if(C instanceof vd)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof fl)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof zc)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof gc)return{fieldPath:v.field.canonicalString(),increment:C.gt};throw An()}(0,c))),e.precondition.isNone||(t.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:Um(s,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:An()),t;var f}function Hp(s,e){const t=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?Ms.updateTime(Po(f.updateTime)):void 0!==f.exists?Ms.exists(f.exists):Ms.none():Ms.none(),c=e.updateTransforms?e.updateTransforms.map(f=>function(v,C){let N=null;"setToServerValue"in C?(lr("REQUEST_TIME"===C.setToServerValue),N=new vd):"appendMissingElements"in C?N=new fl(C.appendMissingElements.values||[]):"removeAllFromArray"in C?N=new zc(C.removeAllFromArray.values||[]):"increment"in C?N=new gc(v,C.increment):An();const X=gi.fromServerFormat(C.fieldPath);return new mc(X,N)}(s,f)):[];var f;if(e.update){const f=ml(s,e.update.name),v=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new sa((e.updateMask.fieldPaths||[]).map(he=>gi.fromServerFormat(he)));return new _u(f,v,C,t,c)}return new Bl(f,v,t,c)}if(e.delete){const f=ml(s,e.delete);return new _d(f,t)}if(e.verify){const f=ml(s,e.verify);return new Td(f,t)}return An()}function ny(s,e){return{documents:[Jv(s,e.path)]}}function rf(s,e){const t={structuredQuery:{}},c=e.path;null!==e.collectionGroup?(t.parent=Jv(s,c),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jv(s,c.popLast()),t.structuredQuery.from=[{collectionId:c.lastSegment()}]);const f=function(X){if(0!==X.length)return iy(us.create(X,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const v=function(X){if(0!==X.length)return X.map(he=>{return{field:ph((ke=he).field),direction:wd(ke.dir)};var ke})}(e.orderBy);v&&(t.structuredQuery.orderBy=v);const C=Fg(s,e.limit);var N,X;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function Vm(s){let e=ey(s.parent);const t=s.structuredQuery,c=t.from?t.from.length:0;let f=null;if(c>0){lr(1===c);const ke=t.from[0];ke.allDescendants?f=ke.collectionId:e=e.child(ke.collectionId)}let v=[];t.where&&(v=function(ke){const ct=ry(ke);return ct instanceof us&&jc(ct)?ct.getFilters():[ct]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ke=>{return new Qu($f((ct=ke).field),function(Bt){switch(Bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ct.direction));var ct}));let N=null;t.limit&&(N=function(ke){let ct;return ct="object"==typeof ke?ke.value:ke,xo(ct)?null:ct}(t.limit));let X=null;var ke;t.startAt&&(X=new ba((ke=t.startAt).values||[],!!ke.before));let he=null;return t.endAt&&(he=function(ke){return new ba(ke.values||[],!ke.before)}(t.endAt)),zh(e,f,C,v,N,"F",X,he)}function ry(s){return void 0!==s.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$f(e.unaryFilter.field);return Pi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const c=$f(e.unaryFilter.field);return Pi.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=$f(e.unaryFilter.field);return Pi.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=$f(e.unaryFilter.field);return Pi.create(v,"!=",{nullValue:"NULL_VALUE"});default:return An()}}(s):void 0!==s.fieldFilter?Pi.create($f((e=s).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return An()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==s.compositeFilter?function(e){return us.create(e.compositeFilter.filters.map(t=>ry(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return An()}}(e.compositeFilter.op))}(s):An();var e}function wd(s){return ch[s]}function sf(s){return Qv[s]}function Bg(s){return Xv[s]}function ph(s){return{fieldPath:s.canonicalString()}}function $f(s){return gi.fromServerFormat(s.fieldPath)}function iy(s){return s instanceof Pi?function(e){if("=="===e.op){if(Rt(e.value))return{unaryFilter:{field:ph(e.field),op:"IS_NAN"}};if(yt(e.value))return{unaryFilter:{field:ph(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rt(e.value))return{unaryFilter:{field:ph(e.field),op:"IS_NOT_NAN"}};if(yt(e.value))return{unaryFilter:{field:ph(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ph(e.field),op:sf(e.op),value:e.value}}}(s):s instanceof us?function(e){const t=e.getFilters().map(c=>iy(c));return 1===t.length?t[0]:{compositeFilter:{op:Bg(e.op),filters:t}}}(s):An()}function S0(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hm(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}class Tc{constructor(e,t,c,f,v=vr.min(),C=vr.min(),N=Mo.EMPTY_BYTE_STRING,X=null){this.target=e,this.targetId=t,this.purpose=c,this.sequenceNumber=f,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=N,this.expectedCount=X}withSequenceNumber(e){return new Tc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $m{constructor(e){this.fe=e}}function Ug(s,e){const t=e.key,c={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())c.document={name:tf(f=s.fe,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:Jh(f,v.version.toTimestamp()),createTime:Jh(f,v.createTime.toTimestamp())};else if(e.isNoDocument())c.noDocument={path:t.path.toArray(),readTime:Zc(e.version)};else{if(!e.isUnknownDocument())return An();c.unknownDocument={path:t.path.toArray(),version:Zc(e.version)}}var f,v;return c}function Dd(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Zc(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ku(s){const e=new as(s.seconds,s.nanoseconds);return vr.fromTimestamp(e)}function vl(s,e){const t=(e.baseMutations||[]).map(v=>Hp(s.fe,v));for(let v=0;v<e.mutations.length-1;++v)v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(e.mutations[v].updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v);const c=e.mutations.map(v=>Hp(s.fe,v)),f=as.fromMillis(e.localWriteTimeMs);return new D(e.batchId,f,t,c)}function af(s){const e=ku(s.readTime),t=void 0!==s.lastLimboFreeSnapshotVersion?ku(s.lastLimboFreeSnapshotVersion):vr.min();let c;var f;return void 0!==s.query.documents?(lr(1===(f=s.query).documents.length),c=Ea(rh(ey(f.documents[0])))):c=Ea(Vm(s.query)),new Tc(c,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Mo.fromBase64String(s.resumeToken))}function zm(s,e){const t=Zc(e.snapshotVersion),c=Zc(e.lastLimboFreeSnapshotVersion);let f;f=pc(e.target)?ny(s.fe,e.target):rf(s.fe,e.target);const v=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uc(e.target),readTime:t,resumeToken:v,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:c,query:f}}function Gf(s){const e=Vm({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Hc(e,e.limit,"L"):e}function sy(s,e){return new E(e.largestBatchId,Hp(s.fe,e.overlayMutation))}function w0(s,e){const t=e.path.lastSegment();return[s,Fs(e.path.popLast()),t]}function D0(s,e,t,c){return{indexId:s,uid:e.uid||"",sequenceNumber:t,readTime:Zc(c.readTime),documentKey:Fs(c.documentKey.path),largestBatchId:c.largestBatchId}}class Vg{getBundleMetadata(e,t){return uf(e).get(t).next(c=>{if(c)return{id:(f=c).bundleId,createTime:ku(f.createTime),version:f.version};var f})}saveBundleMetadata(e,t){return uf(e).put({bundleId:(c=t).id,createTime:Zc(Po(c.createTime)),version:c.version});var c}getNamedQuery(e,t){return oy(e).get(t).next(c=>{if(c)return{name:(f=c).name,query:Gf(f.bundledQuery),readTime:ku(f.readTime)};var f})}saveNamedQuery(e,t){return oy(e).put({name:(c=t).name,readTime:Zc(Po(c.readTime)),bundledQuery:c.bundledQuery});var c}}function uf(s){return ao(s,"bundles")}function oy(s){return ao(s,"namedQueries")}class Hg{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Hg(e,t.uid||"")}getOverlay(e,t){return zf(e).get(w0(this.userId,t)).next(c=>c?sy(this.serializer,c):null)}getOverlays(e,t){const c=rl();return Je.forEach(t,f=>this.getOverlay(e,f).next(v=>{null!==v&&c.set(f,v)})).next(()=>c)}saveOverlays(e,t,c){const f=[];return c.forEach((v,C)=>{const N=new E(t,C);f.push(this.we(e,N))}),Je.waitFor(f)}removeOverlaysForBatchId(e,t,c){const f=new Set;t.forEach(C=>f.add(Fs(C.getCollectionPath())));const v=[];return f.forEach(C=>{const N=IDBKeyRange.bound([this.userId,C,c],[this.userId,C,c+1],!1,!0);v.push(zf(e).J("collectionPathOverlayIndex",N))}),Je.waitFor(v)}getOverlaysForCollection(e,t,c){const f=rl(),v=Fs(t),C=IDBKeyRange.bound([this.userId,v,c],[this.userId,v,Number.POSITIVE_INFINITY],!0);return zf(e).j("collectionPathOverlayIndex",C).next(N=>{for(const X of N){const he=sy(this.serializer,X);f.set(he.getKey(),he)}return f})}getOverlaysForCollectionGroup(e,t,c,f){const v=rl();let C;const N=IDBKeyRange.bound([this.userId,t,c],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).X({index:"collectionGroupOverlayIndex",range:N},(X,he,ke)=>{const ct=sy(this.serializer,he);v.size()<f||ct.largestBatchId===C?(v.set(ct.getKey(),ct),C=ct.largestBatchId):ke.done()}).next(()=>v)}we(e,t){return zf(e).put(function(c,f,v){const[C,N,X]=w0(f,v.mutation.key);return{userId:f,collectionPath:N,documentId:X,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:Va(c.fe,v.mutation)}}(this.serializer,this.userId,t))}}function zf(s){return ao(s,"documentOverlays")}class lf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ko(e.integerValue));else if("doubleValue"in e){const c=ko(e.doubleValue);isNaN(c)?this.ye(t,13):(this.ye(t,15),kl(c)?t.pe(0):t.pe(c))}else if("timestampValue"in e){const c=e.timestampValue;this.ye(t,20),"string"==typeof c?t.Ie(c):(t.Ie(`${c.seconds||""}`),t.pe(c.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Xa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const c=e.geoPointValue;this.ye(t,45),t.pe(c.latitude||0),t.pe(c.longitude||0)}else"mapValue"in e?Hn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):An()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const c=e.fields||{};this.ye(t,55);for(const f of Object.keys(c))this.Te(f,t),this.me(c[f],t)}Pe(e,t){const c=e.values||[];this.ye(t,50);for(const f of c)this.me(f,t)}ve(e,t){this.ye(t,37),Fn.fromName(e).path.forEach(c=>{this.ye(t,60),this.be(c,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function I0(s){if(0===s)return 8;let e=0;return!(s>>4)&&(e+=4,s<<=4),!(s>>6)&&(e+=2,s<<=2),!(s>>7)&&(e+=1),e}function Wm(s){const e=64-function(t){let c=0;for(let f=0;f<8;++f){const v=I0(255&t[f]);if(c+=v,8!==v)break}return c}(s);return Math.ceil(e/8)}lf.Ve=new lf;class x0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let c=t.next();for(;!c.done;)this.De(c.value),c=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let c=t.next();for(;!c.done;)this.Ne(c.value),c=t.next();this.ke()}Me(e){for(const t of e){const c=t.charCodeAt(0);if(c<128)this.De(c);else if(c<2048)this.De(960|c>>>6),this.De(128|63&c);else if(t<"\ud800"||"\udbff"<t)this.De(480|c>>>12),this.De(128|63&c>>>6),this.De(128|63&c);else{const f=t.codePointAt(0);this.De(240|f>>>18),this.De(128|63&f>>>12),this.De(128|63&f>>>6),this.De(128|63&f)}}this.Ce()}$e(e){for(const t of e){const c=t.charCodeAt(0);if(c<128)this.Ne(c);else if(c<2048)this.Ne(960|c>>>6),this.Ne(128|63&c);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|c>>>12),this.Ne(128|63&c>>>6),this.Ne(128|63&c);else{const f=t.codePointAt(0);this.Ne(240|f>>>18),this.Ne(128|63&f>>>12),this.Ne(128|63&f>>>6),this.Ne(128|63&f)}}this.ke()}Oe(e){const t=this.Fe(e),c=Wm(t);this.Be(1+c),this.buffer[this.position++]=255&c;for(let f=t.length-c;f<t.length;++f)this.buffer[this.position++]=255&t[f]}Le(e){const t=this.Fe(e),c=Wm(t);this.Be(1+c),this.buffer[this.position++]=~(255&c);for(let f=t.length-c;f<t.length;++f)this.buffer[this.position++]=~(255&t[f])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(f){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,f,!1),new Uint8Array(v.buffer)}(e),c=0!=(128&t[0]);t[0]^=c?255:128;for(let f=1;f<t.length;++f)t[f]^=c?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let c=2*this.buffer.length;c<t&&(c=t);const f=new Uint8Array(c);f.set(this.buffer),this.buffer=f}}class ay{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $g{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Wf{constructor(){this.je=new x0,this.ze=new ay(this.je),this.We=new $g(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Id{constructor(e,t,c,f){this.indexId=e,this.documentKey=t,this.arrayValue=c,this.directionalValue=f}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,c=new Uint8Array(t);return c.set(this.directionalValue,0),t!==e?c.set([0],this.directionalValue.length):++c[c.length-1],new Id(this.indexId,this.documentKey,this.arrayValue,c)}}function gh(s,e){let t=s.indexId-e.indexId;return 0!==t?t:(t=Yo(s.arrayValue,e.arrayValue),0!==t?t:(t=Yo(s.directionalValue,e.directionalValue),0!==t?t:Fn.comparator(s.documentKey,e.documentKey)))}function Yo(s,e){for(let t=0;t<s.length&&t<e.length;++t){const c=s[t]-e[t];if(0!==c)return c}return s.length-e.length}class A0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const c=t;c.isInequality()?this.Ze=c:this.Xe.push(c)}}tn(e){lr(e.collectionGroup===this.collectionId);const t=R(e);if(void 0!==t&&!this.en(t))return!1;const c=I(e);let f=new Set,v=0,C=0;for(;v<c.length&&this.en(c[v]);++v)f=f.add(c[v].fieldPath.canonicalString());if(v===c.length)return!0;if(void 0!==this.Ze){if(!f.has(this.Ze.field.canonicalString())){const N=c[v];if(!this.nn(this.Ze,N)||!this.sn(this.Ye[C++],N))return!1}++v}for(;v<c.length;++v)if(C>=this.Ye.length||!this.sn(this.Ye[C++],c[v]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Gg(s){var e,t;if(lr(s instanceof Pi||s instanceof us),s instanceof Pi){if(s instanceof Og){const f=(null===(t=null===(e=s.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(v=>Pi.create(s.field,"==",v)))||[];return us.create(f,"or")}return s}const c=s.filters.map(f=>Gg(f));return us.create(c,s.op)}function qm(s){if(0===s.getFilters().length)return[];const e=Zm(Gg(s));return lr(Km(e)),zg(e)||Wg(e)?[e]:e.getFilters()}function zg(s){return s instanceof Pi}function Wg(s){return s instanceof us&&jc(s)}function Km(s){return zg(s)||Wg(s)||function(e){if(e instanceof us&&hl(e)){for(const t of e.getFilters())if(!zg(t)&&!Wg(t))return!1;return!0}return!1}(s)}function Zm(s){if(lr(s instanceof Pi||s instanceof us),s instanceof Pi)return s;if(1===s.filters.length)return Zm(s.filters[0]);const e=s.filters.map(c=>Zm(c));let t=us.create(e,s.op);return t=qg(t),Km(t)?t:(lr(t instanceof us),lr(fc(t)),lr(t.filters.length>1),t.filters.reduce((c,f)=>Ym(c,f)))}function Ym(s,e){let t;return lr(s instanceof Pi||s instanceof us),lr(e instanceof Pi||e instanceof us),t=s instanceof Pi?e instanceof Pi?us.create([s,e],"and"):Qm(s,e):e instanceof Pi?Qm(e,s):function(c,f){if(lr(c.filters.length>0&&f.filters.length>0),fc(c)&&fc(f))return Ap(c,f.getFilters());const v=hl(c)?c:f,C=hl(c)?f:c,N=v.filters.map(X=>Ym(X,C));return us.create(N,"or")}(s,e),qg(t)}function Qm(s,e){if(fc(e))return Ap(e,s.getFilters());{const t=e.filters.map(c=>Ym(s,c));return us.create(t,"or")}}function qg(s){if(lr(s instanceof Pi||s instanceof us),s instanceof Pi)return s;const e=s.getFilters();if(1===e.length)return qg(e[0]);if(Hh(s))return s;const t=e.map(f=>qg(f)),c=[];return t.forEach(f=>{f instanceof Pi?c.push(f):f instanceof us&&(f.op===s.op?c.push(...f.filters):c.push(f))}),1===c.length?c[0]:us.create(c,s.op)}class S_{constructor(){this.rn=new xd}addToCollectionParentIndex(e,t){return this.rn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(er.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(er.min())}updateCollectionGroup(e,t,c){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class xd{constructor(){this.index={}}add(e){const t=e.lastSegment(),c=e.popLast(),f=this.index[t]||new ns(Ni.comparator),v=!f.has(c);return this.index[t]=f.add(c),v}has(e){const t=e.lastSegment(),c=e.popLast(),f=this.index[t];return f&&f.has(c)}getEntries(e){return(this.index[e]||new ns(Ni.comparator)).toArray()}}const ti=new Uint8Array(0);class $p{constructor(e,t){this.user=e,this.databaseId=t,this.on=new xd,this.un=new nl(c=>Uc(c),(c,f)=>th(c,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const c=t.lastSegment(),f=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const v={collectionId:c,parent:Fs(f)};return Kg(e).put(v)}return Je.resolve()}getCollectionParents(e,t){const c=[],f=IDBKeyRange.bound([t,""],[oo(t),""],!1,!0);return Kg(e).j(f).next(v=>{for(const C of v){if(C.collectionId!==t)break;c.push(Ao(C.parent))}return c})}addFieldIndex(e,t){const c=Kf(e),f={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var C;delete f.indexId;const v=c.add(f);if(t.indexState){const C=cf(e);return v.next(N=>{C.put(D0(N,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return v.next()}deleteFieldIndex(e,t){const c=Kf(e),f=cf(e),v=qf(e);return c.delete(t.indexId).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const c=qf(e);let f=!0;const v=new Map;return Je.forEach(this.cn(t),C=>this.an(e,C).next(N=>{f&&(f=!!N),v.set(C,N)})).next(()=>{if(f){let C=ai();const N=[];return Je.forEach(v,(X,he)=>{var ke;Cn("IndexedDbIndexManager",`Using index ${ke=X,`id=${ke.indexId}|cg=${ke.collectionGroup}|f=${ke.fields.map(Di=>`${Di.fieldPath}:${Di.kind}`).join(",")}`} to execute ${Uc(t)}`);const ct=function(Di,la){const No=R(la);if(void 0===No)return null;for(const Js of Gh(Di,No.fieldPath))switch(Js.op){case"array-contains-any":return Js.value.arrayValue.values||[];case"array-contains":return[Js.value]}return null}(he,X),Bt=function(Di,la){const No=new Map;for(const Js of I(la))for(const ju of Gh(Di,Js.fieldPath))switch(ju.op){case"==":case"in":No.set(Js.fieldPath.canonicalString(),ju.value);break;case"not-in":case"!=":return No.set(Js.fieldPath.canonicalString(),ju.value),Array.from(No.values())}return null}(he,X),on=function(Di,la){const No=[];let Js=!0;for(const ju of I(la)){const Sp=0===ju.kind?Rp(Di,ju.fieldPath,Di.startAt):nh(Di,ju.fieldPath,Di.startAt);No.push(Sp.value),Js&&(Js=Sp.inclusive)}return new ba(No,Js)}(he,X),Mn=function(Di,la){const No=[];let Js=!0;for(const ju of I(la)){const Sp=0===ju.kind?nh(Di,ju.fieldPath,Di.endAt):Rp(Di,ju.fieldPath,Di.endAt);No.push(Sp.value),Js&&(Js=Sp.inclusive)}return new ba(No,Js)}(he,X),rr=this.hn(X,he,on),cr=this.hn(X,he,Mn),wi=this.ln(X,he,Bt),Yi=this.fn(X.indexId,ct,rr,on.inclusive,cr,Mn.inclusive,wi);return Je.forEach(Yi,Di=>c.H(Di,t.limit).next(la=>{la.forEach(No=>{const Js=Fn.fromSegments(No.documentKey);C.has(Js)||(C=C.add(Js),N.push(Js))})}))}).next(()=>N)}return Je.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qm(us.create(e.filters,"and")).map(c=>jf(e.path,e.collectionGroup,e.orderBy,c.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,c,f,v,C,N){const X=(null!=t?t.length:1)*Math.max(c.length,v.length),he=X/(null!=t?t.length:1),ke=[];for(let ct=0;ct<X;++ct){const Bt=t?this.dn(t[ct/he]):ti,on=this.wn(e,Bt,c[ct%he],f),Mn=this._n(e,Bt,v[ct%he],C),rr=N.map(cr=>this.wn(e,Bt,cr,!0));ke.push(...this.createRange(on,Mn,rr))}return ke}wn(e,t,c,f){const v=new Id(e,Fn.empty(),t,c);return f?v:v.Je()}_n(e,t,c,f){const v=new Id(e,Fn.empty(),t,c);return f?v.Je():v}an(e,t){const c=new A0(t),f=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,f).next(v=>{let C=null;for(const N of v)c.tn(N)&&(!C||N.fields.length>C.fields.length)&&(C=N);return C})}getIndexType(e,t){let c=2;const f=this.cn(t);return Je.forEach(f,v=>this.an(e,v).next(C=>{C?0!==c&&C.fields.length<function(N){let X=new ns(gi.comparator),he=!1;for(const ke of N.filters)for(const ct of ke.getFlattenedFilters())ct.field.isKeyField()||("array-contains"===ct.op||"array-contains-any"===ct.op?he=!0:X=X.add(ct.field));for(const ke of N.orderBy)ke.field.isKeyField()||(X=X.add(ke.field));return X.size+(he?1:0)}(v)&&(c=1):c=0})).next(()=>null!==t.limit&&f.length>1&&2===c?1:c)}mn(e,t){const c=new Wf;for(const f of I(e)){const v=t.data.field(f.fieldPath);if(null==v)return null;const C=c.He(f.kind);lf.Ve._e(v,C)}return c.Qe()}dn(e){const t=new Wf;return lf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const c=new Wf;return lf.Ve._e(H(this.databaseId,t),c.He(function(f){const v=I(f);return 0===v.length?0:v[v.length-1].kind}(e))),c.Qe()}ln(e,t,c){if(null===c)return[];let f=[];f.push(new Wf);let v=0;for(const C of I(e)){const N=c[v++];for(const X of f)if(this.yn(t,C.fieldPath)&&We(N))f=this.pn(f,C,N);else{const he=X.He(C.kind);lf.Ve._e(N,he)}}return this.In(f)}hn(e,t,c){return this.ln(e,t,c.position)}In(e){const t=[];for(let c=0;c<e.length;++c)t[c]=e[c].Qe();return t}pn(e,t,c){const f=[...e],v=[];for(const C of c.arrayValue.values||[])for(const N of f){const X=new Wf;X.seed(N.Qe()),lf.Ve._e(C,X.He(t.kind)),v.push(X)}return v}yn(e,t){return!!e.filters.find(c=>c instanceof Pi&&c.field.isEqual(t)&&("in"===c.op||"not-in"===c.op))}getFieldIndexes(e,t){const c=Kf(e),f=cf(e);return(t?c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):c.j()).next(v=>{const C=[];return Je.forEach(v,N=>f.get([N.indexId,this.uid]).next(X=>{C.push(function(he,ke){const ct=ke?new Ue(ke.sequenceNumber,new er(ku(ke.readTime),new Fn(Ao(ke.documentKey)),ke.largestBatchId)):Ue.empty(),Bt=he.fields.map(([on,Mn])=>new de(gi.fromServerFormat(on),Mn));return new k(he.indexId,he.collectionGroup,Bt,ct)}(N,X))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((c,f)=>{const v=c.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==v?v:Cr(c.collectionGroup,f.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,c){const f=Kf(e),v=cf(e);return this.Tn(e).next(C=>f.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(N=>Je.forEach(N,X=>v.put(D0(X.indexId,this.user,C,c)))))}updateIndexEntries(e,t){const c=new Map;return Je.forEach(t,(f,v)=>{const C=c.get(f.collectionGroup);return(C?Je.resolve(C):this.getFieldIndexes(e,f.collectionGroup)).next(N=>(c.set(f.collectionGroup,N),Je.forEach(N,X=>this.En(e,f,X).next(he=>{const ke=this.An(v,X);return he.isEqual(ke)?Je.resolve():this.vn(e,v,X,he,ke)}))))})}Rn(e,t,c,f){return qf(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.gn(c,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,c,f){return qf(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.gn(c,t.key),t.key.path.toArray()])}En(e,t,c){const f=qf(e);let v=new ns(gh);return f.X({index:"documentKeyIndex",range:IDBKeyRange.only([c.indexId,this.uid,this.gn(c,t)])},(C,N)=>{v=v.add(new Id(c.indexId,t,N.arrayValue,N.directionalValue))}).next(()=>v)}An(e,t){let c=new ns(gh);const f=this.mn(t,e);if(null==f)return c;const v=R(t);if(null!=v){const C=e.data.field(v.fieldPath);if(We(C))for(const N of C.arrayValue.values||[])c=c.add(new Id(t.indexId,e.key,this.dn(N),f))}else c=c.add(new Id(t.indexId,e.key,ti,f));return c}vn(e,t,c,f,v){Cn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(N,X,he,ke,ct){const Bt=N.getIterator(),on=X.getIterator();let Mn=hc(Bt),rr=hc(on);for(;Mn||rr;){let cr=!1,wi=!1;if(Mn&&rr){const Yi=he(Mn,rr);Yi<0?wi=!0:Yi>0&&(cr=!0)}else null!=Mn?wi=!0:cr=!0;cr?(ke(rr),rr=hc(on)):wi?(ct(Mn),Mn=hc(Bt)):(Mn=hc(Bt),rr=hc(on))}}(f,v,gh,N=>{C.push(this.Rn(e,t,c,N))},N=>{C.push(this.Pn(e,t,c,N))}),Je.waitFor(C)}Tn(e){let t=1;return cf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(c,f,v)=>{v.done(),t=f.sequenceNumber+1}).next(()=>t)}createRange(e,t,c){c=c.sort((C,N)=>gh(C,N)).filter((C,N,X)=>!N||0!==gh(C,X[N-1]));const f=[];f.push(e);for(const C of c){const N=gh(C,e),X=gh(C,t);if(0===N)f[0]=e.Je();else if(N>0&&X<0)f.push(C),f.push(C.Je());else if(X>0)break}f.push(t);const v=[];for(let C=0;C<f.length;C+=2){if(this.bn(f[C],f[C+1]))return[];v.push(IDBKeyRange.bound([f[C].indexId,this.uid,f[C].arrayValue,f[C].directionalValue,ti,[]],[f[C+1].indexId,this.uid,f[C+1].arrayValue,f[C+1].directionalValue,ti,[]]))}return v}bn(e,t){return gh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Xm)}getMinOffset(e,t){return Je.mapArray(this.cn(t),c=>this.an(e,c).next(f=>f||An())).next(Xm)}}function Kg(s){return ao(s,"collectionParents")}function qf(s){return ao(s,"indexEntries")}function Kf(s){return ao(s,"indexConfiguration")}function cf(s){return ao(s,"indexState")}function Xm(s){lr(0!==s.length);let e=s[0].indexState.offset,t=e.largestBatchId;for(let c=1;c<s.length;c++){const f=s[c].indexState.offset;jn(f,e)<0&&(e=f),t<f.largestBatchId&&(t=f.largestBatchId)}return new er(e.readTime,e.documentKey,t)}const Jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class uu{constructor(e,t,c){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=c}static withCacheSize(e){return new uu(e,uu.DEFAULT_COLLECTION_PERCENTILE,uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zg(s,e,t){const c=s.store("mutations"),f=s.store("documentMutations"),v=[],C=IDBKeyRange.only(t.batchId);let N=0;const X=c.X({range:C},(ke,ct,Bt)=>(N++,Bt.delete()));v.push(X.next(()=>{lr(1===N)}));const he=[];for(const ke of t.mutations){const ct=mu(e,ke.key.path,t.batchId);v.push(f.delete(ct)),he.push(ke.key)}return Je.waitFor(v).next(()=>he)}function ev(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw An();e=s.noDocument}return JSON.stringify(e).length}uu.DEFAULT_COLLECTION_PERCENTILE=10,uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uu.DEFAULT=new uu(41943040,uu.DEFAULT_COLLECTION_PERCENTILE,uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uu.DISABLED=new uu(-1,0,0);class Zf{constructor(e,t,c,f){this.userId=e,this.serializer=t,this.indexManager=c,this.referenceDelegate=f,this.Vn={}}static de(e,t,c,f){lr(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new Zf(v,t,c,f)}checkEmpty(e){let t=!0;const c=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).X({index:"userMutationsIndex",range:c},(f,v,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,c,f){const v=mh(e),C=bc(e);return C.add({}).next(N=>{lr("number"==typeof N);const X=new D(N,t,c,f),he=function(Bt,on,Mn){const rr=Mn.baseMutations.map(wi=>Va(Bt.fe,wi)),cr=Mn.mutations.map(wi=>Va(Bt.fe,wi));return{userId:on,batchId:Mn.batchId,localWriteTimeMs:Mn.localWriteTime.toMillis(),baseMutations:rr,mutations:cr}}(this.serializer,this.userId,X),ke=[];let ct=new ns((Bt,on)=>Cr(Bt.canonicalString(),on.canonicalString()));for(const Bt of f){const on=mu(this.userId,Bt.key.path,N);ct=ct.add(Bt.key.path.popLast()),ke.push(C.put(he)),ke.push(v.put(on,Fh))}return ct.forEach(Bt=>{ke.push(this.indexManager.addToCollectionParentIndex(e,Bt))}),e.addOnCommittedListener(()=>{this.Vn[N]=X.keys()}),Je.waitFor(ke).next(()=>X)})}lookupMutationBatch(e,t){return bc(e).get(t).next(c=>c?(lr(c.userId===this.userId),vl(this.serializer,c)):null)}Sn(e,t){return this.Vn[t]?Je.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(c=>{if(c){const f=c.keys();return this.Vn[t]=f,f}return null})}getNextMutationBatchAfterBatchId(e,t){const c=t+1,f=IDBKeyRange.lowerBound([this.userId,c]);let v=null;return bc(e).X({index:"userMutationsIndex",range:f},(C,N,X)=>{N.userId===this.userId&&(lr(N.batchId>=c),v=vl(this.serializer,N)),X.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let c=-1;return bc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(f,v,C)=>{c=v.batchId,C.done()}).next(()=>c)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).j("userMutationsIndex",t).next(c=>c.map(f=>vl(this.serializer,f)))}getAllMutationBatchesAffectingDocumentKey(e,t){const c=ad(this.userId,t.path),f=IDBKeyRange.lowerBound(c),v=[];return mh(e).X({range:f},(C,N,X)=>{const[he,ke,ct]=C,Bt=Ao(ke);if(he===this.userId&&t.path.isEqual(Bt))return bc(e).get(ct).next(on=>{if(!on)throw An();lr(on.userId===this.userId),v.push(vl(this.serializer,on))});X.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let c=new ns(Cr);const f=[];return t.forEach(v=>{const C=ad(this.userId,v.path),N=IDBKeyRange.lowerBound(C),X=mh(e).X({range:N},(he,ke,ct)=>{const[Bt,on,Mn]=he,rr=Ao(on);Bt===this.userId&&v.path.isEqual(rr)?c=c.add(Mn):ct.done()});f.push(X)}),Je.waitFor(f).next(()=>this.Dn(e,c))}getAllMutationBatchesAffectingQuery(e,t){const c=t.path,f=c.length+1,v=ad(this.userId,c),C=IDBKeyRange.lowerBound(v);let N=new ns(Cr);return mh(e).X({range:C},(X,he,ke)=>{const[ct,Bt,on]=X,Mn=Ao(Bt);ct===this.userId&&c.isPrefixOf(Mn)?Mn.length===f&&(N=N.add(on)):ke.done()}).next(()=>this.Dn(e,N))}Dn(e,t){const c=[],f=[];return t.forEach(v=>{f.push(bc(e).get(v).next(C=>{if(null===C)throw An();lr(C.userId===this.userId),c.push(vl(this.serializer,C))}))}),Je.waitFor(f).next(()=>c)}removeMutationBatch(e,t){return Zg(e.ht,this.userId,t).next(c=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Je.forEach(c,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Je.resolve();const c=IDBKeyRange.lowerBound([this.userId]),f=[];return mh(e).X({range:c},(v,C,N)=>{if(v[0]===this.userId){const X=Ao(v[1]);f.push(X)}else N.done()}).next(()=>{lr(0===f.length)})})}containsKey(e,t){return tv(e,this.userId,t)}xn(e){return Yg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tv(s,e,t){const c=ad(e,t.path),f=c[1],v=IDBKeyRange.lowerBound(c);let C=!1;return mh(s).X({range:v,Y:!0},(N,X,he)=>{const[ke,ct,Bt]=N;ke===e&&ct===f&&(C=!0),he.done()}).next(()=>C)}function bc(s){return ao(s,"mutations")}function mh(s){return ao(s,"documentMutations")}function Yg(s){return ao(s,"mutationQueues")}class yl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new yl(0)}static Mn(){return new yl(-1)}}class M0{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const c=new yl(t.highestTargetId);return t.highestTargetId=c.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vr.fromTimestamp(new as(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,c){return this.$n(e).next(f=>(f.highestListenSequenceNumber=t,c&&(f.lastRemoteSnapshotVersion=c.toTimestamp()),t>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=t),this.On(e,f)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(c=>(c.targetCount+=1,this.Bn(t,c),this.On(e,c))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ad(e).delete(t.targetId)).next(()=>this.$n(e)).next(c=>(lr(c.targetCount>0),c.targetCount-=1,this.On(e,c)))}removeTargets(e,t,c){let f=0;const v=[];return Ad(e).X((C,N)=>{const X=af(N);X.sequenceNumber<=t&&null===c.get(X.targetId)&&(f++,v.push(this.removeTargetData(e,X)))}).next(()=>Je.waitFor(v)).next(()=>f)}forEachTarget(e,t){return Ad(e).X((c,f)=>{const v=af(f);t(v)})}$n(e){return Gp(e).get("targetGlobalKey").next(t=>(lr(null!==t),t))}On(e,t){return Gp(e).put("targetGlobalKey",t)}Fn(e,t){return Ad(e).put(zm(this.serializer,t))}Bn(e,t){let c=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,c=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,c=!0),c}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const c=Uc(t),f=IDBKeyRange.bound([c,Number.NEGATIVE_INFINITY],[c,Number.POSITIVE_INFINITY]);let v=null;return Ad(e).X({range:f,index:"queryTargetsIndex"},(C,N,X)=>{const he=af(N);th(t,he.target)&&(v=he,X.done())}).next(()=>v)}addMatchingKeys(e,t,c){const f=[],v=Yc(e);return t.forEach(C=>{const N=Fs(C.path);f.push(v.put({targetId:c,path:N})),f.push(this.referenceDelegate.addReference(e,c,C))}),Je.waitFor(f)}removeMatchingKeys(e,t,c){const f=Yc(e);return Je.forEach(t,v=>{const C=Fs(v.path);return Je.waitFor([f.delete([c,C]),this.referenceDelegate.removeReference(e,c,v)])})}removeMatchingKeysForTargetId(e,t){const c=Yc(e),f=IDBKeyRange.bound([t],[t+1],!1,!0);return c.delete(f)}getMatchingKeysForTargetId(e,t){const c=IDBKeyRange.bound([t],[t+1],!1,!0),f=Yc(e);let v=ai();return f.X({range:c,Y:!0},(C,N,X)=>{const he=Ao(C[1]),ke=new Fn(he);v=v.add(ke)}).next(()=>v)}containsKey(e,t){const c=Fs(t.path),f=IDBKeyRange.bound([c],[oo(c)],!1,!0);let v=0;return Yc(e).X({index:"documentTargetsIndex",Y:!0,range:f},([C,N],X,he)=>{0!==C&&(v++,he.done())}).next(()=>v>0)}le(e,t){return Ad(e).get(t).next(c=>c?af(c):null)}}function Ad(s){return ao(s,"targets")}function Gp(s){return ao(s,"targetGlobal")}function Yc(s){return ao(s,"targetDocuments")}function df([s,e],[t,c]){const f=Cr(s,t);return 0===f?Cr(e,c):f}class _l{constructor(e){this.Ln=e,this.buffer=new ns(df),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const c=this.buffer.last();df(t,c)<0&&(this.buffer=this.buffer.delete(c).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qc{constructor(e,t,c){this.garbageCollector=e,this.asyncQueue=t,this.localStore=c,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Cn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ke.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(c){qu(c)?Cn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield Ta(c)}yield t.Qn(3e5)}))}}class nv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(c=>Math.floor(t/100*c))}nthSequenceNumber(e,t){if(0===t)return Je.resolve(Io.ct);const c=new _l(t);return this.jn.forEachTarget(e,f=>c.Kn(f.sequenceNumber)).next(()=>this.jn.Wn(e,f=>c.Kn(f))).next(()=>c.maxValue)}removeTargets(e,t,c){return this.jn.removeTargets(e,t,c)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Cn("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(Jm)):this.getCacheSize(e).next(c=>c<this.params.cacheSizeCollectionThreshold?(Cn("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let c,f,v,C,N,X,he;const ke=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ct=>(ct>this.params.maximumSequenceNumbersToCollect?(Cn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ct}`),f=this.params.maximumSequenceNumbersToCollect):f=ct,C=Date.now(),this.nthSequenceNumber(e,f))).next(ct=>(c=ct,N=Date.now(),this.removeTargets(e,c,t))).next(ct=>(v=ct,X=Date.now(),this.removeOrphanedDocuments(e,c))).next(ct=>(he=Date.now(),wo()<=Ee.in.DEBUG&&Cn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ke}ms\n\tDetermined least recently used ${f} in `+(N-C)+`ms\n\tRemoved ${v} targets in `+(X-N)+`ms\n\tRemoved ${ct} documents in `+(he-X)+`ms\nTotal Duration: ${he-ke}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:v,documentsRemoved:ct})))}}class rv{constructor(e,t){this.db=e,this.garbageCollector=function Qg(s,e){return new nv(s,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(c=>t.next(f=>c+f))}Jn(e){let t=0;return this.Wn(e,c=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(c,f)=>t(f))}addReference(e,t,c){return zp(e,c)}removeReference(e,t,c){return zp(e,c)}removeTargets(e,t,c){return this.db.getTargetCache().removeTargets(e,t,c)}markPotentiallyOrphaned(e,t){return zp(e,t)}Xn(e,t){return function(c,f){let v=!1;return Yg(c).Z(C=>tv(c,C,f).next(N=>(N&&(v=!0),Je.resolve(!N)))).next(()=>v)}(e,t)}removeOrphanedDocuments(e,t){const c=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let v=0;return this.Yn(e,(C,N)=>{if(N<=t){const X=this.Xn(e,C).next(he=>{if(!he)return v++,c.getEntry(e,C).next(()=>(c.removeEntry(C,vr.min()),Yc(e).delete([0,Fs(C.path)])))});f.push(X)}}).next(()=>Je.waitFor(f)).next(()=>c.apply(e)).next(()=>v)}removeTarget(e,t){const c=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,c)}updateLimboDocument(e,t){return zp(e,t)}Yn(e,t){const c=Yc(e);let f,v=Io.ct;return c.X({index:"documentTargetsIndex"},([C,N],{path:X,sequenceNumber:he})=>{0===C?(v!==Io.ct&&t(new Fn(Ao(f)),v),v=he,f=X):v=Io.ct}).next(()=>{v!==Io.ct&&t(new Fn(Ao(f)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zp(s,e){return Yc(s).put((c=s.currentSequenceNumber,{targetId:0,path:Fs(e.path),sequenceNumber:c}));var c}class Xg{constructor(){this.changes=new nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const c=this.changes.get(t);return void 0!==c?Je.resolve(c):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,c){return Xc(e).put(c)}removeEntry(e,t,c){return Xc(e).delete(function(f,v){const C=f.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Dd(v),C[C.length-1]]}(t,c))}updateMetadata(e,t){return this.getMetadata(e).next(c=>(c.byteSize+=t,this.Zn(e,c)))}getEntry(e,t){let c=Bi.newInvalidDocument(t);return Xc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qf(t))},(f,v)=>{c=this.ts(t,v)}).next(()=>c)}es(e,t){let c={size:0,document:Bi.newInvalidDocument(t)};return Xc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qf(t))},(f,v)=>{c={document:this.ts(t,v),size:ev(v)}}).next(()=>c)}getEntries(e,t){let c=Ua();return this.ns(e,t,(f,v)=>{const C=this.ts(f,v);c=c.insert(f,C)}).next(()=>c)}ss(e,t){let c=Ua(),f=new Wi(Fn.comparator);return this.ns(e,t,(v,C)=>{const N=this.ts(v,C);c=c.insert(v,N),f=f.insert(v,ev(C))}).next(()=>({documents:c,rs:f}))}ns(e,t,c){if(t.isEmpty())return Je.resolve();let f=new ns(sv);t.forEach(X=>f=f.add(X));const v=IDBKeyRange.bound(Qf(f.first()),Qf(f.last())),C=f.getIterator();let N=C.getNext();return Xc(e).X({index:"documentKeyIndex",range:v},(X,he,ke)=>{const ct=Fn.fromSegments([...he.prefixPath,he.collectionGroup,he.documentId]);for(;N&&sv(N,ct)<0;)c(N,null),N=C.getNext();N&&N.isEqual(ct)&&(c(N,he),N=C.hasNext()?C.getNext():null),N?ke.G(Qf(N)):ke.done()}).next(()=>{for(;N;)c(N,null),N=C.hasNext()?C.getNext():null})}getDocumentsMatchingQuery(e,t,c,f){const v=t.path,C=[v.popLast().toArray(),v.lastSegment(),Dd(c.readTime),c.documentKey.path.isEmpty()?"":c.documentKey.path.lastSegment()],N=[v.popLast().toArray(),v.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xc(e).j(IDBKeyRange.bound(C,N,!0)).next(X=>{let he=Ua();for(const ke of X){const ct=this.ts(Fn.fromSegments(ke.prefixPath.concat(ke.collectionGroup,ke.documentId)),ke);ct.isFoundDocument()&&(Ll(t,ct)||f.has(ct.key))&&(he=he.insert(ct.key,ct))}return he})}getAllFromCollectionGroup(e,t,c,f){let v=Ua();const C=ly(t,c),N=ly(t,er.max());return Xc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,N,!0)},(X,he,ke)=>{const ct=this.ts(Fn.fromSegments(he.prefixPath.concat(he.collectionGroup,he.documentId)),he);v=v.insert(ct.key,ct),v.size===f&&ke.done()}).next(()=>v)}newChangeBuffer(e){return new k0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iv(e).get("remoteDocumentGlobalKey").next(t=>(lr(!!t),t))}Zn(e,t){return iv(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const c=function Gm(s,e){let t;if(e.document)t=nf(s.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const c=Fn.fromSegments(e.noDocument.path),f=ku(e.noDocument.readTime);t=Bi.newNoDocument(c,f),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return An();{const c=Fn.fromSegments(e.unknownDocument.path),f=ku(e.unknownDocument.version);t=Bi.newUnknownDocument(c,f)}}return e.readTime&&t.setReadTime(function(c){const f=new as(c[0],c[1]);return vr.fromTimestamp(f)}(e.readTime)),t}(this.serializer,t);if(!c.isNoDocument()||!c.version.isEqual(vr.min()))return c}return Bi.newInvalidDocument(e)}}function uy(s){return new Yf(s)}class k0 extends Xg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new nl(c=>c.toString(),(c,f)=>c.isEqual(f))}applyChanges(e){const t=[];let c=0,f=new ns((v,C)=>Cr(v.canonicalString(),C.canonicalString()));return this.changes.forEach((v,C)=>{const N=this.us.get(v);if(t.push(this.os.removeEntry(e,v,N.readTime)),C.isValidDocument()){const X=Ug(this.os.serializer,C);f=f.add(v.path.popLast());const he=ev(X);c+=he-N.size,t.push(this.os.addEntry(e,v,X))}else if(c-=N.size,this.trackRemovals){const X=Ug(this.os.serializer,C.convertToNoDocument(vr.min()));t.push(this.os.addEntry(e,v,X))}}),f.forEach(v=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,v))}),t.push(this.os.updateMetadata(e,c)),Je.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(c=>(this.us.set(t,{size:c.size,readTime:c.document.readTime}),c.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:c,rs:f})=>(f.forEach((v,C)=>{this.us.set(v,{size:C,readTime:c.get(v).readTime})}),c))}}function iv(s){return ao(s,"remoteDocumentGlobal")}function Xc(s){return ao(s,"remoteDocumentsV14")}function Qf(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ly(s,e){const t=e.documentKey.path.toArray();return[s,Dd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sv(s,e){const t=s.path.toArray(),c=e.path.toArray();let f=0;for(let v=0;v<t.length-2&&v<c.length-2;++v)if(f=Cr(t[v],c[v]),f)return f;return f=Cr(t.length,c.length),f||(f=Cr(t[t.length-2],c[c.length-2]),f||Cr(t[t.length-1],c[c.length-1]))}class ov{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class P0{constructor(e,t,c,f){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=c,this.indexManager=f}getDocument(e,t){let c=null;return this.documentOverlayCache.getOverlay(e,t).next(f=>(c=f,this.remoteDocumentCache.getEntry(e,t))).next(f=>(null!==c&&yu(c.mutation,f,sa.empty(),as.now()),f))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(c=>this.getLocalViewOfDocuments(e,c,ai()).next(()=>c))}getLocalViewOfDocuments(e,t,c=ai()){const f=rl();return this.populateOverlays(e,f,t).next(()=>this.computeViews(e,t,f,c).next(v=>{let C=Fl();return v.forEach((N,X)=>{C=C.insert(N,X.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const c=rl();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,ai()))}populateOverlays(e,t,c){const f=[];return c.forEach(v=>{t.has(v)||f.push(v)}),this.documentOverlayCache.getOverlays(e,f).next(v=>{v.forEach((C,N)=>{t.set(C,N)})})}computeViews(e,t,c,f){let v=Ua();const C=oh(),N=oh();return t.forEach((X,he)=>{const ke=c.get(he.key);f.has(he.key)&&(void 0===ke||ke.mutation instanceof _u)?v=v.insert(he.key,he):void 0!==ke?(C.set(he.key,ke.mutation.getFieldMask()),yu(ke.mutation,he,ke.mutation.getFieldMask(),as.now())):C.set(he.key,sa.empty())}),this.recalculateAndSaveOverlays(e,v).next(X=>(X.forEach((he,ke)=>C.set(he,ke)),t.forEach((he,ke)=>{var ct;return N.set(he,new ov(ke,null!==(ct=C.get(he))&&void 0!==ct?ct:null))}),N))}recalculateAndSaveOverlays(e,t){const c=oh();let f=new Wi((C,N)=>C-N),v=ai();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const N of C)N.keys().forEach(X=>{const he=t.get(X);if(null===he)return;let ke=c.get(X)||sa.empty();ke=N.applyToLocalView(he,ke),c.set(X,ke);const ct=(f.get(N.batchId)||ai()).add(X);f=f.insert(N.batchId,ct)})}).next(()=>{const C=[],N=f.getReverseIterator();for(;N.hasNext();){const X=N.getNext(),he=X.key,ke=X.value,ct=Uf();ke.forEach(Bt=>{if(!v.has(Bt)){const on=gl(t.get(Bt),c.get(Bt));null!==on&&ct.set(Bt,on),v=v.add(Bt)}}),C.push(this.documentOverlayCache.saveOverlays(e,he,ct))}return Je.waitFor(C)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(c=>this.recalculateAndSaveOverlays(e,c))}getDocumentsMatchingQuery(e,t,c){return Fn.isDocumentKey((f=t).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,c):this.getDocumentsMatchingCollectionQuery(e,t,c);var f}getNextDocuments(e,t,c,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,c,f).next(v=>{const C=f-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,c.largestBatchId,f-v.size):Je.resolve(rl());let N=-1,X=v;return C.next(he=>Je.forEach(he,(ke,ct)=>(N<ct.largestBatchId&&(N=ct.largestBatchId),v.get(ke)?Je.resolve():this.remoteDocumentCache.getEntry(e,ke).next(Bt=>{X=X.insert(ke,Bt)}))).next(()=>this.populateOverlays(e,he,v)).next(()=>this.computeViews(e,X,he,ai())).next(ke=>({batchId:N,changes:Lp(ke)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fn(t)).next(c=>{let f=Fl();return c.isFoundDocument()&&(f=f.insert(c.key,c)),f})}getDocumentsMatchingCollectionGroupQuery(e,t,c){const f=t.collectionGroup;let v=Fl();return this.indexManager.getCollectionParents(e,f).next(C=>Je.forEach(C,N=>{const X=(he=t,ke=N.child(f),new Xu(ke,null,he.explicitOrderBy.slice(),he.filters.slice(),he.limit,he.limitType,he.startAt,he.endAt));var he,ke;return this.getDocumentsMatchingCollectionQuery(e,X,c).next(he=>{he.forEach((ke,ct)=>{v=v.insert(ke,ct)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,t,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,c.largestBatchId).next(v=>(f=v,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,c,f))).next(v=>{f.forEach((N,X)=>{const he=X.getKey();null===v.get(he)&&(v=v.insert(he,Bi.newInvalidDocument(he)))});let C=Fl();return v.forEach((N,X)=>{const he=f.get(N);void 0!==he&&yu(he.mutation,X,sa.empty(),as.now()),Ll(t,X)&&(C=C.insert(N,X))}),C})}}class w_{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Je.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var c;return this.cs.set(t.id,{id:(c=t).id,version:c.version,createTime:Po(c.createTime)}),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(c=t).name,query:Gf(c.bundledQuery),readTime:Po(c.readTime)}),Je.resolve();var c}}class O0{constructor(){this.overlays=new Wi(Fn.comparator),this.ls=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const c=rl();return Je.forEach(t,f=>this.getOverlay(e,f).next(v=>{null!==v&&c.set(f,v)})).next(()=>c)}saveOverlays(e,t,c){return c.forEach((f,v)=>{this.we(e,t,v)}),Je.resolve()}removeOverlaysForBatchId(e,t,c){const f=this.ls.get(c);return void 0!==f&&(f.forEach(v=>this.overlays=this.overlays.remove(v)),this.ls.delete(c)),Je.resolve()}getOverlaysForCollection(e,t,c){const f=rl(),v=t.length+1,C=new Fn(t.child("")),N=this.overlays.getIteratorFrom(C);for(;N.hasNext();){const X=N.getNext().value,he=X.getKey();if(!t.isPrefixOf(he.path))break;he.path.length===v&&X.largestBatchId>c&&f.set(X.getKey(),X)}return Je.resolve(f)}getOverlaysForCollectionGroup(e,t,c,f){let v=new Wi((he,ke)=>he-ke);const C=this.overlays.getIterator();for(;C.hasNext();){const he=C.getNext().value;if(he.getKey().getCollectionGroup()===t&&he.largestBatchId>c){let ke=v.get(he.largestBatchId);null===ke&&(ke=rl(),v=v.insert(he.largestBatchId,ke)),ke.set(he.getKey(),he)}}const N=rl(),X=v.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((he,ke)=>N.set(he,ke)),!(N.size()>=f)););return Je.resolve(N)}we(e,t,c){const f=this.overlays.get(c.key);if(null!==f){const C=this.ls.get(f.largestBatchId).delete(c.key);this.ls.set(f.largestBatchId,C)}this.overlays=this.overlays.insert(c.key,new E(t,c));let v=this.ls.get(t);void 0===v&&(v=ai(),this.ls.set(t,v)),this.ls.set(t,v.add(c.key))}}class Jg{constructor(){this.fs=new ns(lu.ds),this.ws=new ns(lu._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const c=new lu(e,t);this.fs=this.fs.add(c),this.ws=this.ws.add(c)}gs(e,t){e.forEach(c=>this.addReference(c,t))}removeReference(e,t){this.ys(new lu(e,t))}ps(e,t){e.forEach(c=>this.removeReference(c,t))}Is(e){const t=new Fn(new Ni([])),c=new lu(t,e),f=new lu(t,e+1),v=[];return this.ws.forEachInRange([c,f],C=>{this.ys(C),v.push(C.key)}),v}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Fn(new Ni([])),c=new lu(t,e),f=new lu(t,e+1);let v=ai();return this.ws.forEachInRange([c,f],C=>{v=v.add(C.key)}),v}containsKey(e){const t=new lu(e,0),c=this.fs.firstAfterOrEqual(t);return null!==c&&e.isEqual(c.key)}}class lu{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Fn.comparator(e.key,t.key)||Cr(e.As,t.As)}static _s(e,t){return Cr(e.As,t.As)||Fn.comparator(e.key,t.key)}}class av{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ns(lu.ds)}checkEmpty(e){return Je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,c,f){const v=this.vs;this.vs++;const C=new D(v,t,c,f);this.mutationQueue.push(C);for(const N of f)this.Rs=this.Rs.add(new lu(N.key,v)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return Je.resolve(C)}lookupMutationBatch(e,t){return Je.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const f=this.bs(t+1),v=f<0?0:f;return Je.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const c=new lu(t,0),f=new lu(t,Number.POSITIVE_INFINITY),v=[];return this.Rs.forEachInRange([c,f],C=>{const N=this.Ps(C.As);v.push(N)}),Je.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let c=new ns(Cr);return t.forEach(f=>{const v=new lu(f,0),C=new lu(f,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([v,C],N=>{c=c.add(N.As)})}),Je.resolve(this.Vs(c))}getAllMutationBatchesAffectingQuery(e,t){const c=t.path,f=c.length+1;let v=c;Fn.isDocumentKey(v)||(v=v.child(""));const C=new lu(new Fn(v),0);let N=new ns(Cr);return this.Rs.forEachWhile(X=>{const he=X.key.path;return!!c.isPrefixOf(he)&&(he.length===f&&(N=N.add(X.As)),!0)},C),Je.resolve(this.Vs(N))}Vs(e){const t=[];return e.forEach(c=>{const f=this.Ps(c);null!==f&&t.push(f)}),t}removeMutationBatch(e,t){lr(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let c=this.Rs;return Je.forEach(t.mutations,f=>{const v=new lu(f.key,t.batchId);return c=c.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.Rs=c})}Cn(e){}containsKey(e,t){const c=new lu(t,0),f=this.Rs.firstAfterOrEqual(c);return Je.resolve(t.isEqual(f&&f.key))}performConsistencyCheck(e){return Je.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wp{constructor(e){this.Ds=e,this.docs=new Wi(Fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const c=t.key,f=this.docs.get(c),v=f?f.size:0,C=this.Ds(t);return this.docs=this.docs.insert(c,{document:t.mutableCopy(),size:C}),this.size+=C-v,this.indexManager.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const c=this.docs.get(t);return Je.resolve(c?c.document.mutableCopy():Bi.newInvalidDocument(t))}getEntries(e,t){let c=Ua();return t.forEach(f=>{const v=this.docs.get(f);c=c.insert(f,v?v.document.mutableCopy():Bi.newInvalidDocument(f))}),Je.resolve(c)}getDocumentsMatchingQuery(e,t,c,f){let v=Ua();const C=t.path,N=new Fn(C.child("")),X=this.docs.getIteratorFrom(N);for(;X.hasNext();){const{key:he,value:{document:ke}}=X.getNext();if(!C.isPrefixOf(he.path))break;he.path.length>C.length+1||jn(sn(ke),c)<=0||(f.has(ke.key)||Ll(t,ke))&&(v=v.insert(ke.key,ke.mutableCopy()))}return Je.resolve(v)}getAllFromCollectionGroup(e,t,c,f){An()}Cs(e,t){return Je.forEach(this.docs,c=>t(c))}newChangeBuffer(e){return new qp(this)}getSize(e){return Je.resolve(this.size)}}class qp extends Xg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((c,f)=>{f.isValidDocument()?t.push(this.os.addEntry(e,f)):this.os.removeEntry(c)}),Je.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Xf{constructor(e){this.persistence=e,this.xs=new nl(t=>Uc(t),th),this.lastRemoteSnapshotVersion=vr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Jg,this.targetCount=0,this.Ms=yl.kn()}forEachTarget(e,t){return this.xs.forEach((c,f)=>t(f)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,c){return c&&(this.lastRemoteSnapshotVersion=c),t>this.Ns&&(this.Ns=t),Je.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new yl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Fn(t),Je.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,c){let f=0;const v=[];return this.xs.forEach((C,N)=>{N.sequenceNumber<=t&&null===c.get(N.targetId)&&(this.xs.delete(C),v.push(this.removeMatchingKeysForTargetId(e,N.targetId)),f++)}),Je.waitFor(v).next(()=>f)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const c=this.xs.get(t)||null;return Je.resolve(c)}addMatchingKeys(e,t,c){return this.ks.gs(t,c),Je.resolve()}removeMatchingKeys(e,t,c){this.ks.ps(t,c);const f=this.persistence.referenceDelegate,v=[];return f&&t.forEach(C=>{v.push(f.markPotentiallyOrphaned(e,C))}),Je.waitFor(v)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const c=this.ks.Es(t);return Je.resolve(c)}containsKey(e,t){return Je.resolve(this.ks.containsKey(t))}}class Jf{constructor(e,t){this.$s={},this.overlays={},this.Os=new Io(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Xf(this),this.indexManager=new S_,this.remoteDocumentCache=new Wp(c=>this.referenceDelegate.Ls(c)),this.serializer=new $m(t),this.qs=new w_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let c=this.$s[e.toKey()];return c||(c=new av(t,this.referenceDelegate),this.$s[e.toKey()]=c),c}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,c){Cn("MemoryPersistence","Starting transaction:",e);const f=new vh(this.Os.next());return this.referenceDelegate.Us(),c(f).next(v=>this.referenceDelegate.Ks(f).next(()=>v)).toPromise().then(v=>(f.raiseOnCommittedEvent(),v))}Gs(e,t){return Je.or(Object.values(this.$s).map(c=>()=>c.containsKey(e,t)))}}class vh extends Vo{constructor(e){super(),this.currentSequenceNumber=e}}class Ec{constructor(e){this.persistence=e,this.Qs=new Jg,this.js=null}static zs(e){return new Ec(e)}get Ws(){if(this.js)return this.js;throw An()}addReference(e,t,c){return this.Qs.addReference(c,t),this.Ws.delete(c.toString()),Je.resolve()}removeReference(e,t,c){return this.Qs.removeReference(c,t),this.Ws.add(c.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(f=>this.Ws.add(f.toString()));const c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,t.targetId).next(f=>{f.forEach(v=>this.Ws.add(v.toString()))}).next(()=>c.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Ws,c=>{const f=Fn.fromPath(c);return this.Hs(e,f).next(v=>{v||t.removeEntry(f,vr.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(c=>{c?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Je.or([()=>Je.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Kp{constructor(e){this.serializer=e}O(e,t,c,f){const v=new Al("createOrUpgrade",t);var N;c<1&&f>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ac,{unique:!0}),N.createObjectStore("documentMutations"),ep(e),function(N){N.createObjectStore("remoteDocuments")}(e));let C=Je.resolve();return c<3&&f>=3&&(0!==c&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),ep(e)),C=C.next(()=>function(N){const X=N.store("targetGlobal"),he={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vr.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",he)}(v))),c<4&&f>=4&&(0!==c&&(C=C.next(()=>function(N,X){return X.store("mutations").j().next(he=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ac,{unique:!0});const ke=X.store("mutations"),ct=he.map(Bt=>ke.put(Bt));return Je.waitFor(ct)})}(e,v))),C=C.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),c<5&&f>=5&&(C=C.next(()=>this.Ys(v))),c<6&&f>=6&&(C=C.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(v)))),c<7&&f>=7&&(C=C.next(()=>this.Zs(v))),c<8&&f>=8&&(C=C.next(()=>this.ti(e,v))),c<9&&f>=9&&(C=C.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),c<10&&f>=10&&(C=C.next(()=>this.ei(v))),c<11&&f>=11&&(C=C.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),c<12&&f>=12&&(C=C.next(()=>{!function(N){const X=N.createObjectStore("documentOverlays",{keyPath:lc});X.createIndex("collectionPathOverlayIndex",Pl,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",cc,{unique:!1})}(e)})),c<13&&f>=13&&(C=C.next(()=>function(N){const X=N.createObjectStore("remoteDocumentsV14",{keyPath:Zd});X.createIndex("documentKeyIndex",ud),X.createIndex("collectionGroupIndex",Yd)}(e)).next(()=>this.ni(e,v)).next(()=>e.deleteObjectStore("remoteDocuments"))),c<14&&f>=14&&(C=C.next(()=>this.si(e,v))),c<15&&f>=15&&(C=C.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:Qd}).createIndex("sequenceNumberIndex",cd,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:Fc}).createIndex("documentKeyIndex",Mg,{unique:!1})}(e))),C}Xs(e){let t=0;return e.store("remoteDocuments").X((c,f)=>{t+=ev(f)}).next(()=>{const c={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}Ys(e){const t=e.store("mutationQueues"),c=e.store("mutations");return t.j().next(f=>Je.forEach(f,v=>{const C=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return c.j("userMutationsIndex",C).next(N=>Je.forEach(N,X=>{lr(X.userId===v.userId);const he=vl(this.serializer,X);return Zg(e,v.userId,he).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),c=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const v=[];return c.X((C,N)=>{const X=new Ni(C),he=[0,Fs(X)];v.push(t.get(he).next(ke=>ke?Je.resolve():t.put({targetId:0,path:Fs(X),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>Je.waitFor(v))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Lc});const c=t.store("collectionParents"),f=new xd,v=C=>{if(f.add(C)){const N=C.lastSegment(),X=C.popLast();return c.put({collectionId:N,parent:Fs(X)})}};return t.store("remoteDocuments").X({Y:!0},(C,N)=>{const X=new Ni(C);return v(X.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([C,N,X],he)=>{const ke=Ao(N);return v(ke.popLast())}))}ei(e){const t=e.store("targets");return t.X((c,f)=>{const v=af(f),C=zm(this.serializer,v);return t.put(C)})}ni(e,t){const c=t.store("remoteDocuments"),f=[];return c.X((v,C)=>{const N=t.store("remoteDocumentsV14"),X=(he=C,he.document?new Fn(Ni.fromString(he.document.name).popFirst(5)):he.noDocument?Fn.fromSegments(he.noDocument.path):he.unknownDocument?Fn.fromSegments(he.unknownDocument.path):An()).path.toArray();var he;const ke={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};f.push(N.put(ke))}).next(()=>Je.waitFor(f))}si(e,t){const c=t.store("mutations"),f=uy(this.serializer),v=new Jf(Ec.zs,this.serializer.fe);return c.j().next(C=>{const N=new Map;return C.forEach(X=>{var he;let ke=null!==(he=N.get(X.userId))&&void 0!==he?he:ai();vl(this.serializer,X).keys().forEach(ct=>ke=ke.add(ct)),N.set(X.userId,ke)}),Je.forEach(N,(X,he)=>{const ke=new Or(he),ct=Hg.de(this.serializer,ke),Bt=v.getIndexManager(ke),on=Zf.de(ke,this.serializer,Bt,v.referenceDelegate);return new P0(f,on,ct,Bt).recalculateAndSaveOverlaysForDocumentKeys(new dc(t,Io.ct),X).next()})})}}function ep(s){s.createObjectStore("targetDocuments",{keyPath:uc}).createIndex("documentTargetsIndex",Nf,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ld,{unique:!0}),s.createObjectStore("targetGlobal")}const _h="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class em{constructor(e,t,c,f,v,C,N,X,he,ke,ct=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=c,this.ii=v,this.window=C,this.document=N,this.ri=he,this.oi=ke,this.ui=ct,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Bt=>Promise.resolve(),!em.D())throw new dn($t.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rv(this,f),this.di=t+"main",this.serializer=new $m(X),this.wi=new Ls(this.di,this.ui,new Kp(this.serializer)),this.Bs=new M0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uy(this.serializer),this.qs=new Vg,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ke&&zi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dn($t.FAILED_PRECONDITION,_h);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Io(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var c=(0,Ke.Z)(function*(f){if(t.started)return e(f)});return function(f){return c.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ke.Z)(function*(c){null===c.newVersion&&(yield e())});return function(c){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ke.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(qu(e))return Cn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Cn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return hf(e).get("owner").next(t=>Je.resolve(this.Ri(t)))}Pi(e){return ff(e).delete(this.clientId)}bi(){var e=this;return(0,Ke.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",c=>{const f=ao(c,"clientMetadata");return f.j().next(v=>{const C=e.Si(v,18e5),N=v.filter(X=>-1===C.indexOf(X));return Je.forEach(N,X=>f.delete(X.clientId)).next(()=>N)})}).catch(()=>[]);if(e._i)for(const c of t)e._i.removeItem(e.Di(c.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Je.resolve(!0):hf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new dn($t.FAILED_PRECONDITION,_h);return!1}}return!(!this.networkEnabled||!this.inForeground)||ff(e).j().next(c=>void 0===this.Si(c,5e3).find(f=>!(this.clientId===f.clientId||!(!this.networkEnabled&&f.networkEnabled||!this.inForeground&&f.inForeground&&this.networkEnabled===f.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Cn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ke.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const c=new dc(t,Io.ct);return e.Ai(c).next(()=>e.Pi(c))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(c=>this.Vi(c.updateTimeMs,t)&&!this.Ci(c.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>ff(e).j().next(t=>this.Si(t,18e5).map(c=>c.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Zf.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $p(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Hg.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,c){Cn("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===t?"readonly":"readwrite",v=15===(C=this.ui)?Bh:14===C?Lf:13===C?Ku:12===C?jh:11===C?dd:void An();var C;let N;return this.wi.runTransaction(e,f,v,X=>(N=new dc(X,this.Os?this.Os.next():Io.ct),"readwrite-primary"===t?this.Ti(N).next(he=>!!he||this.Ei(N)).next(he=>{if(!he)throw zi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new dn($t.FAILED_PRECONDITION,Li);return c(N)}).next(he=>this.vi(N).next(()=>he)):this.Oi(N).next(()=>c(N)))).then(X=>(N.raiseOnCommittedEvent(),X))}Oi(e){return hf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new dn($t.FAILED_PRECONDITION,_h)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hf(e).put("owner",t)}static D(){return Ls.D()}Ai(e){const t=hf(e);return t.get("owner").next(c=>this.Ri(c)?(Cn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Je.resolve())}Vi(e,t){const c=Date.now();return!(e<c-t||e>c&&(zi(`Detected an update time that is in the future: ${e} > ${c}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Te.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const c=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Cn("IndexedDbPersistence",`Client '${e}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(c){return zi("IndexedDbPersistence","Failed to get zombied client id.",c),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){zi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hf(s){return ao(s,"owner")}function ff(s){return ao(s,"clientMetadata")}function cy(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Zp{constructor(e,t,c,f){this.targetId=e,this.fromCache=t,this.Fi=c,this.Bi=f}static Li(e,t){let c=ai(),f=ai();for(const v of t.docChanges)switch(v.type){case 0:c=c.add(v.doc.key);break;case 1:f=f.add(v.doc.key)}return new Zp(e,t.fromCache,c,f)}}class tm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,c,f){return this.Ki(e,t).next(v=>v||this.Gi(e,t,f,c)).next(v=>v||this.Qi(e,t))}Ki(e,t){if(ih(t))return Je.resolve(null);let c=Ea(t);return this.indexManager.getIndexType(e,c).next(f=>0===f?null:(null!==t.limit&&1===f&&(t=Hc(t,null,"F"),c=Ea(t)),this.indexManager.getDocumentsMatchingTarget(e,c).next(v=>{const C=ai(...v);return this.Ui.getDocuments(e,C).next(N=>this.indexManager.getMinOffset(e,c).next(X=>{const he=this.ji(t,N);return this.zi(t,he,C,X.readTime)?this.Ki(e,Hc(t,null,"F")):this.Wi(e,he,t,X)}))})))}Gi(e,t,c,f){return ih(t)||f.isEqual(vr.min())?this.Qi(e,t):this.Ui.getDocuments(e,c).next(v=>{const C=this.ji(t,v);return this.zi(t,C,c,f)?this.Qi(e,t):(wo()<=Ee.in.DEBUG&&Cn("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),$c(t)),this.Wi(e,C,t,Mt(f,-1)))})}ji(e,t){let c=new ns(tl(e));return t.forEach((f,v)=>{Ll(e,v)&&(c=c.add(v))}),c}zi(e,t,c,f){if(null===e.limit)return!1;if(c.size!==t.size)return!0;const v="F"===e.limitType?t.last():t.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(f)>0)}Qi(e,t){return wo()<=Ee.in.DEBUG&&Cn("QueryEngine","Using full collection scan to execute query:",$c(t)),this.Ui.getDocumentsMatchingQuery(e,t,er.min())}Wi(e,t,c,f){return this.Ui.getDocumentsMatchingQuery(e,c,f).next(v=>(t.forEach(C=>{v=v.insert(C.key,C)}),v))}}class dy{constructor(e,t,c,f){this.persistence=e,this.Hi=t,this.serializer=f,this.Ji=new Wi(Cr),this.Yi=new nl(v=>Uc(v),th),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(c)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function hy(s,e,t,c){return new dy(s,e,t,c)}function fy(s,e){return Th.apply(this,arguments)}function Th(){return Th=(0,Ke.Z)(function*(s,e){const t=Sn(s);return yield t.persistence.runTransaction("Handle user change","readonly",c=>{let f;return t.mutationQueue.getAllMutationBatches(c).next(v=>(f=v,t.tr(e),t.mutationQueue.getAllMutationBatches(c))).next(v=>{const C=[],N=[];let X=ai();for(const he of f){C.push(he.batchId);for(const ke of he.mutations)X=X.add(ke.key)}for(const he of v){N.push(he.batchId);for(const ke of he.mutations)X=X.add(ke.key)}return t.localDocuments.getDocuments(c,X).next(he=>({er:he,removedBatchIds:C,addedBatchIds:N}))})})}),Th.apply(this,arguments)}function gy(s){const e=Sn(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function N0(s,e,t){let c=ai(),f=ai();return t.forEach(v=>c=c.add(v)),e.getEntries(s,c).next(v=>{let C=Ua();return t.forEach((N,X)=>{const he=v.get(N);X.isFoundDocument()!==he.isFoundDocument()&&(f=f.add(N)),X.isNoDocument()&&X.version.isEqual(vr.min())?(e.removeEntry(N,X.readTime),C=C.insert(N,X)):!he.isValidDocument()||X.version.compareTo(he.version)>0||0===X.version.compareTo(he.version)&&he.hasPendingWrites?(e.addEntry(X),C=C.insert(N,X)):Cn("LocalStore","Ignoring outdated watch update for ",N,". Current version:",he.version," Watch version:",X.version)}),{nr:C,sr:f}})}function L0(s,e){const t=Sn(s);return t.persistence.runTransaction("Get next mutation batch","readonly",c=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(c,e)))}function Md(s,e){const t=Sn(s);return t.persistence.runTransaction("Allocate target","readwrite",c=>{let f;return t.Bs.getTargetData(c,e).next(v=>v?(f=v,Je.resolve(f)):t.Bs.allocateTargetId(c).next(C=>(f=new Tc(e,C,"TargetPurposeListen",c.currentSequenceNumber),t.Bs.addTargetData(c,f).next(()=>f))))}).then(c=>{const f=t.Ji.get(c.targetId);return(null===f||c.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(c.targetId,c),t.Yi.set(e,c.targetId)),c})}function bh(s,e,t){return pf.apply(this,arguments)}function pf(){return pf=(0,Ke.Z)(function*(s,e,t){const c=Sn(s),f=c.Ji.get(e),v=t?"readwrite":"readwrite-primary";try{t||(yield c.persistence.runTransaction("Release target",v,C=>c.persistence.referenceDelegate.removeTarget(C,f)))}catch(C){if(!qu(C))throw C;Cn("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}c.Ji=c.Ji.remove(e),c.Yi.delete(f.target)}),pf.apply(this,arguments)}function Yp(s,e,t){const c=Sn(s);let f=vr.min(),v=ai();return c.persistence.runTransaction("Execute query","readonly",C=>function(N,X,he){const ke=Sn(N),ct=ke.Yi.get(he);return void 0!==ct?Je.resolve(ke.Ji.get(ct)):ke.Bs.getTargetData(X,he)}(c,C,Ea(e)).next(N=>{if(N)return f=N.lastLimboFreeSnapshotVersion,c.Bs.getMatchingKeysForTargetId(C,N.targetId).next(X=>{v=X})}).next(()=>c.Hi.getDocumentsMatchingQuery(C,e,t?f:vr.min(),t?v:ai())).next(N=>(my(c,sh(e),N),{documents:N,ir:v})))}function Qp(s,e){const t=Sn(s),c=Sn(t.Bs),f=t.Ji.get(e);return f?Promise.resolve(f.target):t.persistence.runTransaction("Get target data","readonly",v=>c.le(v,e).next(C=>C?C.target:null))}function Eh(s,e){const t=Sn(s),c=t.Xi.get(e)||vr.min();return t.persistence.runTransaction("Get new document changes","readonly",f=>t.Zi.getAllFromCollectionGroup(f,e,Mt(c,-1),Number.MAX_SAFE_INTEGER)).then(f=>(my(t,e,f),f))}function my(s,e,t){let c=s.Xi.get(e)||vr.min();t.forEach((f,v)=>{v.readTime.compareTo(c)>0&&(c=v.readTime)}),s.Xi.set(e,c)}function gf(){return gf=(0,Ke.Z)(function*(s,e,t,c){const f=Sn(s);let v=ai(),C=Ua();for(const he of t){const ke=e.rr(he.metadata.name);he.document&&(v=v.add(ke));const ct=e.ur(he);ct.setReadTime(e.cr(he.metadata.readTime)),C=C.insert(ke,ct)}const N=f.Zi.newChangeBuffer({trackRemovals:!0}),X=yield Md(f,(he=c,Ea(rh(Ni.fromString(`__bundle__/docs/${he}`)))));var he;return f.persistence.runTransaction("Apply bundle documents","readwrite",he=>N0(he,N,C).next(ke=>(N.apply(he),ke)).next(ke=>f.Bs.removeMatchingKeysForTargetId(he,X.targetId).next(()=>f.Bs.addMatchingKeys(he,v,X.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(he,ke.nr,ke.sr)).next(()=>ke.nr)))}),gf.apply(this,arguments)}function uv(s,e){return yy.apply(this,arguments)}function yy(){return yy=(0,Ke.Z)(function*(s,e,t=ai()){const c=yield Md(s,Ea(Gf(e.bundledQuery))),f=Sn(s);return f.persistence.runTransaction("Save named query","readwrite",v=>{const C=Po(e.readTime);if(c.snapshotVersion.compareTo(C)>=0)return f.qs.saveNamedQuery(v,e);const N=c.withResumeToken(Mo.EMPTY_BYTE_STRING,C);return f.Ji=f.Ji.insert(N.targetId,N),f.Bs.updateTargetData(v,N).next(()=>f.Bs.removeMatchingKeysForTargetId(v,c.targetId)).next(()=>f.Bs.addMatchingKeys(v,t,c.targetId)).next(()=>f.qs.saveNamedQuery(v,e))})}),yy.apply(this,arguments)}function lv(s,e){return`firestore_clients_${s}_${e}`}function Xp(s,e,t){let c=`firestore_mutations_${s}_${t}`;return e.isAuthenticated()&&(c+=`_${e.uid}`),c}function nm(s,e){return`firestore_targets_${s}_${e}`}class kd{constructor(e,t,c,f){this.user=e,this.batchId=t,this.state=c,this.error=f}static ar(e,t,c){const f=JSON.parse(c);let v,C="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return C&&f.error&&(C="string"==typeof f.error.message&&"string"==typeof f.error.code,C&&(v=new dn(f.error.code,f.error.message))),C?new kd(e,t,f.state,v):(zi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${c}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cc{constructor(e,t,c){this.targetId=e,this.state=t,this.error=c}static ar(e,t){const c=JSON.parse(t);let f,v="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(f=new dn(c.error.code,c.error.message))),v?new Cc(e,c.state,f):(zi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const c=JSON.parse(t);let f="object"==typeof c&&c.activeTargetIds instanceof Array,v=Gc();for(let C=0;f&&C<c.activeTargetIds.length;++C)f=Du(c.activeTargetIds[C]),v=v.add(c.activeTargetIds[C]);return f?new Vl(e,v):(zi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Jp{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jp(t.clientId,t.onlineState):(zi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cv{constructor(){this.activeTargetIds=Gc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eg{constructor(e,t,c,f,v){this.window=e,this.ii=t,this.persistenceKey=c,this.wr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Wi(Cr),this.started=!1,this.yr=[];const C=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.pr=lv(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new cv),this.Tr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.syncEngine.$i();for(const f of t){if(f===e.wr)continue;const v=e.getItem(lv(e.persistenceKey,f));if(v){const C=Vl.ar(f,v);C&&(e.gr=e.gr.insert(C.clientId,C))}}e.Pr();const c=e.storage.getItem(e.vr);if(c){const f=e.br(c);f&&e.Vr(f)}for(const f of e.yr)e.mr(f);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((c,f)=>{f.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,c){this.Dr(e,t,c),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(nm(this.persistenceKey,e));if(c){const f=Cc.ar(e,c);f&&(t=f.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nm(this.persistenceKey,e))}updateQueryState(e,t,c){this.kr(e,t,c)}handleUserChange(e,t,c){t.forEach(f=>{this.Cr(f)}),this.currentUser=e,c.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Cn("SharedClientState","READ",e,t),t}setItem(e,t){Cn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Cn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const c=e;if(c.storageArea===this.storage){if(Cn("SharedClientState","EVENT",c.key,c.newValue),c.key===this.pr)return void zi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ke.Z)(function*(){if(t.started){if(null!==c.key)if(t.Tr.test(c.key)){if(null==c.newValue){const f=t.Or(c.key);return t.Fr(f,null)}{const f=t.Br(c.key,c.newValue);if(f)return t.Fr(f.clientId,f)}}else if(t.Er.test(c.key)){if(null!==c.newValue){const f=t.Lr(c.key,c.newValue);if(f)return t.qr(f)}}else if(t.Ar.test(c.key)){if(null!==c.newValue){const f=t.Ur(c.key,c.newValue);if(f)return t.Kr(f)}}else if(c.key===t.vr){if(null!==c.newValue){const f=t.br(c.newValue);if(f)return t.Vr(f)}}else if(c.key===t.Ir){const f=function(v){let C=Io.ct;if(null!=v)try{const N=JSON.parse(v);lr("number"==typeof N),C=N}catch(N){zi("SharedClientState","Failed to read sequence number from WebStorage",N)}return C}(c.newValue);f!==Io.ct&&t.sequenceNumberHandler(f)}else if(c.key===t.Rr){const f=t.Gr(c.newValue);yield Promise.all(f.map(v=>t.syncEngine.Qr(v)))}}else t.yr.push(c)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,c){const f=new kd(this.currentUser,e,t,c),v=Xp(this.persistenceKey,this.currentUser,e);this.setItem(v,f.hr())}Cr(e){const t=Xp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,c){const f=nm(this.persistenceKey,e),v=new Cc(e,t,c);this.setItem(f,v.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const c=this.Or(e);return Vl.ar(c,t)}Lr(e,t){const c=this.Er.exec(e),f=Number(c[1]);return kd.ar(new Or(void 0!==c[2]?c[2]:null),f,t)}Ur(e,t){const c=this.Ar.exec(e),f=Number(c[1]);return Cc.ar(f,t)}br(e){return Jp.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Cn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const c=t?this.gr.insert(e,t):this.gr.remove(e),f=this.Sr(this.gr),v=this.Sr(c),C=[],N=[];return v.forEach(X=>{f.has(X)||C.push(X)}),f.forEach(X=>{v.has(X)||N.push(X)}),this.syncEngine.Wr(C,N).then(()=>{this.gr=c})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Gc();return e.forEach((c,f)=>{t=t.unionWith(f.activeTargetIds)}),t}}class _y{constructor(){this.Hr=new cv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,c){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,c){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new cv,Promise.resolve()}handleUserChange(e,t,c){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rm{Yr(e){}shutdown(){}}class im{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Cn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Cn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pu=null;function Ha(){return null===Pu?Pu=268435456+Math.round(2147483648*Math.random()):Pu++,"0x"+Pu.toString(16)}const il={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F0{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const $a="WebChannelConnection";class mf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,c,f,v){const C=Ha(),N=this.To(e,t);Cn("RestConnection",`Sending RPC '${e}' ${C}:`,N,c);const X={};return this.Eo(X,f,v),this.Ao(e,N,X,c).then(he=>(Cn("RestConnection",`Received RPC '${e}' ${C}: `,he),he),he=>{throw To("RestConnection",`RPC '${e}' ${C} failed with error: `,he,"url: ",N,"request:",c),he})}vo(e,t,c,f,v,C){return this.Io(e,t,c,f,v)}Eo(e,t,c){e["X-Goog-Api-Client"]="gl-js/ fire/"+zu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((f,v)=>e[v]=f),c&&c.headers.forEach((f,v)=>e[v]=f)}To(e,t){return`${this.mo}/v1/${t}:${il[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,c,f){const v=Ha();return new Promise((C,N)=>{const X=new Rc;X.setWithCredentials(!0),X.listenOnce(va.COMPLETE,()=>{try{switch(X.getLastErrorCode()){case Ko.NO_ERROR:const ke=X.getResponseJson();Cn($a,`XHR for RPC '${e}' ${v} received:`,JSON.stringify(ke)),C(ke);break;case Ko.TIMEOUT:Cn($a,`RPC '${e}' ${v} timed out`),N(new dn($t.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const ct=X.getStatus();if(Cn($a,`RPC '${e}' ${v} failed with status:`,ct,"response text:",X.getResponseText()),ct>0){let Bt=X.getResponseJson();Array.isArray(Bt)&&(Bt=Bt[0]);const on=Bt?.error;if(on&&on.status&&on.message){const Mn=function(rr){const cr=rr.toLowerCase().replace(/_/g,"-");return Object.values($t).indexOf(cr)>=0?cr:$t.UNKNOWN}(on.status);N(new dn(Mn,on.message))}else N(new dn($t.UNKNOWN,"Server responded with status "+X.getStatus()))}else N(new dn($t.UNAVAILABLE,"Connection failed."));break;default:An()}}finally{Cn($a,`RPC '${e}' ${v} completed.`)}});const he=JSON.stringify(f);Cn($a,`RPC '${e}' ${v} sending request:`,f),X.send(t,"POST",he,c,15)})}Ro(e,t,c){const f=Ha(),v=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],C=na(),N=Ds(),X={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},he=this.longPollingOptions.timeoutSeconds;void 0!==he&&(X.longPollingTimeout=Math.round(1e3*he)),this.useFetchStreams&&(X.xmlHttpFactory=new Dl({})),this.Eo(X.initMessageHeaders,t,c),X.encodeInitMessageHeaders=!0;const ke=v.join("");Cn($a,`Creating RPC '${e}' stream ${f}: ${ke}`,X);const ct=C.createWebChannel(ke,X);let Bt=!1,on=!1;const Mn=new F0({ro:cr=>{on?Cn($a,`Not sending because RPC '${e}' stream ${f} is closed:`,cr):(Bt||(Cn($a,`Opening RPC '${e}' stream ${f} transport.`),ct.open(),Bt=!0),Cn($a,`RPC '${e}' stream ${f} sending:`,cr),ct.send(cr))},oo:()=>ct.close()}),rr=(cr,wi,Yi)=>{cr.listen(wi,Di=>{try{Yi(Di)}catch(la){setTimeout(()=>{throw la},0)}})};return rr(ct,Il.EventType.OPEN,()=>{on||Cn($a,`RPC '${e}' stream ${f} transport opened.`)}),rr(ct,Il.EventType.CLOSE,()=>{on||(on=!0,Cn($a,`RPC '${e}' stream ${f} transport closed`),Mn.wo())}),rr(ct,Il.EventType.ERROR,cr=>{on||(on=!0,To($a,`RPC '${e}' stream ${f} transport errored:`,cr),Mn.wo(new dn($t.UNAVAILABLE,"The operation could not be completed")))}),rr(ct,Il.EventType.MESSAGE,cr=>{var wi;if(!on){const Yi=cr.data[0];lr(!!Yi);const la=Yi.error||(null===(wi=Yi[0])||void 0===wi?void 0:wi.error);if(la){Cn($a,`RPC '${e}' stream ${f} received error:`,la);const No=la.status;let Js=function(Sp){const g_=Z[Sp];if(void 0!==g_)return mn(g_)}(No),ju=la.message;void 0===Js&&(Js=$t.INTERNAL,ju="Unknown error status: "+No+" with message "+la.message),on=!0,Mn.wo(new dn(Js,ju)),ct.close()}else Cn($a,`RPC '${e}' stream ${f} received:`,Yi),Mn._o(Yi)}}),rr(N,Oc.STAT_EVENT,cr=>{cr.stat===Ra.PROXY?Cn($a,`RPC '${e}' stream ${f} detected buffering proxy`):cr.stat===Ra.NOPROXY&&Cn($a,`RPC '${e}' stream ${f} detected no buffering proxy`)}),setTimeout(()=>{Mn.fo()},0),Mn}}function tp(){return typeof window<"u"?window:null}function tg(){return typeof document<"u"?document:null}function np(s){return new E0(s,!0)}class dv{constructor(e,t,c=1e3,f=1.5,v=6e4){this.ii=e,this.timerId=t,this.Po=c,this.bo=f,this.Vo=v,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),c=Math.max(0,Date.now()-this.Co),f=Math.max(0,t-c);f>0&&Cn("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${c} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,f,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class hv{constructor(e,t,c,f,v,C,N,X){this.ii=e,this.$o=c,this.Oo=f,this.connection=v,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=N,this.listener=X,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new dv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ke.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ke.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var c=this;return(0,Ke.Z)(function*(){c.Ho(),c.Jo(),c.qo.cancel(),c.Fo++,4!==e?c.qo.reset():t&&t.code===$t.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),c.qo.xo()):t&&t.code===$t.UNAUTHENTICATED&&3!==c.state&&(c.authCredentialsProvider.invalidateToken(),c.appCheckCredentialsProvider.invalidateToken()),null!==c.stream&&(c.Yo(),c.stream.close(),c.stream=null),c.state=e,yield c.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([c,f])=>{this.Fo===t&&this.Zo(c,f)},c=>{e(()=>{const f=new dn($t.UNKNOWN,"Fetching auth token failed: "+c.message);return this.tu(f)})})}Zo(e,t){const c=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{c(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(f=>{c(()=>this.tu(f))}),this.stream.onMessage(f=>{c(()=>this.onMessage(f))})}Go(){var e=this;this.state=5,this.qo.No((0,Ke.Z)(function*(){e.state=0,e.start()}))}tu(e){return Cn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Cn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j0 extends hv{constructor(e,t,c,f,v,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,c,f,C),this.serializer=v}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Hf(s,e){let t;if("targetChange"in e){const c="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:An(),f=e.targetChange.targetIds||[],v=function(X,he){return X.useProto3Json?(lr(void 0===he||"string"==typeof he),Mo.fromBase64String(he||"")):(lr(void 0===he||he instanceof Uint8Array),Mo.fromUint8Array(he||new Uint8Array))}(s,e.targetChange.resumeToken),C=e.targetChange.cause,N=C&&function(X){const he=void 0===X.code?$t.UNKNOWN:mn(X.code);return new dn(he,X.message||"")}(C);t=new Vf(c,f,v,N||null)}else if("documentChange"in e){const c=e.documentChange,f=ml(s,c.document.name),v=Po(c.document.updateTime),C=c.document.createTime?Po(c.document.createTime):vr.min(),N=new Si({mapValue:{fields:c.document.fields}}),X=Bi.newFoundDocument(f,v,C,N);t=new _c(c.targetIds||[],c.removedTargetIds||[],X.key,X)}else if("documentDelete"in e){const c=e.documentDelete,f=ml(s,c.document),v=c.readTime?Po(c.readTime):vr.min(),C=Bi.newNoDocument(f,v);t=new _c([],c.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const c=e.documentRemove,f=ml(s,c.document);t=new _c([],c.removedTargetIds||[],f,null)}else{if(!("filter"in e))return An();{const c=e.filter,{count:f=0,unchangedNames:v}=c,C=new se(f,v);t=new Mu(c.targetId,C)}}var X;return t}(this.serializer,e),c=function(f){if(!("targetChange"in f))return vr.min();const v=f.targetChange;return v.targetIds&&v.targetIds.length?vr.min():v.readTime?Po(v.readTime):vr.min()}(e);return this.listener.nu(t,c)}su(e){const t={};t.database=hh(this.serializer),t.addTarget=function(f,v){let C;const N=v.target;if(C=pc(N)?{documents:ny(f,N)}:{query:rf(f,N)},C.targetId=v.targetId,v.resumeToken.approximateByteSize()>0){C.resumeToken=ef(f,v.resumeToken);const X=Fg(f,v.expectedCount);null!==X&&(C.expectedCount=X)}else if(v.snapshotVersion.compareTo(vr.min())>0){C.readTime=Jh(f,v.snapshotVersion.toTimestamp());const X=Fg(f,v.expectedCount);null!==X&&(C.expectedCount=X)}return C}(this.serializer,e);const c=function C0(s,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return An()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);c&&(t.labels=c),this.Wo(t)}iu(e){const t={};t.database=hh(this.serializer),t.removeTarget=e,this.Wo(t)}}class B0 extends hv{constructor(e,t,c,f,v,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,c,f,C),this.serializer=v,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(lr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Sd(s,e){return s&&s.length>0?(lr(void 0!==e),s.map(t=>function(c,f){let v=Po(c.updateTime?c.updateTime:f);return v.isEqual(vr.min())&&(v=Po(f)),new gr(v,c.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),c=Po(e.commitTime);return this.listener.cu(c,t)}return lr(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(c=>Va(this.serializer,c))};this.Wo(t)}}class U0 extends class{}{constructor(e,t,c,f){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=c,this.serializer=f,this.lu=!1}fu(){if(this.lu)throw new dn($t.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,c){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.Io(e,t,c,f,v)).catch(f=>{throw"FirebaseError"===f.name?(f.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new dn($t.UNKNOWN,f.toString())})}vo(e,t,c,f){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,C])=>this.connection.vo(e,t,c,v,C,f)).catch(v=>{throw"FirebaseError"===v.name?(v.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new dn($t.UNKNOWN,v.toString())})}terminate(){this.lu=!0}}class Pd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zi(t),this.mu=!1):Cn("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Sc{constructor(e,t,c,f,v){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=c,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=v,this.Pu.Yr(N=>{c.enqueueAndForget((0,Ke.Z)(function*(){var X;Od(C)&&(Cn("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,Ke.Z)(function*(he){const ke=Sn(he);ke.vu.add(4),yield ip(ke),ke.bu.set("Unknown"),ke.vu.delete(4),yield rp(ke)}),function(he){return X.apply(this,arguments)})(C))}))}),this.bu=new Pd(c,f)}}function rp(s){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,Ke.Z)(function*(s){if(Od(s))for(const e of s.Ru)yield e(!0)}),Ty.apply(this,arguments)}function ip(s){return ng.apply(this,arguments)}function ng(){return ng=(0,Ke.Z)(function*(s){for(const e of s.Ru)yield e(!1)}),ng.apply(this,arguments)}function om(s,e){const t=Sn(s);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),op(t)?um(t):Dh(t).Ko()&&am(t,e))}function sp(s,e){const t=Sn(s),c=Dh(t);t.Au.delete(e),c.Ko()&&H0(t,e),0===t.Au.size&&(c.Ko()?c.jo():Od(t)&&t.bu.set("Unknown"))}function am(s,e){if(s.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vr.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dh(s).su(e)}function H0(s,e){s.Vu.qt(e),Dh(s).iu(e)}function um(s){s.Vu=new lh({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),le:e=>s.Au.get(e)||null,ue:()=>s.datastore.serializer.databaseId}),Dh(s).start(),s.bu.gu()}function op(s){return Od(s)&&!Dh(s).Uo()&&s.Au.size>0}function Od(s){return 0===Sn(s).vu.size}function fv(s){s.Vu=void 0}function by(s){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,Ke.Z)(function*(s){s.Au.forEach((e,t)=>{am(s,e)})}),Wr.apply(this,arguments)}function Ey(s,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Ke.Z)(function*(s,e){fv(s),op(s)?(s.bu.Iu(e),um(s)):s.bu.set("Unknown")}),lm.apply(this,arguments)}function D_(s,e,t){return pv.apply(this,arguments)}function pv(){return pv=(0,Ke.Z)(function*(s,e,t){if(s.bu.set("Online"),e instanceof Vf&&2===e.state&&e.cause)try{yield(c=(0,Ke.Z)(function*(f,v){const C=v.cause;for(const N of v.targetIds)f.Au.has(N)&&(yield f.remoteSyncer.rejectListen(N,C),f.Au.delete(N),f.Vu.removeTarget(N))}),function(f,v){return c.apply(this,arguments)})(s,e)}catch(c){Cn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),c),yield rg(s,c)}else if(e instanceof _c?s.Vu.Ht(e):e instanceof Mu?s.Vu.ne(e):s.Vu.Xt(e),!t.isEqual(vr.min()))try{const c=yield gy(s.localStore);t.compareTo(c)>=0&&(yield function(f,v){const C=f.Vu.ce(v);return C.targetChanges.forEach((N,X)=>{if(N.resumeToken.approximateByteSize()>0){const he=f.Au.get(X);he&&f.Au.set(X,he.withResumeToken(N.resumeToken,v))}}),C.targetMismatches.forEach((N,X)=>{const he=f.Au.get(N);if(!he)return;f.Au.set(N,he.withResumeToken(Mo.EMPTY_BYTE_STRING,he.snapshotVersion)),H0(f,N);const ke=new Tc(he.target,N,X,he.sequenceNumber);am(f,ke)}),f.remoteSyncer.applyRemoteEvent(C)}(s,t))}catch(c){Cn("RemoteStore","Failed to raise snapshot:",c),yield rg(s,c)}var c}),pv.apply(this,arguments)}function rg(s,e,t){return gv.apply(this,arguments)}function gv(){return gv=(0,Ke.Z)(function*(s,e,t){if(!qu(e))throw e;s.vu.add(1),yield ip(s),s.bu.set("Offline"),t||(t=()=>gy(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ke.Z)(function*(){Cn("RemoteStore","Retrying IndexedDB access"),yield t(),s.vu.delete(1),yield rp(s)}))}),gv.apply(this,arguments)}function Cy(s,e){return e().catch(t=>rg(s,t,e))}function Ch(s){return mv.apply(this,arguments)}function mv(){return mv=(0,Ke.Z)(function*(s){const e=Sn(s),t=wc(e);let c=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Sy(e);)try{const f=yield L0(e.localStore,c);if(null===f){0===e.Eu.length&&t.jo();break}c=f.batchId,$0(e,f)}catch(f){yield rg(e,f)}wy(e)&&Dy(e)}),mv.apply(this,arguments)}function Sy(s){return Od(s)&&s.Eu.length<10}function $0(s,e){s.Eu.push(e);const t=wc(s);t.Ko()&&t.ou&&t.uu(e.mutations)}function wy(s){return Od(s)&&!wc(s).Uo()&&s.Eu.length>0}function Dy(s){wc(s).start()}function vv(s){return cm.apply(this,arguments)}function cm(){return cm=(0,Ke.Z)(function*(s){wc(s).hu()}),cm.apply(this,arguments)}function Sh(s){return wh.apply(this,arguments)}function wh(){return wh=(0,Ke.Z)(function*(s){const e=wc(s);for(const t of s.Eu)e.uu(t.mutations)}),wh.apply(this,arguments)}function Iy(s,e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,Ke.Z)(function*(s,e,t){const c=s.Eu.shift(),f=_.from(c,e,t);yield Cy(s,()=>s.remoteSyncer.applySuccessfulWrite(f)),yield Ch(s)}),Ga.apply(this,arguments)}function ig(s,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,Ke.Z)(function*(s,e){var t;e&&wc(s).ou&&(yield(t=(0,Ke.Z)(function*(c,f){if(Nt(v=f.code)&&v!==$t.ABORTED){const C=c.Eu.shift();wc(c).Qo(),yield Cy(c,()=>c.remoteSyncer.rejectFailedWrite(C.batchId,f)),yield Ch(c)}var v}),function(c,f){return t.apply(this,arguments)})(s,e)),wy(s)&&Dy(s)}),Rd.apply(this,arguments)}function dm(s,e){return vf.apply(this,arguments)}function vf(){return vf=(0,Ke.Z)(function*(s,e){const t=Sn(s);t.asyncQueue.verifyOperationInProgress(),Cn("RemoteStore","RemoteStore received new credentials");const c=Od(t);t.vu.add(3),yield ip(t),c&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield rp(t)}),vf.apply(this,arguments)}function hm(s,e){return sg.apply(this,arguments)}function sg(){return sg=(0,Ke.Z)(function*(s,e){const t=Sn(s);e?(t.vu.delete(2),yield rp(t)):e||(t.vu.add(2),yield ip(t),t.bu.set("Unknown"))}),sg.apply(this,arguments)}function Dh(s){return s.Su||(s.Su=function(e,t,c){const f=Sn(e);return f.fu(),new j0(t,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(s.datastore,s.asyncQueue,{uo:by.bind(null,s),ao:Ey.bind(null,s),nu:D_.bind(null,s)}),s.Ru.push(function(){var e=(0,Ke.Z)(function*(t){t?(s.Su.Qo(),op(s)?um(s):s.bu.set("Unknown")):(yield s.Su.stop(),fv(s))});return function(t){return e.apply(this,arguments)}}())),s.Su}function wc(s){return s.Du||(s.Du=function(e,t,c){const f=Sn(e);return f.fu(),new B0(t,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(s.datastore,s.asyncQueue,{uo:vv.bind(null,s),ao:ig.bind(null,s),au:Sh.bind(null,s),cu:Iy.bind(null,s)}),s.Ru.push(function(){var e=(0,Ke.Z)(function*(t){t?(s.Du.Qo(),yield Ch(s)):(yield s.Du.stop(),s.Eu.length>0&&(Cn("RemoteStore",`Stopping write stream with ${s.Eu.length} pending writes`),s.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),s.Du}class fm{constructor(e,t,c,f,v){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=c,this.op=f,this.removalCallback=v,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,c,f,v){const C=Date.now()+c,N=new fm(e,t,C,f,v);return N.start(c),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dn($t.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ih(s,e){if(zi("AsyncQueue",`${e}: ${s}`),qu(s))return new dn($t.UNAVAILABLE,`${e}: ${s}`);throw s}class ap{constructor(e){this.comparator=e?(t,c)=>e(t,c)||Fn.comparator(t.key,c.key):(t,c)=>Fn.comparator(t.key,c.key),this.keyedMap=Fl(),this.sortedSet=new Wi(this.comparator)}static emptySet(e){return new ap(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,c)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ap)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),c=e.sortedSet.getIterator();for(;t.hasNext();){const f=t.getNext().key,v=c.getNext().key;if(!f.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const c=new ap;return c.comparator=this.comparator,c.keyedMap=e,c.sortedSet=t,c}}class pm{constructor(){this.Cu=new Wi(Fn.comparator)}track(e){const t=e.doc.key,c=this.Cu.get(t);c?0!==e.type&&3===c.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==c.type?this.Cu=this.Cu.insert(t,{type:c.type,doc:e.doc}):2===e.type&&2===c.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===c.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===c.type?this.Cu=this.Cu.remove(t):1===e.type&&2===c.type?this.Cu=this.Cu.insert(t,{type:1,doc:c.doc}):0===e.type&&1===c.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):An():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,c)=>{e.push(c)}),e}}class Nd{constructor(e,t,c,f,v,C,N,X,he){this.query=e,this.docs=t,this.oldDocs=c,this.docChanges=f,this.mutatedKeys=v,this.fromCache=C,this.syncStateChanged=N,this.excludesMetadataChanges=X,this.hasCachedResults=he}static fromInitialDocuments(e,t,c,f,v){const C=[];return t.forEach(N=>{C.push({type:0,doc:N})}),new Nd(e,t,ap.emptySet(t),C,c,f,!0,!1,v)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&el(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,c=e.docChanges;if(t.length!==c.length)return!1;for(let f=0;f<t.length;f++)if(t[f].type!==c[f].type||!t[f].doc.isEqual(c[f].doc))return!1;return!0}}class xy{constructor(){this.Nu=void 0,this.listeners=[]}}class G0{constructor(){this.queries=new nl(e=>Bf(e),el),this.onlineState="Unknown",this.ku=new Set}}function yv(s,e){return _v.apply(this,arguments)}function _v(){return _v=(0,Ke.Z)(function*(s,e){const t=Sn(s),c=e.query;let f=!1,v=t.queries.get(c);if(v||(f=!0,v=new xy),f)try{v.Nu=yield t.onListen(c)}catch(C){const N=Ih(C,`Initialization of query '${$c(e.query)}' failed`);return void e.onError(N)}t.queries.set(c,v),v.listeners.push(e),e.Mu(t.onlineState),v.Nu&&e.$u(v.Nu)&&mm(t)}),_v.apply(this,arguments)}function Tv(s,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Ke.Z)(function*(s,e){const t=Sn(s),c=e.query;let f=!1;const v=t.queries.get(c);if(v){const C=v.listeners.indexOf(e);C>=0&&(v.listeners.splice(C,1),f=0===v.listeners.length)}if(f)return t.queries.delete(c),t.onUnlisten(c)}),gm.apply(this,arguments)}function Ay(s,e){const t=Sn(s);let c=!1;for(const f of e){const C=t.queries.get(f.query);if(C){for(const N of C.listeners)N.$u(f)&&(c=!0);C.Nu=f}}c&&mm(t)}function My(s,e,t){const c=Sn(s),f=c.queries.get(e);if(f)for(const v of f.listeners)v.onError(t);c.queries.delete(e)}function mm(s){s.ku.forEach(e=>{e.next()})}class Ou{constructor(e,t,c){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=c||{}}$u(e){if(!this.options.includeMetadataChanges){const c=[];for(const f of e.docChanges)3!==f.type&&c.push(f);e=new Nd(e.query,e.docs,e.oldDocs,c,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ky{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Py{constructor(e){this.serializer=e}rr(e){return ml(this.serializer,e)}ur(e){return e.metadata.exists?nf(this.serializer,e.document,!1):Bi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Po(e)}}class I_{constructor(e,t,c){this.ju=e,this.localStore=t,this.serializer=c,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const c=Ni.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(c.get(c.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,c=new Py(this.serializer);for(const f of e)if(f.metadata.queries){const v=c.rr(f.metadata.name);for(const C of f.metadata.queries){const N=(t.get(C)||ai()).add(v);t.set(C,N)}}return t}complete(){var e=this;return(0,Ke.Z)(function*(){const t=yield function vy(s,e,t,c){return gf.apply(this,arguments)}(e.localStore,new Py(e.serializer),e.documents,e.ju.id),c=e.Wu(e.documents);for(const f of e.queries)yield uv(e.localStore,f,c.get(f.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function vm(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class bv{constructor(e){this.key=e}}class Oy{constructor(e){this.key=e}}class Ry{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ai(),this.mutatedKeys=ai(),this.tc=tl(e),this.ec=new ap(this.tc)}get nc(){return this.Yu}sc(e,t){const c=t?t.ic:new pm,f=t?t.ec:this.ec;let v=t?t.mutatedKeys:this.mutatedKeys,C=f,N=!1;const X="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,he="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((ke,ct)=>{const Bt=f.get(ke),on=Ll(this.query,ct)?ct:null,Mn=!!Bt&&this.mutatedKeys.has(Bt.key),rr=!!on&&(on.hasLocalMutations||this.mutatedKeys.has(on.key)&&on.hasCommittedMutations);let cr=!1;Bt&&on?Bt.data.isEqual(on.data)?Mn!==rr&&(c.track({type:3,doc:on}),cr=!0):this.rc(Bt,on)||(c.track({type:2,doc:on}),cr=!0,(X&&this.tc(on,X)>0||he&&this.tc(on,he)<0)&&(N=!0)):!Bt&&on?(c.track({type:0,doc:on}),cr=!0):Bt&&!on&&(c.track({type:1,doc:Bt}),cr=!0,(X||he)&&(N=!0)),cr&&(on?(C=C.add(on),v=rr?v.add(ke):v.delete(ke)):(C=C.delete(ke),v=v.delete(ke)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ke="F"===this.query.limitType?C.last():C.first();C=C.delete(ke.key),v=v.delete(ke.key),c.track({type:1,doc:ke})}return{ec:C,ic:c,zi:N,mutatedKeys:v}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,c){const f=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const v=e.ic.xu();v.sort((he,ke)=>function(ct,Bt){const on=Mn=>{switch(Mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return An()}};return on(ct)-on(Bt)}(he.type,ke.type)||this.tc(he.doc,ke.doc)),this.oc(c);const C=t?this.uc():[],N=0===this.Zu.size&&this.current?1:0,X=N!==this.Xu;return this.Xu=N,0!==v.length||X?{snapshot:new Nd(this.query,e.ec,f,v,e.mutatedKeys,0===N,X,!1,!!c&&c.resumeToken.approximateByteSize()>0),cc:C}:{cc:C}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new pm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ai(),this.ec.forEach(c=>{this.ac(c.key)&&(this.Zu=this.Zu.add(c.key))});const t=[];return e.forEach(c=>{this.Zu.has(c)||t.push(new Oy(c))}),this.Zu.forEach(c=>{e.has(c)||t.push(new bv(c))}),t}hc(e){this.Yu=e.ir,this.Zu=ai();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Nd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class z0{constructor(e,t,c){this.query=e,this.targetId=t,this.view=c}}class Ev{constructor(e){this.key=e,this.fc=!1}}class W0{constructor(e,t,c,f,v,C){this.localStore=e,this.remoteStore=t,this.eventManager=c,this.sharedClientState=f,this.currentUser=v,this.maxConcurrentLimboResolutions=C,this.dc={},this.wc=new nl(N=>Bf(N),el),this._c=new Map,this.mc=new Set,this.gc=new Wi(Fn.comparator),this.yc=new Map,this.Ic=new Jg,this.Tc={},this.Ec=new Map,this.Ac=yl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function q0(s,e){return og.apply(this,arguments)}function og(){return og=(0,Ke.Z)(function*(s,e){const t=l(s);let c,f;const v=t.wc.get(e);if(v)c=v.targetId,t.sharedClientState.addLocalQueryTarget(c),f=v.view.lc();else{const C=yield Md(t.localStore,Ea(e)),N=t.sharedClientState.addLocalQueryTarget(C.targetId);c=C.targetId,f=yield Cv(t,e,c,"current"===N,C.resumeToken),t.isPrimaryClient&&om(t.remoteStore,C)}return f}),og.apply(this,arguments)}function Cv(s,e,t,c,f){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,Ke.Z)(function*(s,e,t,c,f){s.Rc=(ct,Bt,on)=>{return(Mn=(0,Ke.Z)(function*(rr,cr,wi,Yi){let Di=cr.view.sc(wi);Di.zi&&(Di=yield Yp(rr.localStore,cr.query,!1).then(({documents:Js})=>cr.view.sc(Js,Di)));const la=Yi&&Yi.targetChanges.get(cr.targetId),No=cr.view.applyChanges(Di,rr.isPrimaryClient,la);return xv(rr,cr.targetId,No.cc),No.snapshot}),function(rr,cr,wi,Yi){return Mn.apply(this,arguments)})(s,ct,Bt,on);var Mn};const v=yield Yp(s.localStore,e,!0),C=new Ry(e,v.ir),N=C.sc(v.documents),X=Kc.createSynthesizedTargetChangeForCurrentChange(t,c&&"Offline"!==s.onlineState,f),he=C.applyChanges(N,s.isPrimaryClient,X);xv(s,t,he.cc);const ke=new z0(e,t,C);return s.wc.set(e,ke),s._c.has(t)?s._c.get(t).push(e):s._c.set(t,[e]),he.snapshot}),Sv.apply(this,arguments)}function K0(s,e){return wv.apply(this,arguments)}function wv(){return wv=(0,Ke.Z)(function*(s,e){const t=Sn(s),c=t.wc.get(e),f=t._c.get(c.targetId);if(f.length>1)return t._c.set(c.targetId,f.filter(v=>!el(v,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(c.targetId),t.sharedClientState.isActiveQueryTarget(c.targetId)||(yield bh(t.localStore,c.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(c.targetId),sp(t.remoteStore,c.targetId),xh(t,c.targetId)}).catch(Ta))):(xh(t,c.targetId),yield bh(t.localStore,c.targetId,!0))}),wv.apply(this,arguments)}function Ru(){return Ru=(0,Ke.Z)(function*(s,e,t){const c=a(s);try{const f=yield function(v,C){const N=Sn(v),X=as.now(),he=C.reduce((Bt,on)=>Bt.add(on.key),ai());let ke,ct;return N.persistence.runTransaction("Locally write mutations","readwrite",Bt=>{let on=Ua(),Mn=ai();return N.Zi.getEntries(Bt,he).next(rr=>{on=rr,on.forEach((cr,wi)=>{wi.isValidDocument()||(Mn=Mn.add(cr))})}).next(()=>N.localDocuments.getOverlayedDocuments(Bt,on)).next(rr=>{ke=rr;const cr=[];for(const wi of C){const Yi=Xs(wi,ke.get(wi.key).overlayedDocument);null!=Yi&&cr.push(new _u(wi.key,Yi,vu(Yi.value.mapValue),Ms.exists(!0)))}return N.mutationQueue.addMutationBatch(Bt,X,cr,C)}).next(rr=>{ct=rr;const cr=rr.applyToLocalDocumentSet(ke,Mn);return N.documentOverlayCache.saveOverlays(Bt,rr.batchId,cr)})}).then(()=>({batchId:ct.batchId,changes:Lp(ke)}))}(c.localStore,e);c.sharedClientState.addPendingMutation(f.batchId),function(v,C,N){let X=v.Tc[v.currentUser.toKey()];X||(X=new Wi(Cr)),X=X.insert(C,N),v.Tc[v.currentUser.toKey()]=X}(c,f.batchId,t),yield Ld(c,f.changes),yield Ch(c.remoteStore)}catch(f){const v=Ih(f,"Failed to persist write");t.reject(v)}}),Ru.apply(this,arguments)}function ag(s,e){return ug.apply(this,arguments)}function ug(){return ug=(0,Ke.Z)(function*(s,e){const t=Sn(s);try{const c=yield function R0(s,e){const t=Sn(s),c=e.snapshotVersion;let f=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const C=t.Zi.newChangeBuffer({trackRemovals:!0});f=t.Ji;const N=[];e.targetChanges.forEach((ke,ct)=>{const Bt=f.get(ct);if(!Bt)return;N.push(t.Bs.removeMatchingKeys(v,ke.removedDocuments,ct).next(()=>t.Bs.addMatchingKeys(v,ke.addedDocuments,ct)));let on=Bt.withSequenceNumber(v.currentSequenceNumber);var Mn,rr,cr;null!==e.targetMismatches.get(ct)?on=on.withResumeToken(Mo.EMPTY_BYTE_STRING,vr.min()).withLastLimboFreeSnapshotVersion(vr.min()):ke.resumeToken.approximateByteSize()>0&&(on=on.withResumeToken(ke.resumeToken,c)),f=f.insert(ct,on),rr=on,cr=ke,(0===(Mn=Bt).resumeToken.approximateByteSize()||rr.snapshotVersion.toMicroseconds()-Mn.snapshotVersion.toMicroseconds()>=3e8||cr.addedDocuments.size+cr.modifiedDocuments.size+cr.removedDocuments.size>0)&&N.push(t.Bs.updateTargetData(v,on))});let X=Ua(),he=ai();if(e.documentUpdates.forEach(ke=>{e.resolvedLimboDocuments.has(ke)&&N.push(t.persistence.referenceDelegate.updateLimboDocument(v,ke))}),N.push(N0(v,C,e.documentUpdates).next(ke=>{X=ke.nr,he=ke.sr})),!c.isEqual(vr.min())){const ke=t.Bs.getLastRemoteSnapshotVersion(v).next(ct=>t.Bs.setTargetsMetadata(v,v.currentSequenceNumber,c));N.push(ke)}return Je.waitFor(N).next(()=>C.apply(v)).next(()=>t.localDocuments.getLocalViewOfDocuments(v,X,he)).next(()=>X)}).then(v=>(t.Ji=f,v))}(t.localStore,e);e.targetChanges.forEach((f,v)=>{const C=t.yc.get(v);C&&(lr(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?C.fc=!0:f.modifiedDocuments.size>0?lr(C.fc):f.removedDocuments.size>0&&(lr(C.fc),C.fc=!1))}),yield Ld(t,c,e)}catch(c){yield Ta(c)}}),ug.apply(this,arguments)}function ym(s,e,t){const c=Sn(s);if(c.isPrimaryClient&&0===t||!c.isPrimaryClient&&1===t){const f=[];c.wc.forEach((v,C)=>{const N=C.view.Mu(e);N.snapshot&&f.push(N.snapshot)}),function(v,C){const N=Sn(v);N.onlineState=C;let X=!1;N.queries.forEach((he,ke)=>{for(const ct of ke.listeners)ct.Mu(C)&&(X=!0)}),X&&mm(N)}(c.eventManager,e),f.length&&c.dc.nu(f),c.onlineState=e,c.isPrimaryClient&&c.sharedClientState.setOnlineState(e)}}function Y0(s,e,t){return _m.apply(this,arguments)}function _m(){return _m=(0,Ke.Z)(function*(s,e,t){const c=Sn(s);c.sharedClientState.updateQueryState(e,"rejected",t);const f=c.yc.get(e),v=f&&f.key;if(v){let C=new Wi(Fn.comparator);C=C.insert(v,Bi.newNoDocument(v,vr.min()));const N=ai().add(v),X=new qc(vr.min(),new Map,new Wi(Cr),C,N);yield ag(c,X),c.gc=c.gc.remove(v),c.yc.delete(e),cg(c)}else yield bh(c.localStore,e,!1).then(()=>xh(c,e,t)).catch(Ta)}),_m.apply(this,arguments)}function Dv(s,e){return up.apply(this,arguments)}function up(){return up=(0,Ke.Z)(function*(s,e){const t=Sn(s),c=e.batch.batchId;try{const f=yield function py(s,e){const t=Sn(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{const f=e.batch.keys(),v=t.Zi.newChangeBuffer({trackRemovals:!0});return function(C,N,X,he){const ke=X.batch,ct=ke.keys();let Bt=Je.resolve();return ct.forEach(on=>{Bt=Bt.next(()=>he.getEntry(N,on)).next(Mn=>{const rr=X.docVersions.get(on);lr(null!==rr),Mn.version.compareTo(rr)<0&&(ke.applyToRemoteDocument(Mn,X),Mn.isValidDocument()&&(Mn.setReadTime(X.commitVersion),he.addEntry(Mn)))})}),Bt.next(()=>C.mutationQueue.removeMutationBatch(N,ke))}(t,c,e,v).next(()=>v.apply(c)).next(()=>t.mutationQueue.performConsistencyCheck(c)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(c,f,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(C){let N=ai();for(let X=0;X<C.mutationResults.length;++X)C.mutationResults[X].transformResults.length>0&&(N=N.add(C.batch.mutations[X].key));return N}(e))).next(()=>t.localDocuments.getDocuments(c,f))})}(t.localStore,e);Tm(t,c,null),rs(t,c),t.sharedClientState.updateMutationState(c,"acknowledged"),yield Ld(t,f)}catch(f){yield Ta(f)}}),up.apply(this,arguments)}function Iv(s,e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,Ke.Z)(function*(s,e,t){const c=Sn(s);try{const f=yield function(v,C){const N=Sn(v);return N.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let he;return N.mutationQueue.lookupMutationBatch(X,C).next(ke=>(lr(null!==ke),he=ke.keys(),N.mutationQueue.removeMutationBatch(X,ke))).next(()=>N.mutationQueue.performConsistencyCheck(X)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(X,he,C)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,he)).next(()=>N.localDocuments.getDocuments(X,he))})}(c.localStore,e);Tm(c,e,t),rs(c,e),c.sharedClientState.updateMutationState(e,"rejected",t),yield Ld(c,f)}catch(f){yield Ta(f)}}),Ny.apply(this,arguments)}function lg(){return lg=(0,Ke.Z)(function*(s,e){const t=Sn(s);Od(t.remoteStore)||Cn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const c=yield function(v){const C=Sn(v);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>C.mutationQueue.getHighestUnacknowledgedBatchId(N))}(t.localStore);if(-1===c)return void e.resolve();const f=t.Ec.get(c)||[];f.push(e),t.Ec.set(c,f)}catch(c){const f=Ih(c,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),lg.apply(this,arguments)}function rs(s,e){(s.Ec.get(e)||[]).forEach(t=>{t.resolve()}),s.Ec.delete(e)}function Tm(s,e,t){const c=Sn(s);let f=c.Tc[c.currentUser.toKey()];if(f){const v=f.get(e);v&&(t?v.reject(t):v.resolve(),f=f.remove(e)),c.Tc[c.currentUser.toKey()]=f}}function xh(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const c of s._c.get(e))s.wc.delete(c),t&&s.dc.Pc(c,t);s._c.delete(e),s.isPrimaryClient&&s.Ic.Is(e).forEach(c=>{s.Ic.containsKey(c)||Jc(s,c)})}function Jc(s,e){s.mc.delete(e.path.canonicalString());const t=s.gc.get(e);null!==t&&(sp(s.remoteStore,t),s.gc=s.gc.remove(e),s.yc.delete(t),cg(s))}function xv(s,e,t){for(const c of t)c instanceof bv?(s.Ic.addReference(c.key,e),Q0(s,c)):c instanceof Oy?(Cn("SyncEngine","Document no longer in limbo: "+c.key),s.Ic.removeReference(c.key,e),s.Ic.containsKey(c.key)||Jc(s,c.key)):An()}function Q0(s,e){const t=e.key,c=t.path.canonicalString();s.gc.get(t)||s.mc.has(c)||(Cn("SyncEngine","New document in limbo: "+t),s.mc.add(c),cg(s))}function cg(s){for(;s.mc.size>0&&s.gc.size<s.maxConcurrentLimboResolutions;){const e=s.mc.values().next().value;s.mc.delete(e);const t=new Fn(Ni.fromString(e)),c=s.Ac.next();s.yc.set(c,new Ev(t)),s.gc=s.gc.insert(t,c),om(s.remoteStore,new Tc(Ea(rh(t.path)),c,"TargetPurposeLimboResolution",Io.ct))}}function Ld(s,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,Ke.Z)(function*(s,e,t){const c=Sn(s),f=[],v=[],C=[];var N;c.wc.isEmpty()||(c.wc.forEach((N,X)=>{C.push(c.Rc(X,e,t).then(he=>{if((he||t)&&c.isPrimaryClient&&c.sharedClientState.updateQueryState(X.targetId,he?.fromCache?"not-current":"current"),he){f.push(he);const ke=Zp.Li(X.targetId,he);v.push(ke)}}))}),yield Promise.all(C),c.dc.nu(f),yield(N=(0,Ke.Z)(function*(X,he){const ke=Sn(X);try{yield ke.persistence.runTransaction("notifyLocalViewChanges","readwrite",ct=>Je.forEach(he,Bt=>Je.forEach(Bt.Fi,on=>ke.persistence.referenceDelegate.addReference(ct,Bt.targetId,on)).next(()=>Je.forEach(Bt.Bi,on=>ke.persistence.referenceDelegate.removeReference(ct,Bt.targetId,on)))))}catch(ct){if(!qu(ct))throw ct;Cn("LocalStore","Failed to update sequence numbers: "+ct)}for(const ct of he){const Bt=ct.targetId;if(!ct.fromCache){const on=ke.Ji.get(Bt),rr=on.withLastLimboFreeSnapshotVersion(on.snapshotVersion);ke.Ji=ke.Ji.insert(Bt,rr)}}}),function(X,he){return N.apply(this,arguments)})(c.localStore,v))}),Av.apply(this,arguments)}function X0(s,e){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,Ke.Z)(function*(s,e){const t=Sn(s);if(!t.currentUser.isEqual(e)){Cn("SyncEngine","User change. New user:",e.toKey());const c=yield fy(t.localStore,e);t.currentUser=e,(f=t).Ec.forEach(C=>{C.forEach(N=>{N.reject(new dn($t.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.Ec.clear(),t.sharedClientState.handleUserChange(e,c.removedBatchIds,c.addedBatchIds),yield Ld(t,c.er)}var f}),Fy.apply(this,arguments)}function jy(s,e){const t=Sn(s),c=t.yc.get(e);if(c&&c.fc)return ai().add(c.key);{let f=ai();const v=t._c.get(e);if(!v)return f;for(const C of v){const N=t.wc.get(C);f=f.unionWith(N.view.nc)}return f}}function By(s,e){return lp.apply(this,arguments)}function lp(){return lp=(0,Ke.Z)(function*(s,e){const t=Sn(s),c=yield Yp(t.localStore,e.query,!0),f=e.view.hc(c);return t.isPrimaryClient&&xv(t,e.targetId,f.cc),f}),lp.apply(this,arguments)}function dg(s,e){return cp.apply(this,arguments)}function cp(){return cp=(0,Ke.Z)(function*(s,e){const t=Sn(s);return Eh(t.localStore,e).then(c=>Ld(t,c))}),cp.apply(this,arguments)}function x_(s,e,t,c){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,Ke.Z)(function*(s,e,t,c){const f=Sn(s),v=yield function(C,N){const X=Sn(C),he=Sn(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",ke=>he.Sn(ke,N).next(ct=>ct?X.localDocuments.getDocuments(ke,ct):Je.resolve(null)))}(f.localStore,e);var N;null!==v?("pending"===t?yield Ch(f.remoteStore):"acknowledged"===t||"rejected"===t?(Tm(f,e,c||null),rs(f,e),N=e,Sn(Sn(f.localStore).mutationQueue).Cn(N)):An(),yield Ld(f,v)):Cn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Mv.apply(this,arguments)}function bm(){return bm=(0,Ke.Z)(function*(s,e){const t=Sn(s);if(l(t),a(t),!0===e&&!0!==t.vc){const c=t.sharedClientState.getAllActiveQueryTargets(),f=yield Vy(t,c.toArray());t.vc=!0,yield hm(t.remoteStore,!0);for(const v of f)om(t.remoteStore,v)}else if(!1===e&&!1!==t.vc){const c=[];let f=Promise.resolve();t._c.forEach((v,C)=>{t.sharedClientState.isLocalQueryTarget(C)?c.push(C):f=f.then(()=>(xh(t,C),bh(t.localStore,C,!0))),sp(t.remoteStore,C)}),yield f,yield Vy(t,c),function(v){const C=Sn(v);C.yc.forEach((N,X)=>{sp(C.remoteStore,X)}),C.Ic.Ts(),C.yc=new Map,C.gc=new Wi(Fn.comparator)}(t),t.vc=!1,yield hm(t.remoteStore,!1)}}),bm.apply(this,arguments)}function Vy(s,e,t){return hg.apply(this,arguments)}function hg(){return hg=(0,Ke.Z)(function*(s,e,t){const c=Sn(s),f=[],v=[];for(const C of e){let N;const X=c._c.get(C);if(X&&0!==X.length){N=yield Md(c.localStore,Ea(X[0]));for(const he of X){const ke=c.wc.get(he),ct=yield By(c,ke);ct.snapshot&&v.push(ct.snapshot)}}else{const he=yield Qp(c.localStore,C);N=yield Md(c.localStore,he),yield Cv(c,kv(he),C,!1,N.resumeToken)}f.push(N)}return c.dc.nu(v),f}),hg.apply(this,arguments)}function kv(s){return zh(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Hy(s){const e=Sn(s);return Sn(Sn(e.localStore).persistence).$i()}function dp(s,e,t,c){return $y.apply(this,arguments)}function $y(){return $y=(0,Ke.Z)(function*(s,e,t,c){const f=Sn(s);if(f.vc)return void Cn("SyncEngine","Ignoring unexpected query state notification.");const v=f._c.get(e);if(v&&v.length>0)switch(t){case"current":case"not-current":{const C=yield Eh(f.localStore,sh(v[0])),N=qc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Mo.EMPTY_BYTE_STRING);yield Ld(f,C,N);break}case"rejected":yield bh(f.localStore,e,!0),xh(f,e,c);break;default:An()}}),$y.apply(this,arguments)}function Pv(s,e,t){return m.apply(this,arguments)}function m(){return m=(0,Ke.Z)(function*(s,e,t){const c=l(s);if(c.vc){for(const f of e){if(c._c.has(f)){Cn("SyncEngine","Adding an already active target "+f);continue}const v=yield Qp(c.localStore,f),C=yield Md(c.localStore,v);yield Cv(c,kv(v),C.targetId,!1,C.resumeToken),om(c.remoteStore,C)}for(const f of t)c._c.has(f)&&(yield bh(c.localStore,f,!1).then(()=>{sp(c.remoteStore,f),xh(c,f)}).catch(Ta))}}),m.apply(this,arguments)}function l(s){const e=Sn(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ag.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y0.bind(null,e),e.dc.nu=Ay.bind(null,e.eventManager),e.dc.Pc=My.bind(null,e.eventManager),e}function a(s){const e=Sn(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iv.bind(null,e),e}class n{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ke.Z)(function*(){t.serializer=np(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hy(this.persistence,new tm,e.initialUser,this.serializer)}createPersistence(e){return new Jf(Ec.zs,this.serializer)}createSharedClientState(e){return new _y}terminate(){var e=this;return(0,Ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class h extends n{constructor(e,t,c){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=c,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,c=this;return(0,Ke.Z)(function*(){yield t().call(c,e),yield c.Vc.initialize(c,e),yield a(c.Vc.syncEngine),yield Ch(c.Vc.remoteStore),yield c.persistence.Ii(()=>(c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hy(this.persistence,new tm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Qc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const c=new Nc(t,this.persistence);return new Kd(e.asyncQueue,c)}createPersistence(e){const t=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?uu.withCacheSize(this.cacheSizeBytes):uu.DEFAULT;return new em(this.synchronizeTabs,t,e.clientId,c,e.asyncQueue,tp(),tg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _y}}class y extends h{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,c=this;return(0,Ke.Z)(function*(){yield t().call(c,e);const f=c.Vc.syncEngine;c.sharedClientState instanceof eg&&(c.sharedClientState.syncEngine={jr:x_.bind(null,f),zr:dp.bind(null,f),Wr:Pv.bind(null,f),$i:Hy.bind(null,f),Qr:dg.bind(null,f)},yield c.sharedClientState.start()),yield c.persistence.Ii(function(){var v=(0,Ke.Z)(function*(C){yield function Uy(s,e){return bm.apply(this,arguments)}(c.Vc.syncEngine,C),c.gcScheduler&&(C&&!c.gcScheduler.started?c.gcScheduler.start():C||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(C&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():C||c.indexBackfillerScheduler.stop())});return function(C){return v.apply(this,arguments)}}())})()}createSharedClientState(e){const t=tp();if(!eg.D(t))throw new dn($t.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const c=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eg(t,e.asyncQueue,c,e.clientId,e.initialUser)}}class S{initialize(e,t){var c=this;return(0,Ke.Z)(function*(){c.localStore||(c.localStore=e.localStore,c.sharedClientState=e.sharedClientState,c.datastore=c.createDatastore(t),c.remoteStore=c.createRemoteStore(t),c.eventManager=c.createEventManager(t),c.syncEngine=c.createSyncEngine(t,!e.synchronizeTabs),c.sharedClientState.onlineStateHandler=f=>ym(c.syncEngine,f,1),c.remoteStore.remoteSyncer.handleCredentialChange=X0.bind(null,c.syncEngine),yield hm(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(e){return new G0}createDatastore(e){const t=np(e.databaseInfo.databaseId),c=new mf(e.databaseInfo);return new U0(e.authCredentials,e.appCheckCredentials,c,t)}createRemoteStore(e){return t=this.localStore,c=this.datastore,f=e.asyncQueue,v=N=>ym(this.syncEngine,N,0),C=im.D()?new im:new rm,new Sc(t,c,f,v,C);var t,c,f,v,C}createSyncEngine(e,t){return function(c,f,v,C,N,X,he){const ke=new W0(c,f,v,C,N,X);return he&&(ke.vc=!0),ke}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ke.Z)(function*(t){const c=Sn(t);Cn("RemoteStore","RemoteStore shutting down."),c.vu.add(5),yield ip(c),c.Pu.shutdown(),c.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function x(s,e=10240){let t=0;return{read:()=>(0,Ke.Z)(function*(){if(t<s.byteLength){const c={value:s.slice(t,t+e),done:!1};return t+=e,c}return{done:!0}})(),cancel:()=>(0,Ke.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class V{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class re{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new oi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(c=>{c&&c.Qu()?this.metadata.resolve(c.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(c?.Gu)}`))},c=>this.metadata.reject(c))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ke.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ke.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.kc();if(null===t)return null;const c=e.xc.decode(t),f=Number(c);isNaN(f)&&e.Mc(`length string (${c}) is not valid number`);const v=yield e.$c(f);return new ky(JSON.parse(v),t.length+f)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ke.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const c=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),c})()}$c(e){var t=this;return(0,Ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const c=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),c})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const c=new Uint8Array(e.buffer.length+t.value.length);c.set(e.buffer),c.set(t.value,e.buffer.length),e.buffer=c}return t.done})()}}class ee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new dn($t.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const c=yield(f=(0,Ke.Z)(function*(v,C){const N=Sn(v),X=hh(N.serializer)+"/documents",he={documents:C.map(on=>tf(N.serializer,on))},ke=yield N.vo("BatchGetDocuments",X,he,C.length),ct=new Map;ke.forEach(on=>{const Mn=function jg(s,e){return"found"in e?function(t,c){lr(!!c.found);const f=ml(t,c.found.name),v=Po(c.found.updateTime),C=c.found.createTime?Po(c.found.createTime):vr.min(),N=new Si({mapValue:{fields:c.found.fields}});return Bi.newFoundDocument(f,v,C,N)}(s,e):"missing"in e?function(t,c){lr(!!c.missing),lr(!!c.readTime);const f=ml(t,c.missing),v=Po(c.readTime);return Bi.newNoDocument(f,v)}(s,e):An()}(N.serializer,on);ct.set(Mn.key.toString(),Mn)});const Bt=[];return C.forEach(on=>{const Mn=ct.get(on.toString());lr(!!Mn),Bt.push(Mn)}),Bt}),function(v,C){return f.apply(this,arguments)})(t.datastore,e);var f;return c.forEach(f=>t.recordVersion(f)),c})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(e.toString())}delete(e){this.write(new _d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var c;e.mutations.forEach(c=>{t.delete(c.key.toString())}),t.forEach((c,f)=>{const v=Fn.fromPath(f);e.mutations.push(new Td(v,e.precondition(v)))}),yield(c=(0,Ke.Z)(function*(f,v){const C=Sn(f),N=hh(C.serializer)+"/documents",X={writes:v.map(he=>Va(C.serializer,he))};yield C.Io("Commit",N,X)}),function(f,v){return c.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw An();t=vr.min()}const c=this.readVersions.get(e.key.toString());if(c){if(!t.isEqual(c))throw new dn($t.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vr.min())?Ms.exists(!1):Ms.updateTime(t):Ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vr.min()))throw new dn($t.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ms.updateTime(t)}return Ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class De{constructor(e,t,c,f,v){this.asyncQueue=e,this.datastore=t,this.options=c,this.updateFunction=f,this.deferred=v,this.Bc=c.maxAttempts,this.qo=new dv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ke.Z)(function*(){const t=new ee(e.datastore),c=e.qc(t);c&&c.then(f=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(f)}).catch(v=>{e.Uc(v)}))}).catch(f=>{e.Uc(f)})}))}qc(e){try{const t=this.updateFunction(e);return!xo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Nt(t)}return!1}}class ze{constructor(e,t,c,f){var v=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=c,this.databaseInfo=f,this.user=Or.UNAUTHENTICATED,this.clientId=ts.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,function(){var C=(0,Ke.Z)(function*(N){Cn("FirestoreClient","Received user=",N.uid),yield v.authCredentialListener(N),v.user=N});return function(N){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(c,C=>(Cn("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dn($t.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(c){const f=Ih(c,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}function Ve(s,e){return Be.apply(this,arguments)}function Be(){return Be=(0,Ke.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Cn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield s.getConfiguration();yield e.initialize(t);let c=t.initialUser;s.setCredentialChangeListener(function(){var f=(0,Ke.Z)(function*(v){c.isEqual(v)||(yield fy(e.localStore,v),c=v)});return function(v){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}),Be.apply(this,arguments)}function Wt(s,e){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,Ke.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const t=yield hn(s);Cn("FirestoreClient","Initializing OnlineComponentProvider");const c=yield s.getConfiguration();yield e.initialize(t,c),s.setCredentialChangeListener(f=>dm(e.remoteStore,f)),s.setAppCheckTokenChangeListener((f,v)=>dm(e.remoteStore,v)),s._onlineComponents=e}),Lt.apply(this,arguments)}function cn(s){return"FirebaseError"===s.name?s.code===$t.FAILED_PRECONDITION||s.code===$t.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code}function hn(s){return rn.apply(this,arguments)}function rn(){return rn=(0,Ke.Z)(function*(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Cn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ve(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!cn(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),yield Ve(s,new n)}}else Cn("FirestoreClient","Using default OfflineComponentProvider"),yield Ve(s,new n);return s._offlineComponents}),rn.apply(this,arguments)}function qn(s){return tr.apply(this,arguments)}function tr(){return tr=(0,Ke.Z)(function*(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Cn("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wt(s,s._uninitializedComponentsProvider._online)):(Cn("FirestoreClient","Using default OnlineComponentProvider"),yield Wt(s,new S))),s._onlineComponents}),tr.apply(this,arguments)}function wn(s){return hn(s).then(e=>e.persistence)}function _n(s){return hn(s).then(e=>e.localStore)}function Zn(s){return qn(s).then(e=>e.remoteStore)}function ps(s){return qn(s).then(e=>e.syncEngine)}function ks(s){return cu.apply(this,arguments)}function cu(){return cu=(0,Ke.Z)(function*(s){const e=yield qn(s),t=e.eventManager;return t.onListen=q0.bind(null,e.syncEngine),t.onUnlisten=K0.bind(null,e.syncEngine),t}),cu.apply(this,arguments)}function Nu(s,e,t={}){const c=new oi;return s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(f,v,C,N,X){const he=new V({next:ct=>{v.enqueueAndForget(()=>Tv(f,ke));const Bt=ct.docs.has(C);!Bt&&ct.fromCache?X.reject(new dn($t.UNAVAILABLE,"Failed to get document because the client is offline.")):Bt&&ct.fromCache&&N&&"server"===N.source?X.reject(new dn($t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(ct)},error:ct=>X.reject(ct)}),ke=new Ou(rh(C.path),he,{includeMetadataChanges:!0,Ku:!0});return yv(f,ke)}(yield ks(s),s.asyncQueue,e,t,c)})),c.promise}function za(s,e,t={}){const c=new oi;return s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(f,v,C,N,X){const he=new V({next:ct=>{v.enqueueAndForget(()=>Tv(f,ke)),ct.fromCache&&"server"===N.source?X.reject(new dn($t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(ct)},error:ct=>X.reject(ct)}),ke=new Ou(C,he,{includeMetadataChanges:!0,Ku:!0});return yv(f,ke)}(yield ks(s),s.asyncQueue,e,t,c)})),c.promise}function Tl(s){const e={};return void 0!==s.timeoutSeconds&&(e.timeoutSeconds=s.timeoutSeconds),e}const Em=new Map;function Ah(s,e,t){if(!t)throw new dn($t.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Mh(s,e,t,c){if(!0===e&&!0===c)throw new dn($t.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function _f(s){if(!Fn.isDocumentKey(s))throw new dn($t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Tf(s){if(Fn.isDocumentKey(s))throw new dn($t.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function jd(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(t=s).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof s?"a function":An()}function Oi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new dn($t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jd(s);throw new dn($t.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ic(s,e){if(e<=0)throw new dn($t.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class sl{constructor(e){var t,c;if(void 0===e.host){if(void 0!==e.ssl)throw new dn($t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dn($t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Tl(null!==(c=e.experimentalLongPollingOptions)&&void 0!==c?c:{}),function(f){if(void 0!==f.timeoutSeconds){if(isNaN(f.timeoutSeconds))throw new dn($t.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new dn($t.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new dn($t.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gl{constructor(e,t,c,f){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=c,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dn($t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dn($t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ya;switch(t.type){case"firstParty":return new ru(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new dn($t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Em.get(e);t&&(Cn("ComponentProvider","Removing Datastore"),Em.delete(e),t.terminate())}(this),Promise.resolve()}}class ho{constructor(e,t,c){this.converter=t,this._key=c,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ho(this.firestore,e,this._key)}}class Ca{constructor(e,t,c){this.converter=t,this._query=c,this.type="query",this.firestore=e}withConverter(e){return new Ca(this.firestore,e,this._query)}}class xc extends Ca{constructor(e,t,c){super(e,t,rh(c)),this._path=c,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ho(this.firestore,null,new Fn(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function fg(s,e,...t){if(s=(0,Te.m9)(s),Ah("collection","path",e),s instanceof Gl){const c=Ni.fromString(e,...t);return Tf(c),new xc(s,null,c)}{if(!(s instanceof ho||s instanceof xc))throw new dn($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=s._path.child(Ni.fromString(e,...t));return Tf(c),new xc(s.firestore,null,c)}}function bf(s,e,...t){if(s=(0,Te.m9)(s),1===arguments.length&&(e=ts.A()),Ah("doc","path",e),s instanceof Gl){const c=Ni.fromString(e,...t);return _f(c),new ho(s,null,new Fn(c))}{if(!(s instanceof ho||s instanceof xc))throw new dn($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=s._path.child(Ni.fromString(e,...t));return _f(c),new ho(s.firestore,s instanceof xc?s.converter:null,new Fn(c))}}function hp(s,e){return s=(0,Te.m9)(s),e=(0,Te.m9)(e),(s instanceof ho||s instanceof xc)&&(e instanceof ho||e instanceof xc)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function fp(s,e){return s=(0,Te.m9)(s),e=(0,Te.m9)(e),s instanceof Ca&&e instanceof Ca&&s.firestore===e.firestore&&el(s._query,e._query)&&s.converter===e.converter}class Sm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new dv(this,"async_queue_retry"),this.Xc=()=>{const t=tg();t&&Cn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=tg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=tg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new oi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ke.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!qu(t))throw t;Cn("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(c=>{throw this.Wc=c,this.Hc=!1,zi("INTERNAL UNHANDLED ERROR: ",function(v){let C=v.message||"";return v.stack&&(C=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),C}(c)),c}).then(c=>(this.Hc=!1,c))));return this.Gc=t,t}enqueueAfterDelay(e,t,c){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const f=fm.createAndSchedule(this,e,t,c,v=>this.na(v));return this.zc.push(f),f}Zc(){this.Wc&&An()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ke.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,c)=>t.targetTimeMs-c.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function wm(s){return function(e,t){if("object"!=typeof e||null===e)return!1;const c=e;for(const f of["next","error","complete"])if(f in c&&"function"==typeof c[f])return!0;return!1}(s)}class J0{constructor(){this._progressObserver={},this._taskCompletionResolver=new oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,c){this._progressObserver={next:e,error:t,complete:c}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class So extends Gl{constructor(e,t,c,f){super(e,t,c,f),this.type="firestore",this._queue=new Sm,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||e_(this),this._firestoreClient.terminate()}}function ua(s){return s._firestoreClient||e_(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function e_(s){var e,t,c;const f=s._freezeSettings(),v=(N=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Ip(s._databaseId,N,s._persistenceKey,(he=f).host,he.ssl,he.experimentalForceLongPolling,he.experimentalAutoDetectLongPolling,Tl(he.experimentalLongPollingOptions),he.useFetchStreams));var N,he;s._firestoreClient=new ze(s._authCredentials,s._appCheckCredentials,s._queue,v),null!==(t=f.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(c=f.cache)&&void 0!==c&&c._onlineComponentProvider&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:f.cache.kind,_offline:f.cache._offlineComponentProvider,_online:f.cache._onlineComponentProvider})}function Gy(s,e,t){const c=new oi;return s.asyncQueue.enqueue((0,Ke.Z)(function*(){try{yield Ve(s,t),yield Wt(s,e),c.resolve()}catch(f){const v=f;if(!cn(v))throw v;To("Error enabling indexeddb cache. Falling back to memory cache: "+v),c.reject(v)}})).then(()=>c.promise)}function Wy(s){if(s._initialized||s._terminated)throw new dn($t.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(Mo.fromBase64String(e))}catch(t){throw new dn($t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xo(Mo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new dn($t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ed{constructor(e){this._methodName=e}}class Lu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dn($t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dn($t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cr(this._lat,e._lat)||Cr(this._long,e._long)}}const pp=/^__.*__$/;class Ro{constructor(e,t,c){this.data=e,this.fieldMask=t,this.fieldTransforms=c}toMutation(e,t){return null!==this.fieldMask?new _u(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}class qy{constructor(e,t,c){this.data=e,this.fieldMask=t,this.fieldTransforms=c}toMutation(e,t){return new _u(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yg(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw An()}}class Vd{constructor(e,t,c,f,v,C){this.settings=e,this.databaseId=t,this.serializer=c,this.ignoreUndefinedProperties=f,void 0===v&&this.ua(),this.fieldTransforms=v||[],this.fieldMask=C||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const c=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.aa({path:c,la:!1});return f.fa(e),f}da(e){var t;const c=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.aa({path:c,la:!1});return f.ua(),f}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Cf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(yg(this.ca)&&pp.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class r_{constructor(e,t,c){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=c||np(e)}ya(e,t,c,f=!1){return new Vd({ca:e,methodName:t,ga:c,path:gi.emptyPath(),la:!1,ma:f},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(s){const e=s._freezeSettings(),t=np(s._databaseId);return new r_(s._databaseId,!!e.ignoreUndefinedProperties,t)}function fo(s,e,t,c,f,v={}){const C=s.ya(v.merge||v.mergeFields?2:0,e,t,f);Ef("Data must be an object, but it was:",C,c);const N=Yy(c,C);let X,he;if(v.merge)X=new sa(C.fieldMask),he=C.fieldTransforms;else if(v.mergeFields){const ke=[];for(const ct of v.mergeFields){const Bt=td(e,ct,t);if(!C.contains(Bt))throw new dn($t.INVALID_ARGUMENT,`Field '${Bt}' is specified in your field mask but missing from your input data.`);gp(ke,Bt)||ke.push(Bt)}X=new sa(ke),he=C.fieldTransforms.filter(ct=>X.covers(ct.field))}else X=null,he=C.fieldTransforms;return new Ro(new Si(N),X,he)}class kh extends ed{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kh}}function Wa(s,e,t){return new Vd({ca:3,ga:e.settings.ga,methodName:s._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Im extends ed{_toFieldTransform(e){return new mc(e.path,new vd)}isEqual(e){return e instanceof Im}}class Ky extends ed{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Wa(this,e,!0),c=this.pa.map(v=>zl(v,t)),f=new fl(c);return new mc(e.path,f)}isEqual(e){return this===e}}class Zy extends ed{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Wa(this,e,!0),c=this.pa.map(v=>zl(v,t)),f=new zc(c);return new mc(e.path,f)}isEqual(e){return this===e}}class Rv extends ed{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new gc(e.serializer,qh(e.serializer,this.Ia));return new mc(e.path,t)}isEqual(e){return this===e}}function xm(s,e,t,c){const f=s.ya(1,e,t);Ef("Data must be an object, but it was:",f,c);const v=[],C=Si.empty();ia(c,(X,he)=>{const ke=Am(e,X,t);he=(0,Te.m9)(he);const ct=f.da(ke);if(he instanceof kh)v.push(ke);else{const Bt=zl(he,ct);null!=Bt&&(v.push(ke),C.set(ke,Bt))}});const N=new sa(v);return new qy(C,N,f.fieldTransforms)}function _g(s,e,t,c,f,v){const C=s.ya(1,e,t),N=[td(e,c,t)],X=[f];if(v.length%2!=0)throw new dn($t.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Bt=0;Bt<v.length;Bt+=2)N.push(td(e,v[Bt])),X.push(v[Bt+1]);const he=[],ke=Si.empty();for(let Bt=N.length-1;Bt>=0;--Bt)if(!gp(he,N[Bt])){const on=N[Bt];let Mn=X[Bt];Mn=(0,Te.m9)(Mn);const rr=C.da(on);if(Mn instanceof kh)he.push(on);else{const cr=zl(Mn,rr);null!=cr&&(he.push(on),ke.set(on,cr))}}const ct=new sa(he);return new qy(ke,ct,C.fieldTransforms)}function Tg(s,e,t,c=!1){return zl(t,s.ya(c?4:3,e))}function zl(s,e){if(Ph(s=(0,Te.m9)(s)))return Ef("Unsupported field value:",e,s),Yy(s,e);if(s instanceof ed)return function(t,c){if(!yg(c.ca))throw c._a(`${t._methodName}() can only be used with update() and set()`);if(!c.path)throw c._a(`${t._methodName}() is not currently supported inside arrays`);const f=t._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,c){const f=[];let v=0;for(const C of t){let N=zl(C,c.wa(v));null==N&&(N={nullValue:"NULL_VALUE"}),f.push(N),v++}return{arrayValue:{values:f}}}(s,e)}return function(t,c){if(null===(t=(0,Te.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qh(c.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const f=as.fromDate(t);return{timestampValue:Jh(c.serializer,f)}}if(t instanceof as){const f=new as(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jh(c.serializer,f)}}if(t instanceof Lu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xo)return{bytesValue:ef(c.serializer,t._byteString)};if(t instanceof ho){const f=c.databaseId,v=t.firestore._databaseId;if(!v.isEqual(f))throw c._a(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Vp(t.firestore._databaseId||c.databaseId,t._key.path)}}throw c._a(`Unsupported field value: ${jd(t)}`)}(s,e)}function Yy(s,e){const t={};return Eo(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(s,(c,f)=>{const v=zl(f,e.ha(c));null!=v&&(t[c]=v)}),{mapValue:{fields:t}}}function Ph(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof as||s instanceof Lu||s instanceof Xo||s instanceof ho||s instanceof ed)}function Ef(s,e,t){if(!Ph(t)||"object"!=typeof(c=t)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const c=jd(t);throw e._a("an object"===c?s+" a custom object":s+" "+c)}var c}function td(s,e,t){if((e=(0,Te.m9)(e))instanceof Ud)return e._internalPath;if("string"==typeof e)return Am(s,e);throw Cf("Field path arguments must be of type string or ",s,!1,void 0,t)}const Qy=new RegExp("[~\\*/\\[\\]]");function Am(s,e,t){if(e.search(Qy)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ud(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Cf(s,e,t,c,f){const v=c&&!c.isEmpty(),C=void 0!==f;let N=`Function ${e}() called with invalid data`;t&&(N+=" (via `toFirestore()`)"),N+=". ";let X="";return(v||C)&&(X+=" (found",v&&(X+=` in field ${c}`),C&&(X+=` in document ${f}`),X+=")"),new dn($t.INVALID_ARGUMENT,N+s+X)}function gp(s,e){return s.some(t=>t.isEqual(e))}class Ac{constructor(e,t,c,f,v){this._firestore=e,this._userDataWriter=t,this._key=c,this._document=f,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new ho(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hd extends Ac{data(){return super.data()}}function Sf(s,e){return"string"==typeof e?Am(s,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}function Mm(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new dn($t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bg{}class El extends bg{}function $d(s,e,...t){let c=[];e instanceof bg&&c.push(e),c=c.concat(t),function(f){const v=f.filter(N=>N instanceof Gd).length,C=f.filter(N=>N instanceof nd).length;if(v>1||v>0&&C>0)throw new dn($t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(c);for(const f of c)s=f._apply(s);return s}class nd extends El{constructor(e,t,c){super(),this._field=e,this._op=t,this._value=c,this.type="where"}static _create(e,t,c){return new nd(e,t,c)}_apply(e){const t=this._parse(e);return Bv(e._query,t),new Ca(e.firestore,e.converter,Vc(e._query,t))}_parse(e){const t=ol(e.firestore);return function(f,v,C,N,X,he,ke){let ct;if(X.isKeyField()){if("array-contains"===he||"array-contains-any"===he)throw new dn($t.INVALID_ARGUMENT,`Invalid Query. You can't perform '${he}' queries on documentId().`);if("in"===he||"not-in"===he){jv(ke,he);const Bt=[];for(const on of ke)Bt.push(Fv(N,f,on));ct={arrayValue:{values:Bt}}}else ct=Fv(N,f,ke)}else"in"!==he&&"not-in"!==he&&"array-contains-any"!==he||jv(ke,he),ct=Tg(C,"where",ke,"in"===he||"not-in"===he);return Pi.create(X,he,ct)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gd extends bg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gd(e,t)}_parse(e){const t=this._queryConstraints.map(c=>c._parse(e)).filter(c=>c.getFilters().length>0);return 1===t.length?t[0]:us.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(c,f){let v=c;const C=f.getFlattenedFilters();for(const N of C)Bv(v,N),v=Vc(v,N)}(e._query,t),new Ca(e.firestore,e.converter,Vc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wf extends El{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wf(e,t)}_apply(e){const t=function(c,f,v){if(null!==c.startAt)throw new dn($t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new dn($t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Qu(f,v);return function(N,X){if(null===Np(N)){const he=gd(N);null!==he&&_p(0,he,X.field)}}(c,C),C}(e._query,this._field,this._direction);return new Ca(e.firestore,e.converter,function(c,f){const v=c.explicitOrderBy.concat([f]);return new Xu(c.path,c.collectionGroup,v,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,t))}}class vp extends El{constructor(e,t,c){super(),this.type=e,this._limit=t,this._limitType=c}static _create(e,t,c){return new vp(e,t,c)}_apply(e){return new Ca(e.firestore,e.converter,Hc(e._query,this._limit,this._limitType))}}class yp extends El{constructor(e,t,c){super(),this.type=e,this._docOrFields=t,this._inclusive=c}static _create(e,t,c){return new yp(e,t,c)}_apply(e){const t=Lv(e,this.type,this._docOrFields,this._inclusive);return new Ca(e.firestore,e.converter,(f=t,new Xu((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)));var c,f}}class Df extends El{constructor(e,t,c){super(),this.type=e,this._docOrFields=t,this._inclusive=c}static _create(e,t,c){return new Df(e,t,c)}_apply(e){const t=Lv(e,this.type,this._docOrFields,this._inclusive);return new Ca(e.firestore,e.converter,(f=t,new Xu((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)));var c,f}}function Lv(s,e,t,c){if(t[0]=(0,Te.m9)(t[0]),t[0]instanceof Ac)return function(f,v,C,N,X){if(!N)throw new dn($t.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const he=[];for(const ke of Ju(f))if(ke.field.isKeyField())he.push(H(v,N.key));else{const ct=N.data.field(ke.field);if(hd(ct))throw new dn($t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ke.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ct){const Bt=ke.field.canonicalString();throw new dn($t.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Bt}' (used as the orderBy) does not exist.`)}he.push(ct)}return new ba(he,X)}(s._query,s.firestore._databaseId,e,t[0]._document,c);{const f=ol(s.firestore);return function(v,C,N,X,he,ke){const ct=v.explicitOrderBy;if(he.length>ct.length)throw new dn($t.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Bt=[];for(let on=0;on<he.length;on++){const Mn=he[on];if(ct[on].field.isKeyField()){if("string"!=typeof Mn)throw new dn($t.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Mn}`);if(!Nl(v)&&-1!==Mn.indexOf("/"))throw new dn($t.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Mn}' contains a slash.`);const rr=v.path.child(Ni.fromString(Mn));if(!Fn.isDocumentKey(rr))throw new dn($t.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${rr}' is not because it contains an odd number of segments.`);const cr=new Fn(rr);Bt.push(H(C,cr))}else{const rr=Tg(N,X,Mn);Bt.push(rr)}}return new ba(Bt,ke)}(s._query,s.firestore._databaseId,f,e,t,c)}}function Fv(s,e,t){if("string"==typeof(t=(0,Te.m9)(t))){if(""===t)throw new dn($t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nl(e)&&-1!==t.indexOf("/"))throw new dn($t.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const c=e.path.child(Ni.fromString(t));if(!Fn.isDocumentKey(c))throw new dn($t.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${c}' is not because it has an odd number of segments (${c.length}).`);return H(s,new Fn(c))}if(t instanceof ho)return H(s,t._key);throw new dn($t.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function jv(s,e){if(!Array.isArray(s)||0===s.length)throw new dn($t.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bv(s,e){if(e.isInequality()){const c=gd(s),f=e.field;if(null!==c&&!c.isEqual(f))throw new dn($t.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${c.toString()}' and '${f.toString()}'`);const v=Np(s);null!==v&&_p(0,f,v)}const t=function(c,f){for(const v of c)for(const C of v.getFlattenedFilters())if(f.indexOf(C.op)>=0)return C.op;return null}(s.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new dn($t.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _p(s,e,t){if(!t.isEqual(e))throw new dn($t.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bp{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ko(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw An()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const c={};return ia(e,(f,v)=>{c[f]=this.convertValue(v,t)}),c}convertGeoPoint(e){return new Lu(ko(e.latitude),ko(e.longitude))}convertArray(e,t){return(e.values||[]).map(c=>this.convertValue(c,t))}convertServerTimestamp(e,t){switch(t){case"previous":const c=Zu(e);return null==c?null:this.convertValue(c,t);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}convertTimestamp(e){const t=Ol(e);return new as(t.seconds,t.nanos)}convertDocumentKey(e,t){const c=Ni.fromString(e);lr(Hm(c));const f=new Ho(c.get(1),c.get(3)),v=new Fn(c.popFirst(5));return f.isEqual(t)||zi(`Document ${v} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),v}}function Mc(s,e,t){let c;return c=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,c}class Uv extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ho(this.firestore,null,t)}}class Cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends Ac{constructor(e,t,c,f,v,C){super(e,t,c,f,C),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const c=this._document.data.field(Sf("DocumentSnapshot.get",e));if(null!==c)return this._userDataWriter.convertValue(c,t.serverTimestamps)}}}class xf extends Sl{data(e={}){return super.data(e)}}class al{constructor(e,t,c,f){this._firestore=e,this._userDataWriter=t,this._snapshot=f,this.metadata=new Cl(f.hasPendingWrites,f.fromCache),this.query=c}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(c=>{e.call(t,new xf(this._firestore,this._userDataWriter,c.key,c,new Cl(this._snapshot.mutatedKeys.has(c.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dn($t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let v=0;return c._snapshot.docChanges.map(C=>({type:"added",doc:new xf(c._firestore,c._userDataWriter,C.doc.key,C.doc,new Cl(c._snapshot.mutatedKeys.has(C.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:v++}))}{let v=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(C=>f||3!==C.type).map(C=>{const N=new xf(c._firestore,c._userDataWriter,C.doc.key,C.doc,new Cl(c._snapshot.mutatedKeys.has(C.doc.key),c._snapshot.fromCache),c.query.converter);let X=-1,he=-1;return 0!==C.type&&(X=v.indexOf(C.doc.key),v=v.delete(C.doc.key)),1!==C.type&&(v=v.add(C.doc),he=v.indexOf(C.doc.key)),{type:o0(C.type),doc:N,oldIndex:X,newIndex:he}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function o0(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return An()}}function Eg(s,e){return s instanceof Sl&&e instanceof Sl?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof al&&e instanceof al&&s._firestore===e._firestore&&fp(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}class po extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ho(this.firestore,null,t)}}function Vv(s,e,t){s=Oi(s,ho);const c=Oi(s.firestore,So),f=Mc(s.converter,e,t);return Mf(c,[fo(ol(c),"setDoc",s._key,f,null!==s.converter,t).toMutation(s._key,Ms.none())])}function uo(s,e,t,...c){s=Oi(s,ho);const f=Oi(s.firestore,So),v=ol(f);let C;return C="string"==typeof(e=(0,Te.m9)(e))||e instanceof Ud?_g(v,"updateDoc",s._key,e,t,c):xm(v,"updateDoc",s._key,e),Mf(f,[C.toMutation(s._key,Ms.exists(!0))])}function Hv(s,...e){var t,c,f;s=(0,Te.m9)(s);let v={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||wm(e[C])||(v=e[C],C++);const N={includeMetadataChanges:v.includeMetadataChanges};if(wm(e[C])){const ct=e[C];e[C]=null===(t=ct.next)||void 0===t?void 0:t.bind(ct),e[C+1]=null===(c=ct.error)||void 0===c?void 0:c.bind(ct),e[C+2]=null===(f=ct.complete)||void 0===f?void 0:f.bind(ct)}let X,he,ke;if(s instanceof ho)he=Oi(s.firestore,So),ke=rh(s._key.path),X={next:ct=>{e[C]&&e[C](Om(he,s,ct))},error:e[C+1],complete:e[C+2]};else{const ct=Oi(s,Ca);he=Oi(ct.firestore,So),ke=ct._query;const Bt=new po(he);X={next:on=>{e[C]&&e[C](new al(he,Bt,ct,on))},error:e[C+1],complete:e[C+2]},Mm(s._query)}return function(ct,Bt,on,Mn){const rr=new V(Mn),cr=new Ou(Bt,rr,on);return ct.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return yv(yield ks(ct),cr)})),()=>{rr.Dc(),ct.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return Tv(yield ks(ct),cr)}))}}(ua(he),ke,N,X)}function Mf(s,e){return function(t,c){const f=new oi;return t.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function Z0(s,e,t){return Ru.apply(this,arguments)}(yield ps(t),c,f)})),f.promise}(ua(s),e)}function Om(s,e,t){const c=t.docs.get(e._key),f=new po(s);return new Sl(s,f,e._key,c,new Cl(t.hasPendingWrites,t.fromCache),e.converter)}const d0={maxAttempts:5};class Cg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ol(e)}set(e,t,c){this._verifyNotCommitted();const f=wl(e,this._firestore),v=Mc(f.converter,t,c),C=fo(this._dataReader,"WriteBatch.set",f._key,v,null!==f.converter,c);return this._mutations.push(C.toMutation(f._key,Ms.none())),this}update(e,t,c,...f){this._verifyNotCommitted();const v=wl(e,this._firestore);let C;return C="string"==typeof(t=(0,Te.m9)(t))||t instanceof Ud?_g(this._dataReader,"WriteBatch.update",v._key,t,c,f):xm(this._dataReader,"WriteBatch.update",v._key,t),this._mutations.push(C.toMutation(v._key,Ms.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wl(e,this._firestore);return this._mutations=this._mutations.concat(new _d(t._key,Ms.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dn($t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wl(s,e){if((s=(0,Te.m9)(s)).firestore!==e)throw new dn($t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class h0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ol(e)}get(e){const t=wl(e,this._firestore),c=new Uv(this._firestore);return this._transaction.lookup([t._key]).then(f=>{if(!f||1!==f.length)return An();const v=f[0];if(v.isFoundDocument())return new Ac(this._firestore,c,v.key,v,t.converter);if(v.isNoDocument())return new Ac(this._firestore,c,t._key,null,t.converter);throw An()})}set(e,t,c){const f=wl(e,this._firestore),v=Mc(f.converter,t,c),C=fo(this._dataReader,"Transaction.set",f._key,v,null!==f.converter,c);return this._transaction.set(f._key,C),this}update(e,t,c,...f){const v=wl(e,this._firestore);let C;return C="string"==typeof(t=(0,Te.m9)(t))||t instanceof Ud?_g(this._dataReader,"Transaction.update",v._key,t,c,f):xm(this._dataReader,"Transaction.update",v._key,t),this._transaction.update(v._key,C),this}delete(e){const t=wl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wl(e,this._firestore),c=new po(this._firestore);return super.get(e).then(f=>new Sl(this._firestore,c,t._key,f._document,new Cl(!1,!1),t.converter))}}function wg(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dn("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Lm(){if(typeof Uint8Array>"u")throw new dn("unimplemented","Uint8Arrays are not available in this environment.")}function Dg(){if(!function Uh(){return typeof atob<"u"}())throw new dn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(s,e=!0){zu=W.SDK_VERSION,(0,W._registerComponent)(new te.wA("firestore",(t,{instanceIdentifier:c,options:f})=>{const v=t.getProvider("app").getImmediate(),C=new So(new _a(t.getProvider("auth-internal")),new rc(t.getProvider("app-check-internal")),function(N,X){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new dn($t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(N.options.projectId,X)}(v,c),v);return f=Object.assign({useFetchStreams:e},f),C._setSettings(f),C},"PUBLIC").setMultipleInstances(!0)),(0,W.registerVersion)(vn,"3.13.0",s),(0,W.registerVersion)(vn,"3.13.0","esm2017")}();class Wl{constructor(e){this._delegate=e}static fromBase64String(e){return Dg(),new Wl(Xo.fromBase64String(e))}static fromUint8Array(e){return Lm(),new Wl(Xo.fromUint8Array(e))}toBase64(){return Dg(),this._delegate.toBase64()}toUint8Array(){return Lm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xs(s){return function Rh(s,e){if("object"!=typeof s||null===s)return!1;const t=s;for(const c of e)if(c in t&&"function"==typeof t[c])return!0;return!1}(s,["next","error","complete"])}class bu{enableIndexedDbPersistence(e,t){return function Dm(s,e){Wy(s=Oi(s,So));const t=ua(s);if(t._uninitializedComponentsProvider)throw new dn($t.FAILED_PRECONDITION,"SDK cache is already specified.");To("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const c=s._freezeSettings(),f=new S;return Gy(t,f,new h(f,c.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function t_(s){Wy(s=Oi(s,So));const e=ua(s);if(e._uninitializedComponentsProvider)throw new dn($t.FAILED_PRECONDITION,"SDK cache is already specified.");To("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings(),c=new S;return Gy(e,c,new y(c,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ov(s){if(s._initialized&&!s._terminated)throw new dn($t.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new oi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{yield(t=(0,Ke.Z)(function*(c){if(!Ls.D())return Promise.resolve();const f=c+"main";yield Ls.delete(f)}),function(c){return t.apply(this,arguments)})(cy(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ql{constructor(e,t,c){this._delegate=t,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ho||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&To("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,c={}){!function Ps(s,e,t,c={}){var f;const v=(s=Oi(s,Gl))._getSettings(),C=`${e}:${t}`;if("firestore.googleapis.com"!==v.host&&v.host!==C&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},v),{host:C,ssl:!1})),c.mockUserToken){let N,X;if("string"==typeof c.mockUserToken)N=c.mockUserToken,X=Or.MOCK_USER;else{N=(0,Te.Sg)(c.mockUserToken,null===(f=s._app)||void 0===f?void 0:f.options.projectId);const he=c.mockUserToken.sub||c.mockUserToken.user_id;if(!he)throw new dn($t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");X=new Or(he)}s._authCredentials=new nc(new Na(N,X))}}(this._delegate,e,t,c)}enableNetwork(){return function bl(s){return function Is(s){return s.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield wn(s),t=yield Zn(s);return e.setNetworkEnabled(!0),function(c){const f=Sn(c);return f.vu.delete(0),rp(f)}(t)}))}(ua(s=Oi(s,So)))}(this._delegate)}disableNetwork(){return function gg(s){return function yf(s){return s.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield wn(s),t=yield Zn(s);return e.setNetworkEnabled(!1),(c=(0,Ke.Z)(function*(f){const v=Sn(f);v.vu.add(0),yield ip(v),v.bu.set("Offline")}),function(f){return c.apply(this,arguments)})(t);var c}))}(ua(s=Oi(s,So)))}(this._delegate)}enablePersistence(e){let t=!1,c=!1;return e&&(t=!!e.synchronizeTabs,c=!!e.experimentalForceOwningTab,Mh("synchronizeTabs",t,"experimentalForceOwningTab",c)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pg(s){return function(e){const t=new oi;return e.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function Ly(s,e){return lg.apply(this,arguments)}(yield ps(e),t)})),t.promise}(ua(s=Oi(s,So)))}(this._delegate)}onSnapshotsInSync(e){return function u0(s,e){return function Dc(s,e){const t=new V(e);return s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return c=yield ks(s),f=t,Sn(c).ku.add(f),void f.next();var c,f})),()=>{t.Dc(),s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return c=yield ks(s),f=t,void Sn(c).ku.delete(f);var c,f}))}}(ua(s=Oi(s,So)),wm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new dn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new G(this,fg(this._delegate,e))}catch(t){throw Fu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kl(this,bf(this._delegate,e))}catch(t){throw Fu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new A(this,function Cm(s,e){if(s=Oi(s,Gl),Ah("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dn($t.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ca(s,null,(t=e,new Xu(Ni.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $v(s,e,t){s=Oi(s,So);const c=Object.assign(Object.assign({},d0),t);return function(f){if(f.maxAttempts<1)throw new dn($t.INVALID_ARGUMENT,"Max attempts must be at least 1")}(c),function(f,v,C){const N=new oi;return f.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){const X=yield function Oo(s){return qn(s).then(e=>e.datastore)}(f);new De(f.asyncQueue,X,C,v,N).run()})),N.promise}(ua(s),f=>e(new h0(s,f)),c)}(this._delegate,t=>e(new Kv(this,t)))}batch(){return ua(this._delegate),new g0(new Cg(this._delegate,e=>Mf(this._delegate,e)))}loadBundle(e){return function mg(s,e){const t=ua(s=Oi(s,So)),c=new J0;return function Qo(s,e,t,c){const f=function(v,C){let N;return N="string"==typeof v?nr().encode(v):v,X=function(X,he){if(X instanceof Uint8Array)return x(X,void 0);if(X instanceof ArrayBuffer)return x(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new re(X,C);var X}(t,np(e));s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){!function u(s,e,t){const c=Sn(s);var f;(f=(0,Ke.Z)(function*(v,C,N){try{const X=yield C.getMetadata();if(yield function(Bt,on){const Mn=Sn(Bt),rr=Po(on.createTime);return Mn.persistence.runTransaction("hasNewerBundle","readonly",cr=>Mn.qs.getBundleMetadata(cr,on.id)).then(cr=>!!cr&&cr.createTime.compareTo(rr)>=0)}(v.localStore,X))return yield C.close(),N._completeWith({taskState:"Success",documentsLoaded:(Bt=X).totalDocuments,bytesLoaded:Bt.totalBytes,totalDocuments:Bt.totalDocuments,totalBytes:Bt.totalBytes}),Promise.resolve(new Set);N._updateProgress(vm(X));const he=new I_(X,v.localStore,C.serializer);let ke=yield C.bc();for(;ke;){const Bt=yield he.zu(ke);Bt&&N._updateProgress(Bt),ke=yield C.bc()}const ct=yield he.complete();return yield Ld(v,ct.Ju,void 0),yield function(Bt,on){const Mn=Sn(Bt);return Mn.persistence.runTransaction("Save bundle","readwrite",rr=>Mn.qs.saveBundleMetadata(rr,on))}(v.localStore,X),N._completeWith(ct.progress),Promise.resolve(ct.Hu)}catch(X){return To("SyncEngine",`Loading bundle failed with ${X}`),N._failWith(X),Promise.resolve(new Set)}var Bt}),function(v,C,N){return f.apply(this,arguments)})(c,e,t).then(f=>{c.sharedClientState.notifyBundleLoaded(f)})}(yield ps(s),f,c)}))}(t,s._databaseId,e,c),c}(this._delegate,e)}namedQuery(e){return function zy(s,e){return function Tu(s,e){return s.asyncQueue.enqueue((0,Ke.Z)(function*(){return function(t,c){const f=Sn(t);return f.persistence.runTransaction("Get named query","readonly",v=>f.qs.getNamedQuery(v,c))}(yield _n(s),e)}))}(ua(s=Oi(s,So)),e).then(t=>t?new Ca(s,null,t.query):null)}(this._delegate,e).then(t=>t?new A(this,t):null)}}class Ig extends bp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(new Xo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Kl.forKey(t,this.firestore,null)}}class Kv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ig(e)}get(e){const t=ae(e);return this._delegate.get(t).then(c=>new Cp(this._firestore,new Sl(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,t.converter)))}set(e,t,c){const f=ae(e);return c?(wg("Transaction.set",c),this._delegate.set(f,t,c)):this._delegate.set(f,t),this}update(e,t,c,...f){const v=ae(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,c,...f),this}delete(e){const t=ae(e);return this._delegate.delete(t),this}}class g0{constructor(e){this._delegate=e}set(e,t,c){const f=ae(e);return c?(wg("WriteBatch.set",c),this._delegate.set(f,t,c)):this._delegate.set(f,t),this}update(e,t,c,...f){const v=ae(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,c,...f),this}delete(e){const t=ae(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pf{constructor(e,t,c){this._firestore=e,this._userDataWriter=t,this._delegate=c}fromFirestore(e,t){const c=new xf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new we(this._firestore,c),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const c=Pf.INSTANCES;let f=c.get(e);f||(f=new WeakMap,c.set(e,f));let v=f.get(t);return v||(v=new Pf(e,new Ig(e),t),f.set(t,v)),v}}Pf.INSTANCES=new WeakMap;class Kl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ig(e)}static forPath(e,t,c){if(e.length%2!=0)throw new dn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kl(t,new ho(t._delegate,c,new Fn(e)))}static forKey(e,t,c){return new Kl(t,new ho(t._delegate,c,e))}get id(){return this._delegate.id}get parent(){return new G(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new G(this.firestore,fg(this._delegate,e))}catch(t){throw Fu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Te.m9)(e))instanceof ho&&hp(this._delegate,e)}set(e,t){t=wg("DocumentReference.set",t);try{return t?Vv(this._delegate,e,t):Vv(this._delegate,e)}catch(c){throw Fu(c,"setDoc()","DocumentReference.set()")}}update(e,t,...c){try{return 1===arguments.length?uo(this._delegate,e):uo(this._delegate,e,t,...c)}catch(f){throw Fu(f,"updateDoc()","DocumentReference.update()")}}delete(){return function Af(s){return Mf(Oi(s.firestore,So),[new _d(s._key,Ms.none())])}(this._delegate)}onSnapshot(...e){const t=m0(e),c=v0(e,f=>new Cp(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return Hv(this._delegate,t,c)}get(e){let t;return t="cache"===e?.source?function a0(s){s=Oi(s,ho);const e=Oi(s.firestore,So),t=ua(e),c=new po(e);return function Hl(s,e){const t=new oi;return s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(c=(0,Ke.Z)(function*(f,v,C){try{const N=yield function(X,he){const ke=Sn(X);return ke.persistence.runTransaction("read document","readonly",ct=>ke.localDocuments.getDocument(ct,he))}(f,v);N.isFoundDocument()?C.resolve(N):N.isNoDocument()?C.resolve(null):C.reject(new dn($t.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const X=Ih(N,`Failed to get document '${v} from cache`);C.reject(X)}}),function(f,v,C){return c.apply(this,arguments)})(yield _n(s),e,t);var c})),t.promise}(t,s._key).then(f=>new Sl(e,c,s._key,f,new Cl(null!==f&&f.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===e?.source?function Pm(s){s=Oi(s,ho);const e=Oi(s.firestore,So);return Nu(ua(e),s._key,{source:"server"}).then(t=>Om(e,s,t))}(this._delegate):function s_(s){s=Oi(s,ho);const e=Oi(s.firestore,So);return Nu(ua(e),s._key).then(t=>Om(e,s,t))}(this._delegate),t.then(c=>new Cp(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(e){return new Kl(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}function Fu(s,e,t){return s.message=s.message.replace(e,t),s}function m0(s){for(const e of s)if("object"==typeof e&&!xs(e))return e;return{}}function v0(s,e){var t,c;let f;return f=xs(s[0])?s[0]:xs(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:v=>{f.next&&f.next(e(v))},error:null===(t=f.error)||void 0===t?void 0:t.bind(f),complete:null===(c=f.complete)||void 0===c?void 0:c.bind(f)}}class Cp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Eg(this._delegate,e._delegate)}}class we extends Cp{data(e){const t=this._delegate.data(e);return function tc(s,e){s||An()}(void 0!==t),t}}class A{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ig(e)}where(e,t,c){try{return new A(this.firestore,$d(this._delegate,function Nv(s,e,t){const c=e,f=Sf("where",s);return nd._create(f,c,t)}(e,t,c)))}catch(f){throw Fu(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new A(this.firestore,$d(this._delegate,function mp(s,e="asc"){const t=e,c=Sf("orderBy",s);return wf._create(c,t)}(e,t)))}catch(c){throw Fu(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new A(this.firestore,$d(this._delegate,function Jy(s){return Ic("limit",s),vp._create("limit",s,"F")}(e)))}catch(t){throw Fu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new A(this.firestore,$d(this._delegate,function i_(s){return Ic("limitToLast",s),vp._create("limitToLast",s,"L")}(e)))}catch(t){throw Fu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new A(this.firestore,$d(this._delegate,function e0(...s){return yp._create("startAt",s,!0)}(...e)))}catch(t){throw Fu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new A(this.firestore,$d(this._delegate,function t0(...s){return yp._create("startAfter",s,!1)}(...e)))}catch(t){throw Fu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new A(this.firestore,$d(this._delegate,function n0(...s){return Df._create("endBefore",s,!1)}(...e)))}catch(t){throw Fu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new A(this.firestore,$d(this._delegate,function r0(...s){return Df._create("endAt",s,!0)}(...e)))}catch(t){throw Fu(t,"endAt()","Query.endAt()")}}isEqual(e){return fp(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Oh(s){s=Oi(s,Ca);const e=Oi(s.firestore,So),t=ua(e),c=new po(e);return function $l(s,e){const t=new oi;return s.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(c=(0,Ke.Z)(function*(f,v,C){try{const N=yield Yp(f,v,!0),X=new Ry(v,N.ir),he=X.sc(N.documents),ke=X.applyChanges(he,!1);C.resolve(ke.snapshot)}catch(N){const X=Ih(N,`Failed to execute query '${v} against cache`);C.reject(X)}}),function(f,v,C){return c.apply(this,arguments)})(yield _n(s),e,t);var c})),t.promise}(t,s._query).then(f=>new al(e,c,s,f))}(this._delegate):"server"===e?.source?function a_(s){s=Oi(s,Ca);const e=Oi(s.firestore,So),t=ua(e),c=new po(e);return za(t,s._query,{source:"server"}).then(f=>new al(e,c,s,f))}(this._delegate):function o_(s){s=Oi(s,Ca);const e=Oi(s.firestore,So),t=ua(e),c=new po(e);return Mm(s._query),za(t,s._query).then(f=>new al(e,c,s,f))}(this._delegate),t.then(c=>new F(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...e){const t=m0(e),c=v0(e,f=>new F(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return Hv(this._delegate,t,c)}withConverter(e){return new A(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}class j{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new we(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class F{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new A(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new we(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new j(this._firestore,t))}forEach(e,t){this._delegate.forEach(c=>{e.call(t,new we(this._firestore,c))})}isEqual(e){return Eg(this._delegate,e._delegate)}}class G extends A{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kl(this.firestore,e):null}doc(e){try{return new Kl(this.firestore,void 0===e?bf(this._delegate):bf(this._delegate,e))}catch(t){throw Fu(t,"doc()","CollectionReference.doc()")}}add(e){return function u_(s,e){const t=Oi(s.firestore,So),c=bf(s),f=Mc(s.converter,e);return Mf(t,[fo(ol(s.firestore),"addDoc",c._key,f,null!==s.converter,{}).toMutation(c._key,Ms.exists(!1))]).then(()=>c)}(this._delegate,e).then(t=>new Kl(this.firestore,t))}isEqual(e){return hp(this._delegate,e._delegate)}withConverter(e){return new G(this.firestore,this._delegate.withConverter(e?Pf.getInstance(this.firestore,e):null))}}function ae(s){return Oi(s,ho)}class pe{constructor(...e){this._delegate=new Ud(...e)}static documentId(){return new pe(gi.keyField().canonicalString())}isEqual(e){return(e=(0,Te.m9)(e))instanceof Ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ge{constructor(e){this._delegate=e}static serverTimestamp(){const e=function f0(){return new Im("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ge(e)}static delete(){const e=function Gv(){return new kh("deleteField")}();return e._methodName="FieldValue.delete",new Ge(e)}static arrayUnion(...e){const t=function zv(...s){return new Ky("arrayUnion",s)}(...e);return t._methodName="FieldValue.arrayUnion",new Ge(t)}static arrayRemove(...e){const t=function Sg(...s){return new Zy("arrayRemove",s)}(...e);return t._methodName="FieldValue.arrayRemove",new Ge(t)}static increment(e){const t=function kf(s){return new Rv("increment",s)}(e);return t._methodName="FieldValue.increment",new Ge(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nt={Firestore:ql,GeoPoint:Lu,Timestamp:as,Blob:Wl,Transaction:Kv,WriteBatch:g0,DocumentReference:Kl,DocumentSnapshot:Cp,Query:A,QueryDocumentSnapshot:we,QuerySnapshot:F,CollectionReference:G,FieldPath:pe,FieldValue:Ge,setLogLevel:function qv(s){!function wu(s){Ns.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function pt(s){(function _t(s,e){s.INTERNAL.registerComponent(new te.wA("firestore-compat",t=>{const c=t.getProvider("app-compat").getImmediate(),f=t.getProvider("firestore").getImmediate();return e(c,f)},"PUBLIC").setServiceProps(Object.assign({},nt)))})(s,(e,t)=>new ql(e,t,new bu)),s.registerVersion("@firebase/firestore-compat","0.3.12")}(et.Z);var Ct=z(6796),gn=z(8697),Qn=z(7142);function Rn(s,e){return function _r(s,e=me.z){return new le.y(t=>{let c;return null!=e?e.schedule(()=>{c=s.onSnapshot({includeMetadataChanges:!0},t)}):c=s.onSnapshot({includeMetadataChanges:!0},t),()=>{c?.()}})}(s,e)}function Jo(s,e){return Rn(s,e).pipe((0,je.U)(t=>({payload:t,type:"query"})))}function qa(s,e){return Jo(s,e).pipe((0,Qe.O)(void 0),xe(),(0,je.U)(([t,c])=>{const f=c.payload.docChanges(),v=f.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((C,N)=>{const X=f.find(ke=>ke.doc.ref.isEqual(C.ref)),he=t?.payload.docs.find(ke=>ke.ref.isEqual(C.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(C.metadata)||!X&&he&&JSON.stringify(he.metadata)===JSON.stringify(C.metadata)||v.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:C}})}),v}))}function Wd(s,e,t){return qa(s,t).pipe((0,$e.R)((c,f)=>function Fm(s,e,t){return e.forEach(c=>{t.indexOf(c.type)>-1&&(s=function Nh(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return xg(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=s.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xg(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xg(s,e.oldIndex,1)}return s}(s,c))}),s}(c,f.map(v=>v.payload),e),[]),(0,kt.x)(),(0,je.U)(c=>c.map(f=>({type:f.type,payload:f}))))}function xg(s,e,t,...c){const f=s.slice();return f.splice(e,t,...c),f}function Zv(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class jm{constructor(e,t,c){this.ref=e,this.query=t,this.afs=c}stateChanges(e){let t=qa(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,je.U)(c=>c.filter(f=>e.indexOf(f.type)>-1)))),t.pipe((0,Qe.O)(void 0),xe(),(0,ge.h)(([c,f])=>f.length>0||!c),(0,je.U)(([c,f])=>f),Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$e.R)((t,c)=>[...t,...c],[]))}snapshotChanges(e){const t=Zv(e);return Wd(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return Jo(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(t=>t.payload.docs.map(c=>e.idField?Object.assign(Object.assign({},c.data()),{[e.idField]:c.id}):c.data())),Ne.iC)}get(e){return(0,B.D)(this.query.get(e)).pipe(Ne.iC)}add(e){return this.ref.add(e)}doc(e){return new Lh(this.ref.doc(e),this.afs)}}class Lh{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const c=this.ref.collection(e),{ref:f,query:v}=Y_(c,t);return new jm(f,v,this.afs)}snapshotChanges(){return function Jr(s,e){return Rn(s,e).pipe((0,Qe.O)(void 0),xe(),(0,je.U)(([t,c])=>c.exists?t?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,B.D)(this.ref.get(e)).pipe(Ne.iC)}}class Sa{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qa(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(t=>t.filter(c=>e.indexOf(c.type)>-1)),(0,ge.h)(t=>t.length>0),Ne.iC):qa(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$e.R)((t,c)=>[...t,...c],[]))}snapshotChanges(e){const t=Zv(e);return Wd(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return Jo(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(c=>c.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),Ne.iC)}get(e){return(0,B.D)(this.query.get(e)).pipe(Ne.iC)}}const Ag=new T.OlP("angularfire2.enableFirestorePersistence"),Of=new T.OlP("angularfire2.firestore.persistenceSettings"),L_=new T.OlP("angularfire2.firestore.settings"),F_=new T.OlP("angularfire2.firestore.use-emulator");function Y_(s,e=(t=>t)){return{query:e(s),ref:s}}let ni=(()=>{class s{constructor(t,c,f,v,C,N,X,he,ke,ct,Bt,on,Mn,rr,cr,wi,Yi){this.schedulers=X;const Di=(0,St.on)(t,N,c),la=ke;ct&&(0,Ct.nw)(Di,N,Bt,Mn,rr,cr,on,wi),[this.firestore,this.persistenceEnabled$]=(0,St.cc)(`${Di.name}.firestore`,"AngularFirestore",Di.name,()=>{const No=N.runOutsideAngular(()=>Di.firestore());if(v&&No.settings(v),la&&No.useEmulator(...la),f&&!(0,Ze.PM)(C)){const Js=()=>{try{return(0,B.D)(No.enablePersistence(he||void 0).then(()=>!0,()=>!1))}catch(ju){return typeof console<"u"&&console.warn(ju),(0,Re.of)(!1)}};return[No,N.runOutsideAngular(Js)]}return[No,(0,Re.of)(!1)]},[v,la,f])}collection(t,c){let f;f="string"==typeof t?this.firestore.collection(t):t;const{ref:v,query:C}=Y_(f,c),N=this.schedulers.ngZone.run(()=>v);return new jm(N,C,this)}collectionGroup(t,c){const f=c||(C=>C),v=this.firestore.collectionGroup(t);return new Sa(f(v),this)}doc(t){let c;c="string"==typeof t?this.firestore.doc(t):t;const f=this.schedulers.ngZone.run(()=>c);return new Lh(f,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(t){return new(t||s)(T.LFG(St.Dh),T.LFG(St.xv,8),T.LFG(Ag,8),T.LFG(L_,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Ne.HU),T.LFG(Of,8),T.LFG(F_,8),T.LFG(Ct.zQ,8),T.LFG(Ct.Qv,8),T.LFG(Ct.L6,8),T.LFG(Ct._Q,8),T.LFG(Ct.rT,8),T.LFG(Ct.lh,8),T.LFG(Ct.f7,8),T.LFG(gn.nm,8))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Q_=(()=>{class s{constructor(){Qn.Z.registerVersion("angularfire",Ne.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:s,providers:[{provide:Ag,useValue:!0},{provide:Of,useValue:t}]}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=T.oAB({type:s}),s.\u0275inj=T.cJS({providers:[ni]}),s})()},6240:(tn,ht,z)=>{"use strict";z.d(ht,{Q1:()=>Q,TE:()=>qt});var T=z(5592),me=z(2096),le=z(2459),B=z(6321),Re=z(9360),Ne=z(8251),at=z(7398),ut=z(4664),xe=z(8186),je=z(5879),$e=z(6304),kt=z(3106),ge=z(5861),St=z(534),Ze=z(9058),rt=z(4537);const et="firebasestorage.googleapis.com",Ke="storageBucket";class Te extends Ze.ZR{constructor(ne,Me,tt=0){super(gt(ne),`Firebase Storage: ${Me} (${gt(ne)})`),this.status_=tt,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Te.prototype)}get status(){return this.status_}set status(ne){this.status_=ne}_codeEquals(ne){return gt(ne)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(ne){this.customData.serverResponse=ne,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ae=(()=>((Ae=Ae||{}).UNKNOWN="unknown",Ae.OBJECT_NOT_FOUND="object-not-found",Ae.BUCKET_NOT_FOUND="bucket-not-found",Ae.PROJECT_NOT_FOUND="project-not-found",Ae.QUOTA_EXCEEDED="quota-exceeded",Ae.UNAUTHENTICATED="unauthenticated",Ae.UNAUTHORIZED="unauthorized",Ae.UNAUTHORIZED_APP="unauthorized-app",Ae.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Ae.INVALID_CHECKSUM="invalid-checksum",Ae.CANCELED="canceled",Ae.INVALID_EVENT_NAME="invalid-event-name",Ae.INVALID_URL="invalid-url",Ae.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Ae.NO_DEFAULT_BUCKET="no-default-bucket",Ae.CANNOT_SLICE_BLOB="cannot-slice-blob",Ae.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Ae.NO_DOWNLOAD_URL="no-download-url",Ae.INVALID_ARGUMENT="invalid-argument",Ae.INVALID_ARGUMENT_COUNT="invalid-argument-count",Ae.APP_DELETED="app-deleted",Ae.INVALID_ROOT_OPERATION="invalid-root-operation",Ae.INVALID_FORMAT="invalid-format",Ae.INTERNAL_ERROR="internal-error",Ae.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ae))();function gt(J){return"storage/"+J}function Y(){return new Te(Ae.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xt(){return new Te(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pn(){return new Te(Ae.CANCELED,"User canceled the upload/download.")}function Xe(){return new Te(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ft(J){return new Te(Ae.INVALID_ARGUMENT,J)}function jt(){return new Te(Ae.APP_DELETED,"The Firebase app was deleted.")}function zt(J){return new Te(Ae.INVALID_ROOT_OPERATION,"The operation '"+J+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function In(J,ne){return new Te(Ae.INVALID_FORMAT,"String does not match format '"+J+"': "+ne)}function Tn(J){throw new Te(Ae.INTERNAL_ERROR,"Internal error: "+J)}class xn{constructor(ne,Me){this.bucket=ne,this.path_=Me}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const ne=encodeURIComponent;return"/b/"+ne(this.bucket)+"/o/"+ne(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(ne,Me){let tt;try{tt=xn.makeFromUrl(ne,Me)}catch{return new xn(ne,"")}if(""===tt.path)return tt;throw function Yt(J){return new Te(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+J+"'.")}(ne)}static makeFromUrl(ne,Me){let tt=null;const mt="([A-Za-z0-9.\\-_]+)",Yn=new RegExp("^gs://"+mt+"(/(.*))?$","i");function pr(Yr){Yr.path_=decodeURIComponent(Yr.path)}const ii=Me.replace(/[.]/g,"\\."),Gi=[{regex:Yn,indices:{bucket:1,path:3},postModify:function Vt(Yr){"/"===Yr.path.charAt(Yr.path.length-1)&&(Yr.path_=Yr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ii}/v[A-Za-z0-9_]+/b/${mt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:pr},{regex:new RegExp(`^https?://${Me===et?"(?:storage.googleapis.com|storage.cloud.google.com)":Me}/${mt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:pr}];for(let Yr=0;Yr<Gi.length;Yr++){const zs=Gi[Yr],vo=zs.regex.exec(ne);if(vo){let es=vo[zs.indices.path];es||(es=""),tt=new xn(vo[zs.indices.bucket],es),zs.postModify(tt);break}}if(null==tt)throw function Zt(J){return new Te(Ae.INVALID_URL,"Invalid URL '"+J+"'.")}(ne);return tt}}class $n{constructor(ne){this.promise_=Promise.reject(ne)}getPromise(){return this.promise_}cancel(ne=!1){}}function hr(J){return"string"==typeof J||J instanceof String}function qr(J){return Gr()&&J instanceof Blob}function Gr(){return typeof Blob<"u"&&!(0,Ze.UG)()}function Sr(J,ne,Me,tt){if(tt<ne)throw ft(`Invalid value for '${J}'. Expected ${ne} or greater.`);if(tt>Me)throw ft(`Invalid value for '${J}'. Expected ${Me} or less.`)}function mi(J,ne,Me){let tt=ne;return null==Me&&(tt=`https://${ne}`),`${Me}://${tt}/v0${J}`}function Rr(J){const ne=encodeURIComponent;let Me="?";for(const tt in J)J.hasOwnProperty(tt)&&(Me=Me+(ne(tt)+"=")+ne(J[tt])+"&");return Me=Me.slice(0,-1),Me}var an=(()=>((an=an||{})[an.NO_ERROR=0]="NO_ERROR",an[an.NETWORK_ERROR=1]="NETWORK_ERROR",an[an.ABORT=2]="ABORT",an))();function Un(J,ne){const Me=J>=500&&J<600,mt=-1!==[408,429].indexOf(J),Vt=-1!==ne.indexOf(J);return Me||mt||Vt}class Nn{constructor(ne,Me,tt,mt,Vt,fn,Yn,Wn,pr,Zr,ii,zr=!0){this.url_=ne,this.method_=Me,this.headers_=tt,this.body_=mt,this.successCodes_=Vt,this.additionalRetryCodes_=fn,this.callback_=Yn,this.errorCallback_=Wn,this.timeout_=pr,this.progressCallback_=Zr,this.connectionFactory_=ii,this.retry=zr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mi,Ln)=>{this.resolve_=Mi,this.reject_=Ln,this.start_()})}start_(){const Me=(tt,mt)=>{const Vt=this.resolve_,fn=this.reject_,Yn=mt.connection;if(mt.wasSuccessCode)try{const Wn=this.callback_(Yn,Yn.getResponse());!function Bn(J){return void 0!==J}(Wn)?Vt():Vt(Wn)}catch(Wn){fn(Wn)}else if(null!==Yn){const Wn=Y();Wn.serverResponse=Yn.getErrorText(),fn(this.errorCallback_?this.errorCallback_(Yn,Wn):Wn)}else fn(mt.canceled?this.appDelete_?jt():pn():Xt())};this.canceled_?Me(0,new Dr(!1,null,!0)):this.backoffId_=function Gn(J,ne,Me){let tt=1,mt=null,Vt=null,fn=!1,Yn=0;function Wn(){return 2===Yn}let pr=!1;function Zr(..._s){pr||(pr=!0,ne.apply(null,_s))}function ii(_s){mt=setTimeout(()=>{mt=null,J(Mi,Wn())},_s)}function zr(){Vt&&clearTimeout(Vt)}function Mi(_s,...$s){if(pr)return void zr();if(_s)return zr(),void Zr.call(null,_s,...$s);if(Wn()||fn)return zr(),void Zr.call(null,_s,...$s);let Gi;tt<64&&(tt*=2),1===Yn?(Yn=2,Gi=0):Gi=1e3*(tt+Math.random()),ii(Gi)}let Ln=!1;function $i(_s){Ln||(Ln=!0,zr(),!pr&&(null!==mt?(_s||(Yn=2),clearTimeout(mt),ii(0)):_s||(Yn=1)))}return ii(0),Vt=setTimeout(()=>{fn=!0,$i(!0)},Me),$i}((tt,mt)=>{if(mt)return void tt(!1,new Dr(!1,null,!0));const Vt=this.connectionFactory_();this.pendingConnection_=Vt;const fn=Yn=>{null!==this.progressCallback_&&this.progressCallback_(Yn.loaded,Yn.lengthComputable?Yn.total:-1)};null!==this.progressCallback_&&Vt.addUploadProgressListener(fn),Vt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Vt.removeUploadProgressListener(fn),this.pendingConnection_=null;const Yn=Vt.getErrorCode()===an.NO_ERROR,Wn=Vt.getStatus();if(!Yn||Un(Wn,this.additionalRetryCodes_)&&this.retry){const Zr=Vt.getErrorCode()===an.ABORT;return void tt(!1,new Dr(!1,null,Zr))}const pr=-1!==this.successCodes_.indexOf(Wn);tt(!0,new Dr(pr,Vt))})},Me,this.timeout_)}getPromise(){return this.promise_}cancel(ne){this.canceled_=!0,this.appDelete_=ne||!1,null!==this.backoffId_&&function ir(J){J(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Dr{constructor(ne,Me,tt){this.wasSuccessCode=ne,this.connection=Me,this.canceled=!!tt}}function Qi(...J){const ne=function Fr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==ne){const Me=new ne;for(let tt=0;tt<J.length;tt++)Me.append(J[tt]);return Me.getBlob()}if(Gr())return new Blob(J);throw new Te(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class is{constructor(ne,Me){this.data=ne,this.contentType=Me||null}}function ci(J,ne){switch(J){case br.RAW:return new is(Ri(ne));case br.BASE64:case br.BASE64URL:return new is(vi(J,ne));case br.DATA_URL:return new is(function Vi(J){const ne=new Nr(J);return ne.base64?vi(br.BASE64,ne.rest):function li(J){let ne;try{ne=decodeURIComponent(J)}catch{throw In(br.DATA_URL,"Malformed data URL.")}return Ri(ne)}(ne.rest)}(ne),function Ar(J){return new Nr(J).contentType}(ne))}throw Y()}function Ri(J){const ne=[];for(let Me=0;Me<J.length;Me++){let tt=J.charCodeAt(Me);tt<=127?ne.push(tt):tt<=2047?ne.push(192|tt>>6,128|63&tt):55296==(64512&tt)?Me<J.length-1&&56320==(64512&J.charCodeAt(Me+1))?(tt=65536|(1023&tt)<<10|1023&J.charCodeAt(++Me),ne.push(240|tt>>18,128|tt>>12&63,128|tt>>6&63,128|63&tt)):ne.push(239,191,189):56320==(64512&tt)?ne.push(239,191,189):ne.push(224|tt>>12,128|tt>>6&63,128|63&tt)}return new Uint8Array(ne)}function vi(J,ne){switch(J){case br.BASE64:{const mt=-1!==ne.indexOf("-"),Vt=-1!==ne.indexOf("_");if(mt||Vt)throw In(J,"Invalid character '"+(mt?"-":"_")+"' found: is it base64url encoded?");break}case br.BASE64URL:{const mt=-1!==ne.indexOf("+"),Vt=-1!==ne.indexOf("/");if(mt||Vt)throw In(J,"Invalid character '"+(mt?"+":"/")+"' found: is it base64 encoded?");ne=ne.replace(/-/g,"+").replace(/_/g,"/");break}}let Me;try{Me=function qi(J){if(typeof atob>"u")throw function It(J){return new Te(Ae.UNSUPPORTED_ENVIRONMENT,`${J} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(J)}(ne)}catch(mt){throw mt.message.includes("polyfill")?mt:In(J,"Invalid character found")}const tt=new Uint8Array(Me.length);for(let mt=0;mt<Me.length;mt++)tt[mt]=Me.charCodeAt(mt);return tt}class Nr{constructor(ne){this.base64=!1,this.contentType=null;const Me=ne.match(/^data:([^,]+)?,/);if(null===Me)throw In(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const tt=Me[1]||null;null!=tt&&(this.base64=function ls(J,ne){return J.length>=ne.length&&J.substring(J.length-ne.length)===ne}(tt,";base64"),this.contentType=this.base64?tt.substring(0,tt.length-7):tt),this.rest=ne.substring(ne.indexOf(",")+1)}}class mr{constructor(ne,Me){let tt=0,mt="";qr(ne)?(this.data_=ne,tt=ne.size,mt=ne.type):ne instanceof ArrayBuffer?(Me?this.data_=new Uint8Array(ne):(this.data_=new Uint8Array(ne.byteLength),this.data_.set(new Uint8Array(ne))),tt=this.data_.length):ne instanceof Uint8Array&&(Me?this.data_=ne:(this.data_=new Uint8Array(ne.length),this.data_.set(ne)),tt=ne.length),this.size_=tt,this.type_=mt}size(){return this.size_}type(){return this.type_}slice(ne,Me){if(qr(this.data_)){const mt=function Tr(J,ne,Me){return J.webkitSlice?J.webkitSlice(ne,Me):J.mozSlice?J.mozSlice(ne,Me):J.slice?J.slice(ne,Me):null}(this.data_,ne,Me);return null===mt?null:new mr(mt)}{const tt=new Uint8Array(this.data_.buffer,ne,Me-ne);return new mr(tt,!0)}}static getBlob(...ne){if(Gr()){const Me=ne.map(tt=>tt instanceof mr?tt.data_:tt);return new mr(Qi.apply(null,Me))}{const Me=ne.map(fn=>hr(fn)?ci(br.RAW,fn).data:fn.data_);let tt=0;Me.forEach(fn=>{tt+=fn.byteLength});const mt=new Uint8Array(tt);let Vt=0;return Me.forEach(fn=>{for(let Yn=0;Yn<fn.length;Yn++)mt[Vt++]=fn[Yn]}),new mr(mt,!0)}}uploadData(){return this.data_}}function lt(J){let ne;try{ne=JSON.parse(J)}catch{return null}return function xr(J){return"object"==typeof J&&!Array.isArray(J)}(ne)?ne:null}function be(J){const ne=J.lastIndexOf("/",J.length-2);return-1===ne?J:J.slice(ne+1)}function Pe(J,ne){return ne}class Et{constructor(ne,Me,tt,mt){this.server=ne,this.local=Me||ne,this.writable=!!tt,this.xform=mt||Pe}}let Qt=null;function ve(){if(Qt)return Qt;const J=[];J.push(new Et("bucket")),J.push(new Et("generation")),J.push(new Et("metageneration")),J.push(new Et("name","fullPath",!0));const Me=new Et("name");Me.xform=function ne(Vt,fn){return function En(J){return!hr(J)||J.length<2?J:be(J)}(fn)},J.push(Me);const mt=new Et("size");return mt.xform=function tt(Vt,fn){return void 0!==fn?Number(fn):fn},J.push(mt),J.push(new Et("timeCreated")),J.push(new Et("updated")),J.push(new Et("md5Hash",null,!0)),J.push(new Et("cacheControl",null,!0)),J.push(new Et("contentDisposition",null,!0)),J.push(new Et("contentEncoding",null,!0)),J.push(new Et("contentLanguage",null,!0)),J.push(new Et("contentType",null,!0)),J.push(new Et("metadata","customMetadata",!0)),Qt=J,Qt}function Tt(J,ne,Me){const tt=lt(ne);return null===tt?null:function He(J,ne,Me){const tt={type:"file"},mt=Me.length;for(let Vt=0;Vt<mt;Vt++){const fn=Me[Vt];tt[fn.local]=fn.xform(tt,ne[fn.server])}return function ye(J,ne){Object.defineProperty(J,"ref",{get:function Me(){const Vt=new xn(J.bucket,J.fullPath);return ne._makeStorageReference(Vt)}})}(tt,J),tt}(J,tt,Me)}function Xn(J,ne){const Me={},tt=ne.length;for(let mt=0;mt<tt;mt++){const Vt=ne[mt];Vt.writable&&(Me[Vt.server]=J[Vt.local])}return JSON.stringify(Me)}const Hr="prefixes",ui="items";class nn{constructor(ne,Me,tt,mt){this.url=ne,this.method=Me,this.handler=tt,this.timeout=mt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function On(J){if(!J)throw Y()}function Jn(J,ne){return function Me(tt,mt){const Vt=Tt(J,mt,ne);return On(null!==Vt),Vt}}function ri(J){return function ne(Me,tt){let mt;return mt=401===Me.getStatus()?Me.getErrorText().includes("Firebase App Check token is invalid")?function Ht(){return new Te(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function At(){return new Te(Ae.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Me.getStatus()?function Fe(J){return new Te(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+J+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(J.bucket):403===Me.getStatus()?function Gt(J){return new Te(Ae.UNAUTHORIZED,"User does not have permission to access '"+J+"'.")}(J.path):tt,mt.status=Me.getStatus(),mt.serverResponse=tt.serverResponse,mt}}function pi(J){const ne=ri(J);return function Me(tt,mt){let Vt=ne(tt,mt);return 404===tt.getStatus()&&(Vt=function oe(J){return new Te(Ae.OBJECT_NOT_FOUND,"Object '"+J+"' does not exist.")}(J.path)),Vt.serverResponse=mt.serverResponse,Vt}}function di(J,ne,Me){const mt=mi(ne.fullServerUrl(),J.host,J._protocol),fn=J.maxOperationRetryTime,Yn=new nn(mt,"GET",Jn(J,Me),fn);return Yn.errorHandler=pi(ne),Yn}function gs(J,ne,Me,tt,mt){const Vt={};Vt.prefix=ne.isRoot?"":ne.path+"/",Me&&Me.length>0&&(Vt.delimiter=Me),tt&&(Vt.pageToken=tt),mt&&(Vt.maxResults=mt);const Yn=mi(ne.bucketOnlyServerUrl(),J.host,J._protocol),pr=J.maxOperationRetryTime,Zr=new nn(Yn,"GET",function fr(J,ne){return function Me(tt,mt){const Vt=function Pt(J,ne,Me){const tt=lt(Me);return null===tt?null:function Ut(J,ne,Me){const tt={prefixes:[],items:[],nextPageToken:Me.nextPageToken};if(Me[Hr])for(const mt of Me[Hr]){const Vt=mt.replace(/\/$/,""),fn=J._makeStorageReference(new xn(ne,Vt));tt.prefixes.push(fn)}if(Me[ui])for(const mt of Me[ui]){const Vt=J._makeStorageReference(new xn(ne,mt.name));tt.items.push(Vt)}return tt}(J,ne,tt)}(J,ne,mt);return On(null!==Vt),Vt}}(J,ne.bucket),pr);return Zr.urlParams=Vt,Zr.errorHandler=ri(ne),Zr}function Go(J,ne,Me){const tt=Object.assign({},Me);return tt.fullPath=J.path,tt.size=ne.size(),tt.contentType||(tt.contentType=function cs(J,ne){return J&&J.contentType||ne&&ne.type()||"application/octet-stream"}(null,ne)),tt}class _i{constructor(ne,Me,tt,mt){this.current=ne,this.total=Me,this.finalized=!!tt,this.metadata=mt||null}}function hi(J,ne){let Me=null;try{Me=J.getResponseHeader("X-Goog-Upload-Status")}catch{On(!1)}return On(!!Me&&-1!==(ne||["active"]).indexOf(Me)),Me}const no={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ia(J){switch(J){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class Bu{constructor(ne,Me,tt){if(function dr(J){return"function"==typeof J}(ne)||null!=Me||null!=tt)this.next=ne,this.error=Me??void 0,this.complete=tt??void 0;else{const Vt=ne;this.next=Vt.next,this.error=Vt.error,this.complete=Vt.complete}}}function Rs(J){return(...ne)=>{Promise.resolve().then(()=>J(...ne))}}let xa=null;class Xi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=an.NO_ERROR,this.sendPromise_=new Promise(ne=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=an.ABORT,ne()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=an.NETWORK_ERROR,ne()}),this.xhr_.addEventListener("load",()=>{ne()})})}send(ne,Me,tt,mt){if(this.sent_)throw Tn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Me,ne,!0),void 0!==mt)for(const Vt in mt)mt.hasOwnProperty(Vt)&&this.xhr_.setRequestHeader(Vt,mt[Vt].toString());return void 0!==tt?this.xhr_.send(tt):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(ne){return this.xhr_.getResponseHeader(ne)}addUploadProgressListener(ne){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",ne)}removeUploadProgressListener(ne){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",ne)}}class du extends Xi{initXhr(){this.xhr_.responseType="text"}}function As(){return xa?xa():new du}class ss{constructor(ne,Me,tt=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=ne,this._blob=Me,this._metadata=tt,this._mappings=ve(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=mt=>{if(this._request=void 0,this._chunkMultiplier=1,mt._codeEquals(Ae.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Vt=this.isExponentialBackoffExpired();if(Un(mt.status,[])){if(!Vt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();mt=Xt()}this._error=mt,this._transition("error")}},this._metadataErrorHandler=mt=>{this._request=void 0,mt._codeEquals(Ae.CANCELED)?this.completeTransitions_():(this._error=mt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((mt,Vt)=>{this._resolve=mt,this._reject=Vt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const ne=this._transferred;return Me=>this._updateProgress(ne+Me)}_shouldDoResumable(ne){return ne.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(ne){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Me,tt])=>{switch(this._state){case"running":ne(Me,tt);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((ne,Me)=>{const tt=function to(J,ne,Me,tt,mt){const Vt=ne.bucketOnlyServerUrl(),fn=Go(ne,tt,mt),Yn={name:fn.fullPath},Wn=mi(Vt,J.host,J._protocol),Zr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${tt.size()}`,"X-Goog-Upload-Header-Content-Type":fn.contentType,"Content-Type":"application/json; charset=utf-8"},ii=Xn(fn,Me),Ln=new nn(Wn,"POST",function Mi($i){let _s;hi($i);try{_s=$i.getResponseHeader("X-Goog-Upload-URL")}catch{On(!1)}return On(hr(_s)),_s},J.maxUploadRetryTime);return Ln.urlParams=Yn,Ln.headers=Zr,Ln.body=ii,Ln.errorHandler=ri(ne),Ln}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),mt=this._ref.storage._makeRequest(tt,As,ne,Me);this._request=mt,mt.getPromise().then(Vt=>{this._request=void 0,this._uploadUrl=Vt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const ne=this._uploadUrl;this._resolveToken((Me,tt)=>{const mt=function Ks(J,ne,Me,tt){const Wn=new nn(Me,"POST",function Vt(pr){const Zr=hi(pr,["active","final"]);let ii=null;try{ii=pr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{On(!1)}ii||On(!1);const zr=Number(ii);return On(!isNaN(zr)),new _i(zr,tt.size(),"final"===Zr)},J.maxUploadRetryTime);return Wn.headers={"X-Goog-Upload-Command":"query"},Wn.errorHandler=ri(ne),Wn}(this._ref.storage,this._ref._location,ne,this._blob),Vt=this._ref.storage._makeRequest(mt,As,Me,tt);this._request=Vt,Vt.getPromise().then(fn=>{this._request=void 0,this._updateProgress(fn.current),this._needToFetchStatus=!1,fn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const ne=262144*this._chunkMultiplier,Me=new _i(this._transferred,this._blob.size()),tt=this._uploadUrl;this._resolveToken((mt,Vt)=>{let fn;try{fn=function Da(J,ne,Me,tt,mt,Vt,fn,Yn){const Wn=new _i(0,0);if(fn?(Wn.current=fn.current,Wn.total=fn.total):(Wn.current=0,Wn.total=tt.size()),tt.size()!==Wn.total)throw function ot(){return new Te(Ae.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const pr=Wn.total-Wn.current;let Zr=pr;mt>0&&(Zr=Math.min(Zr,mt));const ii=Wn.current;let Mi="";Mi=0===Zr?"finalize":pr===Zr?"upload, finalize":"upload";const Ln={"X-Goog-Upload-Command":Mi,"X-Goog-Upload-Offset":`${Wn.current}`},$i=tt.slice(ii,ii+Zr);if(null===$i)throw Xe();const Gi=new nn(Me,"POST",function _s(Yr,zs){const vo=hi(Yr,["active","final"]),Wo=Wn.current+Zr,es=tt.size();let pa;return pa="final"===vo?Jn(ne,Vt)(Yr,zs):null,new _i(Wo,es,"final"===vo,pa)},ne.maxUploadRetryTime);return Gi.headers=Ln,Gi.body=$i.uploadData(),Gi.progressCallback=Yn||null,Gi.errorHandler=ri(J),Gi}(this._ref._location,this._ref.storage,tt,this._blob,ne,this._mappings,Me,this._makeProgressCallback())}catch(Wn){return this._error=Wn,void this._transition("error")}const Yn=this._ref.storage._makeRequest(fn,As,mt,Vt,!1);this._request=Yn,Yn.getPromise().then(Wn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Wn.current),Wn.finalized?(this._metadata=Wn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((ne,Me)=>{const tt=di(this._ref.storage,this._ref._location,this._mappings),mt=this._ref.storage._makeRequest(tt,As,ne,Me);this._request=mt,mt.getPromise().then(Vt=>{this._request=void 0,this._metadata=Vt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((ne,Me)=>{const tt=function ms(J,ne,Me,tt,mt){const Vt=ne.bucketOnlyServerUrl(),fn={"X-Goog-Upload-Protocol":"multipart"},Wn=function Yn(){let Gi="";for(let Yr=0;Yr<2;Yr++)Gi+=Math.random().toString().slice(2);return Gi}();fn["Content-Type"]="multipart/related; boundary="+Wn;const pr=Go(ne,tt,mt),Zr=Xn(pr,Me),Mi=mr.getBlob("--"+Wn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zr+"\r\n--"+Wn+"\r\nContent-Type: "+pr.contentType+"\r\n\r\n",tt,"\r\n--"+Wn+"--");if(null===Mi)throw Xe();const Ln={name:pr.fullPath},$i=mi(Vt,J.host,J._protocol),$s=J.maxUploadRetryTime,Gs=new nn($i,"POST",Jn(J,Me),$s);return Gs.urlParams=Ln,Gs.headers=fn,Gs.body=Mi.uploadData(),Gs.errorHandler=ri(ne),Gs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),mt=this._ref.storage._makeRequest(tt,As,ne,Me);this._request=mt,mt.getPromise().then(Vt=>{this._request=void 0,this._metadata=Vt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(ne){const Me=this._transferred;this._transferred=ne,this._transferred!==Me&&this._notifyObservers()}_transition(ne){if(this._state!==ne)switch(ne){case"canceling":case"pausing":this._state=ne,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Me="paused"===this._state;this._state=ne,Me&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=ne,this._notifyObservers();break;case"canceled":this._error=pn(),this._state=ne,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const ne=Ia(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:ne,metadata:this._metadata,task:this,ref:this._ref}}on(ne,Me,tt,mt){const Vt=new Bu(Me||void 0,tt||void 0,mt||void 0);return this._addObserver(Vt),()=>{this._removeObserver(Vt)}}then(ne,Me){return this._promise.then(ne,Me)}catch(ne){return this.then(null,ne)}_addObserver(ne){this._observers.push(ne),this._notifyObserver(ne)}_removeObserver(ne){const Me=this._observers.indexOf(ne);-1!==Me&&this._observers.splice(Me,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Me=>{this._notifyObserver(Me)})}_finishPromise(){if(void 0!==this._resolve){let ne=!0;switch(Ia(this._state)){case bs.SUCCESS:Rs(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:Rs(this._reject.bind(null,this._error))();break;default:ne=!1}ne&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(ne){switch(Ia(this._state)){case bs.RUNNING:case bs.PAUSED:ne.next&&Rs(ne.next.bind(ne,this.snapshot))();break;case bs.SUCCESS:ne.complete&&Rs(ne.complete.bind(ne))();break;default:ne.error&&Rs(ne.error.bind(ne,this._error))()}}resume(){const ne="paused"===this._state||"pausing"===this._state;return ne&&this._transition("running"),ne}pause(){const ne="running"===this._state;return ne&&this._transition("pausing"),ne}cancel(){const ne="running"===this._state||"pausing"===this._state;return ne&&this._transition("canceling"),ne}}class Zs{constructor(ne,Me){this._service=ne,this._location=Me instanceof xn?Me:xn.makeFromUrl(Me,ne.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(ne,Me){return new Zs(ne,Me)}get root(){const ne=new xn(this._location.bucket,"");return this._newRef(this._service,ne)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return be(this._location.path)}get storage(){return this._service}get parent(){const ne=function _e(J){if(0===J.length)return null;const ne=J.lastIndexOf("/");return-1===ne?"":J.slice(0,ne)}(this._location.path);if(null===ne)return null;const Me=new xn(this._location.bucket,ne);return new Zs(this._service,Me)}_throwIfRoot(ne){if(""===this._location.path)throw zt(ne)}}function Dn(J,ne,Me){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,ge.Z)(function*(J,ne,Me){const mt=yield Mr(J,{pageToken:Me});ne.prefixes.push(...mt.prefixes),ne.items.push(...mt.items),null!=mt.nextPageToken&&(yield Dn(J,ne,mt.nextPageToken))})).apply(this,arguments)}function Mr(J,ne){null!=ne&&"number"==typeof ne.maxResults&&Sr("options.maxResults",1,1e3,ne.maxResults);const Me=ne||{},tt=gs(J.storage,J._location,"/",Me.pageToken,Me.maxResults);return J.storage.makeRequestWithTokens(tt,As)}function hs(J){J._throwIfRoot("getDownloadURL");const ne=function Lo(J,ne,Me){const mt=mi(ne.fullServerUrl(),J.host,J._protocol),fn=J.maxOperationRetryTime,Yn=new nn(mt,"GET",function Er(J,ne){return function Me(tt,mt){const Vt=Tt(J,mt,ne);return On(null!==Vt),function ln(J,ne,Me,tt){const mt=lt(ne);if(null===mt||!hr(mt.downloadTokens))return null;const Vt=mt.downloadTokens;if(0===Vt.length)return null;const fn=encodeURIComponent;return Vt.split(",").map(pr=>{const ii=J.fullPath;return mi("/b/"+fn(J.bucket)+"/o/"+fn(ii),Me,tt)+Rr({alt:"media",token:pr})})[0]}(Vt,mt,J.host,J._protocol)}}(J,Me),fn);return Yn.errorHandler=pi(ne),Yn}(J.storage,J._location,ve());return J.storage.makeRequestWithTokens(ne,As).then(Me=>{if(null===Me)throw function dt(){return new Te(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Me})}function ys(J,ne){const Me=function Ce(J,ne){const Me=ne.split("/").filter(tt=>tt.length>0).join("/");return 0===J.length?Me:J+"/"+Me}(J._location.path,ne),tt=new xn(J._location.bucket,Me);return new Zs(J.storage,tt)}function jr(J,ne){if(J instanceof zo){const Me=J;if(null==Me._bucket)throw function qe(){return new Te(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ke+"' property when initializing the app?")}();const tt=new Zs(Me,Me._bucket);return null!=ne?jr(tt,ne):tt}return void 0!==ne?ys(J,ne):J}function eu(J,ne){if(ne&&function Us(J){return/^[A-Za-z]+:\/\//.test(J)}(ne)){if(J instanceof zo)return function kr(J,ne){return new Zs(J,ne)}(J,ne);throw ft("To use ref(service, url), the first argument must be a Storage instance.")}return jr(J,ne)}function Es(J,ne){const Me=ne?.[Ke];return null==Me?null:xn.makeFromBucketSpec(Me,J)}class zo{constructor(ne,Me,tt,mt,Vt){this.app=ne,this._authProvider=Me,this._appCheckProvider=tt,this._url=mt,this._firebaseVersion=Vt,this._bucket=null,this._host=et,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=mt?xn.makeFromBucketSpec(mt,this._host):Es(this._host,this.app.options)}get host(){return this._host}set host(ne){this._host=ne,this._bucket=null!=this._url?xn.makeFromBucketSpec(this._url,ne):Es(ne,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(ne){Sr("time",0,Number.POSITIVE_INFINITY,ne),this._maxUploadRetryTime=ne}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(ne){Sr("time",0,Number.POSITIVE_INFINITY,ne),this._maxOperationRetryTime=ne}_getAuthToken(){var ne=this;return(0,ge.Z)(function*(){if(ne._overrideAuthToken)return ne._overrideAuthToken;const Me=ne._authProvider.getImmediate({optional:!0});if(Me){const tt=yield Me.getToken();if(null!==tt)return tt.accessToken}return null})()}_getAppCheckToken(){var ne=this;return(0,ge.Z)(function*(){const Me=ne._appCheckProvider.getImmediate({optional:!0});return Me?(yield Me.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(ne=>ne.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(ne){return new Zs(this,ne)}_makeRequest(ne,Me,tt,mt,Vt=!0){if(this._deleted)return new $n(jt());{const fn=function eo(J,ne,Me,tt,mt,Vt,fn=!0){const Yn=Rr(J.urlParams),Wn=J.url+Yn,pr=Object.assign({},J.headers);return function Kr(J,ne){ne&&(J["X-Firebase-GMPID"]=ne)}(pr,ne),function ar(J,ne){null!==ne&&ne.length>0&&(J.Authorization="Firebase "+ne)}(pr,Me),function Ui(J,ne){J["X-Firebase-Storage-Version"]="webjs/"+(ne??"AppManager")}(pr,Vt),function fi(J,ne){null!==ne&&(J["X-Firebase-AppCheck"]=ne)}(pr,tt),new Nn(Wn,J.method,pr,J.body,J.successCodes,J.additionalRetryCodes,J.handler,J.errorHandler,J.timeout,J.progressCallback,mt,fn)}(ne,this._appId,tt,mt,Me,this._firebaseVersion,Vt);return this._requests.add(fn),fn.getPromise().then(()=>this._requests.delete(fn),()=>this._requests.delete(fn)),fn}}makeRequestWithTokens(ne,Me){var tt=this;return(0,ge.Z)(function*(){const[mt,Vt]=yield Promise.all([tt._getAuthToken(),tt._getAppCheckToken()]);return tt._makeRequest(ne,Me,mt,Vt).getPromise()})()}}const ro="@firebase/storage";function Hs(J,ne){return eu(J=(0,Ze.m9)(J),ne)}function Ei(J,{instanceIdentifier:ne}){const Me=J.getProvider("app").getImmediate(),tt=J.getProvider("auth-internal"),mt=J.getProvider("app-check-internal");return new zo(Me,tt,mt,ne,St.SDK_VERSION)}!function mo(){(0,St._registerComponent)(new rt.wA("storage",Ei,"PUBLIC").setMultipleInstances(!0)),(0,St.registerVersion)(ro,"0.11.2",""),(0,St.registerVersion)(ro,"0.11.2","esm2017")}();class Ji{constructor(ne,Me,tt){this._delegate=ne,this.task=Me,this.ref=tt}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Bo{constructor(ne,Me){this._delegate=ne,this._ref=Me,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ji(this._delegate.snapshot,this,this._ref)}then(ne,Me){return this._delegate.then(tt=>{if(ne)return ne(new Ji(tt,this,this._ref))},Me)}on(ne,Me,tt,mt){let Vt;return Me&&(Vt="function"==typeof Me?fn=>Me(new Ji(fn,this,this._ref)):{next:Me.next?fn=>Me.next(new Ji(fn,this,this._ref)):void 0,complete:Me.complete||void 0,error:Me.error||void 0}),this._delegate.on(ne,Vt,tt||void 0,mt||void 0)}}class Ss{constructor(ne,Me){this._delegate=ne,this._service=Me}get prefixes(){return this._delegate.prefixes.map(ne=>new xi(ne,this._service))}get items(){return this._delegate.items.map(ne=>new xi(ne,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class xi{constructor(ne,Me){this._delegate=ne,this.storage=Me}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(ne){const Me=function ha(J,ne){return ys(J,ne)}(this._delegate,ne);return new xi(Me,this.storage)}get root(){return new xi(this._delegate.root,this.storage)}get parent(){const ne=this._delegate.parent;return null==ne?null:new xi(ne,this.storage)}put(ne,Me){return this._throwIfRoot("put"),new Bo(function Aa(J,ne,Me){return function xt(J,ne,Me){return J._throwIfRoot("uploadBytesResumable"),new ss(J,new mr(ne),Me)}(J=(0,Ze.m9)(J),ne,Me)}(this._delegate,ne,Me),this)}putString(ne,Me=br.RAW,tt){this._throwIfRoot("putString");const mt=ci(Me,ne),Vt=Object.assign({},tt);return null==Vt.contentType&&null!=mt.contentType&&(Vt.contentType=mt.contentType),new Bo(new ss(this._delegate,new mr(mt.data,!0),Vt),this)}listAll(){return function da(J){return function Jt(J){const ne={prefixes:[],items:[]};return Dn(J,ne).then(()=>ne)}(J=(0,Ze.m9)(J))}(this._delegate).then(ne=>new Ss(ne,this.storage))}list(ne){return function bi(J,ne){return Mr(J=(0,Ze.m9)(J),ne)}(this._delegate,ne||void 0).then(Me=>new Ss(Me,this.storage))}getMetadata(){return function jo(J){return function Ys(J){J._throwIfRoot("getMetadata");const ne=di(J.storage,J._location,ve());return J.storage.makeRequestWithTokens(ne,As)}(J=(0,Ze.m9)(J))}(this._delegate)}updateMetadata(ne){return function $r(J,ne){return function vs(J,ne){J._throwIfRoot("updateMetadata");const Me=function si(J,ne,Me,tt){const Vt=mi(ne.fullServerUrl(),J.host,J._protocol),Yn=Xn(Me,tt),pr=J.maxOperationRetryTime,Zr=new nn(Vt,"PATCH",Jn(J,tt),pr);return Zr.headers={"Content-Type":"application/json; charset=utf-8"},Zr.body=Yn,Zr.errorHandler=pi(ne),Zr}(J.storage,J._location,ne,ve());return J.storage.makeRequestWithTokens(Me,As)}(J=(0,Ze.m9)(J),ne)}(this._delegate,ne)}getDownloadURL(){return function ji(J){return hs(J=(0,Ze.m9)(J))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fs(J){return function Fi(J){J._throwIfRoot("deleteObject");const ne=function $o(J,ne){const tt=mi(ne.fullServerUrl(),J.host,J._protocol),Yn=new nn(tt,"DELETE",function fn(Wn,pr){},J.maxOperationRetryTime);return Yn.successCodes=[200,204],Yn.errorHandler=pi(ne),Yn}(J.storage,J._location);return J.storage.makeRequestWithTokens(ne,As)}(J=(0,Ze.m9)(J))}(this._delegate)}_throwIfRoot(ne){if(""===this._delegate._location.path)throw zt(ne)}}class Ai{constructor(ne,Me){this.app=ne,this._delegate=Me}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(ne){if(hu(ne))throw ft("ref() expected a child path but got a URL, use refFromURL instead.");return new xi(Hs(this._delegate,ne),this)}refFromURL(ne){if(!hu(ne))throw ft("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xn.makeFromUrl(ne,this._delegate.host)}catch{throw ft("refFromUrl() expected a valid full URL but got an invalid one.")}return new xi(Hs(this._delegate,ne),this)}setMaxUploadRetryTime(ne){this._delegate.maxUploadRetryTime=ne}setMaxOperationRetryTime(ne){this._delegate.maxOperationRetryTime=ne}useEmulator(ne,Me,tt={}){!function Cs(J,ne,Me,tt={}){!function Hi(J,ne,Me,tt={}){J.host=`${ne}:${Me}`,J._protocol="http";const{mockUserToken:mt}=tt;mt&&(J._overrideAuthToken="string"==typeof mt?mt:(0,Ze.Sg)(mt,J.app.options.projectId))}(J,ne,Me,tt)}(this._delegate,ne,Me,tt)}}function hu(J){return/^[A-Za-z]+:\/\//.test(J)}function Ka(J,{instanceIdentifier:ne}){const Me=J.getProvider("app-compat").getImmediate(),tt=J.getProvider("storage").getImmediate({identifier:ne});return new Ai(Me,tt)}!function ul(J){const ne={TaskState:bs,TaskEvent:no,StringFormat:br,Storage:Ai,Reference:xi};J.INTERNAL.registerComponent(new rt.wA("storage-compat",Ka,"PUBLIC").setServiceProps(ne).setMultipleInstances(!0)),J.registerVersion("@firebase/storage-compat","0.3.2")}(kt.Z);var Uo=z(8697),ka=z(7142);function nu(J){const ne=function Pa(J){return new T.y(ne=>{const Me=fn=>ne.next(fn);Me(J.snapshot);const Vt=J.on("state_changed",Me);return J.then(fn=>{Me(fn),ne.complete()},fn=>{Me(J.snapshot),(fn=>{ne.error(fn)})(fn)}),function(){Vt()}}).pipe(function Qe(J,ne=B.z){return(0,Re.e)((Me,tt)=>{let mt=null,Vt=null,fn=null;const Yn=()=>{if(mt){mt.unsubscribe(),mt=null;const pr=Vt;Vt=null,tt.next(pr)}};function Wn(){const pr=fn+J,Zr=ne.now();if(Zr<pr)return mt=this.schedule(void 0,pr-Zr),void tt.add(mt);Yn()}Me.subscribe((0,Ne.x)(tt,pr=>{Vt=pr,fn=ne.now(),mt||(mt=ne.schedule(Wn,J),tt.add(mt))},()=>{Yn(),tt.complete()},void 0,()=>{Vt=mt=null}))})}(0))}(J);return{task:J,then:J.then.bind(J),catch:J.catch.bind(J),pause:J.pause.bind(J),cancel:J.cancel.bind(J),resume:J.resume.bind(J),snapshotChanges:()=>ne,percentageChanges:()=>ne.pipe((0,at.U)(Me=>Me.bytesTransferred/Me.totalBytes*100))}}function pu(J){return{getDownloadURL:()=>(0,me.of)(void 0).pipe(xe.fc,(0,ut.w)(()=>J.getDownloadURL()),xe.iC),getMetadata:()=>(0,me.of)(void 0).pipe(xe.fc,(0,ut.w)(()=>J.getMetadata()),xe.iC),delete:()=>(0,le.D)(J.delete()),child:ne=>pu(J.child(ne)),updateMetadata:ne=>(0,le.D)(J.updateMetadata(ne)),put:(ne,Me)=>nu(J.put(ne,Me)),putString:(ne,Me,tt)=>nu(J.putString(ne,Me,tt)),list:ne=>(0,le.D)(J.list(ne)),listAll:()=>(0,le.D)(J.listAll())}}const lo=new je.OlP("angularfire2.storageBucket"),fa=new je.OlP("angularfire2.storage.maxUploadRetryTime"),Za=new je.OlP("angularfire2.storage.maxOperationRetryTime"),ie=new je.OlP("angularfire2.storage.use-emulator");let Q=(()=>{class J{constructor(Me,tt,mt,Vt,fn,Yn,Wn,pr,Zr,ii){const zr=(0,$e.on)(Me,fn,tt);this.storage=(0,$e.cc)(`${zr.name}.storage.${mt}`,"AngularFireStorage",zr.name,()=>{const Mi=fn.runOutsideAngular(()=>zr.storage(mt||void 0)),Ln=Zr;return Ln&&Mi.useEmulator(...Ln),Wn&&Mi.setMaxUploadRetryTime(Wn),pr&&Mi.setMaxOperationRetryTime(pr),Mi},[Wn,pr])}ref(Me){return pu(this.storage.ref(Me))}refFromURL(Me){return pu(this.storage.refFromURL(Me))}upload(Me,tt,mt){return pu(this.storage.ref(Me)).put(tt,mt)}}return J.\u0275fac=function(Me){return new(Me||J)(je.LFG($e.Dh),je.LFG($e.xv,8),je.LFG(lo,8),je.LFG(je.Lbi),je.LFG(je.R0b),je.LFG(xe.HU),je.LFG(fa,8),je.LFG(Za,8),je.LFG(ie,8),je.LFG(Uo.nm,8))},J.\u0275prov=je.Yz7({token:J,factory:J.\u0275fac,providedIn:"any"}),J})(),Oe=(()=>{class J{}return J.\u0275fac=function(Me){return new(Me||J)},J.\u0275mod=je.oAB({type:J}),J.\u0275inj=je.cJS({}),J})(),qt=(()=>{class J{constructor(){ka.Z.registerVersion("angularfire",xe.q4.full,"gcs-compat")}}return J.\u0275fac=function(Me){return new(Me||J)},J.\u0275mod=je.oAB({type:J}),J.\u0275inj=je.cJS({providers:[Q],imports:[Oe]}),J})()},6304:(tn,ht,z)=>{"use strict";z.d(ht,{Dh:()=>at,GT:()=>Ne,cc:()=>ge,hO:()=>kt,on:()=>xe,pX:()=>Re,xv:()=>ut});var T=z(5879),me=z(7142),le=z(8186);tn=z.hmd(tn);const B=["ngOnDestroy"],Re=(et,Ke,W,te={})=>new Proxy(et,{get:(Ee,Te)=>W.runOutsideAngular(()=>{var Ae;if(et[Te])return!(null===(Ae=te?.spy)||void 0===Ae)&&Ae.get&&te.spy.get(Te,et[Te]),et[Te];if(B.indexOf(Te)>-1)return()=>{};const gt=Ke.toPromise().then(Y=>{const oe=Y&&Y[Te];return"function"==typeof oe?oe.bind(Y):oe&&oe.then?oe.then(Fe=>W.run(()=>Fe)):W.run(()=>oe)});return new Proxy(()=>{},{get:(Y,oe)=>gt[oe],apply:(Y,oe,Fe)=>gt.then(At=>{var Ht;const Gt=At&&At(...Fe);return!(null===(Ht=te?.spy)||void 0===Ht)&&Ht.apply&&te.spy.apply(Te,Fe,Gt),Gt})})})}),Ne=(et,Ke)=>{Ke.forEach(W=>{Object.getOwnPropertyNames(W.prototype||W).forEach(te=>{Object.defineProperty(et.prototype,te,Object.getOwnPropertyDescriptor(W.prototype||W,te))})})};class Qe{constructor(Ke){return Ke}}const at=new T.OlP("angularfire2.app.options"),ut=new T.OlP("angularfire2.app.name");function xe(et,Ke,W){const Ee="object"==typeof W&&W||{};Ee.name=Ee.name||"string"==typeof W&&W||"[DEFAULT]";const Ae=me.Z.apps.filter(gt=>gt&&gt.name===Ee.name)[0]||Ke.runOutsideAngular(()=>me.Z.initializeApp(et,Ee));try{JSON.stringify(et)!==JSON.stringify(Ae.options)&&je("error",`${Ae.name} Firebase App already initialized with different options${tn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Qe(Ae)}const je=(et,...Ke)=>{(0,T.X6Q)()&&typeof console<"u"&&console[et](...Ke)},$e={provide:Qe,useFactory:xe,deps:[at,T.R0b,[new T.FiY,ut]]};let kt=(()=>{class et{constructor(W){me.Z.registerVersion("angularfire",le.q4.full,"core"),me.Z.registerVersion("angularfire",le.q4.full,"app-compat"),me.Z.registerVersion("angular",T.q4F.full,W.toString())}static initializeApp(W,te){return{ngModule:et,providers:[{provide:at,useValue:W},{provide:ut,useValue:te}]}}}return et.\u0275fac=function(W){return new(W||et)(T.LFG(T.Lbi))},et.\u0275mod=T.oAB({type:et}),et.\u0275inj=T.cJS({providers:[$e]}),et})();function ge(et,Ke,W,te,Ee){const[,Te,Ae]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===et)||[];if(Te)return function St(et,Ke){try{return et.toString()===Ke.toString()}catch{return et===Ke}}(Ee,Ae)||(rt("error",`${Ke} was already initialized on the ${W} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),rt("warn",{is:Ee,was:Ae})),Te;{const gt=te();return globalThis.\u0275AngularfireInstanceCache.push([et,gt,Ee]),gt}}const Ze=!!tn.hot,rt=(et,...Ke)=>{(0,T.X6Q)()&&typeof console<"u"&&console[et](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(tn,ht,z)=>{"use strict";z.d(ht,{q4:()=>js,iC:()=>su,fc:()=>Iu,HU:()=>Ho,vb:()=>hd,JM:()=>Xa});var T=z(5879),me=z(3182),le=z(5861),B=z(534),Re=z(9058),Ne=z(4537),Qe=z(7879);const at=(O,H)=>H.some(fe=>O instanceof fe);let ut,xe;const kt=new WeakMap,ge=new WeakMap,St=new WeakMap,Ze=new WeakMap,rt=new WeakMap;let W={get(O,H,fe){if(O instanceof IDBTransaction){if("done"===H)return ge.get(O);if("objectStoreNames"===H)return O.objectStoreNames||St.get(O);if("store"===H)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return Ae(O[H])},set:(O,H,fe)=>(O[H]=fe,!0),has:(O,H)=>O instanceof IDBTransaction&&("done"===H||"store"===H)||H in O};function Te(O){return"function"==typeof O?function Ee(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...H){return O.apply(gt(this),H),Ae(kt.get(this))}:function(...H){return Ae(O.apply(gt(this),H))}:function(H,...fe){const We=O.call(gt(this),H,...fe);return St.set(We,H.sort?H.sort():[H]),Ae(We)}}(O):(O instanceof IDBTransaction&&function Ke(O){if(ge.has(O))return;const H=new Promise((fe,We)=>{const yt=()=>{O.removeEventListener("complete",Rt),O.removeEventListener("error",Kt),O.removeEventListener("abort",Kt)},Rt=()=>{fe(),yt()},Kt=()=>{We(O.error||new DOMException("AbortError","AbortError")),yt()};O.addEventListener("complete",Rt),O.addEventListener("error",Kt),O.addEventListener("abort",Kt)});ge.set(O,H)}(O),at(O,function je(){return ut||(ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,W):O)}function Ae(O){if(O instanceof IDBRequest)return function et(O){const H=new Promise((fe,We)=>{const yt=()=>{O.removeEventListener("success",Rt),O.removeEventListener("error",Kt)},Rt=()=>{fe(Ae(O.result)),yt()},Kt=()=>{We(O.error),yt()};O.addEventListener("success",Rt),O.addEventListener("error",Kt)});return H.then(fe=>{fe instanceof IDBCursor&&kt.set(fe,O)}).catch(()=>{}),rt.set(H,O),H}(O);if(Ze.has(O))return Ze.get(O);const H=Te(O);return H!==O&&(Ze.set(O,H),rt.set(H,O)),H}const gt=O=>rt.get(O),Fe=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Ht=new Map;function Gt(O,H){if(!(O instanceof IDBDatabase)||H in O||"string"!=typeof H)return;if(Ht.get(H))return Ht.get(H);const fe=H.replace(/FromIndex$/,""),We=H!==fe,yt=At.includes(fe);if(!(fe in(We?IDBIndex:IDBObjectStore).prototype)||!yt&&!Fe.includes(fe))return;const Rt=function(){var Kt=(0,le.Z)(function*(Vn,...Hn){const yr=this.transaction(Vn,yt?"readwrite":"readonly");let ei=yr.store;return We&&(ei=ei.index(Hn.shift())),(yield Promise.all([ei[fe](...Hn),yt&&yr.done]))[0]});return function(Hn){return Kt.apply(this,arguments)}}();return Ht.set(H,Rt),Rt}!function te(O){W=O(W)}(O=>({...O,get:(H,fe,We)=>Gt(H,fe)||O.get(H,fe,We),has:(H,fe)=>!!Gt(H,fe)||O.has(H,fe)}));const Xt="@firebase/installations",pn="0.6.4",Zt=1e4,Yt=`w:${pn}`,qe="FIS_v2",Xe="https://firebaseinstallations.googleapis.com/v1",ot=36e5,jt=new Re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function zt(O){return O instanceof Re.ZR&&O.code.includes("request-failed")}function In({projectId:O}){return`${Xe}/projects/${O}/installations`}function Tn(O){return{token:O.token,requestStatus:2,expiresIn:xr(O.expiresIn),creationTime:Date.now()}}function xn(O,H){return $n.apply(this,arguments)}function $n(){return($n=(0,le.Z)(function*(O,H){const We=(yield H.json()).error;return jt.create("request-failed",{requestName:O,serverCode:We.code,serverMessage:We.message,serverStatus:We.status})})).apply(this,arguments)}function Gn({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function Bn(O){return dr.apply(this,arguments)}function dr(){return(dr=(0,le.Z)(function*(O){const H=yield O();return H.status>=500&&H.status<600?O():H})).apply(this,arguments)}function xr(O){return Number(O.replace("s","000"))}function Gr(){return(Gr=(0,le.Z)(function*({appConfig:O,heartbeatServiceProvider:H},{fid:fe}){const We=In(O),yt=Gn(O),Rt=H.getImmediate({optional:!0});if(Rt){const yr=yield Rt.getHeartbeatsHeader();yr&&yt.append("x-firebase-client",yr)}const Vn={method:"POST",headers:yt,body:JSON.stringify({fid:fe,authVersion:qe,appId:O.appId,sdkVersion:Yt})},Hn=yield Bn(()=>fetch(We,Vn));if(Hn.ok){const yr=yield Hn.json();return{fid:yr.fid||fe,registrationStatus:2,refreshToken:yr.refreshToken,authToken:Tn(yr.authToken)}}throw yield xn("Create Installation",Hn)})).apply(this,arguments)}function Sr(O){return new Promise(H=>{setTimeout(H,O)})}const Rr=/^[cdef][\w-]{21}$/,an="";function Un(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const fe=function Nn(O){return function mi(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Rr.test(fe)?fe:an}catch{return an}}function Dr(O){return`${O.appName}!${O.appId}`}const ar=new Map;function Ui(O,H){const fe=Dr(O);eo(fe,H),function Fr(O,H){const fe=function Tr(){return!Qi&&"BroadcastChannel"in self&&(Qi=new BroadcastChannel("[Firebase] FID Change"),Qi.onmessage=O=>{eo(O.data.key,O.data.fid)}),Qi}();fe&&fe.postMessage({key:O,fid:H}),function qi(){0===ar.size&&Qi&&(Qi.close(),Qi=null)}()}(fe,H)}function eo(O,H){const fe=ar.get(O);if(fe)for(const We of fe)We(H)}let Qi=null;const br="firebase-installations-database",is=1,ci="firebase-installations-store";let Ri=null;function li(){return Ri||(Ri=function Y(O,H,{blocked:fe,upgrade:We,blocking:yt,terminated:Rt}={}){const Kt=indexedDB.open(O,H),Vn=Ae(Kt);return We&&Kt.addEventListener("upgradeneeded",Hn=>{We(Ae(Kt.result),Hn.oldVersion,Hn.newVersion,Ae(Kt.transaction))}),fe&&Kt.addEventListener("blocked",()=>fe()),Vn.then(Hn=>{Rt&&Hn.addEventListener("close",()=>Rt()),yt&&Hn.addEventListener("versionchange",()=>yt())}).catch(()=>{}),Vn}(br,is,{upgrade:(O,H)=>{0===H&&O.createObjectStore(ci)}})),Ri}function vi(O,H){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,le.Z)(function*(O,H){const fe=Dr(O),yt=(yield li()).transaction(ci,"readwrite"),Rt=yt.objectStore(ci),Kt=yield Rt.get(fe);return yield Rt.put(H,fe),yield yt.done,(!Kt||Kt.fid!==H.fid)&&Ui(O,H.fid),H})).apply(this,arguments)}function Vi(O){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,le.Z)(function*(O){const H=Dr(O),We=(yield li()).transaction(ci,"readwrite");yield We.objectStore(ci).delete(H),yield We.done})).apply(this,arguments)}function ls(O,H){return mr.apply(this,arguments)}function mr(){return(mr=(0,le.Z)(function*(O,H){const fe=Dr(O),yt=(yield li()).transaction(ci,"readwrite"),Rt=yt.objectStore(ci),Kt=yield Rt.get(fe),Vn=H(Kt);return void 0===Vn?yield Rt.delete(fe):yield Rt.put(Vn,fe),yield yt.done,Vn&&(!Kt||Kt.fid!==Vn.fid)&&Ui(O,Vn.fid),Vn})).apply(this,arguments)}function lt(O){return _e.apply(this,arguments)}function _e(){return _e=(0,le.Z)(function*(O){let H;const fe=yield ls(O.appConfig,We=>{const yt=function Ce(O){return ye(O||{fid:Un(),registrationStatus:0})}(We),Rt=function be(O,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(jt.create("app-offline"))};const fe={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},We=function Pe(O,H){return Et.apply(this,arguments)}(O,fe);return{installationEntry:fe,registrationPromise:We}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:Qt(O)}:{installationEntry:H}}(O,yt);return H=Rt.registrationPromise,Rt.installationEntry});return fe.fid===an?{installationEntry:yield H}:{installationEntry:fe,registrationPromise:H}}),_e.apply(this,arguments)}function Et(){return Et=(0,le.Z)(function*(O,H){try{const fe=yield function qr(O,H){return Gr.apply(this,arguments)}(O,H);return vi(O.appConfig,fe)}catch(fe){throw zt(fe)&&409===fe.customData.serverCode?yield Vi(O.appConfig):yield vi(O.appConfig,{fid:H.fid,registrationStatus:0}),fe}}),Et.apply(this,arguments)}function Qt(O){return En.apply(this,arguments)}function En(){return(En=(0,le.Z)(function*(O){let H=yield ve(O.appConfig);for(;1===H.registrationStatus;)yield Sr(100),H=yield ve(O.appConfig);if(0===H.registrationStatus){const{installationEntry:fe,registrationPromise:We}=yield lt(O);return We||fe}return H})).apply(this,arguments)}function ve(O){return ls(O,H=>{if(!H)throw jt.create("installation-not-found");return ye(H)})}function ye(O){return function He(O){return 1===O.registrationStatus&&O.registrationTime+Zt<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function ln(){return(ln=(0,le.Z)(function*({appConfig:O,heartbeatServiceProvider:H},fe){const We=function Xn(O,{fid:H}){return`${In(O)}/${H}/authTokens:generate`}(O,fe),yt=function ir(O,{refreshToken:H}){const fe=Gn(O);return fe.append("Authorization",function hr(O){return`${qe} ${O}`}(H)),fe}(O,fe),Rt=H.getImmediate({optional:!0});if(Rt){const yr=yield Rt.getHeartbeatsHeader();yr&&yt.append("x-firebase-client",yr)}const Vn={method:"POST",headers:yt,body:JSON.stringify({installation:{sdkVersion:Yt,appId:O.appId}})},Hn=yield Bn(()=>fetch(We,Vn));if(Hn.ok)return Tn(yield Hn.json());throw yield xn("Generate Auth Token",Hn)})).apply(this,arguments)}function Hr(O){return ui.apply(this,arguments)}function ui(){return ui=(0,le.Z)(function*(O,H=!1){let fe;const We=yield ls(O.appConfig,Rt=>{if(!fr(Rt))throw jt.create("not-registered");const Kt=Rt.authToken;if(!H&&function Er(O){return 2===O.requestStatus&&!function ri(O){const H=Date.now();return H<O.creationTime||O.creationTime+O.expiresIn<H+ot}(O)}(Kt))return Rt;if(1===Kt.requestStatus)return fe=function Ut(O,H){return Pt.apply(this,arguments)}(O,H),Rt;{if(!navigator.onLine)throw jt.create("app-offline");const Vn=function pi(O){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:H})}(Rt);return fe=function On(O,H){return Jn.apply(this,arguments)}(O,Vn),Vn}});return fe?yield fe:We.authToken}),ui.apply(this,arguments)}function Pt(){return(Pt=(0,le.Z)(function*(O,H){let fe=yield nn(O.appConfig);for(;1===fe.authToken.requestStatus;)yield Sr(100),fe=yield nn(O.appConfig);const We=fe.authToken;return 0===We.requestStatus?Hr(O,H):We})).apply(this,arguments)}function nn(O){return ls(O,H=>{if(!fr(H))throw jt.create("not-registered");return function di(O){return 1===O.requestStatus&&O.requestTime+Zt<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function Jn(){return Jn=(0,le.Z)(function*(O,H){try{const fe=yield function Tt(O,H){return ln.apply(this,arguments)}(O,H),We=Object.assign(Object.assign({},H),{authToken:fe});return yield vi(O.appConfig,We),fe}catch(fe){if(!zt(fe)||401!==fe.customData.serverCode&&404!==fe.customData.serverCode){const We=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield vi(O.appConfig,We)}else yield Vi(O.appConfig);throw fe}}),Jn.apply(this,arguments)}function fr(O){return void 0!==O&&2===O.registrationStatus}function qs(){return(qs=(0,le.Z)(function*(O){const H=O,{installationEntry:fe,registrationPromise:We}=yield lt(H);return We?We.catch(console.error):Hr(H).catch(console.error),fe.fid})).apply(this,arguments)}function si(){return si=(0,le.Z)(function*(O,H=!1){const fe=O;return yield function $o(O){return cs.apply(this,arguments)}(fe),(yield Hr(fe,H)).token}),si.apply(this,arguments)}function cs(){return(cs=(0,le.Z)(function*(O){const{registrationPromise:H}=yield lt(O);H&&(yield H)})).apply(this,arguments)}function no(O){return jt.create("missing-app-config-values",{valueName:O})}const bs="installations",Bu=O=>{const H=O.getProvider("app").getImmediate(),fe=function Da(O){if(!O||!O.options)throw no("App Configuration");if(!O.name)throw no("App Name");const H=["projectId","apiKey","appId"];for(const fe of H)if(!O.options[fe])throw no(fe);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(H);return{app:H,appConfig:fe,heartbeatServiceProvider:(0,B._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},Rs=O=>{const H=O.getProvider("app").getImmediate(),fe=(0,B._getProvider)(H,bs).getImmediate();return{getId:()=>function gs(O){return qs.apply(this,arguments)}(fe),getToken:yt=>function Lo(O){return si.apply(this,arguments)}(fe,yt)}};(function xa(){(0,B._registerComponent)(new Ne.wA(bs,Bu,"PUBLIC")),(0,B._registerComponent)(new Ne.wA("installations-internal",Rs,"PRIVATE"))})(),(0,B.registerVersion)(Xt,pn),(0,B.registerVersion)(Xt,pn,"esm2017");const Xi="@firebase/remote-config",yi=new Re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jr{constructor(H,fe,We,yt){this.client=H,this.storage=fe,this.storageCache=We,this.logger=yt}isCachedDataFresh(H,fe){if(!fe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const We=Date.now()-fe,yt=We<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${We}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${yt}.`),yt}fetch(H){var fe=this;return(0,le.Z)(function*(){const[We,yt]=yield Promise.all([fe.storage.getLastSuccessfulFetchTimestampMillis(),fe.storage.getLastSuccessfulFetchResponse()]);if(yt&&fe.isCachedDataFresh(H.cacheMaxAgeMillis,We))return yt;H.eTag=yt&&yt.eTag;const Rt=yield fe.client.fetch(H),Kt=[fe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&Kt.push(fe.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(Kt),Rt})()}}function eu(O=navigator){return O.languages&&O.languages[0]||O.language}class Es{constructor(H,fe,We,yt,Rt,Kt){this.firebaseInstallations=H,this.sdkVersion=fe,this.namespace=We,this.projectId=yt,this.apiKey=Rt,this.appId=Kt}fetch(H){var fe=this;return(0,le.Z)(function*(){const[We,yt]=yield Promise.all([fe.firebaseInstallations.getId(),fe.firebaseInstallations.getToken()]),Kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${fe.projectId}/namespaces/${fe.namespace}:fetch?key=${fe.apiKey}`,Vn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},Hn={sdk_version:fe.sdkVersion,app_instance_id:We,app_instance_id_token:yt,app_id:fe.appId,language_code:eu()},yr={method:"POST",headers:Vn,body:JSON.stringify(Hn)},ei=fetch(Kt,yr),Xr=new Promise((oa,Yu)=>{H.signal.addEventListener(()=>{const Qu=new Error("The operation was aborted.");Qu.name="AbortError",Yu(Qu)})});let Ba;try{yield Promise.race([ei,Xr]),Ba=yield ei}catch(oa){let Yu="fetch-client-network";throw"AbortError"===oa?.name&&(Yu="fetch-timeout"),yi.create(Yu,{originalErrorMessage:oa?.message})}let Si=Ba.status;const vu=Ba.headers.get("ETag")||void 0;let Bi,ba;if(200===Ba.status){let oa;try{oa=yield Ba.json()}catch(Yu){throw yi.create("fetch-client-parse",{originalErrorMessage:Yu?.message})}Bi=oa.entries,ba=oa.state}if("INSTANCE_STATE_UNSPECIFIED"===ba?Si=500:"NO_CHANGE"===ba?Si=304:("NO_TEMPLATE"===ba||"EMPTY_CONFIG"===ba)&&(Bi={}),304!==Si&&200!==Si)throw yi.create("fetch-status",{httpStatus:Si});return{status:Si,eTag:vu,config:Bi}})()}}class ro{constructor(H,fe){this.client=H,this.storage=fe}fetch(H){var fe=this;return(0,le.Z)(function*(){const We=(yield fe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return fe.attemptFetch(H,We)})()}attemptFetch(H,{throttleEndTimeMillis:fe,backoffCount:We}){var yt=this;return(0,le.Z)(function*(){yield function Hi(O,H){return new Promise((fe,We)=>{const yt=Math.max(H-Date.now(),0),Rt=setTimeout(fe,yt);O.addEventListener(()=>{clearTimeout(Rt),We(yi.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,fe);try{const Rt=yield yt.client.fetch(H);return yield yt.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function zo(O){if(!(O instanceof Re.ZR&&O.customData))return!1;const H=Number(O.customData.httpStatus);return 429===H||500===H||503===H||504===H}(Rt))throw Rt;const Kt={throttleEndTimeMillis:Date.now()+(0,Re.$s)(We),backoffCount:We+1};return yield yt.storage.setThrottleMetadata(Kt),yt.attemptFetch(H,Kt)}})()}}class Uu{constructor(H,fe,We,yt,Rt){this.app=H,this._client=fe,this._storageCache=We,this._storage=yt,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vs(O,H){const fe=O.target.error||void 0;return yi.create(H,{originalErrorMessage:fe&&fe?.message})}const Ti="app_namespace_store";class bi{constructor(H,fe,We,yt=function $r(){return new Promise((O,H)=>{try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=We=>{H(Vs(We,"storage-open"))},fe.onsuccess=We=>{O(We.target.result)},fe.onupgradeneeded=We=>{0===We.oldVersion&&We.target.result.createObjectStore(Ti,{keyPath:"compositeKey"})}}catch(fe){H(yi.create("storage-open",{originalErrorMessage:fe?.message}))}})}()){this.appId=H,this.appName=fe,this.namespace=We,this.openDbPromise=yt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var fe=this;return(0,le.Z)(function*(){const We=yield fe.openDbPromise;return new Promise((yt,Rt)=>{const Vn=We.transaction([Ti],"readonly").objectStore(Ti),Hn=fe.createCompositeKey(H);try{const yr=Vn.get(Hn);yr.onerror=ei=>{Rt(Vs(ei,"storage-get"))},yr.onsuccess=ei=>{const Xr=ei.target.result;yt(Xr?Xr.value:void 0)}}catch(yr){Rt(yi.create("storage-get",{originalErrorMessage:yr?.message}))}})})()}set(H,fe){var We=this;return(0,le.Z)(function*(){const yt=yield We.openDbPromise;return new Promise((Rt,Kt)=>{const Hn=yt.transaction([Ti],"readwrite").objectStore(Ti),yr=We.createCompositeKey(H);try{const ei=Hn.put({compositeKey:yr,value:fe});ei.onerror=Xr=>{Kt(Vs(Xr,"storage-set"))},ei.onsuccess=()=>{Rt()}}catch(ei){Kt(yi.create("storage-set",{originalErrorMessage:ei?.message}))}})})()}delete(H){var fe=this;return(0,le.Z)(function*(){const We=yield fe.openDbPromise;return new Promise((yt,Rt)=>{const Vn=We.transaction([Ti],"readwrite").objectStore(Ti),Hn=fe.createCompositeKey(H);try{const yr=Vn.delete(Hn);yr.onerror=ei=>{Rt(Vs(ei,"storage-delete"))},yr.onsuccess=()=>{yt()}}catch(yr){Rt(yi.create("storage-delete",{originalErrorMessage:yr?.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class da{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,le.Z)(function*(){const fe=H.storage.getLastFetchStatus(),We=H.storage.getLastSuccessfulFetchTimestampMillis(),yt=H.storage.getActiveConfig(),Rt=yield fe;Rt&&(H.lastFetchStatus=Rt);const Kt=yield We;Kt&&(H.lastSuccessfulFetchTimestampMillis=Kt);const Vn=yield yt;Vn&&(H.activeConfig=Vn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function ha(){return tu.apply(this,arguments)}function tu(){return(tu=(0,le.Z)(function*(){if(!(0,Re.hl)())return!1;try{return yield(0,Re.eu)()}catch{return!1}})).apply(this,arguments)}!function ji(){(0,B._registerComponent)(new Ne.wA("remote-config",function O(H,{instanceIdentifier:fe}){const We=H.getProvider("app").getImmediate(),yt=H.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yi.create("registration-window");if(!(0,Re.hl)())throw yi.create("indexed-db-unavailable");const{projectId:Rt,apiKey:Kt,appId:Vn}=We.options;if(!Rt)throw yi.create("registration-project-id");if(!Kt)throw yi.create("registration-api-key");if(!Vn)throw yi.create("registration-app-id");const Hn=new bi(Vn,We.name,fe=fe||"firebase"),yr=new da(Hn),ei=new Qe.Yd(Xi);ei.logLevel=Qe.in.ERROR;const Xr=new Es(yt,B.SDK_VERSION,fe,Rt,Kt,Vn),Ba=new ro(Xr,Hn),Si=new jr(Ba,Hn,yr,ei),vu=new Uu(We,Si,yr,Hn,ei);return function Dn(O){const H=(0,Re.m9)(O);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(vu),vu},"PUBLIC").setMultipleInstances(!0)),(0,B.registerVersion)(Xi,"0.4.4"),(0,B.registerVersion)(Xi,"0.4.4","esm2017")}();const Cs=(O,H)=>H.some(fe=>O instanceof fe);let Yl,Lr;const Ji=new WeakMap,Bo=new WeakMap,Ss=new WeakMap,xi=new WeakMap,Ai=new WeakMap;let fu={get(O,H,fe){if(O instanceof IDBTransaction){if("done"===H)return Bo.get(O);if("objectStoreNames"===H)return O.objectStoreNames||Ss.get(O);if("store"===H)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return Uo(O[H])},set:(O,H,fe)=>(O[H]=fe,!0),has:(O,H)=>O instanceof IDBTransaction&&("done"===H||"store"===H)||H in O};function ul(O){return"function"==typeof O?function Ka(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function mo(){return Lr||(Lr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...H){return O.apply(ka(this),H),Uo(Ji.get(this))}:function(...H){return Uo(O.apply(ka(this),H))}:function(H,...fe){const We=O.call(ka(this),H,...fe);return Ss.set(We,H.sort?H.sort():[H]),Uo(We)}}(O):(O instanceof IDBTransaction&&function Vu(O){if(Bo.has(O))return;const H=new Promise((fe,We)=>{const yt=()=>{O.removeEventListener("complete",Rt),O.removeEventListener("error",Kt),O.removeEventListener("abort",Kt)},Rt=()=>{fe(),yt()},Kt=()=>{We(O.error||new DOMException("AbortError","AbortError")),yt()};O.addEventListener("complete",Rt),O.addEventListener("error",Kt),O.addEventListener("abort",Kt)});Bo.set(O,H)}(O),Cs(O,function Ei(){return Yl||(Yl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,fu):O)}function Uo(O){if(O instanceof IDBRequest)return function hu(O){const H=new Promise((fe,We)=>{const yt=()=>{O.removeEventListener("success",Rt),O.removeEventListener("error",Kt)},Rt=()=>{fe(Uo(O.result)),yt()},Kt=()=>{We(O.error),yt()};O.addEventListener("success",Rt),O.addEventListener("error",Kt)});return H.then(fe=>{fe instanceof IDBCursor&&Ji.set(fe,O)}).catch(()=>{}),Ai.set(H,O),H}(O);if(xi.has(O))return xi.get(O);const H=ul(O);return H!==O&&(xi.set(O,H),Ai.set(H,O)),H}const ka=O=>Ai.get(O);function Pa(O,H,{blocked:fe,upgrade:We,blocking:yt,terminated:Rt}={}){const Kt=indexedDB.open(O,H),Vn=Uo(Kt);return We&&Kt.addEventListener("upgradeneeded",Hn=>{We(Uo(Kt.result),Hn.oldVersion,Hn.newVersion,Uo(Kt.transaction))}),fe&&Kt.addEventListener("blocked",()=>fe()),Vn.then(Hn=>{Rt&&Hn.addEventListener("close",()=>Rt()),yt&&Hn.addEventListener("versionchange",()=>yt())}).catch(()=>{}),Vn}function nu(O,{blocked:H}={}){const fe=indexedDB.deleteDatabase(O);return H&&fe.addEventListener("blocked",()=>H()),Uo(fe).then(()=>{})}const pu=["get","getKey","getAll","getAllKeys","count"],lo=["put","add","delete","clear"],fa=new Map;function Za(O,H){if(!(O instanceof IDBDatabase)||H in O||"string"!=typeof H)return;if(fa.get(H))return fa.get(H);const fe=H.replace(/FromIndex$/,""),We=H!==fe,yt=lo.includes(fe);if(!(fe in(We?IDBIndex:IDBObjectStore).prototype)||!yt&&!pu.includes(fe))return;const Rt=function(){var Kt=(0,le.Z)(function*(Vn,...Hn){const yr=this.transaction(Vn,yt?"readwrite":"readonly");let ei=yr.store;return We&&(ei=ei.index(Hn.shift())),(yield Promise.all([ei[fe](...Hn),yt&&yr.done]))[0]});return function(Hn){return Kt.apply(this,arguments)}}();return fa.set(H,Rt),Rt}!function Ma(O){fu=O(fu)}(O=>({...O,get:(H,fe,We)=>Za(H,fe)||O.get(H,fe,We),has:(H,fe)=>!!Za(H,fe)||O.has(H,fe)}));const ie="/firebase-messaging-sw.js",Q="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Oe="https://fcmregistrations.googleapis.com/v1",qt="google.c.a.c_id",J="google.c.a.c_l",ne="google.c.a.ts";var mt=(()=>((mt=mt||{}).PUSH_RECEIVED="push-received",mt.NOTIFICATION_CLICKED="notification-clicked",mt))();function Vt(O){const H=new Uint8Array(O);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fn(O){const fe=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),We=atob(fe),yt=new Uint8Array(We.length);for(let Rt=0;Rt<We.length;++Rt)yt[Rt]=We.charCodeAt(Rt);return yt}const Yn="fcm_token_details_db",Wn=5,pr="fcm_token_object_Store";function ii(){return ii=(0,le.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(Yn))return null;let H=null;return(yield Pa(Yn,Wn,{upgrade:(We=(0,le.Z)(function*(yt,Rt,Kt,Vn){var Hn;if(Rt<2||!yt.objectStoreNames.contains(pr))return;const yr=Vn.objectStore(pr),ei=yield yr.index("fcmSenderId").get(O);if(yield yr.clear(),ei)if(2===Rt){const Xr=ei;if(!Xr.auth||!Xr.p256dh||!Xr.endpoint)return;H={token:Xr.fcmToken,createTime:null!==(Hn=Xr.createTime)&&void 0!==Hn?Hn:Date.now(),subscriptionOptions:{auth:Xr.auth,p256dh:Xr.p256dh,endpoint:Xr.endpoint,swScope:Xr.swScope,vapidKey:"string"==typeof Xr.vapidKey?Xr.vapidKey:Vt(Xr.vapidKey)}}}else if(3===Rt){const Xr=ei;H={token:Xr.fcmToken,createTime:Xr.createTime,subscriptionOptions:{auth:Vt(Xr.auth),p256dh:Vt(Xr.p256dh),endpoint:Xr.endpoint,swScope:Xr.swScope,vapidKey:Vt(Xr.vapidKey)}}}else if(4===Rt){const Xr=ei;H={token:Xr.fcmToken,createTime:Xr.createTime,subscriptionOptions:{auth:Vt(Xr.auth),p256dh:Vt(Xr.p256dh),endpoint:Xr.endpoint,swScope:Xr.swScope,vapidKey:Vt(Xr.vapidKey)}}}}),function(Rt,Kt,Vn,Hn){return We.apply(this,arguments)})})).close(),yield nu(Yn),yield nu("fcm_vapid_details_db"),yield nu("undefined"),function zr(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:H}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}(H)?H:null;var We}),ii.apply(this,arguments)}const Mi="firebase-messaging-database",Ln=1,$i="firebase-messaging-store";let _s=null;function $s(){return _s||(_s=Pa(Mi,Ln,{upgrade:(O,H)=>{0===H&&O.createObjectStore($i)}})),_s}function Gs(O){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,le.Z)(function*(O){const H=es(O),We=yield(yield $s()).transaction($i).objectStore($i).get(H);if(We)return We;{const yt=yield function Zr(O){return ii.apply(this,arguments)}(O.appConfig.senderId);if(yt)return yield Yr(O,yt),yt}}),Gi.apply(this,arguments)}function Yr(O,H){return zs.apply(this,arguments)}function zs(){return(zs=(0,le.Z)(function*(O,H){const fe=es(O),yt=(yield $s()).transaction($i,"readwrite");return yield yt.objectStore($i).put(H,fe),yield yt.done,H})).apply(this,arguments)}function Wo(){return(Wo=(0,le.Z)(function*(O){const H=es(O),We=(yield $s()).transaction($i,"readwrite");yield We.objectStore($i).delete(H),yield We.done})).apply(this,arguments)}function es({appConfig:O}){return O.appId}const yo=new Re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hu(O,H){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,le.Z)(function*(O,H){const fe=yield io(O),We=Cu(H),yt={method:"POST",headers:fe,body:JSON.stringify(We)};let Rt;try{Rt=yield(yield fetch(Oa(O.appConfig),yt)).json()}catch(Kt){throw yo.create("token-subscribe-failed",{errorInfo:Kt?.toString()})}if(Rt.error)throw yo.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw yo.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function $u(){return($u=(0,le.Z)(function*(O,H){const fe=yield io(O),We=Cu(H.subscriptionOptions),yt={method:"PATCH",headers:fe,body:JSON.stringify(We)};let Rt;try{Rt=yield(yield fetch(`${Oa(O.appConfig)}/${H.token}`,yt)).json()}catch(Kt){throw yo.create("token-update-failed",{errorInfo:Kt?.toString()})}if(Rt.error)throw yo.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw yo.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function Eu(O,H){return ll.apply(this,arguments)}function ll(){return(ll=(0,le.Z)(function*(O,H){const We={method:"DELETE",headers:yield io(O)};try{const Rt=yield(yield fetch(`${Oa(O.appConfig)}/${H}`,We)).json();if(Rt.error)throw yo.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(yt){throw yo.create("token-unsubscribe-failed",{errorInfo:yt?.toString()})}})).apply(this,arguments)}function Oa({projectId:O}){return`${Oe}/projects/${O}/registrations`}function io(O){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,le.Z)(function*({appConfig:O,installations:H}){const fe=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${fe}`})})).apply(this,arguments)}function Cu({p256dh:O,auth:H,endpoint:fe,vapidKey:We}){const yt={web:{endpoint:fe,auth:H,p256dh:O}};return We!==q&&(yt.web.applicationPubKey=We),yt}const Su=6048e5;function ma(){return ma=(0,le.Z)(function*(O){const H=yield function ta(O,H){return L.apply(this,arguments)}(O.swRegistration,O.vapidKey),fe={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:H.endpoint,auth:Vt(H.getKey("auth")),p256dh:Vt(H.getKey("p256dh"))},We=yield Gs(O.firebaseDependencies);if(We){if(function ce(O,H){return H.vapidKey===O.vapidKey&&H.endpoint===O.endpoint&&H.auth===O.auth&&H.p256dh===O.p256dh}(We.subscriptionOptions,fe))return Date.now()>=We.createTime+Su?function ws(O,H){return ea.apply(this,arguments)}(O,{token:We.token,createTime:Date.now(),subscriptionOptions:fe}):We.token;try{yield Eu(O.firebaseDependencies,We.token)}catch(yt){console.warn(yt)}return Jl(O.firebaseDependencies,fe)}return Jl(O.firebaseDependencies,fe)}),ma.apply(this,arguments)}function cl(){return cl=(0,le.Z)(function*(O){const H=yield Gs(O.firebaseDependencies);H&&(yield Eu(O.firebaseDependencies,H.token),yield function vo(O){return Wo.apply(this,arguments)}(O.firebaseDependencies));const fe=yield O.swRegistration.pushManager.getSubscription();return!fe||fe.unsubscribe()}),cl.apply(this,arguments)}function ea(){return ea=(0,le.Z)(function*(O,H){try{const fe=yield function ga(O,H){return $u.apply(this,arguments)}(O.firebaseDependencies,H),We=Object.assign(Object.assign({},H),{token:fe,createTime:Date.now()});return yield Yr(O.firebaseDependencies,We),fe}catch(fe){throw yield function _o(O){return cl.apply(this,arguments)}(O),fe}}),ea.apply(this,arguments)}function Jl(O,H){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,le.Z)(function*(O,H){const We={token:yield Hu(O,H),createTime:Date.now(),subscriptionOptions:H};return yield Yr(O,We),We.token})).apply(this,arguments)}function L(){return(L=(0,le.Z)(function*(O,H){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fn(H)})})).apply(this,arguments)}function K(O){const H={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function Se(O,H){if(!H.notification)return;O.notification={};const fe=H.notification.title;fe&&(O.notification.title=fe);const We=H.notification.body;We&&(O.notification.body=We);const yt=H.notification.image;yt&&(O.notification.image=yt);const Rt=H.notification.icon;Rt&&(O.notification.icon=Rt)}(H,O),function it(O,H){H.data&&(O.data=H.data)}(H,O),function wt(O,H){var fe,We,yt,Rt,Kt;if(!(H.fcmOptions||null!==(fe=H.notification)&&void 0!==fe&&fe.click_action))return;O.fcmOptions={};const Vn=null!==(yt=null===(We=H.fcmOptions)||void 0===We?void 0:We.link)&&void 0!==yt?yt:null===(Rt=H.notification)||void 0===Rt?void 0:Rt.click_action;Vn&&(O.fcmOptions.link=Vn);const Hn=null===(Kt=H.fcmOptions)||void 0===Kt?void 0:Kt.analytics_label;Hn&&(O.fcmOptions.analyticsLabel=Hn)}(H,O),H}function sr(O,H){const fe=[];for(let We=0;We<O.length;We++)fe.push(O.charAt(We)),We<H.length&&fe.push(H.charAt(We));return fe.join("")}function Pr(O){return yo.create("missing-app-config-values",{valueName:O})}sr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vr{constructor(H,fe,We){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const yt=function Ci(O){if(!O||!O.options)throw Pr("App Configuration Object");if(!O.name)throw Pr("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:fe}=O;for(const We of H)if(!fe[We])throw Pr(We);return{appName:O.name,projectId:fe.projectId,apiKey:fe.apiKey,appId:fe.appId,senderId:fe.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:yt,installations:fe,analyticsProvider:We}}_delete(){return Promise.resolve()}}function os(){return(os=(0,le.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(ie,{scope:Q}),O.swRegistration.update().catch(()=>{})}catch(H){throw yo.create("failed-service-worker-registration",{browserErrorMessage:H?.message})}})).apply(this,arguments)}function Ki(){return(Ki=(0,le.Z)(function*(O,H){if(!H&&!O.swRegistration&&(yield function wr(O){return os.apply(this,arguments)}(O)),H||!O.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw yo.create("invalid-sw-registration");O.swRegistration=H}})).apply(this,arguments)}function ur(){return(ur=(0,le.Z)(function*(O,H){H?O.vapidKey=H:O.vapidKey||(O.vapidKey=q)})).apply(this,arguments)}function na(){return na=(0,le.Z)(function*(O,H){if(!navigator)throw yo.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yo.create("permission-blocked");return yield function Ws(O,H){return ur.apply(this,arguments)}(O,H?.vapidKey),yield function Br(O,H){return Ki.apply(this,arguments)}(O,H?.serviceWorkerRegistration),function Xl(O){return ma.apply(this,arguments)}(O)}),na.apply(this,arguments)}function Ko(){return(Ko=(0,le.Z)(function*(O,H,fe){const We=function va(O){switch(O){case mt.NOTIFICATION_CLICKED:return"notification_open";case mt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(H);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(We,{message_id:fe[qt],message_name:fe[J],message_time:fe[ne],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ra(){return Ra=(0,le.Z)(function*(O,H){const fe=H.data;if(!fe.isFirebaseMessaging)return;O.onMessageHandler&&fe.messageType===mt.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(K(fe)):O.onMessageHandler.next(K(fe)));const We=fe.data;(function en(O){return"object"==typeof O&&!!O&&qt in O})(We)&&"1"===We["google.c.a.e"]&&(yield function Ds(O,H,fe){return Ko.apply(this,arguments)}(O,fe.messageType,We))}),Ra.apply(this,arguments)}const Dl="@firebase/messaging",Rc=O=>{const H=new Vr(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",fe=>function Oc(O,H){return Ra.apply(this,arguments)}(H,fe)),H},xl=O=>{const H=O.getProvider("messaging").getImmediate();return{getToken:We=>function qo(O,H){return na.apply(this,arguments)}(H,We)}};function vn(){return Or.apply(this,arguments)}function Or(){return(Or=(0,le.Z)(function*(){try{yield(0,Re.eu)()}catch{return!1}return typeof window<"u"&&(0,Re.hl)()&&(0,Re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ra(){(0,B._registerComponent)(new Ne.wA("messaging",Rc,"PUBLIC")),(0,B._registerComponent)(new Ne.wA("messaging-internal",xl,"PRIVATE")),(0,B.registerVersion)(Dl,"0.12.4"),(0,B.registerVersion)(Dl,"0.12.4","esm2017")}();const An="analytics",lr="firebase_id",tc="origin",Sn=6e4,$t="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dn="https://www.googletagmanager.com/gtag/js",oi=new Qe.Yd("@firebase/analytics"),ya=new Re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function nc(O){if(!O.startsWith(dn)){const H=ya.create("invalid-gtag-resource",{gtagURL:O});return oi.warn(H.message),""}return O}function _a(O){return Promise.all(O.map(H=>H.catch(fe=>fe)))}function ic(){return(ic=(0,le.Z)(function*(O,H,fe,We,yt,Rt){const Kt=We[yt];try{if(Kt)yield H[Kt];else{const Hn=(yield _a(fe)).find(yr=>yr.measurementId===yt);Hn&&(yield H[Hn.appId])}}catch(Vn){oi.error(Vn)}O("config",yt,Rt)})).apply(this,arguments)}function ts(){return(ts=(0,le.Z)(function*(O,H,fe,We,yt){try{let Rt=[];if(yt&&yt.send_to){let Kt=yt.send_to;Array.isArray(Kt)||(Kt=[Kt]);const Vn=yield _a(fe);for(const Hn of Kt){const yr=Vn.find(Xr=>Xr.measurementId===Hn),ei=yr&&H[yr.appId];if(!ei){Rt=[];break}Rt.push(ei)}}0===Rt.length&&(Rt=Object.values(H)),yield Promise.all(Rt),O("event",We,yt||{})}catch(Rt){oi.error(Rt)}})).apply(this,arguments)}const as=30,Ni=new class bo{constructor(H={},fe=1e3){this.throttleMetadata=H,this.intervalMillis=fe}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,fe){this.throttleMetadata[H]=fe}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function qd(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function Fn(){return(Fn=(0,le.Z)(function*(O){var H;const{appId:fe,apiKey:We}=O,yt={method:"GET",headers:qd(We)},Rt=$t.replace("{app-id}",fe),Kt=yield fetch(Rt,yt);if(200!==Kt.status&&304!==Kt.status){let Vn="";try{const Hn=yield Kt.json();null!==(H=Hn.error)&&void 0!==H&&H.message&&(Vn=Hn.error.message)}catch{}throw ya.create("config-fetch-failed",{httpStatus:Kt.status,responseMessage:Vn})}return Kt.json()})).apply(this,arguments)}function R(){return(R=(0,le.Z)(function*(O,H=Ni,fe){const{appId:We,apiKey:yt,measurementId:Rt}=O.options;if(!We)throw ya.create("no-app-id");if(!yt){if(Rt)return{measurementId:Rt,appId:We};throw ya.create("no-api-key")}const Kt=H.getThrottleMetadata(We)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Vn=new Ue;return setTimeout((0,le.Z)(function*(){Vn.abort()}),void 0!==fe?fe:Sn),I({appId:We,apiKey:yt,measurementId:Rt},Kt,Vn,H)})).apply(this,arguments)}function I(O,H,fe){return $.apply(this,arguments)}function $(){return $=(0,le.Z)(function*(O,{throttleEndTimeMillis:H,backoffCount:fe},We,yt=Ni){var Rt;const{appId:Kt,measurementId:Vn}=O;try{yield function de(O,H){return new Promise((fe,We)=>{const yt=Math.max(H-Date.now(),0),Rt=setTimeout(fe,yt);O.addEventListener(()=>{clearTimeout(Rt),We(ya.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(We,H)}catch(Hn){if(Vn)return oi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${Hn?.message}]`),{appId:Kt,measurementId:Vn};throw Hn}try{const Hn=yield function gi(O){return Fn.apply(this,arguments)}(O);return yt.deleteThrottleMetadata(Kt),Hn}catch(Hn){const yr=Hn;if(!function Le(O){if(!(O instanceof Re.ZR&&O.customData))return!1;const H=Number(O.customData.httpStatus);return 429===H||500===H||503===H||504===H}(yr)){if(yt.deleteThrottleMetadata(Kt),Vn)return oi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${yr?.message}]`),{appId:Kt,measurementId:Vn};throw Hn}const ei=503===Number(null===(Rt=yr?.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,Re.$s)(fe,yt.intervalMillis,as):(0,Re.$s)(fe,yt.intervalMillis),Xr={throttleEndTimeMillis:Date.now()+ei,backoffCount:fe+1};return yt.setThrottleMetadata(Kt,Xr),oi.debug(`Calling attemptFetch again in ${ei} millis`),I(O,Xr,We,yt)}}),$.apply(this,arguments)}class Ue{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let Mt,qu;function er(){return(er=(0,le.Z)(function*(O,H,fe,We,yt){if(yt&&yt.global)O("event",fe,We);else{const Rt=yield H;O("event",fe,Object.assign(Object.assign({},We),{send_to:Rt}))}})).apply(this,arguments)}function Ya(){return(Ya=(0,le.Z)(function*(){if(!(0,Re.hl)())return oi.warn(ya.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Re.eu)()}catch(O){return oi.warn(ya.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function Nc(){return Nc=(0,le.Z)(function*(O,H,fe,We,yt,Rt,Kt){var Vn;const Hn=function k(O){return R.apply(this,arguments)}(O);Hn.then(Si=>{fe[Si.measurementId]=Si.appId,O.options.measurementId&&Si.measurementId!==O.options.measurementId&&oi.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Si=>oi.error(Si)),H.push(Hn);const yr=function Ml(){return Ya.apply(this,arguments)}().then(Si=>{if(Si)return We.getId()}),[ei,Xr]=yield Promise.all([Hn,yr]);(function oo(O){const H=window.document.getElementsByTagName("script");for(const fe of Object.values(H))if(fe.src&&fe.src.includes(dn)&&fe.src.includes(O))return fe;return null})(Rt)||function ru(O,H){const fe=function so(O,H){let fe;return window.trustedTypes&&(fe=window.trustedTypes.createPolicy(O,H)),fe}("firebase-js-sdk-policy",{createScriptURL:nc}),We=document.createElement("script"),yt=`${dn}?l=${O}&id=${H}`;We.src=fe?fe?.createScriptURL(yt):yt,We.async=!0,document.head.appendChild(We)}(Rt,ei.measurementId),qu&&(yt("consent","default",qu),function Do(O){qu=O}(void 0)),yt("js",new Date);const Ba=null!==(Vn=Kt?.config)&&void 0!==Vn?Vn:{};return Ba[tc]="firebase",Ba.update=!0,null!=Xr&&(Ba[lr]=Xr),yt("config",ei.measurementId,Ba),Mt&&(yt("set",Mt),function ja(O){Mt=O}(void 0)),ei.measurementId}),Nc.apply(this,arguments)}class Io{constructor(H){this.app=H}_delete(){return delete xo[this.app.options.appId],Promise.resolve()}}let xo={},kl=[];const Du={};let od,Ao,Fs="dataLayer",ac=!1;function Fh(O,H,fe){!function mu(){const O=[];if((0,Re.ru)()&&O.push("This is a browser extension environment."),(0,Re.zI)()||O.push("Cookies are not available."),O.length>0){const H=O.map((We,yt)=>`(${yt+1}) ${We}`).join(" "),fe=ya.create("invalid-analytics-context",{errorInfo:H});oi.warn(fe.message)}}();const We=O.options.appId;if(!We)throw ya.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw ya.create("no-api-key");oi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xo[We])throw ya.create("already-exists",{id:We});if(!ac){!function dl(O){let H=[];Array.isArray(window[O])?H=window[O]:window[O]=H}(Fs);const{wrappedGtag:Rt,gtagCore:Kt}=function Wu(O,H,fe,We,yt){let Rt=function(...Kt){window[We].push(arguments)};return window[yt]&&"function"==typeof window[yt]&&(Rt=window[yt]),window[yt]=function Cr(O,H,fe,We){function Rt(){return Rt=(0,le.Z)(function*(Kt,...Vn){try{if("event"===Kt){const[Hn,yr]=Vn;yield function La(O,H,fe,We,yt){return ts.apply(this,arguments)}(O,H,fe,Hn,yr)}else if("config"===Kt){const[Hn,yr]=Vn;yield function rc(O,H,fe,We,yt,Rt){return ic.apply(this,arguments)}(O,H,fe,We,Hn,yr)}else if("consent"===Kt){const[Hn]=Vn;O("consent","update",Hn)}else if("get"===Kt){const[Hn,yr,ei]=Vn;O("get",Hn,yr,ei)}else if("set"===Kt){const[Hn]=Vn;O("set",Hn)}else O(Kt,...Vn)}catch(Hn){oi.error(Hn)}}),Rt.apply(this,arguments)}return function yt(Kt){return Rt.apply(this,arguments)}}(Rt,O,H,fe),{gtagCore:Rt,wrappedGtag:window[yt]}}(xo,kl,Du,Fs,"gtag");Ao=Rt,od=Kt,ac=!0}return xo[We]=function Kd(O,H,fe,We,yt,Rt,Kt){return Nc.apply(this,arguments)}(O,kl,Du,H,od,Fs,fe),new Io(O)}function Yd(){return ld.apply(this,arguments)}function ld(){return(ld=(0,le.Z)(function*(){if((0,Re.ru)()||!(0,Re.zI)()||!(0,Re.hl)())return!1;try{return yield(0,Re.eu)()}catch{return!1}})).apply(this,arguments)}const cc="@firebase/analytics";!function jh(){(0,B._registerComponent)(new Ne.wA(An,(H,{options:fe})=>Fh(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),fe),"PUBLIC")),(0,B._registerComponent)(new Ne.wA("analytics-internal",function O(H){try{const fe=H.getProvider(An).getImmediate();return{logEvent:(We,yt,Rt)=>function lc(O,H,fe,We){O=(0,Re.m9)(O),function sn(O,H,fe,We,yt){return er.apply(this,arguments)}(Ao,xo[O.app.options.appId],H,fe,We).catch(yt=>oi.error(yt))}(fe,We,yt,Rt)}}catch(fe){throw ya.create("interop-component-reg-failed",{reason:fe})}},"PRIVATE")),(0,B.registerVersion)(cc,"0.10.0"),(0,B.registerVersion)(cc,"0.10.0","esm2017")}();var Ku=z(1954),Bh=z(2631);const ao=new class dc extends Bh.v{}(class Lf extends Ku.o{constructor(H,fe){super(H,fe),this.scheduler=H,this.work=fe}schedule(H,fe=0){return fe>0?super.schedule(H,fe):(this.delay=fe,this.state=H,this.scheduler.flush(this),this)}execute(H,fe){return fe>0||this.closed?super.execute(H,fe):this._execute(H,fe)}requestAsyncId(H,fe,We=0){return null!=We&&We>0||null==We&&this.delay>0?super.requestAsyncId(H,fe,We):(H.flush(this),0)}});var ia=z(6321),Eo=z(9397),Wi=z(3093),ki=z(5137);const js=new T.GfV("7.6.1"),ns="__angularfire_symbol__analyticsIsSupportedValue",Qa="__angularfire_symbol__analyticsIsSupported",hc="__angularfire_symbol__remoteConfigIsSupportedValue",sa="__angularfire_symbol__remoteConfigIsSupported",Xd="__angularfire_symbol__messagingIsSupportedValue",Uh="__angularfire_symbol__messagingIsSupported";function Xa(O,H,fe){if(H){if(1===H.length)return H[0];const Rt=H.filter(Kt=>Kt.app===fe);if(1===Rt.length)return Rt[0]}return fe.container.getProvider(O).getImmediate({optional:!0})}globalThis[Qa]||(globalThis[Qa]=Yd().then(O=>globalThis[ns]=O).catch(()=>globalThis[ns]=!1)),globalThis[Uh]||(globalThis[Uh]=vn().then(O=>globalThis[Xd]=O).catch(()=>globalThis[Xd]=!1)),globalThis[sa]||(globalThis[sa]=ha().then(O=>globalThis[hc]=O).catch(()=>globalThis[hc]=!1));const hd=(O,H)=>{const fe=H?[H]:(0,me.C6)(),We=[];return fe.forEach(yt=>{yt.container.getProvider(O).instances.forEach(Kt=>{We.includes(Kt)||We.push(Kt)})}),We};function Zu(){}class Qs{constructor(H,fe=ao){this.zone=H,this.delegate=fe}now(){return this.delegate.now()}schedule(H,fe,We){const yt=this.zone;return this.delegate.schedule(function(Kt){yt.runGuarded(()=>{H.apply(this,[Kt])})},fe,We)}}class Ip{constructor(H){this.zone=H,this.task=null}call(H,fe){const We=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zu,{},Zu,Zu)),fe.pipe((0,Eo.b)({next:We,complete:We,error:We})).subscribe(H).add(We)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ho=(()=>{class O{constructor(fe){this.ngZone=fe,this.outsideAngular=fe.runOutsideAngular(()=>new Qs(Zone.current)),this.insideAngular=fe.run(()=>new Qs(Zone.current,ia.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(fe){return new(fe||O)(T.LFG(T.R0b))},O.\u0275prov=T.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function Ja(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function Iu(O){return O.pipe((0,Wi.Q)(Ja().outsideAngular))}function su(O){return Ja(),function fd(O){return function(fe){return(fe=fe.lift(new Ip(O.ngZone))).pipe((0,ki.R)(O.outsideAngular),(0,Wi.Q)(O.insideAngular))}}(Ja())(O)}},9058:(tn,ht,z)=>{"use strict";z.d(ht,{$s:()=>Vi,BH:()=>Te,G6:()=>Yt,L:()=>ut,LL:()=>ft,Pz:()=>Ee,Sg:()=>Ae,UG:()=>oe,US:()=>Ne,ZB:()=>$e,ZR:()=>It,aH:()=>te,b$:()=>Ht,eu:()=>Xe,hl:()=>qe,jU:()=>Fe,m9:()=>mr,ne:()=>Dr,pd:()=>Un,r3:()=>dr,ru:()=>At,tV:()=>xe,uI:()=>Y,vZ:()=>Gr,w1:()=>Xt,xO:()=>Rr,xb:()=>hr,z$:()=>gt,zI:()=>ot,zd:()=>an});const B=function(lt){const _e=[];let Ce=0;for(let be=0;be<lt.length;be++){let Pe=lt.charCodeAt(be);Pe<128?_e[Ce++]=Pe:Pe<2048?(_e[Ce++]=Pe>>6|192,_e[Ce++]=63&Pe|128):55296==(64512&Pe)&&be+1<lt.length&&56320==(64512&lt.charCodeAt(be+1))?(Pe=65536+((1023&Pe)<<10)+(1023&lt.charCodeAt(++be)),_e[Ce++]=Pe>>18|240,_e[Ce++]=Pe>>12&63|128,_e[Ce++]=Pe>>6&63|128,_e[Ce++]=63&Pe|128):(_e[Ce++]=Pe>>12|224,_e[Ce++]=Pe>>6&63|128,_e[Ce++]=63&Pe|128)}return _e},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(lt,_e){if(!Array.isArray(lt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let Pe=0;Pe<lt.length;Pe+=3){const Et=lt[Pe],Qt=Pe+1<lt.length,En=Qt?lt[Pe+1]:0,ve=Pe+2<lt.length,ye=ve?lt[Pe+2]:0;let ln=(15&En)<<2|ye>>6,Xn=63&ye;ve||(Xn=64,Qt||(ln=64)),be.push(Ce[Et>>2],Ce[(3&Et)<<4|En>>4],Ce[ln],Ce[Xn])}return be.join("")},encodeString(lt,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(lt):this.encodeByteArray(B(lt),_e)},decodeString(lt,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(lt):function(lt){const _e=[];let Ce=0,be=0;for(;Ce<lt.length;){const Pe=lt[Ce++];if(Pe<128)_e[be++]=String.fromCharCode(Pe);else if(Pe>191&&Pe<224){const Et=lt[Ce++];_e[be++]=String.fromCharCode((31&Pe)<<6|63&Et)}else if(Pe>239&&Pe<365){const ve=((7&Pe)<<18|(63&lt[Ce++])<<12|(63&lt[Ce++])<<6|63&lt[Ce++])-65536;_e[be++]=String.fromCharCode(55296+(ve>>10)),_e[be++]=String.fromCharCode(56320+(1023&ve))}else{const Et=lt[Ce++],Qt=lt[Ce++];_e[be++]=String.fromCharCode((15&Pe)<<12|(63&Et)<<6|63&Qt)}}return _e.join("")}(this.decodeStringToByteArray(lt,_e))},decodeStringToByteArray(lt,_e){this.init_();const Ce=_e?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let Pe=0;Pe<lt.length;){const Et=Ce[lt.charAt(Pe++)],En=Pe<lt.length?Ce[lt.charAt(Pe)]:0;++Pe;const ye=Pe<lt.length?Ce[lt.charAt(Pe)]:64;++Pe;const Tt=Pe<lt.length?Ce[lt.charAt(Pe)]:64;if(++Pe,null==Et||null==En||null==ye||null==Tt)throw new Qe;be.push(Et<<2|En>>4),64!==ye&&(be.push(En<<4&240|ye>>2),64!==Tt&&be.push(ye<<6&192|Tt))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let lt=0;lt<this.ENCODED_VALS.length;lt++)this.byteToCharMap_[lt]=this.ENCODED_VALS.charAt(lt),this.charToByteMap_[this.byteToCharMap_[lt]]=lt,this.byteToCharMapWebSafe_[lt]=this.ENCODED_VALS_WEBSAFE.charAt(lt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[lt]]=lt,lt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(lt)]=lt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(lt)]=lt)}}};class Qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(lt){return function(lt){const _e=B(lt);return Ne.encodeByteArray(_e,!0)}(lt).replace(/\./g,"")},xe=function(lt){try{return Ne.decodeString(lt,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};function $e(lt,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===lt&&(lt={});break;case Array:lt=[];break;default:return _e}for(const Ce in _e)!_e.hasOwnProperty(Ce)||!kt(Ce)||(lt[Ce]=$e(lt[Ce],_e[Ce]));return lt}function kt(lt){return"__proto__"!==lt}const et=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const lt=process.env.__FIREBASE_DEFAULTS__;return lt?JSON.parse(lt):void 0})()||(()=>{if(typeof document>"u")return;let lt;try{lt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=lt&&xe(lt[1]);return _e&&JSON.parse(_e)})()}catch(lt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${lt}`)}},te=()=>{var lt;return null===(lt=et())||void 0===lt?void 0:lt.config},Ee=lt=>{var _e;return null===(_e=et())||void 0===_e?void 0:_e[`_${lt}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,Ce)=>{this.resolve=_e,this.reject=Ce})}wrapCallback(_e){return(Ce,be)=>{Ce?this.reject(Ce):this.resolve(be),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(Ce):_e(Ce,be))}}}function Ae(lt,_e){if(lt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=_e||"demo-project",Pe=lt.iat||0,Et=lt.sub||lt.user_id;if(!Et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qt=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:Pe,exp:Pe+3600,auth_time:Pe,sub:Et,user_id:Et,firebase:{sign_in_provider:"custom",identities:{}}},lt);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(Qt)),""].join(".")}function gt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function oe(){var lt;const _e=null===(lt=et())||void 0===lt?void 0:lt.forceEnvironment;if("node"===_e)return!0;if("browser"===_e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Fe(){return"object"==typeof self&&self.self===self}function At(){const lt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof lt&&void 0!==lt.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xt(){const lt=gt();return lt.indexOf("MSIE ")>=0||lt.indexOf("Trident/")>=0}function Yt(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"==typeof indexedDB}catch{return!1}}function Xe(){return new Promise((lt,_e)=>{try{let Ce=!0;const be="validate-browser-context-for-indexeddb-analytics-module",Pe=self.indexedDB.open(be);Pe.onsuccess=()=>{Pe.result.close(),Ce||self.indexedDB.deleteDatabase(be),lt(!0)},Pe.onupgradeneeded=()=>{Ce=!1},Pe.onerror=()=>{var Et;_e((null===(Et=Pe.error)||void 0===Et?void 0:Et.message)||"")}}catch(Ce){_e(Ce)}})}function ot(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class It extends Error{constructor(_e,Ce,be){super(Ce),this.code=_e,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,It.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}}class ft{constructor(_e,Ce,be){this.service=_e,this.serviceName=Ce,this.errors=be}create(_e,...Ce){const be=Ce[0]||{},Pe=`${this.service}/${_e}`,Et=this.errors[_e],Qt=Et?function jt(lt,_e){return lt.replace(zt,(Ce,be)=>{const Pe=_e[be];return null!=Pe?String(Pe):`<${be}?>`})}(Et,be):"Error";return new It(Pe,`${this.serviceName}: ${Qt} (${Pe}).`,be)}}const zt=/\{\$([^}]+)}/g;function dr(lt,_e){return Object.prototype.hasOwnProperty.call(lt,_e)}function hr(lt){for(const _e in lt)if(Object.prototype.hasOwnProperty.call(lt,_e))return!1;return!0}function Gr(lt,_e){if(lt===_e)return!0;const Ce=Object.keys(lt),be=Object.keys(_e);for(const Pe of Ce){if(!be.includes(Pe))return!1;const Et=lt[Pe],Qt=_e[Pe];if(Sr(Et)&&Sr(Qt)){if(!Gr(Et,Qt))return!1}else if(Et!==Qt)return!1}for(const Pe of be)if(!Ce.includes(Pe))return!1;return!0}function Sr(lt){return null!==lt&&"object"==typeof lt}function Rr(lt){const _e=[];for(const[Ce,be]of Object.entries(lt))Array.isArray(be)?be.forEach(Pe=>{_e.push(encodeURIComponent(Ce)+"="+encodeURIComponent(Pe))}):_e.push(encodeURIComponent(Ce)+"="+encodeURIComponent(be));return _e.length?"&"+_e.join("&"):""}function an(lt){const _e={};return lt.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[Pe,Et]=be.split("=");_e[decodeURIComponent(Pe)]=decodeURIComponent(Et)}}),_e}function Un(lt){const _e=lt.indexOf("?");if(!_e)return"";const Ce=lt.indexOf("#",_e);return lt.substring(_e,Ce>0?Ce:void 0)}function Dr(lt,_e){const Ce=new ar(lt,_e);return Ce.subscribe.bind(Ce)}class ar{constructor(_e,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{_e(this)}).catch(be=>{this.error(be)})}next(_e){this.forEachObserver(Ce=>{Ce.next(_e)})}error(_e){this.forEachObserver(Ce=>{Ce.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,Ce,be){let Pe;if(void 0===_e&&void 0===Ce&&void 0===be)throw new Error("Missing Observer.");Pe=function Kr(lt,_e){if("object"!=typeof lt||null===lt)return!1;for(const Ce of _e)if(Ce in lt&&"function"==typeof lt[Ce])return!0;return!1}(_e,["next","error","complete"])?_e:{next:_e,error:Ce,complete:be},void 0===Pe.next&&(Pe.next=fi),void 0===Pe.error&&(Pe.error=fi),void 0===Pe.complete&&(Pe.complete=fi);const Et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Pe.error(this.finalError):Pe.complete()}catch{}}),this.observers.push(Pe),Et}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,_e)}sendOne(_e,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{Ce(this.observers[_e])}catch(be){typeof console<"u"&&console.error&&console.error(be)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fi(){}const Ri=1e3,li=2,vi=144e5,Nr=.5;function Vi(lt,_e=Ri,Ce=li){const be=_e*Math.pow(Ce,lt),Pe=Math.round(Nr*be*(Math.random()-.5)*2);return Math.min(vi,be+Pe)}function mr(lt){return lt&&lt._delegate?lt._delegate:lt}},5193:(tn,ht,z)=>{"use strict";z.d(ht,{w:()=>Re});var T=z(5879),me=z(6814);const le=function(Ne){return{"background-color":Ne}},B=["*"];let Re=(()=>{class Ne{get bgColor(){return`bg-${this.color}-400`}constructor(){this.color="blue"}ngOnInit(){}}return Ne.\u0275fac=function(at){return new(at||Ne)},Ne.\u0275cmp=T.Xpm({type:Ne,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:B,decls:2,vars:4,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass","ngStyle"]],template:function(at,ut){1&at&&(T.F$t(),T.TgZ(0,"div",0),T.Hsn(1),T.qZA()),2&at&&T.Q6J("ngClass",ut.bgColor)("ngStyle",T.VKq(2,le,ut.color))},dependencies:[me.mk,me.PC]}),Ne})()},1060:(tn,ht,z)=>{"use strict";z.d(ht,{a:()=>ge});var T=z(6223),me=z(5879),le=z(6814),B=z(3735);function Re(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"Password must be at least 8 characters long, have 1 uppercase letter, 1 lowercase letter and 1 number"),me.qZA())}function Ne(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1," Field is required. "),me.qZA())}function Qe(St,Ze){if(1&St&&(me.TgZ(0,"p",3),me._uU(1),me.qZA()),2&St){const rt=me.oxw(2);me.xp6(1),me.AsE(" The value you is ",null==rt.control.errors?null:rt.control.errors.minlength.actualLength," characters long. I must be at least ",null==rt.control.errors?null:rt.control.errors.minlength.requiredLength," characters long. ")}}function at(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"You must enter a email."),me.qZA())}function ut(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"Value too low."),me.qZA())}function xe(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"Value too high."),me.qZA())}function je(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"Passwords do not match."),me.qZA())}function $e(St,Ze){1&St&&(me.TgZ(0,"p",3),me._uU(1,"Email taken. Please try another email."),me.qZA())}function kt(St,Ze){if(1&St&&(me.ynx(0),me.YNc(1,Re,2,0,"p",2),me.YNc(2,Ne,2,0,"p",2),me.YNc(3,Qe,2,2,"p",2),me.YNc(4,at,2,0,"p",2),me.YNc(5,ut,2,0,"p",2),me.YNc(6,xe,2,0,"p",2),me.YNc(7,je,2,0,"p",2),me.YNc(8,$e,2,0,"p",2),me.BQk()),2&St){const rt=me.oxw();me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.pattern),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.required),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.minlength),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.email),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.min),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.max),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.noMatch),me.xp6(1),me.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.emailTaken)}}let ge=(()=>{class St{constructor(){this.control=new T.NI,this.type="text",this.placeholder="",this.format=""}}return St.\u0275fac=function(rt){return new(rt||St)},St.\u0275cmp=me.Xpm({type:St,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(rt,et){1&rt&&(me._UZ(0,"input",0),me.YNc(1,kt,9,8,"ng-container",1)),2&rt&&(me.Q6J("formControl",et.control)("type",et.type)("placeholder",et.placeholder)("mask",et.format)("dropSpecialCharacters",!1),me.xp6(1),me.Q6J("ngIf",et.control.dirty&&et.control.touched))},dependencies:[le.O5,T.Fj,T.JJ,T.oH,B.Z6]}),St})()},8105:(tn,ht,z)=>{"use strict";z.d(ht,{z:()=>Qe});var T=z(5879),me=z(4918),le=z(6814);const B=[[["","heading",""]],"*"],Re=function(at){return{hidden:at}},Ne=["[heading]","*"];let Qe=(()=>{class at{constructor(xe,je){this.modal=xe,this.el=je,this.modalID=""}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}ngOnInit(){document.body.appendChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return at.\u0275fac=function(xe){return new(xe||at)(T.Y36(me.Z),T.Y36(T.SBq))},at.\u0275cmp=T.Xpm({type:at,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:Ne,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(xe,je){1&xe&&(T.F$t(B),T.TgZ(0,"div",0)(1,"div",1)(2,"div",2),T.NdJ("click",function(){return je.closeModal()}),T._UZ(3,"div",3),T.qZA(),T.TgZ(4,"span",4),T._uU(5,"\u200b"),T.qZA(),T.TgZ(6,"div",5)(7,"div",6)(8,"div",7),T.Hsn(9),T.TgZ(10,"div",8),T.NdJ("click",function(){return je.closeModal()}),T._uU(11," \u2715 "),T.qZA()(),T.Hsn(12,1),T.qZA()()()()),2&xe&&T.Q6J("ngClass",T.VKq(1,Re,!je.modal.isModalOpen(je.modalID)))},dependencies:[le.mk]}),at})()},6208:(tn,ht,z)=>{"use strict";z.d(ht,{m:()=>Re});var T=z(6814),me=z(6223),le=z(3735),B=z(5879);let Re=(()=>{class Ne{}return Ne.\u0275fac=function(at){return new(at||Ne)},Ne.\u0275mod=B.oAB({type:Ne}),Ne.\u0275inj=B.cJS({providers:[(0,le.e$)()],imports:[T.ez,me.UX]}),Ne})()},1591:(tn,ht,z)=>{"use strict";z.d(ht,{Y:()=>je});var T=z(5861),me=z(2572),le=z(4664),B=z(2096),Re=z(7398),Ne=z(5879),Qe=z(8330),at=z(6796),ut=z(6240),xe=z(8076);let je=(()=>{class $e{constructor(ge,St,Ze,rt){this.db=ge,this.auth=St,this.storage=Ze,this.router=rt,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=ge.collection("clips")}createClip(ge){return this.clipsCollection.add(ge)}getUserClips(ge){return(0,me.a)([this.auth.user,ge]).pipe((0,le.w)(St=>{const[Ze,rt]=St;return Ze?this.clipsCollection.ref.where("uid","==",Ze.uid).orderBy("timestamp","1"===rt?"desc":"asc").get():(0,B.of)([])}),(0,Re.U)(St=>St.docs))}updateClip(ge,St){return this.clipsCollection.doc(ge).update({title:St})}deleteClip(ge){var St=this;return(0,T.Z)(function*(){const Ze=St.storage.ref(`clip/${ge.fileName}`),rt=St.storage.ref(`screenshot/${ge.screenshotFileName}`);yield Ze.delete(),yield rt.delete(),yield St.clipsCollection.doc(ge.docID).delete()})()}getClips(){var ge=this;return(0,T.Z)(function*(){if(ge.pendingReq)return;ge.pendingReq=!0;let St=ge.clipsCollection.ref.orderBy("timestamp","desc").limit(6),{length:Ze}=ge.pageClips;if(Ze){const et=ge.pageClips[Ze-1].docID,Ke=yield ge.clipsCollection.doc(et).get().toPromise();St=St.startAfter(Ke)}(yield St.get()).forEach(et=>{ge.pageClips.push({docID:et.id,...et.data()})}),ge.pendingReq=!1})()}resolve(ge,St){return this.clipsCollection.doc(ge.params.id).get().pipe((0,Re.U)(Ze=>Ze.data()||(this.router.navigate(["/"]),null)))}}return $e.\u0275fac=function(ge){return new(ge||$e)(Ne.LFG(Qe.ST),Ne.LFG(at.zQ),Ne.LFG(ut.Q1),Ne.LFG(xe.F0))},$e.\u0275prov=Ne.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})()},4918:(tn,ht,z)=>{"use strict";z.d(ht,{Z:()=>me});var T=z(5879);let me=(()=>{class le{constructor(){this.modals=[]}register(Re){this.modals.push({id:Re,visible:!1})}unregister(Re){this.modals=this.modals.filter(Ne=>Ne.id!==Re)}isModalOpen(Re){return!!this.modals.find(Ne=>Ne.id===Re)?.visible}toggleModal(Re){const Ne=this.modals.find(Qe=>Qe.id===Re);Ne&&(Ne.visible=!Ne.visible)}}return le.\u0275fac=function(Re){return new(Re||le)},le.\u0275prov=T.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})()},4724:(tn,ht,z)=>{"use strict";var T=z(6593),me=z(5861),le=z(8076),B=z(5879),Re=z(6814),Ne=z(1591);let Qe=(()=>{class m{constructor(a){this.datePipe=a}transform(a){if(!a)return"";const u=a.toDate();return this.datePipe.transform(u,"mediumDate")}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(Re.uU,16))},m.\u0275pipe=B.Yjl({name:"fbTimestamp",type:m,pure:!0}),m})();const at=function(m){return["/","clip",m]};function ut(m,l){if(1&m&&(B.TgZ(0,"a",2),B._UZ(1,"img",3),B.TgZ(2,"div",4)(3,"div",5)(4,"div",6),B.O4$(),B.TgZ(5,"svg",7),B._UZ(6,"path",8),B.qZA()()()(),B.kcU(),B.TgZ(7,"div",9)(8,"h2",10),B._uU(9),B.qZA(),B.TgZ(10,"p",11),B._uU(11),B.TgZ(12,"span",12),B._uU(13),B.ALo(14,"fbTimestamp"),B.qZA()()()()),2&m){const a=l.$implicit;B.Q6J("routerLink",B.VKq(7,at,a.docID)),B.xp6(1),B.Q6J("src",a.screenshotURL,B.LSH),B.xp6(8),B.hij(" ",a.title," "),B.xp6(2),B.hij(" ",a.displayName," \xb7 "),B.xp6(2),B.hij(" ",B.lcZ(14,5,a.timestamp)," ")}}let xe=(()=>{class m{constructor(a){this.clipService=a,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:u,offsetHeight:n}=document.documentElement,{innerHeight:o}=window;Math.round(u)+o===n&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(Ne.Y))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[B._Bn([Re.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(a,u){1&a&&(B.TgZ(0,"div",0),B.YNc(1,ut,15,9,"a",1),B.qZA()),2&a&&(B.xp6(1),B.Q6J("ngForOf",u.clipService.pageClips))},dependencies:[Re.sg,le.rH,Qe]}),m})(),je=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(a,u){1&a&&(B.TgZ(0,"section",0)(1,"video",1),B._UZ(2,"source",2),B.qZA(),B._UZ(3,"div",3),B.TgZ(4,"div",4),B._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),B.qZA(),B.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),B._uU(13,"Clip it and ship it!"),B.qZA(),B.TgZ(14,"p"),B._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),B.qZA()()()(),B.TgZ(16,"section",9)(17,"h1",10),B._uU(18,"Latest"),B.qZA(),B._UZ(19,"app-clips-list"),B.qZA())},dependencies:[xe]}),m})(),$e=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-about"]],decls:24,vars:0,consts:[[1,"container","mx-auto","mt-4"],[1,"text-2xl","text-yellow-500","font-bold","mr-4","underline"],[1,"mt-4"],[1,"text-2xl","text-yellow-500","mt-4","underline"],[1,"mt-10"]],template:function(a,u){1&a&&(B.TgZ(0,"div",0)(1,"h1",1),B._uU(2,"Clips"),B.qZA(),B.TgZ(3,"h3",2),B._uU(4,"Clip is a cutting-edge video-sharing application that empowers users to effortlessly share their moments, creativity, and stories with friends, family, and the world. "),B._UZ(5,"br"),B._uU(6,"With its user-friendly interface and robust features, Clip offers a seamless platform for individuals to showcase their video content. "),B.qZA(),B.TgZ(7,"h2",3),B._uU(8," Key Features: "),B.qZA(),B.TgZ(9,"ol")(10,"li",2),B._uU(11," User-Friendly Interface: Clip boasts an intuitive and easy-to-navigate interface, ensuring that users of all technological backgrounds can share their videos with minimal effort. "),B.qZA(),B.TgZ(12,"li",2),B._uU(13," Seamless Video Sharing: Sharing videos on Clip is a breeze. "),B.qZA(),B.TgZ(14,"li",2),B._uU(15," Privacy Controls: Users have full control over the privacy of their videos. "),B.qZA(),B.TgZ(16,"li",2),B._uU(17," Video Editing Tools: The application provides basic video editing tools, add filters, captions to enhance their videos before sharing. "),B.qZA()(),B.TgZ(18,"p",4),B._uU(19," Clip is not just a video-sharing app! "),B._UZ(20,"br"),B._uU(21," Whether you're an aspiring content creator or simply want to share life's moments, "),B._UZ(22,"br"),B._uU(23," Clip provides the perfect platform for you to do so seamlessly and creatively. Join the Clip community and start sharing your world today!\n"),B.qZA()())}}),m})();var kt=z(6382),ge=z.n(kt),St=z(7598),Ze=z.n(St);function rt(){return rt=Object.assign?Object.assign.bind():function(m){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(m[u]=a[u])}return m},rt.apply(this,arguments)}function et(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function Ke(m,l){return(Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,n){return u.__proto__=n,u})(m,l)}function W(m,l){m.prototype=Object.create(l.prototype),m.prototype.constructor=m,Ke(m,l)}var te=z(4135),Ee=z.n(te),Te=z(8317),Ae=z.n(Te),gt=z(3817),Y=z.n(gt),oe=z(5506),Fe=z.n(oe);function Ht(m,l,a){return(Ht=function At(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(n,o,h){var y=[null];y.push.apply(y,o);var x=new(Function.bind.apply(n,y));return h&&Ke(x,h.prototype),x}).apply(null,arguments)}var Xt=z(6367),pn=z.n(Xt);const qe=function(l,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(l)&&(l=ge().location&&ge().location.href||"");var u="function"==typeof ge().URL,n=/^\/\//.test(l),o=!ge().location&&!/\/\//i.test(l);if(u?l=new(ge().URL)(l,ge().location||"http://example.com"):/\/\//i.test(l)||(l=pn().buildAbsoluteURL(ge().location&&ge().location.href||"",l)),u){var h=new URL(a,l);return o?h.href.slice(18):n?h.href.slice(h.protocol.length):h.href}return pn().buildAbsoluteURL(l,a)};var Xe=function(){function m(){this.listeners={}}var l=m.prototype;return l.on=function(u,n){this.listeners[u]||(this.listeners[u]=[]),this.listeners[u].push(n)},l.off=function(u,n){if(!this.listeners[u])return!1;var o=this.listeners[u].indexOf(n);return this.listeners[u]=this.listeners[u].slice(0),this.listeners[u].splice(o,1),o>-1},l.trigger=function(u){var n=this.listeners[u];if(n)if(2===arguments.length)for(var o=n.length,h=0;h<o;++h)n[h].call(this,arguments[1]);else for(var y=Array.prototype.slice.call(arguments,1),S=n.length,x=0;x<S;++x)n[x].apply(this,y)},l.dispose=function(){this.listeners={}},l.pipe=function(u){this.on("data",function(n){u.push(n)})},m}();function dt(m){for(var l=function(l){return ge().atob?ge().atob(l):Buffer.from(l,"base64").toString("binary")}(m),a=new Uint8Array(l.length),u=0;u<l.length;u++)a[u]=l.charCodeAt(u);return a}var bi,m,It=function(m){function l(){var u;return(u=m.call(this)||this).buffer="",u}return W(l,m),l.prototype.push=function(n){var o;for(this.buffer+=n,o=this.buffer.indexOf("\n");o>-1;o=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,o)),this.buffer=this.buffer.substring(o+1)},l}(Xe),ft=String.fromCharCode(9),jt=function(l){var a=/([0-9.]*)?@?([0-9.]*)?/.exec(l||""),u={};return a[1]&&(u.length=parseInt(a[1],10)),a[2]&&(u.offset=parseInt(a[2],10)),u},In=function(l){for(var o,a=l.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),u={},n=a.length;n--;)""!==a[n]&&((o=/([^=]*)=(.*)/.exec(a[n]).slice(1))[0]=o[0].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^['"](.*)['"]$/g,"$1"),u[o[0]]=o[1]);return u},Tn=function(m){function l(){var u;return(u=m.call(this)||this).customParsers=[],u.tagMappers=[],u}W(l,m);var a=l.prototype;return a.push=function(n){var h,y,o=this;if(0!==(n=n.trim()).length){if("#"!==n[0])return void this.trigger("data",{type:"uri",uri:n});this.tagMappers.reduce(function(x,V){var re=V(n);return re===n?x:x.concat([re])},[n]).forEach(function(x){for(var V=0;V<o.customParsers.length;V++)if(o.customParsers[V].call(o,x))return;if(0===x.indexOf("#EXT"))if(x=x.replace("\r",""),h=/^#EXTM3U/.exec(x))o.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(x))return y={type:"tag",tagType:"inf"},h[1]&&(y.duration=parseFloat(h[1])),h[2]&&(y.title=h[2]),void o.trigger("data",y);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(x))return y={type:"tag",tagType:"targetduration"},h[1]&&(y.duration=parseInt(h[1],10)),void o.trigger("data",y);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(x))return y={type:"tag",tagType:"version"},h[1]&&(y.version=parseInt(h[1],10)),void o.trigger("data",y);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return y={type:"tag",tagType:"media-sequence"},h[1]&&(y.number=parseInt(h[1],10)),void o.trigger("data",y);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return y={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(y.number=parseInt(h[1],10)),void o.trigger("data",y);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(x))return y={type:"tag",tagType:"playlist-type"},h[1]&&(y.playlistType=h[1]),void o.trigger("data",y);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(x))return y=rt(jt(h[1]),{type:"tag",tagType:"byterange"}),void o.trigger("data",y);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(x))return y={type:"tag",tagType:"allow-cache"},h[1]&&(y.allowed=!/NO/.test(h[1])),void o.trigger("data",y);if(h=/^#EXT-X-MAP:?(.*)$/.exec(x)){if(y={type:"tag",tagType:"map"},h[1]){var re=In(h[1]);re.URI&&(y.uri=re.URI),re.BYTERANGE&&(y.byterange=jt(re.BYTERANGE))}o.trigger("data",y)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(x)){if(y={type:"tag",tagType:"stream-inf"},h[1]){if(y.attributes=In(h[1]),y.attributes.RESOLUTION){var ee=y.attributes.RESOLUTION.split("x"),De={};ee[0]&&(De.width=parseInt(ee[0],10)),ee[1]&&(De.height=parseInt(ee[1],10)),y.attributes.RESOLUTION=De}y.attributes.BANDWIDTH&&(y.attributes.BANDWIDTH=parseInt(y.attributes.BANDWIDTH,10)),y.attributes["PROGRAM-ID"]&&(y.attributes["PROGRAM-ID"]=parseInt(y.attributes["PROGRAM-ID"],10))}o.trigger("data",y)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(x))return y={type:"tag",tagType:"media"},h[1]&&(y.attributes=In(h[1])),void o.trigger("data",y);if(h=/^#EXT-X-ENDLIST/.exec(x))o.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(x)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(x))?(y={type:"tag",tagType:"program-date-time"},h[1]&&(y.dateTimeString=h[1],y.dateTimeObject=new Date(h[1])),void o.trigger("data",y)):(h=/^#EXT-X-KEY:?(.*)$/.exec(x))?(y={type:"tag",tagType:"key"},h[1]&&(y.attributes=In(h[1]),y.attributes.IV&&("0x"===y.attributes.IV.substring(0,2).toLowerCase()&&(y.attributes.IV=y.attributes.IV.substring(2)),y.attributes.IV=y.attributes.IV.match(/.{8}/g),y.attributes.IV[0]=parseInt(y.attributes.IV[0],16),y.attributes.IV[1]=parseInt(y.attributes.IV[1],16),y.attributes.IV[2]=parseInt(y.attributes.IV[2],16),y.attributes.IV[3]=parseInt(y.attributes.IV[3],16),y.attributes.IV=new Uint32Array(y.attributes.IV))),void o.trigger("data",y)):(h=/^#EXT-X-START:?(.*)$/.exec(x))?(y={type:"tag",tagType:"start"},h[1]&&(y.attributes=In(h[1]),y.attributes["TIME-OFFSET"]=parseFloat(y.attributes["TIME-OFFSET"]),y.attributes.PRECISE=/YES/.test(y.attributes.PRECISE)),void o.trigger("data",y)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(x))?((y={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void o.trigger("data",y)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(x))?((y={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void o.trigger("data",y)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(x))?((y={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void o.trigger("data",y)):(h=/^#EXT-X-SKIP:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"skip"}).attributes=In(h[1]),y.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(y.attributes["SKIPPED-SEGMENTS"]=parseInt(y.attributes["SKIPPED-SEGMENTS"],10)),y.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(y.attributes["RECENTLY-REMOVED-DATERANGES"]=y.attributes["RECENTLY-REMOVED-DATERANGES"].split(ft)),void o.trigger("data",y)):(h=/^#EXT-X-PART:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"part"}).attributes=In(h[1]),["DURATION"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=parseFloat(y.attributes[ze]))}),["INDEPENDENT","GAP"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=/YES/.test(y.attributes[ze]))}),y.attributes.hasOwnProperty("BYTERANGE")&&(y.attributes.byterange=jt(y.attributes.BYTERANGE)),void o.trigger("data",y)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"server-control"}).attributes=In(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=parseFloat(y.attributes[ze]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=/YES/.test(y.attributes[ze]))}),void o.trigger("data",y)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"part-inf"}).attributes=In(h[1]),["PART-TARGET"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=parseFloat(y.attributes[ze]))}),void o.trigger("data",y)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"preload-hint"}).attributes=In(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(ze){if(y.attributes.hasOwnProperty(ze)){y.attributes[ze]=parseInt(y.attributes[ze],10);var Ve="BYTERANGE-LENGTH"===ze?"length":"offset";y.attributes.byterange=y.attributes.byterange||{},y.attributes.byterange[Ve]=y.attributes[ze],delete y.attributes[ze]}}),void o.trigger("data",y)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(x))&&h[1]?((y={type:"tag",tagType:"rendition-report"}).attributes=In(h[1]),["LAST-MSN","LAST-PART"].forEach(function(ze){y.attributes.hasOwnProperty(ze)&&(y.attributes[ze]=parseInt(y.attributes[ze],10))}),void o.trigger("data",y)):void o.trigger("data",{type:"tag",data:x.slice(4)});o.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else o.trigger("data",{type:"comment",text:x.slice(1)})})}},a.addParser=function(n){var o=this,h=n.expression,y=n.customType,S=n.dataParser,x=n.segment;"function"!=typeof S&&(S=function(re){return re}),this.customParsers.push(function(V){if(h.exec(V))return o.trigger("data",{type:"custom",data:S(V),customType:y,segment:x}),!0})},a.addTagMapper=function(n){var o=n.expression,h=n.map;this.tagMappers.push(function(x){return o.test(x)?h(x):x})},l}(Xe),$n=function(l){var a={};return Object.keys(l).forEach(function(u){a[function(l){return l.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()})}(u)]=l[u]}),a},Gn=function(l){var a=l.serverControl,u=l.targetDuration,n=l.partTargetDuration;if(a){var o="#EXT-X-SERVER-CONTROL",h="holdBack",y="partHoldBack",S=u&&3*u,x=n&&2*n;u&&!a.hasOwnProperty(h)&&(a[h]=S,this.trigger("info",{message:o+" defaulting HOLD-BACK to targetDuration * 3 ("+S+")."})),S&&a[h]<S&&(this.trigger("warn",{message:o+" clamping HOLD-BACK ("+a[h]+") to targetDuration * 3 ("+S+")"}),a[h]=S),n&&!a.hasOwnProperty(y)&&(a[y]=3*n,this.trigger("info",{message:o+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[y]+")."})),n&&a[y]<x&&(this.trigger("warn",{message:o+" clamping PART-HOLD-BACK ("+a[y]+") to partTargetDuration * 2 ("+x+")."}),a[y]=x)}},ir=function(m){function l(){var u;(u=m.call(this)||this).lineStream=new It,u.parseStream=new Tn,u.lineStream.pipe(u.parseStream);var y,S,n=et(u),o=[],h={},x=!1,V=function(){},re={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},De=0;u.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var ze=0,Ve=0;return u.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&y&&(h.map=y),!h.key&&S&&(h.key=S),!h.timeline&&"number"==typeof De&&(h.timeline=De),u.manifest.preloadSegment=h)}),u.parseStream.on("data",function(Be){var Wt,Lt;({tag:function(){({version:function(){Be.version&&(this.manifest.version=Be.version)},"allow-cache":function(){this.manifest.allowCache=Be.allowed,"allowed"in Be||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var rn={};"length"in Be&&(h.byterange=rn,rn.length=Be.length,"offset"in Be||(Be.offset=ze)),"offset"in Be&&(h.byterange=rn,rn.offset=Be.offset),ze=rn.offset+rn.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),Be.duration>0&&(h.duration=Be.duration),0===Be.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(Be.attributes)if("NONE"!==Be.attributes.METHOD)if(Be.attributes.URI){if("com.apple.streamingkeydelivery"===Be.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Be.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Be.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Be.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Be.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Be.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Be.attributes.KEYID&&"0x"===Be.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Be.attributes.KEYFORMAT,keyId:Be.attributes.KEYID.substring(2)},pssh:dt(Be.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Be.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),S={method:Be.attributes.METHOD||"AES-128",uri:Be.attributes.URI},typeof Be.attributes.IV<"u"&&(S.iv=Be.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else S=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Be.number)?this.manifest.mediaSequence=Be.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Be.number})},"discontinuity-sequence":function(){isFinite(Be.number)?(this.manifest.discontinuitySequence=Be.number,De=Be.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Be.number})},"playlist-type":function(){/VOD|EVENT/.test(Be.playlistType)?this.manifest.playlistType=Be.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Be.playlist})},map:function(){y={},Be.uri&&(y.uri=Be.uri),Be.byterange&&(y.byterange=Be.byterange),S&&(y.key=S)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||re,Be.attributes?(h.attributes||(h.attributes={}),rt(h.attributes,Be.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||re,Be.attributes&&Be.attributes.TYPE&&Be.attributes["GROUP-ID"]&&Be.attributes.NAME){var rn=this.manifest.mediaGroups[Be.attributes.TYPE];rn[Be.attributes["GROUP-ID"]]=rn[Be.attributes["GROUP-ID"]]||{},Wt=rn[Be.attributes["GROUP-ID"]],(Lt={default:/yes/i.test(Be.attributes.DEFAULT)}).autoselect=!!Lt.default||/yes/i.test(Be.attributes.AUTOSELECT),Be.attributes.LANGUAGE&&(Lt.language=Be.attributes.LANGUAGE),Be.attributes.URI&&(Lt.uri=Be.attributes.URI),Be.attributes["INSTREAM-ID"]&&(Lt.instreamId=Be.attributes["INSTREAM-ID"]),Be.attributes.CHARACTERISTICS&&(Lt.characteristics=Be.attributes.CHARACTERISTICS),Be.attributes.FORCED&&(Lt.forced=/yes/i.test(Be.attributes.FORCED)),Wt[Be.attributes.NAME]=Lt}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){De+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=Be.dateTimeString,this.manifest.dateTimeObject=Be.dateTimeObject),h.dateTimeString=Be.dateTimeString,h.dateTimeObject=Be.dateTimeObject},targetduration:function(){!isFinite(Be.duration)||Be.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Be.duration}):(this.manifest.targetDuration=Be.duration,Gn.call(this,this.manifest))},start:function(){Be.attributes&&!isNaN(Be.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Be.attributes["TIME-OFFSET"],precise:Be.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=Be.data},"cue-out-cont":function(){h.cueOutCont=Be.data},"cue-in":function(){h.cueIn=Be.data},skip:function(){this.manifest.skip=$n(Be.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Be.attributes,["SKIPPED-SEGMENTS"])},part:function(){var rn=this;x=!0;var qn=this.manifest.segments.length,tr=$n(Be.attributes);h.parts=h.parts||[],h.parts.push(tr),tr.byterange&&(tr.byterange.hasOwnProperty("offset")||(tr.byterange.offset=Ve),Ve=tr.byterange.offset+tr.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+qn,Be.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(_n,Zn){_n.hasOwnProperty("lastPart")||rn.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+Zn+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var rn=this.manifest.serverControl=$n(Be.attributes);rn.hasOwnProperty("canBlockReload")||(rn.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Gn.call(this,this.manifest),rn.canSkipDateranges&&!rn.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var rn=this.manifest.segments.length,qn=$n(Be.attributes),tr=qn.type&&"PART"===qn.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(qn),qn.byterange&&(qn.byterange.hasOwnProperty("offset")||(qn.byterange.offset=tr?Ve:0,tr&&(Ve=qn.byterange.offset+qn.byterange.length)));var wn=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+wn+" for segment #"+rn,Be.attributes,["TYPE","URI"]),qn.type)for(var _n=0;_n<h.preloadHints.length-1;_n++){var Zn=h.preloadHints[_n];Zn.type&&Zn.type===qn.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+wn+" for segment #"+rn+" has the same TYPE "+qn.type+" as preload hint #"+_n})}},"rendition-report":function(){var rn=$n(Be.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(rn);var qn=this.manifest.renditionReports.length-1,tr=["LAST-MSN","URI"];x&&tr.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+qn,Be.attributes,tr)},"part-inf":function(){this.manifest.partInf=$n(Be.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Be.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Gn.call(this,this.manifest)}}[Be.tagType]||V).call(n)},uri:function(){h.uri=Be.uri,o.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),S&&(h.key=S),h.timeline=De,y&&(h.map=y),Ve=0,h={}},comment:function(){},custom:function(){Be.segment?(h.custom=h.custom||{},h.custom[Be.customType]=Be.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Be.customType]=Be.data)}})[Be.type].call(n)}),u}W(l,m);var a=l.prototype;return a.warnOnMissingAttributes_=function(n,o,h){var y=[];h.forEach(function(S){o.hasOwnProperty(S)||y.push(S)}),y.length&&this.trigger("warn",{message:n+" lacks required attribute(s): "+y.join(", ")})},a.push=function(n){this.lineStream.push(n)},a.end=function(){this.lineStream.push("\n"),this.trigger("end")},a.addParser=function(n){this.parseStream.addParser(n)},a.addTagMapper=function(n){this.parseStream.addTagMapper(n)},l}(Xe),Bn={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},dr=["video","audio","text"],xr=["Video","Audio","Text"],hr=function(l){return l&&l.replace(/avc1\.(\d+)\.(\d+)/i,function(a,u,n){return"avc1."+("00"+Number(u).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})},Sr=function(l){void 0===l&&(l="");var a=l.split(","),u=[];return a.forEach(function(n){var o;n=n.trim(),dr.forEach(function(h){var y=Bn[h].exec(n.toLowerCase());if(y&&!(y.length<=1)){o=h;var S=n.substring(0,y[1].length),x=n.replace(S,"");u.push({type:S,details:x,mediaType:h})}}),o||u.push({type:n,details:"",mediaType:"unknown"})}),u},an=function(l){return void 0===l&&(l=""),Bn.audio.test(l.trim().toLowerCase())},Nn=function(l){if(l&&"string"==typeof l){var a=l.toLowerCase().split(",").map(function(o){return hr(o.trim())}),u="video";1===a.length&&an(a[0])?u="audio":1===a.length&&function(l){return void 0===l&&(l=""),Bn.text.test(l.trim().toLowerCase())}(a[0])&&(u="application");var n="mp4";return a.every(function(o){return Bn.mp4.test(o)})?n="mp4":a.every(function(o){return Bn.webm.test(o)})?n="webm":a.every(function(o){return Bn.ogg.test(o)})&&(n="ogg"),u+"/"+n+';codecs="'+l+'"'}},Dr=function(l){return void 0===l&&(l=""),ge().MediaSource&&ge().MediaSource.isTypeSupported&&ge().MediaSource.isTypeSupported(Nn(l))||!1},ar=function(l){return void 0===l&&(l=""),l.toLowerCase().split(",").every(function(a){a=a.trim();for(var u=0;u<xr.length;u++)if(Bn["muxer"+xr[u]].test(a))return!0;return!1})},Ui="mp4a.40.2",fi=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,eo=/^application\/dash\+xml/i,Fr=function(l){return fi.test(l)?"hls":eo.test(l)?"dash":"application/vnd.videojs.vhs+json"===l?"vhs-json":null},Qi=z(3862),qi=function(l){return!!l&&"object"==typeof l},br=function m(){for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return a.reduce(function(n,o){return"object"!=typeof o||Object.keys(o).forEach(function(h){n[h]=Array.isArray(n[h])&&Array.isArray(o[h])?n[h].concat(o[h]):qi(n[h])&&qi(o[h])?m(n[h],o[h]):o[h]}),n},{})},Ri=function(l){return l.reduce(function(a,u){return a.concat(u)},[])},li=function(l){if(!l.length)return[];for(var a=[],u=0;u<l.length;u++)a.push(l[u]);return a},Vi=function(l){var a=l.baseUrl,n=l.source,o=void 0===n?"":n,h=l.range,y=void 0===h?"":h,S=l.indexRange,x=void 0===S?"":S,V={uri:o,resolvedUri:qe((void 0===a?"":a)||"",o)};if(y||x){var ee=(y||x).split("-"),De=parseInt(ee[0],10),ze=parseInt(ee[1],10);V.byterange={length:ze-De+1,offset:De}}return V},ls=function(l){return l&&"number"!=typeof l&&(l=parseInt(l,10)),isNaN(l)?null:l},mr={static:function(l){var a=l.duration,u=l.timescale,n=void 0===u?1:u,o=l.sourceDuration,h=l.periodDuration,y=ls(l.endNumber),S=a/n;return"number"==typeof y?{start:0,end:y}:"number"==typeof h?{start:0,end:h/S}:{start:0,end:o/S}},dynamic:function(l){var a=l.NOW,u=l.clientOffset,n=l.availabilityStartTime,o=l.timescale,h=void 0===o?1:o,y=l.duration,S=l.start,x=void 0===S?0:S,V=l.minimumUpdatePeriod,re=void 0===V?0:V,ee=l.timeShiftBufferDepth,De=void 0===ee?1/0:ee,ze=ls(l.endNumber),Ve=(a+u)/1e3,Be=n+x,cn=Math.ceil((Ve+re-Be)*h/y),hn=Math.floor((Ve-Be-De)*h/y),rn=Math.floor((Ve-Be)*h/y);return{start:Math.max(0,hn),end:"number"==typeof ze?ze:Math.min(cn,rn)}}},_e=function(l){var a=l.type,u=l.duration,n=l.timescale,o=void 0===n?1:n,h=l.periodDuration,y=l.sourceDuration,S=mr[a](l),re=function(l,a){for(var u=[],n=l;n<a;n++)u.push(n);return u}(S.start,S.end).map(function(l){return function(a,u){var n=l.duration,o=l.timescale,S=l.startNumber;return{number:(void 0===S?1:S)+a,duration:n/(void 0===o?1:o),timeline:l.periodIndex,time:u*n}}}(l));if("static"===a){var ee=re.length-1;re[ee].duration=("number"==typeof h?h:y)-u/o*ee}return re},Ce=function(l){var a=l.baseUrl,u=l.initialization,n=void 0===u?{}:u,o=l.sourceDuration,h=l.indexRange,y=void 0===h?"":h,S=l.duration;if(!a)throw new Error("NO_BASE_URL");var x=Vi({baseUrl:a,source:n.sourceURL,range:n.range}),V=Vi({baseUrl:a,source:a,indexRange:y});if(V.map=x,S){var re=_e(l);re.length&&(V.duration=re[0].duration,V.timeline=re[0].timeline)}else o&&(V.duration=o,V.timeline=0);return V.number=0,[V]},be=function(l,a,u){for(var n=l.sidx.map?l.sidx.map:null,o=l.sidx.duration,h=l.timeline||0,y=l.sidx.byterange,S=y.offset+y.length,x=a.timescale,V=a.references.filter(function(qn){return 1!==qn.referenceType}),re=[],ee=l.endList?"static":"dynamic",De=S+a.firstOffset,ze=0;ze<V.length;ze++){var Ve=a.references[ze],Be=Ve.referencedSize,rn=Ce({baseUrl:u,timescale:x,timeline:h,periodIndex:h,duration:Ve.subsegmentDuration,sourceDuration:o,indexRange:De+"-"+(De+Be-1),type:ee})[0];n&&(rn.map=n),re.push(rn),De+=Be}return l.segments=re,l},Pe=function(l){return l&&l.uri+"-"+function(l){return l.offset+"-"+(l.offset+l.length-1)}(l.byterange)},Et=function(l){return function(l){return Object.keys(l).map(function(a){return l[a]})}(l.reduce(function(u,n){var h,o=n.attributes.id+(n.attributes.lang||"");return u[o]?(n.segments[0]&&(n.segments[0].discontinuity=!0),(h=u[o].segments).push.apply(h,n.segments),n.attributes.contentProtection&&(u[o].attributes.contentProtection=n.attributes.contentProtection)):u[o]=n,u},{})).map(function(u){return u.discontinuityStarts=function(l,a){return l.reduce(function(u,n,o){return n.discontinuity&&u.push(o),u},[])}(u.segments),u})},Qt=function(l,a){var u=Pe(l.sidx),n=u&&a[u]&&a[u].sidx;return n&&be(l,n,l.sidx.resolvedUri),l},En=function(l,a){if(void 0===a&&(a={}),!Object.keys(a).length)return l;for(var u in l)l[u]=Qt(l[u],a);return l},Xn=function(l){var a,u=l.attributes,n=l.segments,o=l.sidx,h={attributes:(a={NAME:u.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:u.width,height:u.height},CODECS:u.codecs,BANDWIDTH:u.bandwidth},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===u.type,timeline:u.periodIndex,resolvedUri:"",targetDuration:u.duration,segments:n,mediaSequence:n.length?n[0].number:1};return u.contentProtection&&(h.contentProtection=u.contentProtection),o&&(h.sidx=o),h},Hr=function(l){var a=l.attributes;return"video/mp4"===a.mimeType||"video/webm"===a.mimeType||"video"===a.contentType},ui=function(l){var a=l.attributes;return"audio/mp4"===a.mimeType||"audio/webm"===a.mimeType||"audio"===a.contentType},Ut=function(l){var a=l.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType},nn=function(l,a,u){var y=l.timescale,x=l.start,re=l.minimumUpdatePeriod;return Math.ceil((((l.NOW+l.clientOffset)/1e3+(void 0===re?0:re)-(l.availabilityStartTime+(void 0===x?0:x)))*(void 0===y?1:y)-a)/u)},On=function(l,a){for(var u=l.type,n=l.minimumUpdatePeriod,o=void 0===n?0:n,h=l.media,y=void 0===h?"":h,S=l.sourceDuration,x=l.timescale,V=void 0===x?1:x,re=l.startNumber,ee=void 0===re?1:re,De=l.periodIndex,ze=[],Ve=-1,Be=0;Be<a.length;Be++){var Wt=a[Be],Lt=Wt.d,cn=Wt.r||0,hn=Wt.t||0;Ve<0&&(Ve=hn),hn&&hn>Ve&&(Ve=hn);var rn=void 0;if(cn<0){var qn=Be+1;rn=qn===a.length?"dynamic"===u&&o>0&&y.indexOf("$Number$")>0?nn(l,Ve,Lt):(S*V-Ve)/Lt:(a[qn].t-Ve)/Lt}else rn=cn+1;for(var tr=ee+ze.length+rn,wn=ee+ze.length;wn<tr;)ze.push({number:wn,duration:Lt/V,time:Ve,timeline:De}),Ve+=Lt,wn++}return ze},Jn=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Er=function(l,a){return l.replace(Jn,function(l){return function(a,u,n,o){if("$$"===a)return"$";if(typeof l[u]>"u")return a;var h=""+l[u];return"RepresentationID"===u||(o=n?parseInt(o,10):1,h.length>=o)?h:""+new Array(o-h.length+1).join("0")+h}}(a))},pi=function(l,a){var u={RepresentationID:l.id,Bandwidth:l.bandwidth||0},n=l.initialization,o=void 0===n?{sourceURL:"",range:""}:n,h=Vi({baseUrl:l.baseUrl,source:Er(o.sourceURL,u),range:o.range}),y=function(l,a){return l.duration||a?l.duration?_e(l):On(l,a):[{number:l.startNumber||1,duration:l.sourceDuration,time:0,timeline:l.periodIndex}]}(l,a);return y.map(function(S){u.Number=S.number,u.Time=S.time;var x=Er(l.media||"",u),ee=l.periodStart+(S.time-(l.presentationTimeOffset||0))/(l.timescale||1);return{uri:x,timeline:S.timeline,duration:S.duration,resolvedUri:qe(l.baseUrl||"",x),map:h,number:S.number,presentationTime:ee}})},gs=function(l,a){var u=l.duration,n=l.segmentUrls,o=void 0===n?[]:n,h=l.periodStart;if(!u&&!a||u&&a)throw new Error("SEGMENT_TIME_UNSPECIFIED");var S,y=o.map(function(V){return function(l,a){var u=l.baseUrl,n=l.initialization,o=void 0===n?{}:n,h=Vi({baseUrl:u,source:o.sourceURL,range:o.range}),y=Vi({baseUrl:u,source:a.media,range:a.mediaRange});return y.map=h,y}(l,V)});return u&&(S=_e(l)),a&&(S=On(l,a)),S.map(function(V,re){if(y[re]){var ee=y[re],De=l.timescale||1,ze=l.presentationTimeOffset||0;return ee.timeline=V.timeline,ee.duration=V.duration,ee.number=V.number,ee.presentationTime=h+(V.time-ze)/De,ee}}).filter(function(V){return V})},qs=function(l){var n,o,a=l.attributes,u=l.segmentInfo;u.template?(o=pi,n=br(a,u.template)):u.base?(o=Ce,n=br(a,u.base)):u.list&&(o=gs,n=br(a,u.list));var h={attributes:a};if(!o)return h;var y=o(n,u.segmentTimeline);if(n.duration){var V=n.timescale;n.duration=n.duration/(void 0===V?1:V)}else n.duration=y.length?y.reduce(function(ee,De){return Math.max(ee,Math.ceil(De.duration))},0):0;return h.attributes=n,h.segments=y,u.base&&n.indexRange&&(h.sidx=y[0],h.segments=[]),h},si=function(l,a){return li(l.childNodes).filter(function(u){return u.tagName===a})},$o=function(l){return l.textContent.trim()},cs=function(l){var S=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(l);if(!S)return 0;var x=S.slice(1),re=x[1],ee=x[2],De=x[3],ze=x[4],Ve=x[5];return 31536e3*parseFloat(x[0]||0)+2592e3*parseFloat(re||0)+86400*parseFloat(ee||0)+3600*parseFloat(De||0)+60*parseFloat(ze||0)+parseFloat(Ve||0)},ms={mediaPresentationDuration:function(l){return cs(l)},availabilityStartTime:function(l){return function(l){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(l)&&(l+="Z"),Date.parse(l)}(l)/1e3},minimumUpdatePeriod:function(l){return cs(l)},suggestedPresentationDelay:function(l){return cs(l)},type:function(l){return l},timeShiftBufferDepth:function(l){return cs(l)},start:function(l){return cs(l)},width:function(l){return parseInt(l,10)},height:function(l){return parseInt(l,10)},bandwidth:function(l){return parseInt(l,10)},startNumber:function(l){return parseInt(l,10)},timescale:function(l){return parseInt(l,10)},presentationTimeOffset:function(l){return parseInt(l,10)},duration:function(l){var a=parseInt(l,10);return isNaN(a)?cs(l):a},d:function(l){return parseInt(l,10)},t:function(l){return parseInt(l,10)},r:function(l){return parseInt(l,10)},DEFAULT:function(l){return l}},_i=function(l){return l&&l.attributes?li(l.attributes).reduce(function(a,u){return a[u.name]=(ms[u.name]||ms.DEFAULT)(u.value),a},{}):{}},hi={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},to=function(l,a){return a.length?Ri(l.map(function(u){return a.map(function(n){return qe(u,$o(n))})})):l},Ks=function(l){var a=si(l,"SegmentTemplate")[0],u=si(l,"SegmentList")[0],n=u&&si(u,"SegmentURL").map(function(ee){return br({tag:"SegmentURL"},_i(ee))}),o=si(l,"SegmentBase")[0],h=u||a,y=h&&si(h,"SegmentTimeline")[0],S=u||o||a,x=S&&si(S,"Initialization")[0],V=a&&_i(a);V&&x?V.initialization=x&&_i(x):V&&V.initialization&&(V.initialization={sourceURL:V.initialization});var re={template:V,segmentTimeline:y&&si(y,"S").map(function(ee){return _i(ee)}),list:u&&br(_i(u),{segmentUrls:n,initialization:_i(x)}),base:o&&br(_i(o),{initialization:_i(x)})};return Object.keys(re).forEach(function(ee){re[ee]||delete re[ee]}),re},Ia=function(l,a){return function(u,n){var o=to(a,si(u.node,"BaseURL")),h=parseInt(u.attributes.id,10),y=ge().isNaN(h)?n:h,S=br(l,{periodIndex:y,periodStart:u.attributes.start});"number"==typeof u.attributes.duration&&(S.periodDuration=u.attributes.duration);var x=si(u.node,"AdaptationSet"),V=Ks(u.node);return Ri(x.map(function(l,a,u){return function(n){var o=_i(n),h=to(a,si(n,"BaseURL")),y=si(n,"Role")[0],S={role:_i(y)},x=br(l,o,S),V=si(n,"Accessibility")[0],re=function(l){return"urn:scte:dash:cc:cea-608:2015"===l.schemeIdUri?l.value.split(";").map(function(n){var o,h;if(h=n,/^CC\d=/.test(n)){var y=n.split("=");o=y[0],h=y[1]}else/^CC\d$/.test(n)&&(o=n);return{channel:o,language:h}}):"urn:scte:dash:cc:cea-708:2015"===l.schemeIdUri?l.value.split(";").map(function(n){var o={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){var h=n.split("="),S=h[1],x=void 0===S?"":S;o.channel=h[0],o.language=n,x.split(",").forEach(function(V){var re=V.split(":"),ee=re[0],De=re[1];"lang"===ee?o.language=De:"er"===ee?o.easyReader=Number(De):"war"===ee?o.aspectRatio=Number(De):"3D"===ee&&(o["3D"]=Number(De))})}else o.language=n;return o.channel&&(o.channel="SERVICE"+o.channel),o}):void 0}(_i(V));re&&(x=br(x,{captionServices:re}));var ee=si(n,"Label")[0];if(ee&&ee.childNodes.length){var De=ee.childNodes[0].nodeValue.trim();x=br(x,{label:De})}var ze=function(l){return l.reduce(function(a,u){var n=_i(u),o=hi[n.schemeIdUri];if(o){a[o]={attributes:n};var h=si(u,"cenc:pssh")[0];if(h){var y=$o(h),S=y&&dt(y);a[o].pssh=S}}return a},{})}(si(n,"ContentProtection"));Object.keys(ze).length&&(x=br(x,{contentProtection:ze}));var Ve=Ks(n),Be=si(n,"Representation"),Wt=br(u,Ve);return Ri(Be.map(function(l,a,u){return function(n){var o=si(n,"BaseURL"),h=to(a,o),y=br(l,_i(n)),S=Ks(n);return h.map(function(x){return{segmentInfo:br(u,S),attributes:br(y,{baseUrl:x})}})}}(x,h,Wt)))}}(S,o,V)))}},xa=function(l){if(""===l)throw new Error("DASH_EMPTY_MANIFEST");var u,n,a=new Qi.DOMParser;try{n=(u=a.parseFromString(l,"application/xml"))&&"MPD"===u.documentElement.tagName?u.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},As=function(l,a){void 0===a&&(a={});var u=function(l,a){void 0===a&&(a={});var u=a,n=u.manifestUri,o=void 0===n?"":n,h=u.NOW,y=void 0===h?Date.now():h,S=u.clientOffset,x=void 0===S?0:S,V=si(l,"Period");if(!V.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var re=si(l,"Location"),ee=_i(l),De=to([o],si(l,"BaseURL"));ee.type=ee.type||"static",ee.sourceDuration=ee.mediaPresentationDuration||0,ee.NOW=y,ee.clientOffset=x,re.length&&(ee.locations=re.map($o));var ze=[];return V.forEach(function(Ve,Be){var Wt=_i(Ve),Lt=ze[Be-1];Wt.start=function(l){var a=l.attributes,u=l.priorPeriodAttributes;return"number"==typeof a.start?a.start:u&&"number"==typeof u.start&&"number"==typeof u.duration?u.start+u.duration:u||"static"!==l.mpdType?null:0}({attributes:Wt,priorPeriodAttributes:Lt?Lt.attributes:null,mpdType:ee.type}),ze.push({node:Ve,attributes:Wt})}),{locations:ee.locations,representationInfo:Ri(ze.map(Ia(ee,De)))}}(xa(l),a),n=function(l){return l.map(qs)}(u.representationInfo);return function(l,a,u){var n;if(void 0===u&&(u={}),!l.length)return{};var o=l[0].attributes,h=o.sourceDuration,y=o.type,S=o.suggestedPresentationDelay,x=o.minimumUpdatePeriod,V=Et(l.filter(Hr)).map(Xn),re=Et(l.filter(ui)),ee=l.filter(Ut),De=l.map(function(Be){return Be.attributes.captionServices}).filter(Boolean),ze={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:h,playlists:En(V,u)};return x>=0&&(ze.minimumUpdatePeriod=1e3*x),a&&(ze.locations=a),"dynamic"===y&&(ze.suggestedPresentationDelay=S),re.length&&(ze.mediaGroups.AUDIO.audio=function(l,a,u){void 0===a&&(a={}),void 0===u&&(u=!1);var n,o=l.reduce(function(y,S){var x=S.attributes.role&&S.attributes.role.value||"",V=S.attributes.lang||"",re=S.attributes.label||"main";V&&!S.attributes.label&&(re=S.attributes.lang+(x?" ("+x+")":"")),y[re]||(y[re]={language:V,autoselect:!0,default:"main"===x,playlists:[],uri:""});var De=Qt(function(l,a){var u,n=l.attributes,o=l.segments,h=l.sidx,y={attributes:(u={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},u["PROGRAM-ID"]=1,u),uri:"",endList:"static"===n.type,timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:o,mediaSequence:o.length?o[0].number:1};return n.contentProtection&&(y.contentProtection=n.contentProtection),h&&(y.sidx=h),a&&(y.attributes.AUDIO="audio",y.attributes.SUBTITLES="subs"),y}(S,u),a);return y[re].playlists.push(De),typeof n>"u"&&"main"===x&&((n=S).default=!0),y},{});return n||(o[Object.keys(o)[0]].default=!0),o}(re,u,0===ze.playlists.length)),ee.length&&(ze.mediaGroups.SUBTITLES.subs=function(l,a){return void 0===a&&(a={}),l.reduce(function(u,n){var o=n.attributes.lang||"text";return u[o]||(u[o]={language:o,default:!1,autoselect:!1,playlists:[],uri:""}),u[o].playlists.push(Qt(function(l){var a,u=l.attributes,n=l.segments;typeof n>"u"&&(n=[{uri:u.baseUrl,timeline:u.periodIndex,resolvedUri:u.baseUrl||"",duration:u.sourceDuration,number:0}],u.duration=u.sourceDuration);var o=((a={NAME:u.id,BANDWIDTH:u.bandwidth})["PROGRAM-ID"]=1,a);return u.codecs&&(o.CODECS=u.codecs),{attributes:o,uri:"",endList:"static"===u.type,timeline:u.periodIndex,resolvedUri:u.baseUrl||"",targetDuration:u.duration,segments:n,mediaSequence:n.length?n[0].number:1}}(n),a)),u},{})}(ee,u)),De.length&&(ze.mediaGroups["CLOSED-CAPTIONS"].cc=function(l){return l.reduce(function(a,u){return u&&u.forEach(function(n){var h=n.language;a[h]={autoselect:!1,default:!1,instreamId:n.channel,language:h},n.hasOwnProperty("aspectRatio")&&(a[h].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(a[h].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(a[h]["3D"]=n["3D"])}),a},{})}(De)),ze}(n,u.locations,a.sidxMapping)},ds=z(5035),yi=z.n(ds),xt=function(l){return l instanceof Uint8Array?l:(!Array.isArray(l)&&!function(l){return function(l){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer}(l)}(l)&&!(l instanceof ArrayBuffer)&&(l="number"!=typeof l||"number"==typeof l&&l!=l?0:[l]),new Uint8Array(l&&l.buffer||l,l&&l.byteOffset||0,l&&l.byteLength||0))},Dn=ge().BigInt||Number,Kn=[Dn("0x1"),Dn("0x100"),Dn("0x10000"),Dn("0x1000000"),Dn("0x100000000"),Dn("0x10000000000"),Dn("0x1000000000000"),Dn("0x100000000000000"),Dn("0x10000000000000000")],hs=(m=new Uint16Array([65484]),new Uint8Array(m.buffer,m.byteOffset,m.byteLength),function(l,a){var u=void 0===a?{}:a,n=u.signed,o=void 0!==n&&n,h=u.le,y=void 0!==h&&h;l=xt(l);var S=y?"reduce":"reduceRight",V=(l[S]?l[S]:Array.prototype[S]).call(l,function(ee,De,ze){var Ve=y?ze:Math.abs(ze+1-l.length);return ee+Dn(De)*Kn[Ve]},Dn(0));if(o){var re=Kn[l.length]/Dn(2)-Dn(1);(V=Dn(V))>re&&(V-=re,V-=re,V-=Dn(2))}return Number(V)}),Us=function(l,a){if("string"!=typeof l&&l&&"function"==typeof l.toString&&(l=l.toString()),"string"!=typeof l)return new Uint8Array;a||(l=unescape(encodeURIComponent(l)));for(var u=new Uint8Array(l.length),n=0;n<l.length;n++)u[n]=l.charCodeAt(n);return u},jr=function(l,a,u){var n=void 0===u?{}:u,o=n.offset,h=void 0===o?0:o,y=n.mask,S=void 0===y?[]:y;return l=xt(l),(a=xt(a)).length&&l.length-h>=a.length&&(a.every?a.every:Array.prototype.every).call(a,function(V,re){return V===(S[re]?S[re]&l[h+re]:l[h+re])})},Hi=xt([73,68,51]),ro=function m(l,a){return void 0===a&&(a=0),(l=xt(l)).length-a<10||!jr(l,Hi,{offset:a})?a:(a+=function(l,a){void 0===a&&(a=0);var n=(l=xt(l))[a+6]<<21|l[a+7]<<14|l[a+8]<<7|l[a+9];return(16&l[a+5])>>4?n+20:n+10}(l,a),m(l,a))},jo=(new Uint8Array([79,112,117,115,72,101,97,100]),function(l){return"string"==typeof l?Us(l):l}),da=function(l){l=xt(l);for(var a=[],u=0;l.length>u;){var n=l[u],o=0,h=0,y=l[++h];for(h++;128&y;)o=(127&y)<<7,y=l[h],h++;o+=127&y;for(var S=0;S<bi.length;S++){var x=bi[S];if(n===x.id){a.push((0,x.parser)(l.subarray(h,h+o)));break}}u+=o+h}return a};bi=[{id:3,parser:function(l){var a={tag:3,id:l[0]<<8|l[1],flags:l[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&a.flags&&(a.dependsOnEsId=l[a.size]<<8|l[a.size+1],a.size+=2),64&a.flags){var u=l[a.size];a.url=function(l){if(!l)return"";l=Array.prototype.slice.call(l);var a=String.fromCharCode.apply(null,xt(l));try{return decodeURIComponent(escape(a))}catch{}return a}(l.subarray(a.size+1,a.size+1+u)),a.size+=u}return 32&a.flags&&(a.ocrEsId=l[a.size]<<8|l[a.size+1],a.size+=2),a.descriptors=da(l.subarray(a.size))||[],a}},{id:4,parser:function(l){return{tag:4,oti:l[0],streamType:l[1],bufferSize:l[2]<<16|l[3]<<8|l[4],maxBitrate:l[5]<<24|l[6]<<16|l[7]<<8|l[8],avgBitrate:l[9]<<24|l[10]<<16|l[11]<<8|l[12],descriptors:da(l.subarray(13))}}},{id:5,parser:function(l){return{tag:5,bytes:l}}},{id:6,parser:function(l){return{tag:6,bytes:l}}}];var ji=function m(l,a,u){void 0===u&&(u=!1),a=function(l){return Array.isArray(l)?l.map(function(a){return jo(a)}):[jo(l)]}(a),l=xt(l);var n=[];if(!a.length)return n;for(var o=0;o<l.length;){var h=(l[o]<<24|l[o+1]<<16|l[o+2]<<8|l[o+3])>>>0,y=l.subarray(o+4,o+8);if(0===h)break;var S=o+h;if(S>l.length){if(u)break;S=l.length}var x=l.subarray(o+8,S);jr(y,a[0])&&(1===a.length?n.push(x):n.push.apply(n,m(x,a.slice(1),u))),o=S}return n},Lr={EBML:xt([26,69,223,163]),DocType:xt([66,130]),Segment:xt([24,83,128,103]),SegmentInfo:xt([21,73,169,102]),Tracks:xt([22,84,174,107]),Track:xt([174]),TrackNumber:xt([215]),DefaultDuration:xt([35,227,131]),TrackEntry:xt([174]),TrackType:xt([131]),FlagDefault:xt([136]),CodecID:xt([134]),CodecPrivate:xt([99,162]),VideoTrack:xt([224]),AudioTrack:xt([225]),Cluster:xt([31,67,182,117]),Timestamp:xt([231]),TimestampScale:xt([42,215,177]),BlockGroup:xt([160]),BlockDuration:xt([155]),Block:xt([161]),SimpleBlock:xt([163])},Ei=[128,64,32,16,8,4,2,1],Ji=function(l,a,u,n){void 0===u&&(u=!0),void 0===n&&(n=!1);var o=function(l){for(var a=1,u=0;u<Ei.length&&!(l&Ei[u]);u++)a++;return a}(l[a]),h=l.subarray(a,a+o);return u&&((h=Array.prototype.slice.call(l,a,a+o))[0]^=Ei[o-1]),{length:o,value:hs(h,{signed:n}),bytes:h}},Bo=function m(l){return"string"==typeof l?l.match(/.{1,2}/g).map(function(a){return m(a)}):"number"==typeof l?function(l,a){var n=(void 0===a?{}:a).le,o=void 0!==n&&n;("bigint"!=typeof l&&"number"!=typeof l||"number"==typeof l&&l!=l)&&(l=0);for(var h=function(l){return Math.ceil(function(l){return l.toString(2).length}(l)/8)}(l=Dn(l)),y=new Uint8Array(new ArrayBuffer(h)),S=0;S<h;S++){var x=o?S:Math.abs(S+1-y.length);y[x]=Number(l/Kn[S]&Dn(255)),l<0&&(y[x]=Math.abs(~y[x]),y[x]-=0===S?1:2)}return y}(l):l},xi=function m(l,a,u){if(u>=a.length)return a.length;var n=Ji(a,u,!1);if(jr(l.bytes,n.bytes))return u;var o=Ji(a,u+n.length);return m(l,a,u+o.length+o.value+n.length)},Ai=function m(l,a){a=function(l){return Array.isArray(l)?l.map(function(a){return Bo(a)}):[Bo(l)]}(a),l=xt(l);var u=[];if(!a.length)return u;for(var n=0;n<l.length;){var o=Ji(l,n,!1),h=Ji(l,n+o.length),y=n+o.length+h.length;127===h.value&&(h.value=xi(o,l,y),h.value!==l.length&&(h.value-=y));var x=l.subarray(y,y+h.value>l.length?l.length:y+h.value);jr(a[0],o.bytes)&&(1===a.length?u.push(x):u=u.concat(m(x,a.slice(1)))),n+=o.length+h.length+x.length}return u},Ka=xt([0,0,0,1]),ul=xt([0,0,1]),Uo=xt([0,0,3]),ka=function(l){for(var a=[],u=1;u<l.length-2;)jr(l.subarray(u,u+3),Uo)&&(a.push(u+2),u++),u++;if(0===a.length)return l;var n=l.length-a.length,o=new Uint8Array(n),h=0;for(u=0;u<n;h++,u++)h===a[0]&&(h++,a.shift()),o[u]=l[h];return o},Pa=function(l,a,u,n){void 0===n&&(n=1/0),l=xt(l),u=[].concat(u);for(var h,o=0,y=0;o<l.length&&(y<n||h);){var S=void 0;if(jr(l.subarray(o),Ka)?S=4:jr(l.subarray(o),ul)&&(S=3),S){if(y++,h)return ka(l.subarray(h,o));var x=void 0;"h264"===a?x=31&l[o+S]:"h265"===a&&(x=l[o+S]>>1&63),-1!==u.indexOf(x)&&(h=o+S),o+=S+("h264"===a?1:2)}else o++}return l.subarray(0,0)},lo={webm:xt([119,101,98,109]),matroska:xt([109,97,116,114,111,115,107,97]),flac:xt([102,76,97,67]),ogg:xt([79,103,103,83]),ac3:xt([11,119]),riff:xt([82,73,70,70]),avi:xt([65,86,73]),wav:xt([87,65,86,69]),"3gp":xt([102,116,121,112,51,103]),mp4:xt([102,116,121,112]),fmp4:xt([115,116,121,112]),mov:xt([102,116,121,112,113,116]),moov:xt([109,111,111,118]),moof:xt([109,111,111,102])},fa={aac:function(l){var a=ro(l);return jr(l,[255,16],{offset:a,mask:[255,22]})},mp3:function(l){var a=ro(l);return jr(l,[255,2],{offset:a,mask:[255,6]})},webm:function(l){var a=Ai(l,[Lr.EBML,Lr.DocType])[0];return jr(a,lo.webm)},mkv:function(l){var a=Ai(l,[Lr.EBML,Lr.DocType])[0];return jr(a,lo.matroska)},mp4:function(l){return!fa["3gp"](l)&&!fa.mov(l)&&(!!(jr(l,lo.mp4,{offset:4})||jr(l,lo.fmp4,{offset:4})||jr(l,lo.moof,{offset:4})||jr(l,lo.moov,{offset:4}))||void 0)},mov:function(l){return jr(l,lo.mov,{offset:4})},"3gp":function(l){return jr(l,lo["3gp"],{offset:4})},ac3:function(l){var a=ro(l);return jr(l,lo.ac3,{offset:a})},ts:function(l){if(l.length<189&&l.length>=1)return 71===l[0];for(var a=0;a+188<l.length&&a<188;){if(71===l[a]&&71===l[a+188])return!0;a+=1}return!1},flac:function(l){var a=ro(l);return jr(l,lo.flac,{offset:a})},ogg:function(l){return jr(l,lo.ogg)},avi:function(l){return jr(l,lo.riff)&&jr(l,lo.avi,{offset:8})},wav:function(l){return jr(l,lo.riff)&&jr(l,lo.wav,{offset:8})},h264:function(l){return function(l,a,u){return Pa(l,"h264",7,3)}(l).length},h265:function(l){return function(l,a,u){return Pa(l,"h265",[32,33],3)}(l).length}},Za=Object.keys(fa).filter(function(m){return"ts"!==m&&"h264"!==m&&"h265"!==m}).concat(["ts","h264","h265"]);Za.forEach(function(m){var l=fa[m];fa[m]=function(a){return l(xt(a))}});for(var Wn,ie=fa,Q=function(l){l=xt(l);for(var a=0;a<Za.length;a++){var u=Za[a];if(ie[u](l))return u}return""},Oe=z(5562),J={},ne=function(l,a){return J[l]=J[l]||[],a&&(J[l]=J[l].concat(a)),J[l]},tt=function(l,a){var u=ne(l).indexOf(a);return!(u<=-1||(J[l]=J[l].slice(),J[l].splice(u,1),0))},Vt={prefixed:!0},fn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Yn=fn[0],pr=0;pr<fn.length;pr++)if(fn[pr][1]in Ze()){Wn=fn[pr];break}if(Wn){for(var Zr=0;Zr<Wn.length;Zr++)Vt[Yn[Zr]]=Wn[Zr];Vt.prefixed=Wn[0]!==Yn[0]}var ii=[],Ln=function Mi(m){var a,l="info",u=function(){for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];a("log",l,h)};return a=function(l,a){return function(u,n,o){var h=a.levels[n],y=new RegExp("^("+h+")$");if("log"!==u&&o.unshift(u.toUpperCase()+":"),o.unshift(l+":"),ii){ii.push([].concat(o));var S=ii.length-1e3;ii.splice(0,S>0?S:0)}if(ge().console){var x=ge().console[u];!x&&"debug"===u&&(x=ge().console.info||ge().console.log),x&&h&&y.test(u)&&x[Array.isArray(o)?"apply":"call"](ge().console,o)}}}(m,u),u.createLogger=function(n){return Mi(m+": "+n)},u.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:l},u.level=function(n){if("string"==typeof n){if(!u.levels.hasOwnProperty(n))throw new Error('"'+n+'" in not a valid log level');l=n}return l},(u.history=function(){return ii?[].concat(ii):[]}).filter=function(n){return(ii||[]).filter(function(o){return new RegExp(".*"+n+".*").test(o[0])})},u.history.clear=function(){ii&&(ii.length=0)},u.history.disable=function(){null!==ii&&(ii.length=0,ii=null)},u.history.enable=function(){null===ii&&(ii=[])},u.error=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("error",l,o)},u.warn=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("warn",l,o)},u.debug=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("debug",l,o)},u}("VIDEOJS"),$i=Ln.createLogger,_s=Object.prototype.toString,$s=function(l){return zs(l)?Object.keys(l):[]};function Gs(m,l){$s(m).forEach(function(a){return l(m[a],a)})}function Yr(m){for(var l=arguments.length,a=new Array(l>1?l-1:0),u=1;u<l;u++)a[u-1]=arguments[u];return Object.assign?rt.apply(void 0,[m].concat(a)):(a.forEach(function(n){n&&Gs(n,function(o,h){m[h]=o})}),m)}function zs(m){return!!m&&"object"==typeof m}function vo(m){return zs(m)&&"[object Object]"===_s.call(m)&&m.constructor===Object}function Wo(m,l){if(!m||!l)return"";if("function"==typeof ge().getComputedStyle){var a;try{a=ge().getComputedStyle(m)}catch{return""}return a?a.getPropertyValue(l)||a[l]:""}return""}var es=ge().navigator&&ge().navigator.userAgent||"",pa=/AppleWebKit\/([\d.]+)/i.exec(es),yo=pa?parseFloat(pa.pop()):null,Hu=/iPod/i.test(es),Ql=function(){var m=es.match(/OS (\d+)_/i);return m&&m[1]?m[1]:null}(),ga=/Android/i.test(es),$u=function(){var m=es.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!m)return null;var l=m[1]&&parseFloat(m[1]),a=m[2]&&parseFloat(m[2]);return l&&a?parseFloat(m[1]+"."+m[2]):l||null}(),Eu=ga&&$u<5&&yo<537,ll=/Firefox/i.test(es),Oa=/Edg/i.test(es),io=!Oa&&(/Chrome/i.test(es)||/CriOS/i.test(es)),Gu=function(){var m=es.match(/(Chrome|CriOS)\/(\d+)/);return m&&m[2]?parseFloat(m[2]):null}(),Cu=function(){var m=/MSIE\s(\d+)\.\d/.exec(es),l=m&&parseFloat(m[1]);return!l&&/Trident\/7.0/i.test(es)&&/rv:11.0/.test(es)&&(l=11),l}(),Su=/Safari/i.test(es)&&!io&&!ga&&!Oa,Xl=/Windows/i.test(es),ma=!(!ce()||!("ontouchstart"in ge()||ge().navigator.maxTouchPoints||ge().DocumentTouch&&ge().document instanceof ge().DocumentTouch)),_o=/iPad/i.test(es)||Su&&ma&&!/iPhone/i.test(es),cl=/iPhone/i.test(es)&&!_o,ws=cl||_o||Hu,ea=(Su||ws)&&!io,Jl=Object.freeze({__proto__:null,IS_IPOD:Hu,IOS_VERSION:Ql,IS_ANDROID:ga,ANDROID_VERSION:$u,IS_NATIVE_ANDROID:Eu,IS_FIREFOX:ll,IS_EDGE:Oa,IS_CHROME:io,CHROME_VERSION:Gu,IE_VERSION:Cu,IS_SAFARI:Su,IS_WINDOWS:Xl,TOUCH_ENABLED:ma,IS_IPAD:_o,IS_IPHONE:cl,IS_IOS:ws,IS_ANY_SAFARI:ea});function Qr(m){return"string"==typeof m&&!!m.trim()}function ta(m){if(m.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ce(){return Ze()===ge().document}function K(m){return zs(m)&&1===m.nodeType}function Se(){try{return ge().parent!==ge().self}catch{return!0}}function it(m){return function(l,a){if(!Qr(l))return Ze()[m](null);Qr(a)&&(a=Ze().querySelector(a));var u=K(a)?a:Ze();return u[m]&&u[m](l)}}function wt(m,l,a,u){void 0===m&&(m="div"),void 0===l&&(l={}),void 0===a&&(a={});var n=Ze().createElement(m);return Object.getOwnPropertyNames(l).forEach(function(o){var h=l[o];-1!==o.indexOf("aria-")||"role"===o||"type"===o?(Ln.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+o+" to "+h+"."),n.setAttribute(o,h)):"textContent"===o?en(n,h):(n[o]!==h||"tabIndex"===o)&&(n[o]=h)}),Object.getOwnPropertyNames(a).forEach(function(o){n.setAttribute(o,a[o])}),u&&Il(n,u),n}function en(m,l){return typeof m.textContent>"u"?m.innerText=l:m.textContent=l,m}function sr(m,l){l.firstChild?l.insertBefore(m,l.firstChild):l.appendChild(m)}function Ci(m,l){return ta(l),m.classList?m.classList.contains(l):function L(m){return new RegExp("(^|\\s)"+m+"($|\\s)")}(l).test(m.className)}function Pr(m,l){return m.classList?m.classList.add(l):Ci(m,l)||(m.className=(m.className+" "+l).trim()),m}function Vr(m,l){return m?(m.classList?m.classList.remove(l):(ta(l),m.className=m.className.split(/\s+/).filter(function(a){return a!==l}).join(" ")),m):(Ln.warn("removeClass was called with an element that doesn't exist"),null)}function wr(m,l,a){var u=Ci(m,l);if("function"==typeof a&&(a=a(m,l)),"boolean"!=typeof a&&(a=!u),a!==u)return a?Pr(m,l):Vr(m,l),m}function os(m,l){Object.getOwnPropertyNames(l).forEach(function(a){var u=l[a];null===u||typeof u>"u"||!1===u?m.removeAttribute(a):m.setAttribute(a,!0===u?"":u)})}function Br(m){var l={};if(m&&m.attributes&&m.attributes.length>0)for(var u=m.attributes,n=u.length-1;n>=0;n--){var o=u[n].name,h=u[n].value;("boolean"==typeof m[o]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+o+","))&&(h=null!==h),l[o]=h}return l}function Ki(m,l){return m.getAttribute(l)}function Ws(m,l,a){m.setAttribute(l,a)}function ur(m,l){m.removeAttribute(l)}function qo(){Ze().body.focus(),Ze().onselectstart=function(){return!1}}function na(){Ze().onselectstart=function(){return!0}}function Ds(m){if(m&&m.getBoundingClientRect&&m.parentNode){var l=m.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(function(u){void 0!==l[u]&&(a[u]=l[u])}),a.height||(a.height=parseFloat(Wo(m,"height"))),a.width||(a.width=parseFloat(Wo(m,"width"))),a}}function Ko(m){if(!m||m&&!m.offsetParent)return{left:0,top:0,width:0,height:0};for(var l=m.offsetWidth,a=m.offsetHeight,u=0,n=0;m.offsetParent&&m!==Ze()[Vt.fullscreenElement];)u+=m.offsetLeft,n+=m.offsetTop,m=m.offsetParent;return{left:u,top:n,width:l,height:a}}function va(m,l){var a={x:0,y:0};if(ws)for(var u=m;u&&"html"!==u.nodeName.toLowerCase();){var n=Wo(u,"transform");if(/^matrix/.test(n)){var o=n.slice(7,-1).split(/,\s/).map(Number);a.x+=o[4],a.y+=o[5]}else if(/^matrix3d/.test(n)){var h=n.slice(9,-1).split(/,\s/).map(Number);a.x+=h[12],a.y+=h[13]}u=u.parentNode}var y={},S=Ko(l.target),x=Ko(m),V=x.width,ee=l.offsetY-(x.top-S.top),De=l.offsetX-(x.left-S.left);return l.changedTouches&&(De=l.changedTouches[0].pageX-x.left,ee=l.changedTouches[0].pageY+x.top,ws&&(De-=a.x,ee-=a.y)),y.y=1-Math.max(0,Math.min(1,ee/x.height)),y.x=Math.max(0,Math.min(1,De/V)),y}function Oc(m){return zs(m)&&3===m.nodeType}function Ra(m){for(;m.firstChild;)m.removeChild(m.firstChild);return m}function Dl(m){return"function"==typeof m&&(m=m()),(Array.isArray(m)?m:[m]).map(function(l){return"function"==typeof l&&(l=l()),K(l)||Oc(l)?l:"string"==typeof l&&/\S/.test(l)?Ze().createTextNode(l):void 0}).filter(function(l){return l})}function Il(m,l){return Dl(l).forEach(function(a){return m.appendChild(a)}),m}function Rc(m,l){return Il(Ra(m),l)}function xl(m){return void 0===m.button&&void 0===m.buttons||0===m.button&&void 0===m.buttons||"mouseup"===m.type&&0===m.button&&0===m.buttons||!(0!==m.button||1!==m.buttons)}var Ns,ra=it("querySelector"),vn=it("querySelectorAll"),Or=Object.freeze({__proto__:null,isReal:ce,isEl:K,isInFrame:Se,createEl:wt,textContent:en,prependTo:sr,hasClass:Ci,addClass:Pr,removeClass:Vr,toggleClass:wr,setAttributes:os,getAttributes:Br,getAttribute:Ki,setAttribute:Ws,removeAttribute:ur,blockTextSelection:qo,unblockTextSelection:na,getBoundingClientRect:Ds,findPosition:Ko,getPointerPosition:va,isTextNode:Oc,emptyEl:Ra,normalizeContent:Dl,appendContent:Il,insertContent:Rc,isSingleLeftClick:xl,$:ra,$$:vn}),zu=!1,wo=function(){if(!1!==Ns.options.autoSetup){var l=Array.prototype.slice.call(Ze().getElementsByTagName("video")),a=Array.prototype.slice.call(Ze().getElementsByTagName("audio")),u=Array.prototype.slice.call(Ze().getElementsByTagName("video-js")),n=l.concat(a,u);if(n&&n.length>0)for(var o=0,h=n.length;o<h;o++){var y=n[o];if(!y||!y.getAttribute){wu(1);break}void 0===y.player&&null!==y.getAttribute("data-setup")&&Ns(y)}else zu||wu(1)}};function wu(m,l){ce()&&(l&&(Ns=l),ge().setTimeout(wo,m))}function Cn(){zu=!0,ge().removeEventListener("load",Cn)}ce()&&("complete"===Ze().readyState?Cn():ge().addEventListener("load",Cn));var tc,zi=function(l){var a=Ze().createElement("style");return a.className=l,a},To=function(l,a){l.styleSheet?l.styleSheet.cssText=a:l.textContent=a},An=3;function lr(){return An++}ge().WeakMap||(tc=function(){function m(){this.vdata="vdata"+Math.floor(ge().performance&&ge().performance.now()||Date.now()),this.data={}}var l=m.prototype;return l.set=function(u,n){var o=u[this.vdata]||lr();return u[this.vdata]||(u[this.vdata]=o),this.data[o]=n,this},l.get=function(u){var n=u[this.vdata];if(n)return this.data[n];Ln("We have no data for this element",u)},l.has=function(u){return u[this.vdata]in this.data},l.delete=function(u){var n=u[this.vdata];n&&(delete this.data[n],delete u[this.vdata])},m}());var Sn=ge().WeakMap?new WeakMap:new tc;function $t(m,l){if(Sn.has(m)){var a=Sn.get(m);0===a.handlers[l].length&&(delete a.handlers[l],m.removeEventListener?m.removeEventListener(l,a.dispatcher,!1):m.detachEvent&&m.detachEvent("on"+l,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),0===Object.getOwnPropertyNames(a).length&&Sn.delete(m)}}function dn(m,l,a,u){a.forEach(function(n){m(l,n,u)})}function oi(m){if(m.fixed_)return m;function l(){return!0}function a(){return!1}if(!m||!m.isPropagationStopped||!m.isImmediatePropagationStopped){var u=m||ge().event;for(var n in m={},u)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&u.preventDefault||(m[n]=u[n]));if(m.target||(m.target=m.srcElement||Ze()),m.relatedTarget||(m.relatedTarget=m.fromElement===m.target?m.toElement:m.fromElement),m.preventDefault=function(){u.preventDefault&&u.preventDefault(),m.returnValue=!1,u.returnValue=!1,m.defaultPrevented=!0},m.defaultPrevented=!1,m.stopPropagation=function(){u.stopPropagation&&u.stopPropagation(),m.cancelBubble=!0,u.cancelBubble=!0,m.isPropagationStopped=l},m.isPropagationStopped=a,m.stopImmediatePropagation=function(){u.stopImmediatePropagation&&u.stopImmediatePropagation(),m.isImmediatePropagationStopped=l,m.stopPropagation()},m.isImmediatePropagationStopped=a,null!=m.clientX){var o=Ze().documentElement,h=Ze().body;m.pageX=m.clientX+(o&&o.scrollLeft||h&&h.scrollLeft||0)-(o&&o.clientLeft||h&&h.clientLeft||0),m.pageY=m.clientY+(o&&o.scrollTop||h&&h.scrollTop||0)-(o&&o.clientTop||h&&h.clientTop||0)}m.which=m.charCode||m.keyCode,null!=m.button&&(m.button=1&m.button?0:4&m.button?1:2&m.button?2:0)}return m.fixed_=!0,m}var Na,ya=function(){if("boolean"!=typeof Na){Na=!1;try{var l=Object.defineProperty({},"passive",{get:function(){Na=!0}});ge().addEventListener("test",null,l),ge().removeEventListener("test",null,l)}catch{}}return Na},nc=["touchstart","touchmove"];function _a(m,l,a){if(Array.isArray(l))return dn(_a,m,l,a);Sn.has(m)||Sn.set(m,{});var u=Sn.get(m);if(u.handlers||(u.handlers={}),u.handlers[l]||(u.handlers[l]=[]),a.guid||(a.guid=lr()),u.handlers[l].push(a),u.dispatcher||(u.disabled=!1,u.dispatcher=function(o,h){if(!u.disabled){o=oi(o);var y=u.handlers[o.type];if(y)for(var S=y.slice(0),x=0,V=S.length;x<V&&!o.isImmediatePropagationStopped();x++)try{S[x].call(m,o,h)}catch(re){Ln.error(re)}}}),1===u.handlers[l].length)if(m.addEventListener){var n=!1;ya()&&nc.indexOf(l)>-1&&(n={passive:!0}),m.addEventListener(l,u.dispatcher,n)}else m.attachEvent&&m.attachEvent("on"+l,u.dispatcher)}function so(m,l,a){if(Sn.has(m)){var u=Sn.get(m);if(u.handlers){if(Array.isArray(l))return dn(so,m,l,a);var n=function(x,V){u.handlers[V]=[],$t(x,V)};if(void 0===l){for(var o in u.handlers)Object.prototype.hasOwnProperty.call(u.handlers||{},o)&&n(m,o);return}var h=u.handlers[l];if(h){if(!a)return void n(m,l);if(a.guid)for(var y=0;y<h.length;y++)h[y].guid===a.guid&&h.splice(y--,1);$t(m,l)}}}}function ru(m,l,a){var u=Sn.has(m)?Sn.get(m):{},n=m.parentNode||m.ownerDocument;if("string"==typeof l?l={type:l,target:m}:l.target||(l.target=m),l=oi(l),u.dispatcher&&u.dispatcher.call(m,l,a),n&&!l.isPropagationStopped()&&!0===l.bubbles)ru.call(null,n,l,a);else if(!n&&!l.defaultPrevented&&l.target&&l.target[l.type]){Sn.has(l.target)||Sn.set(l.target,{});var o=Sn.get(l.target);l.target[l.type]&&(o.disabled=!0,"function"==typeof l.target[l.type]&&l.target[l.type](),o.disabled=!1)}return!l.defaultPrevented}function dl(m,l,a){if(Array.isArray(l))return dn(dl,m,l,a);var u=function n(){so(m,l,n),a.apply(this,arguments)};u.guid=a.guid=a.guid||lr(),_a(m,l,u)}function rc(m,l,a){var u=function n(){so(m,l,n),a.apply(this,arguments)};u.guid=a.guid=a.guid||lr(),_a(m,l,u)}var as,ic=Object.freeze({__proto__:null,fixEvent:oi,on:_a,off:so,trigger:ru,one:dl,any:rc}),ts=function(l,a,u){a.guid||(a.guid=lr());var n=a.bind(l);return n.guid=u?u+"_"+a.guid:a.guid,n},Cr=function(l,a){var u=ge().performance.now();return function(){var h=ge().performance.now();h-u>=a&&(l.apply(void 0,arguments),u=h)}},oo=function(){};oo.prototype.allowedEvents_={},oo.prototype.on=function(m,l){var a=this.addEventListener;this.addEventListener=function(){},_a(this,m,l),this.addEventListener=a},oo.prototype.addEventListener=oo.prototype.on,oo.prototype.off=function(m,l){so(this,m,l)},oo.prototype.removeEventListener=oo.prototype.off,oo.prototype.one=function(m,l){var a=this.addEventListener;this.addEventListener=function(){},dl(this,m,l),this.addEventListener=a},oo.prototype.any=function(m,l){var a=this.addEventListener;this.addEventListener=function(){},rc(this,m,l),this.addEventListener=a},oo.prototype.trigger=function(m){var l=m.type||m;"string"==typeof m&&(m={type:l}),m=oi(m),this.allowedEvents_[l]&&this["on"+l]&&this["on"+l](m),ru(this,m)},oo.prototype.dispatchEvent=oo.prototype.trigger,oo.prototype.queueTrigger=function(m){var l=this;as||(as=new Map);var a=m.type||m,u=as.get(this);u||as.set(this,u=new Map);var n=u.get(a);u.delete(a),ge().clearTimeout(n);var o=ge().setTimeout(function(){0===u.size&&(u=null,as.delete(l)),l.trigger(m)},0);u.set(a,o)};var vr=function(l){return"function"==typeof l.name?l.name():"string"==typeof l.name?l.name:l.name_?l.name_:l.constructor&&l.constructor.name?l.constructor.name:typeof l},bo=function(l){return l instanceof oo||!!l.eventBusEl_&&["on","one","off","trigger"].every(function(a){return"function"==typeof l[a]})},qd=function(l){return"string"==typeof l&&/\S/.test(l)||Array.isArray(l)&&!!l.length},gi=function(l,a,u){if(!l||!l.nodeName&&!bo(l))throw new Error("Invalid target for "+vr(a)+"#"+u+"; must be a DOM node or evented object.")},Fn=function(l,a,u){if(!qd(l))throw new Error("Invalid event type for "+vr(a)+"#"+u+"; must be a non-empty string or array.")},k=function(l,a,u){if("function"!=typeof l)throw new Error("Invalid listener for "+vr(a)+"#"+u+"; must be a function.")},R=function(l,a,u){var o,h,y,n=a.length<3||a[0]===l||a[0]===l.eventBusEl_;return n?(o=l.eventBusEl_,a.length>=3&&a.shift(),h=a[0],y=a[1]):(o=a[0],h=a[1],y=a[2]),gi(o,l,u),Fn(h,l,u),k(y,l,u),{isTargetingSelf:n,target:o,type:h,listener:y=ts(l,y)}},I=function(l,a,u,n){gi(l,l,a),l.nodeName?ic[a](l,u,n):l[a](u,n)},$={on:function(){for(var l=this,a=arguments.length,u=new Array(a),n=0;n<a;n++)u[n]=arguments[n];var o=R(this,u,"on"),h=o.isTargetingSelf,y=o.target,S=o.type,x=o.listener;if(I(y,"on",S,x),!h){var V=function(){return l.off(y,S,x)};V.guid=x.guid;var re=function(){return l.off("dispose",V)};re.guid=x.guid,I(this,"on","dispose",V),I(y,"on","dispose",re)}},one:function(){for(var l=this,a=arguments.length,u=new Array(a),n=0;n<a;n++)u[n]=arguments[n];var o=R(this,u,"one"),y=o.target,S=o.type,x=o.listener;if(o.isTargetingSelf)I(y,"one",S,x);else{var V=function re(){l.off(y,S,re);for(var ee=arguments.length,De=new Array(ee),ze=0;ze<ee;ze++)De[ze]=arguments[ze];x.apply(null,De)};V.guid=x.guid,I(y,"one",S,V)}},any:function(){for(var l=this,a=arguments.length,u=new Array(a),n=0;n<a;n++)u[n]=arguments[n];var o=R(this,u,"any"),y=o.target,S=o.type,x=o.listener;if(o.isTargetingSelf)I(y,"any",S,x);else{var V=function re(){l.off(y,S,re);for(var ee=arguments.length,De=new Array(ee),ze=0;ze<ee;ze++)De[ze]=arguments[ze];x.apply(null,De)};V.guid=x.guid,I(y,"any",S,V)}},off:function(l,a,u){if(!l||qd(l))so(this.eventBusEl_,l,a);else{var n=l,o=a;gi(n,this,"off"),Fn(o,this,"off"),k(u,this,"off"),u=ts(this,u),this.off("dispose",u),n.nodeName?(so(n,o,u),so(n,"dispose",u)):bo(n)&&(n.off(o,u),n.off("dispose",u))}},trigger:function(l,a){if(gi(this.eventBusEl_,this,"trigger"),!qd(l&&"string"!=typeof l?l.type:l)){var n="Invalid event type for "+vr(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!l)throw new Error(n);(this.log||Ln).error(n)}return ru(this.eventBusEl_,l,a)}};function de(m,l){void 0===l&&(l={});var u=l.eventBusKey;if(u){if(!m[u].nodeName)throw new Error('The eventBusKey "'+u+'" does not refer to an element.');m.eventBusEl_=m[u]}else m.eventBusEl_=wt("span",{className:"vjs-event-bus"});return Yr(m,$),m.eventedCallbacks&&m.eventedCallbacks.forEach(function(n){n()}),m.on("dispose",function(){m.off(),[m,m.el_,m.eventBusEl_].forEach(function(n){n&&Sn.has(n)&&Sn.delete(n)}),ge().setTimeout(function(){m.eventBusEl_=null},0)}),m}var Le={state:{},setState:function(l){var u,a=this;return"function"==typeof l&&(l=l()),Gs(l,function(n,o){a.state[o]!==n&&((u=u||{})[o]={from:a.state[o],to:n}),a.state[o]=n}),u&&bo(this)&&this.trigger({changes:u,type:"statechanged"}),u}};function Ue(m,l){return Yr(m,Le),m.state=Yr({},m.state,l),"function"==typeof m.handleStateChanged&&bo(m)&&m.on("statechanged",m.handleStateChanged),m}var Mt=function(l){return"string"!=typeof l?l:l.replace(/./,function(a){return a.toLowerCase()})},sn=function(l){return"string"!=typeof l?l:l.replace(/./,function(a){return a.toUpperCase()})};function jn(){for(var m={},l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return a.forEach(function(n){n&&Gs(n,function(o,h){vo(o)?(vo(m[h])||(m[h]={}),m[h]=jn(m[h],o)):m[h]=o})}),m}var Li=function(){function m(){this.map_={}}var l=m.prototype;return l.has=function(u){return u in this.map_},l.delete=function(u){var n=this.has(u);return delete this.map_[u],n},l.set=function(u,n){return this.map_[u]=n,this},l.forEach=function(u,n){for(var o in this.map_)u.call(n,this.map_[o],o,this)},m}(),Vo=ge().Map?ge().Map:Li,Ta=function(){function m(){this.set_={}}var l=m.prototype;return l.has=function(u){return u in this.set_},l.delete=function(u){var n=this.has(u);return delete this.set_[u],n},l.add=function(u){return this.set_[u]=1,this},l.forEach=function(u,n){for(var o in this.set_)u.call(n,o,o,this)},m}(),gu=ge().Set?ge().Set:Ta,Je=function(){function m(a,u,n){if(this.player_=!a&&this.play?a=this:a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=jn({},this.options_),u=this.options_=jn(this.options_,u),this.id_=u.id||u.el&&u.el.id,!this.id_){var o=a&&a.id&&a.id()||"no_player";this.id_=o+"_component_"+lr()}this.name_=u.name||null,u.el?this.el_=u.el:!1!==u.createEl&&(this.el_=this.createEl()),!1!==u.evented&&(de(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ue(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new gu,this.setIntervalIds_=new gu,this.rafIds_=new gu,this.namedRafs_=new Vo,this.clearingTimersOnDispose_=!1,!1!==u.initChildren&&this.initChildren(),this.ready(n),!1!==u.reportTouchActivity&&this.enableTouchActivity()}var l=m.prototype;return l.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var u=this.children_.length-1;u>=0;u--)this.children_[u].dispose&&this.children_[u].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},l.isDisposed=function(){return!!this.isDisposed_},l.player=function(){return this.player_},l.options=function(u){return u?(this.options_=jn(this.options_,u),this.options_):this.options_},l.el=function(){return this.el_},l.createEl=function(u,n,o){return wt(u,n,o)},l.localize=function(u,n,o){void 0===o&&(o=u);var h=this.player_.language&&this.player_.language(),y=this.player_.languages&&this.player_.languages(),S=y&&y[h],x=h&&h.split("-")[0],V=y&&y[x],re=o;return S&&S[u]?re=S[u]:V&&V[u]&&(re=V[u]),n&&(re=re.replace(/\{(\d+)\}/g,function(ee,De){var ze=n[De-1],Ve=ze;return typeof ze>"u"&&(Ve=ee),Ve})),re},l.handleLanguagechange=function(){},l.contentEl=function(){return this.contentEl_||this.el_},l.id=function(){return this.id_},l.name=function(){return this.name_},l.children=function(){return this.children_},l.getChildById=function(u){return this.childIndex_[u]},l.getChild=function(u){if(u)return this.childNameIndex_[u]},l.getDescendant=function(){for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];n=n.reduce(function(S,x){return S.concat(x)},[]);for(var h=this,y=0;y<n.length;y++)if(!(h=h.getChild(n[y]))||!h.getChild)return;return h},l.addChild=function(u,n,o){var h,y;if(void 0===n&&(n={}),void 0===o&&(o=this.children_.length),"string"==typeof u){y=sn(u);var S=n.componentClass||y;n.name=y;var x=m.getComponent(S);if(!x)throw new Error("Component "+S+" does not exist");if("function"!=typeof x)return null;h=new x(this.player_||this,n)}else h=u;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(o,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(y=y||h.name&&sn(h.name()))&&(this.childNameIndex_[y]=h,this.childNameIndex_[Mt(y)]=h),"function"==typeof h.el&&h.el()){var V=null;this.children_[o+1]&&(this.children_[o+1].el_?V=this.children_[o+1].el_:K(this.children_[o+1])&&(V=this.children_[o+1])),this.contentEl().insertBefore(h.el(),V)}return h},l.removeChild=function(u){if("string"==typeof u&&(u=this.getChild(u)),u&&this.children_){for(var n=!1,o=this.children_.length-1;o>=0;o--)if(this.children_[o]===u){n=!0,this.children_.splice(o,1);break}if(n){u.parentComponent_=null,this.childIndex_[u.id()]=null,this.childNameIndex_[sn(u.name())]=null,this.childNameIndex_[Mt(u.name())]=null;var h=u.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(u.el())}}},l.initChildren=function(){var u=this,n=this.options_.children;if(n){var y,o=this.options_,S=m.getComponent("Tech");(y=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(x){return!y.some(function(V){return"string"==typeof V?x===V:x===V.name})})).map(function(x){var V,re;return"string"==typeof x?re=n[V=x]||u.options_[V]||{}:(V=x.name,re=x),{name:V,opts:re}}).filter(function(x){var V=m.getComponent(x.opts.componentClass||sn(x.name));return V&&!S.isTech(V)}).forEach(function(V){var re=V.name,ee=V.opts;if(void 0!==o[re]&&(ee=o[re]),!1!==ee){!0===ee&&(ee={}),ee.playerOptions=u.options_.playerOptions;var De=u.addChild(re,ee);De&&(u[re]=De)}})}},l.buildCSSClass=function(){return""},l.ready=function(u,n){if(void 0===n&&(n=!1),u){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(u);n?u.call(this):this.setTimeout(u,1)}},l.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var u=this.readyQueue_;this.readyQueue_=[],u&&u.length>0&&u.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)},l.$=function(u,n){return ra(u,n||this.contentEl())},l.$$=function(u,n){return vn(u,n||this.contentEl())},l.hasClass=function(u){return Ci(this.el_,u)},l.addClass=function(u){Pr(this.el_,u)},l.removeClass=function(u){Vr(this.el_,u)},l.toggleClass=function(u,n){wr(this.el_,u,n)},l.show=function(){this.removeClass("vjs-hidden")},l.hide=function(){this.addClass("vjs-hidden")},l.lockShowing=function(){this.addClass("vjs-lock-showing")},l.unlockShowing=function(){this.removeClass("vjs-lock-showing")},l.getAttribute=function(u){return Ki(this.el_,u)},l.setAttribute=function(u,n){Ws(this.el_,u,n)},l.removeAttribute=function(u){ur(this.el_,u)},l.width=function(u,n){return this.dimension("width",u,n)},l.height=function(u,n){return this.dimension("height",u,n)},l.dimensions=function(u,n){this.width(u,!0),this.height(n)},l.dimension=function(u,n,o){if(void 0!==n)return(null===n||n!=n)&&(n=0),this.el_.style[u]=-1!==(""+n).indexOf("%")||-1!==(""+n).indexOf("px")?n:"auto"===n?"":n+"px",void(o||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[u],y=h.indexOf("px");return parseInt(-1!==y?h.slice(0,y):this.el_["offset"+sn(u)],10)},l.currentDimension=function(u){var n=0;if("width"!==u&&"height"!==u)throw new Error("currentDimension only accepts width or height value");if(n=Wo(this.el_,u),0===(n=parseFloat(n))||isNaN(n)){var o="offset"+sn(u);n=this.el_[o]}return n},l.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},l.currentWidth=function(){return this.currentDimension("width")},l.currentHeight=function(){return this.currentDimension("height")},l.focus=function(){this.el_.focus()},l.blur=function(){this.el_.blur()},l.handleKeyDown=function(u){this.player_&&(u.stopPropagation(),this.player_.handleKeyDown(u))},l.handleKeyPress=function(u){this.handleKeyDown(u)},l.emitTapEvents=function(){var y,u=0,n=null;this.on("touchstart",function(x){1===x.touches.length&&(n={pageX:x.touches[0].pageX,pageY:x.touches[0].pageY},u=ge().performance.now(),y=!0)}),this.on("touchmove",function(x){if(x.touches.length>1)y=!1;else if(n){var V=x.touches[0].pageX-n.pageX,re=x.touches[0].pageY-n.pageY;Math.sqrt(V*V+re*re)>10&&(y=!1)}});var S=function(){y=!1};this.on("touchleave",S),this.on("touchcancel",S),this.on("touchend",function(x){n=null,!0===y&&ge().performance.now()-u<200&&(x.preventDefault(),this.trigger("tap"))})},l.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var n,u=ts(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){u(),this.clearInterval(n),n=this.setInterval(u,250)});var o=function(y){u(),this.clearInterval(n)};this.on("touchmove",u),this.on("touchend",o),this.on("touchcancel",o)}},l.setTimeout=function(u,n){var h,o=this;return u=ts(this,u),this.clearTimersOnDispose_(),h=ge().setTimeout(function(){o.setTimeoutIds_.has(h)&&o.setTimeoutIds_.delete(h),u()},n),this.setTimeoutIds_.add(h),h},l.clearTimeout=function(u){return this.setTimeoutIds_.has(u)&&(this.setTimeoutIds_.delete(u),ge().clearTimeout(u)),u},l.setInterval=function(u,n){u=ts(this,u),this.clearTimersOnDispose_();var o=ge().setInterval(u,n);return this.setIntervalIds_.add(o),o},l.clearInterval=function(u){return this.setIntervalIds_.has(u)&&(this.setIntervalIds_.delete(u),ge().clearInterval(u)),u},l.requestAnimationFrame=function(u){var o,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),u=ts(this,u),o=ge().requestAnimationFrame(function(){n.rafIds_.has(o)&&n.rafIds_.delete(o),u()}),this.rafIds_.add(o),o):this.setTimeout(u,1e3/60)},l.requestNamedAnimationFrame=function(u,n){var o=this;if(!this.namedRafs_.has(u)){this.clearTimersOnDispose_(),n=ts(this,n);var h=this.requestAnimationFrame(function(){n(),o.namedRafs_.has(u)&&o.namedRafs_.delete(u)});return this.namedRafs_.set(u,h),u}},l.cancelNamedAnimationFrame=function(u){this.namedRafs_.has(u)&&(this.cancelAnimationFrame(this.namedRafs_.get(u)),this.namedRafs_.delete(u))},l.cancelAnimationFrame=function(u){return this.supportsRaf_?(this.rafIds_.has(u)&&(this.rafIds_.delete(u),ge().cancelAnimationFrame(u)),u):this.clearTimeout(u)},l.clearTimersOnDispose_=function(){var u=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(n){var h=n[1];u[n[0]].forEach(function(y,S){return u[h](S)})}),u.clearingTimersOnDispose_=!1}))},m.registerComponent=function(u,n){if("string"!=typeof u||!u)throw new Error('Illegal component name, "'+u+'"; must be a non-empty string.');var o=m.getComponent("Tech"),h=o&&o.isTech(n),y=m===n||m.prototype.isPrototypeOf(n.prototype);if(h||!y)throw new Error('Illegal component, "'+u+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");u=sn(u),m.components_||(m.components_={});var x=m.getComponent("Player");if("Player"===u&&x&&x.players){var V=x.players,re=Object.keys(V);if(V&&re.length>0&&re.map(function(ee){return V[ee]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return m.components_[u]=n,m.components_[Mt(u)]=n,n},m.getComponent=function(u){if(u&&m.components_)return m.components_[u]},m}();function Ls(m,l,a,u){return function Al(m,l,a){if("number"!=typeof l||l<0||l>a)throw new Error("Failed to execute '"+m+"' on 'TimeRanges': The index provided ("+l+") is non-numeric or out of bounds (0-"+a+").")}(m,u,a.length-1),a[u][l]}function sc(m){var l;return l=void 0===m||0===m.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:m.length,start:Ls.bind(null,"start",0,m),end:Ls.bind(null,"end",1,m)},ge().Symbol&&ge().Symbol.iterator&&(l[ge().Symbol.iterator]=function(){return(m||[]).values()}),l}function Fa(m,l){return Array.isArray(m)?sc(m):void 0===m||void 0===l?sc():sc([[m,l]])}function qu(m,l){var u,n,a=0;if(!l)return 0;(!m||!m.length)&&(m=Fa(0,0));for(var o=0;o<m.length;o++)u=m.start(o),(n=m.end(o))>l&&(n=l),a+=n-u;return a/l}function Do(m){if(m instanceof Do)return m;"number"==typeof m?this.code=m:"string"==typeof m?this.message=m:zs(m)&&("number"==typeof m.code&&(this.code=m.code),Yr(this,m)),this.message||(this.message=Do.defaultMessages[this.code]||"")}Je.prototype.supportsRaf_="function"==typeof ge().requestAnimationFrame&&"function"==typeof ge().cancelAnimationFrame,Je.registerComponent("Component",Je),Do.prototype.code=0,Do.prototype.message="",Do.prototype.status=null,Do.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Do.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ja=0;ja<Do.errorTypes.length;ja++)Do[Do.errorTypes[ja]]=ja,Do.prototype[Do.errorTypes[ja]]=ja;function Ml(m){return null!=m&&"function"==typeof m.then}function Ya(m){Ml(m)&&m.then(null,function(l){})}var Kd=function(l){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(u,n,o){return l[n]&&(u[n]=l[n]),u},{cues:l.cues&&Array.prototype.map.call(l.cues,function(u){return{startTime:u.startTime,endTime:u.endTime,text:u.text,id:u.id}})})},kl="vjs-modal-dialog",Du=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).handleKeyDown_=function(h){return o.handleKeyDown(h)},o.close_=function(h){return o.close(h)},o.opened_=o.hasBeenOpened_=o.hasBeenFilled_=!1,o.closeable(!o.options_.uncloseable),o.content(o.options_.content),o.contentEl_=wt("div",{className:kl+"-content"},{role:"document"}),o.descEl_=wt("p",{className:kl+"-description vjs-control-text",id:o.el().getAttribute("aria-describedby")}),en(o.descEl_,o.description()),o.el_.appendChild(o.descEl_),o.el_.appendChild(o.contentEl_),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,m.prototype.dispose.call(this)},a.buildCSSClass=function(){return kl+" vjs-hidden "+m.prototype.buildCSSClass.call(this)},a.label=function(){return this.localize(this.options_.label||"Modal Window")},a.description=function(){var n=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(n+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),n},a.open=function(){if(!this.opened_){var n=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!n.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&n.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=n.controls(),n.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},a.opened=function(n){return"boolean"==typeof n&&this[n?"open":"close"](),this.opened_},a.close=function(){if(this.opened_){var n=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&n.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&n.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function(n){if("boolean"==typeof n){var o=this.closeable_=!!n,h=this.getChild("closeButton");if(o&&!h){var y=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=y,this.on(h,"close",this.close_)}!o&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},a.fill=function(){this.fillWith(this.content())},a.fillWith=function(n){var o=this.contentEl(),h=o.parentNode,y=o.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(o),this.empty(),Rc(o,n),this.trigger("modalfill"),y?h.insertBefore(o,y):h.appendChild(o);var S=this.getChild("closeButton");S&&h.appendChild(S.el_)},a.empty=function(){this.trigger("beforemodalempty"),Ra(this.contentEl()),this.trigger("modalempty")},a.content=function(n){return typeof n<"u"&&(this.content_=n),this.content_},a.conditionalFocus_=function(){var n=Ze().activeElement,o=this.player_.el_;this.previouslyActiveEl_=null,(o.contains(n)||o===n)&&(this.previouslyActiveEl_=n,this.focus())},a.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},a.handleKeyDown=function(n){if(n.stopPropagation(),Ae().isEventKey(n,"Escape")&&this.closeable())return n.preventDefault(),void this.close();if(Ae().isEventKey(n,"Tab")){for(var y,o=this.focusableEls_(),h=this.el_.querySelector(":focus"),S=0;S<o.length;S++)if(h===o[S]){y=S;break}Ze().activeElement===this.el_&&(y=0),n.shiftKey&&0===y?(o[o.length-1].focus(),n.preventDefault()):!n.shiftKey&&y===o.length-1&&(o[0].focus(),n.preventDefault())}},a.focusableEls_=function(){var n=this.el_.querySelectorAll("*");return Array.prototype.filter.call(n,function(o){return(o instanceof ge().HTMLAnchorElement||o instanceof ge().HTMLAreaElement)&&o.hasAttribute("href")||(o instanceof ge().HTMLInputElement||o instanceof ge().HTMLSelectElement||o instanceof ge().HTMLTextAreaElement||o instanceof ge().HTMLButtonElement)&&!o.hasAttribute("disabled")||o instanceof ge().HTMLIFrameElement||o instanceof ge().HTMLObjectElement||o instanceof ge().HTMLEmbedElement||o.hasAttribute("tabindex")&&-1!==o.getAttribute("tabindex")||o.hasAttribute("contenteditable")})},l}(Je);Du.prototype.options_={pauseOnOpen:!0,temporary:!0},Je.registerComponent("ModalDialog",Du);var Fs=function(m){function l(u){var n;void 0===u&&(u=[]),(n=m.call(this)||this).tracks_=[],Object.defineProperty(et(n),"length",{get:function(){return this.tracks_.length}});for(var o=0;o<u.length;o++)n.addTrack(u[o]);return n}W(l,m);var a=l.prototype;return a.addTrack=function(n){var o=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(n)&&(this.tracks_.push(n),this.trigger({track:n,type:"addtrack",target:this})),n.labelchange_=function(){o.trigger({track:n,type:"labelchange",target:o})},bo(n)&&n.addEventListener("labelchange",n.labelchange_)},a.removeTrack=function(n){for(var o,h=0,y=this.length;h<y;h++)if(this[h]===n){(o=this[h]).off&&o.off(),this.tracks_.splice(h,1);break}o&&this.trigger({track:o,type:"removetrack",target:this})},a.getTrackById=function(n){for(var o=null,h=0,y=this.length;h<y;h++){var S=this[h];if(S.id===n){o=S;break}}return o},l}(oo);for(var oc in Fs.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Fs.prototype.allowedEvents_)Fs.prototype["on"+oc]=null;var od=function(l,a){for(var u=0;u<l.length;u++)!Object.keys(l[u]).length||a.id===l[u].id||(l[u].enabled=!1)},Ao=function(m){function l(u){var n;void 0===u&&(u=[]);for(var o=u.length-1;o>=0;o--)if(u[o].enabled){od(u,u[o]);break}return(n=m.call(this,u)||this).changing_=!1,n}W(l,m);var a=l.prototype;return a.addTrack=function(n){var o=this;n.enabled&&od(this,n),m.prototype.addTrack.call(this,n),n.addEventListener&&(n.enabledChange_=function(){o.changing_||(o.changing_=!0,od(o,n),o.changing_=!1,o.trigger("change"))},n.addEventListener("enabledchange",n.enabledChange_))},a.removeTrack=function(n){m.prototype.removeTrack.call(this,n),n.removeEventListener&&n.enabledChange_&&(n.removeEventListener("enabledchange",n.enabledChange_),n.enabledChange_=null)},l}(Fs),ac=function(l,a){for(var u=0;u<l.length;u++)!Object.keys(l[u]).length||a.id===l[u].id||(l[u].selected=!1)},ad=function(m){function l(u){var n;void 0===u&&(u=[]);for(var o=u.length-1;o>=0;o--)if(u[o].selected){ac(u,u[o]);break}return(n=m.call(this,u)||this).changing_=!1,Object.defineProperty(et(n),"selectedIndex",{get:function(){for(var y=0;y<this.length;y++)if(this[y].selected)return y;return-1},set:function(){}}),n}W(l,m);var a=l.prototype;return a.addTrack=function(n){var o=this;n.selected&&ac(this,n),m.prototype.addTrack.call(this,n),n.addEventListener&&(n.selectedChange_=function(){o.changing_||(o.changing_=!0,ac(o,n),o.changing_=!1,o.trigger("change"))},n.addEventListener("selectedchange",n.selectedChange_))},a.removeTrack=function(n){m.prototype.removeTrack.call(this,n),n.removeEventListener&&n.selectedChange_&&(n.removeEventListener("selectedchange",n.selectedChange_),n.selectedChange_=null)},l}(Fs),mu=function(m){function l(){return m.apply(this,arguments)||this}W(l,m);var a=l.prototype;return a.addTrack=function(n){var o=this;m.prototype.addTrack.call(this,n),this.queueChange_||(this.queueChange_=function(){return o.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return o.trigger("selectedlanguagechange")}),n.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(n.kind)&&n.addEventListener("modechange",this.triggerSelectedlanguagechange_)},a.removeTrack=function(n){m.prototype.removeTrack.call(this,n),n.removeEventListener&&(this.queueChange_&&n.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&n.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},l}(Fs),Fh=function(){function m(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var u=0,n=a.length;u<n;u++)this.addTrackElement_(a[u])}var l=m.prototype;return l.addTrackElement_=function(u){var n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.trackElements_[n]}}),-1===this.trackElements_.indexOf(u)&&this.trackElements_.push(u)},l.getTrackElementByTrack_=function(u){for(var n,o=0,h=this.trackElements_.length;o<h;o++)if(u===this.trackElements_[o].track){n=this.trackElements_[o];break}return n},l.removeTrackElement_=function(u){for(var n=0,o=this.trackElements_.length;n<o;n++)if(u===this.trackElements_[n]){this.trackElements_[n].track&&"function"==typeof this.trackElements_[n].track.off&&this.trackElements_[n].track.off(),"function"==typeof this.trackElements_[n].off&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}},m}(),Zd=function(){function m(a){m.prototype.setCues_.call(this,a),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var l=m.prototype;return l.setCues_=function(u){var n=this.length||0,o=0,h=u.length;this.cues_=u,this.length_=u.length;var y=function(x){""+x in this||Object.defineProperty(this,""+x,{get:function(){return this.cues_[x]}})};if(n<h)for(o=n;o<h;o++)y.call(this,o)},l.getCueById=function(u){for(var n=null,o=0,h=this.length;o<h;o++){var y=this[o];if(y.id===u){n=y;break}}return n},m}(),ud={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Yd={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ld={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},uc={disabled:"disabled",hidden:"hidden",showing:"showing"},Nf=function(m){function l(a){var u;void 0===a&&(a={}),u=m.call(this)||this;var n={id:a.id||"vjs_track_"+lr(),kind:a.kind||"",language:a.language||""},o=a.label||"",h=function(x){Object.defineProperty(et(u),x,{get:function(){return n[x]},set:function(){}})};for(var y in n)h(y);return Object.defineProperty(et(u),"label",{get:function(){return o},set:function(x){x!==o&&(o=x,this.trigger("labelchange"))}}),u}return W(l,m),l}(oo),Lc=function(l){var a=["protocol","hostname","port","pathname","search","hash","host"],u=Ze().createElement("a");u.href=l;for(var n={},o=0;o<a.length;o++)n[a[o]]=u[a[o]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=ge().location.protocol),n.host||(n.host=ge().location.host),n},Qd=function(l){if(!l.match(/^https?:\/\//)){var a=Ze().createElement("a");a.href=l,l=a.href}return l},cd=function(l){if("string"==typeof l){var u=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(l);if(u)return u.pop().toLowerCase()}return""},Fc=function(l,a){void 0===a&&(a=ge().location);var u=Lc(l);return(":"===u.protocol?a.protocol:u.protocol)+u.host!==a.protocol+a.host},Mg=Object.freeze({__proto__:null,parseUrl:Lc,getAbsoluteURL:Qd,getFileExtension:cd,isCrossOrigin:Fc}),lc=function(l,a){var u=new(ge().WebVTT.Parser)(ge(),ge().vttjs,ge().WebVTT.StringDecoder()),n=[];u.oncue=function(o){a.addCue(o)},u.onparsingerror=function(o){n.push(o)},u.onflush=function(){a.trigger({type:"loadeddata",target:a})},u.parse(l),n.length>0&&(ge().console&&ge().console.groupCollapsed&&ge().console.groupCollapsed("Text Track parsing errors for "+a.src),n.forEach(function(o){return Ln.error(o)}),ge().console&&ge().console.groupEnd&&ge().console.groupEnd()),u.flush()},Pl=function(l,a){var u={uri:l},n=Fc(l);n&&(u.cors=n);var o="use-credentials"===a.tech_.crossOrigin();o&&(u.withCredentials=o),Y()(u,ts(this,function(h,y,S){if(h)return Ln.error(h,y);a.loaded_=!0,"function"!=typeof ge().WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],function(x){if("vttjserror"!==x.type)return lc(S,a);Ln.error("vttjs failed to load, stopping trying to process "+a.src)}):lc(S,a)}))},cc=function(m){function l(u){var n;if(void 0===u&&(u={}),!u.tech)throw new Error("A tech was not provided.");var o=jn(u,{kind:ld[u.kind]||"subtitles",language:u.language||u.srclang||""}),h=uc[o.mode]||"disabled",y=o.default;("metadata"===o.kind||"chapters"===o.kind)&&(h="hidden"),(n=m.call(this,o)||this).tech_=o.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var S=new Zd(n.cues_),x=new Zd(n.activeCues_),V=!1,re=ts(et(n),function(){!this.tech_.isReady_||this.tech_.isDisposed()||(this.activeCues=this.activeCues,V&&(this.trigger("cuechange"),V=!1))});return n.tech_.one("dispose",function(){n.tech_.off("timeupdate",re)}),"disabled"!==h&&n.tech_.on("timeupdate",re),Object.defineProperties(et(n),{default:{get:function(){return y},set:function(){}},mode:{get:function(){return h},set:function(ze){uc[ze]&&h!==ze&&(h=ze,!this.preload_&&"disabled"!==h&&0===this.cues.length&&Pl(this.src,this),this.tech_.off("timeupdate",re),"disabled"!==h&&this.tech_.on("timeupdate",re),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?S:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return x;for(var ze=this.tech_.currentTime(),Ve=[],Be=0,Wt=this.cues.length;Be<Wt;Be++){var Lt=this.cues[Be];(Lt.startTime<=ze&&Lt.endTime>=ze||Lt.startTime===Lt.endTime&&Lt.startTime<=ze&&Lt.startTime+.5>=ze)&&Ve.push(Lt)}if(V=!1,Ve.length!==this.activeCues_.length)V=!0;else for(var cn=0;cn<Ve.length;cn++)-1===this.activeCues_.indexOf(Ve[cn])&&(V=!0);return this.activeCues_=Ve,x.setCues_(this.activeCues_),x},set:function(){}}}),o.src?(n.src=o.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==o.kind&&"captions"!==o.kind)&&Pl(n.src,et(n))):n.loaded_=!0,n}W(l,m);var a=l.prototype;return a.addCue=function(n){var o=n;if(ge().vttjs&&!(n instanceof ge().vttjs.VTTCue)){for(var h in o=new(ge().vttjs.VTTCue)(n.startTime,n.endTime,n.text),n)h in o||(o[h]=n[h]);o.id=n.id,o.originalCue_=n}for(var y=this.tech_.textTracks(),S=0;S<y.length;S++)y[S]!==this&&y[S].removeCue(o);this.cues_.push(o),this.cues.setCues_(this.cues_)},a.removeCue=function(n){for(var o=this.cues_.length;o--;){var h=this.cues_[o];if(h===n||h.originalCue_&&h.originalCue_===n){this.cues_.splice(o,1),this.cues.setCues_(this.cues_);break}}},l}(Nf);cc.prototype.allowedEvents_={cuechange:"cuechange"};var dd=function(m){function l(a){var u;void 0===a&&(a={});var n=jn(a,{kind:Yd[a.kind]||""});u=m.call(this,n)||this;var o=!1;return Object.defineProperty(et(u),"enabled",{get:function(){return o},set:function(y){"boolean"!=typeof y||y===o||(o=y,this.trigger("enabledchange"))}}),n.enabled&&(u.enabled=n.enabled),u.loaded_=!0,u}return W(l,m),l}(Nf),jh=function(m){function l(a){var u;void 0===a&&(a={});var n=jn(a,{kind:ud[a.kind]||""});u=m.call(this,n)||this;var o=!1;return Object.defineProperty(et(u),"selected",{get:function(){return o},set:function(y){"boolean"!=typeof y||y===o||(o=y,this.trigger("selectedchange"))}}),n.selected&&(u.selected=n.selected),u}return W(l,m),l}(Nf),ao=function(m){function l(a){var u;void 0===a&&(a={}),u=m.call(this)||this;var n,o=new cc(a);return u.kind=o.kind,u.src=o.src,u.srclang=o.language,u.label=o.label,u.default=o.default,Object.defineProperties(et(u),{readyState:{get:function(){return n}},track:{get:function(){return o}}}),n=0,o.addEventListener("loadeddata",function(){n=2,u.trigger({type:"load",target:et(u)})}),u}return W(l,m),l}(oo);ao.prototype.allowedEvents_={load:"load"},ao.NONE=0,ao.LOADING=1,ao.LOADED=2,ao.ERROR=3;var iu={audio:{ListClass:Ao,TrackClass:dd,capitalName:"Audio"},video:{ListClass:ad,TrackClass:jh,capitalName:"Video"},text:{ListClass:mu,TrackClass:cc,capitalName:"Text"}};Object.keys(iu).forEach(function(m){iu[m].getterName=m+"Tracks",iu[m].privateName=m+"Tracks_"});var ia={remoteText:{ListClass:mu,TrackClass:cc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Fh,TrackClass:ao,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Eo=rt({},iu,ia);ia.names=Object.keys(ia),iu.names=Object.keys(iu),Eo.names=[].concat(ia.names).concat(iu.names);var ki=function(m){function l(u,n){var o;return void 0===u&&(u={}),void 0===n&&(n=function(){}),u.reportTouchActivity=!1,(o=m.call(this,null,u,n)||this).onDurationChange_=function(h){return o.onDurationChange(h)},o.trackProgress_=function(h){return o.trackProgress(h)},o.trackCurrentTime_=function(h){return o.trackCurrentTime(h)},o.stopTrackingCurrentTime_=function(h){return o.stopTrackingCurrentTime(h)},o.disposeSourceHandler_=function(h){return o.disposeSourceHandler(h)},o.hasStarted_=!1,o.on("playing",function(){this.hasStarted_=!0}),o.on("loadstart",function(){this.hasStarted_=!1}),Eo.names.forEach(function(h){var y=Eo[h];u&&u[y.getterName]&&(o[y.privateName]=u[y.getterName])}),o.featuresProgressEvents||o.manualProgressOn(),o.featuresTimeupdateEvents||o.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===u["native"+h+"Tracks"]&&(o["featuresNative"+h+"Tracks"]=!1)}),!1===u.nativeCaptions||!1===u.nativeTextTracks?o.featuresNativeTextTracks=!1:(!0===u.nativeCaptions||!0===u.nativeTextTracks)&&(o.featuresNativeTextTracks=!0),o.featuresNativeTextTracks||o.emulateTextTracks(),o.preloadTextTracks=!1!==u.preloadTextTracks,o.autoRemoteTextTracks_=new Eo.text.ListClass,o.initTrackListeners(),u.nativeControlsForTouch||o.emitTapEvents(),o.constructor&&(o.name_=o.constructor.name||"Unknown Tech"),o}W(l,m);var a=l.prototype;return a.triggerSourceset=function(n){var o=this;this.isReady_||this.one("ready",function(){return o.setTimeout(function(){return o.triggerSourceset(n)},1)}),this.trigger({src:n,type:"sourceset"})},a.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},a.trackProgress=function(n){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ts(this,function(){var o=this.bufferedPercent();this.bufferedPercent_!==o&&this.trigger("progress"),this.bufferedPercent_=o,1===o&&this.stopTrackingProgress()}),500)},a.onDurationChange=function(n){this.duration_=this.duration()},a.buffered=function(){return Fa(0,0)},a.bufferedPercent=function(){return qu(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(iu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),m.prototype.dispose.call(this)},a.clearTracks=function(n){var o=this;(n=[].concat(n)).forEach(function(h){for(var y=o[h+"Tracks"]()||[],S=y.length;S--;){var x=y[S];"text"===h&&o.removeRemoteTextTrack(x),y.removeTrack(x)}})},a.cleanupAutoTextTracks=function(){for(var n=this.autoRemoteTextTracks_||[],o=n.length;o--;)this.removeRemoteTextTrack(n[o])},a.reset=function(){},a.crossOrigin=function(){},a.setCrossOrigin=function(){},a.error=function(n){return void 0!==n&&(this.error_=new Do(n),this.trigger("error")),this.error_},a.played=function(){return this.hasStarted_?Fa(0,0):Fa()},a.play=function(){},a.setScrubbing=function(){},a.scrubbing=function(){},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var n=this;iu.names.forEach(function(o){var y=function(){n.trigger(o+"trackchange")},S=n[iu[o].getterName]();S.addEventListener("removetrack",y),S.addEventListener("addtrack",y),n.on("dispose",function(){S.removeEventListener("removetrack",y),S.removeEventListener("addtrack",y)})})},a.addWebVttScript_=function(){var n=this;if(!ge().WebVTT)if(Ze().body.contains(this.el())){if(!this.options_["vtt.js"]&&vo(Fe())&&Object.keys(Fe()).length>0)return void this.trigger("vttjsloaded");var o=Ze().createElement("script");o.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",o.onload=function(){n.trigger("vttjsloaded")},o.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){o.onload=null,o.onerror=null}),ge().WebVTT=!0,this.el().parentNode.appendChild(o)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){var n=this,o=this.textTracks(),h=this.remoteTextTracks(),y=function(ee){return o.addTrack(ee.track)},S=function(ee){return o.removeTrack(ee.track)};h.on("addtrack",y),h.on("removetrack",S),this.addWebVttScript_();var x=function(){return n.trigger("texttrackchange")},V=function(){x();for(var ee=0;ee<o.length;ee++){var De=o[ee];De.removeEventListener("cuechange",x),"showing"===De.mode&&De.addEventListener("cuechange",x)}};V(),o.addEventListener("change",V),o.addEventListener("addtrack",V),o.addEventListener("removetrack",V),this.on("dispose",function(){h.off("addtrack",y),h.off("removetrack",S),o.removeEventListener("change",V),o.removeEventListener("addtrack",V),o.removeEventListener("removetrack",V);for(var re=0;re<o.length;re++)o[re].removeEventListener("cuechange",x)})},a.addTextTrack=function(n,o,h){if(!n)throw new Error("TextTrack kind is required but was not provided");return function Wi(m,l,a,u,n){void 0===n&&(n={});var o=m.textTracks();n.kind=l,a&&(n.label=a),u&&(n.language=u),n.tech=m;var h=new Eo.text.TrackClass(n);return o.addTrack(h),h}(this,n,o,h)},a.createRemoteTextTrack=function(n){var o=jn(n,{tech:this});return new ia.remoteTextEl.TrackClass(o)},a.addRemoteTextTrack=function(n,o){var h=this;void 0===n&&(n={});var y=this.createRemoteTextTrack(n);return!0!==o&&!1!==o&&(Ln.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),o=!0),this.remoteTextTrackEls().addTrackElement_(y),this.remoteTextTracks().addTrack(y.track),!0!==o&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(y.track)}),y},a.removeRemoteTextTrack=function(n){var o=this.remoteTextTrackEls().getTrackElementByTrack_(n);this.remoteTextTrackEls().removeTrackElement_(o),this.remoteTextTracks().removeTrack(n),this.autoRemoteTextTracks_.removeTrack(n)},a.getVideoPlaybackQuality=function(){return{}},a.requestPictureInPicture=function(){var n=this.options_.Promise||ge().Promise;if(n)return n.reject()},a.disablePictureInPicture=function(){return!0},a.setDisablePictureInPicture=function(){},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return""},l.canPlayType=function(){return""},l.canPlaySource=function(n,o){return l.canPlayType(n.type)},l.isTech=function(n){return n.prototype instanceof l||n instanceof l||n===l},l.registerTech=function(n,o){if(l.techs_||(l.techs_={}),!l.isTech(o))throw new Error("Tech "+n+" must be a Tech");if(!l.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!l.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return n=sn(n),l.techs_[n]=o,l.techs_[Mt(n)]=o,"Tech"!==n&&l.defaultTechOrder_.push(n),o},l.getTech=function(n){if(n){if(l.techs_&&l.techs_[n])return l.techs_[n];if(n=sn(n),ge()&&ge().videojs&&ge().videojs[n])return Ln.warn("The "+n+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),ge().videojs[n]}},l}(Je);Eo.names.forEach(function(m){var l=Eo[m];ki.prototype[l.getterName]=function(){return this[l.privateName]=this[l.privateName]||new l.ListClass,this[l.privateName]}}),ki.prototype.featuresVolumeControl=!0,ki.prototype.featuresMuteControl=!0,ki.prototype.featuresFullscreenResize=!1,ki.prototype.featuresPlaybackRate=!1,ki.prototype.featuresProgressEvents=!1,ki.prototype.featuresSourceset=!1,ki.prototype.featuresTimeupdateEvents=!1,ki.prototype.featuresNativeTextTracks=!1,ki.withSourceHandlers=function(m){m.registerSourceHandler=function(a,u){var n=m.sourceHandlers;n||(n=m.sourceHandlers=[]),void 0===u&&(u=n.length),n.splice(u,0,a)},m.canPlayType=function(a){for(var n,u=m.sourceHandlers||[],o=0;o<u.length;o++)if(n=u[o].canPlayType(a))return n;return""},m.selectSourceHandler=function(a,u){for(var n=m.sourceHandlers||[],h=0;h<n.length;h++)if(n[h].canHandleSource(a,u))return n[h];return null},m.canPlaySource=function(a,u){var n=m.selectSourceHandler(a,u);return n?n.canHandleSource(a,u):""},["seekable","seeking","duration"].forEach(function(a){var u=this[a];"function"==typeof u&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):u.apply(this,arguments)})},m.prototype),m.prototype.setSource=function(a){var u=m.selectSourceHandler(a,this.options_);u||(m.nativeSourceHandler?u=m.nativeSourceHandler:Ln.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),u!==m.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=u.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},m.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Je.registerComponent("Tech",ki),ki.registerTech("Tech",ki),ki.defaultTechOrder_=[];var js={},ns={},Qa={};function sa(m,l,a){m.setTimeout(function(){return Ho(l,js[l.type],a,m)},1)}function Dp(m,l,a,u){void 0===u&&(u=null);var n="call"+sn(a),o=m.reduce(hd(n),u),h=o===Qa,y=h?null:l[a](o);return function Zu(m,l,a,u){for(var n=m.length-1;n>=0;n--){var o=m[n];o[l]&&o[l](u,a)}}(m,a,y,h),y}var Ol={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ko={setCurrentTime:1,setMuted:1,setVolume:1},Xa={play:1,pause:1};function hd(m){return function(l,a){return l===Qa?Qa:a[m]?a[m](l):l}}function Ho(m,l,a,u,n,o){void 0===m&&(m={}),void 0===l&&(l=[]),void 0===n&&(n=[]),void 0===o&&(o=!1);var y=l[0],S=l.slice(1);if("string"==typeof y)Ho(m,js[y],a,u,n,o);else if(y){var x=function Ip(m,l){var a=ns[m.id()],u=null;if(null==a)return u=l(m),ns[m.id()]=[[l,u]],u;for(var n=0;n<a.length;n++){var o=a[n];o[0]===l&&(u=o[1])}return null===u&&(u=l(m),a.push([l,u])),u}(u,y);if(!x.setSource)return n.push(x),Ho(m,S,a,u,n,o);x.setSource(Yr({},m),function(V,re){if(V)return Ho(m,S,a,u,n,o);n.push(x),Ho(re,m.type===re.type?S:js[re.type],a,u,n,o)})}else S.length?Ho(m,S,a,u,n,o):o?a(m,n):Ho(m,js["*"],a,u,n,!0)}var Ja={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Co=function(l){void 0===l&&(l="");var a=cd(l);return Ja[a.toLowerCase()]||""},Iu=function m(l){if(Array.isArray(l)){var a=[];l.forEach(function(u){u=m(u),Array.isArray(u)?a=a.concat(u):zs(u)&&a.push(u)}),l=a}else l="string"==typeof l&&l.trim()?[Rl({src:l})]:zs(l)&&"string"==typeof l.src&&l.src&&l.src.trim()?[Rl(l)]:[];return l};function Rl(m){if(!m.type){var l=Co(m.src);l&&(m.type=l)}return m}var su=function(m){function l(a,u,n){var o,h=jn({createEl:!1},u);if(o=m.call(this,a,h,n)||this,u.playerOptions.sources&&0!==u.playerOptions.sources.length)a.src(u.playerOptions.sources);else for(var y=0,S=u.playerOptions.techOrder;y<S.length;y++){var x=sn(S[y]),V=ki.getTech(x);if(x||(V=Je.getComponent(x)),V&&V.isSupported()){a.loadTech_(x);break}}return o}return W(l,m),l}(Je);Je.registerComponent("MediaLoader",su);var fd=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).handleMouseOver_=function(h){return o.handleMouseOver(h)},o.handleMouseOut_=function(h){return o.handleMouseOut(h)},o.handleClick_=function(h){return o.handleClick(h)},o.handleKeyDown_=function(h){return o.handleKeyDown(h)},o.emitTapEvents(),o.enable(),o}W(l,m);var a=l.prototype;return a.createEl=function(n,o,h){void 0===n&&(n="div"),void 0===o&&(o={}),void 0===h&&(h={}),o=Yr({className:this.buildCSSClass(),tabIndex:0},o),"button"===n&&Ln.error("Creating a ClickableComponent with an HTML element of "+n+" is not supported; use a Button instead."),h=Yr({role:"button"},h),this.tabIndex_=o.tabIndex;var y=wt(n,o,h);return y.appendChild(wt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(y),y},a.dispose=function(){this.controlTextEl_=null,m.prototype.dispose.call(this)},a.createControlTextEl=function(n){return this.controlTextEl_=wt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),n&&n.appendChild(this.controlTextEl_),this.controlText(this.controlText_,n),this.controlTextEl_},a.controlText=function(n,o){if(void 0===o&&(o=this.el()),void 0===n)return this.controlText_||"Need Text";var h=this.localize(n);this.controlText_=n,en(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&o.setAttribute("title",h)},a.buildCSSClass=function(){return"vjs-control vjs-button "+m.prototype.buildCSSClass.call(this)},a.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},a.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},a.handleLanguagechange=function(){this.controlText(this.controlText_)},a.handleClick=function(n){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},a.handleKeyDown=function(n){Ae().isEventKey(n,"Space")||Ae().isEventKey(n,"Enter")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):m.prototype.handleKeyDown.call(this,n)},l}(Je);Je.registerComponent("ClickableComponent",fd);var pd=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update(),o.update_=function(h){return o.update(h)},u.on("posterchange",o.update_),o}W(l,m);var a=l.prototype;return a.dispose=function(){this.player().off("posterchange",this.update_),m.prototype.dispose.call(this)},a.createEl=function(){return wt("div",{className:"vjs-poster",tabIndex:-1})},a.update=function(n){var o=this.player().poster();this.setSrc(o),o?this.show():this.hide()},a.setSrc=function(n){var o="";n&&(o='url("'+n+'")'),this.el_.style.backgroundImage=o},a.handleClick=function(n){if(this.player_.controls()){var o=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Cu||Oa)&&o)&&this.player_.tech(!0).focus(),this.player_.paused()?Ya(this.player_.play()):this.player_.pause()}},l}(fd);Je.registerComponent("PosterImage",pd);var ou="#222",H={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function fe(m,l){var a;if(4===m.length)a=m[1]+m[1]+m[2]+m[2]+m[3]+m[3];else{if(7!==m.length)throw new Error("Invalid color code provided, "+m+"; must be formatted as e.g. #f0e or #f604e2.");a=m.slice(1)}return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+l+")"}function We(m,l,a){try{m.style[l]=a}catch{return}}var yt=function(m){function l(u,n,o){var h;h=m.call(this,u,n,o)||this;var y=function(x){return h.updateDisplay(x)};return u.on("loadstart",function(S){return h.toggleDisplay(S)}),u.on("texttrackchange",y),u.on("loadedmetadata",function(S){return h.preselectTrack(S)}),u.ready(ts(et(h),function(){if(u.tech_&&u.tech_.featuresNativeTextTracks)this.hide();else{u.on("fullscreenchange",y),u.on("playerresize",y),ge().addEventListener("orientationchange",y),u.on("dispose",function(){return ge().removeEventListener("orientationchange",y)});for(var S=this.options_.playerOptions.tracks||[],x=0;x<S.length;x++)this.player_.addRemoteTextTrack(S[x],!0);this.preselectTrack()}})),h}W(l,m);var a=l.prototype;return a.preselectTrack=function(){for(var y,S,x,n={captions:1,subtitles:1},o=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,V=0;V<o.length;V++){var re=o[V];h&&h.enabled&&h.language&&h.language===re.language&&re.kind in n?re.kind===h.kind?x=re:x||(x=re):h&&!h.enabled?(x=null,y=null,S=null):re.default&&("descriptions"!==re.kind||y?re.kind in n&&!S&&(S=re):y=re)}x?x.mode="showing":S?S.mode="showing":y&&(y.mode="showing")},a.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},a.clearDisplay=function(){"function"==typeof ge().WebVTT&&ge().WebVTT.processCues(ge(),[],this.el_)},a.updateDisplay=function(){var n=this.player_.textTracks(),o=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),o){for(var h=[],y=0;y<n.length;++y){var S=n[y];"showing"===S.mode&&h.push(S)}this.updateForTrack(h)}else{for(var x=null,V=null,re=n.length;re--;){var ee=n[re];"showing"===ee.mode&&("descriptions"===ee.kind?x=ee:V=ee)}V?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(V)):x&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(x))}},a.updateDisplayState=function(n){for(var o=this.player_.textTrackSettings.getValues(),h=n.activeCues,y=h.length;y--;){var S=h[y];if(S){var x=S.displayState;if(o.color&&(x.firstChild.style.color=o.color),o.textOpacity&&We(x.firstChild,"color",fe(o.color||"#fff",o.textOpacity)),o.backgroundColor&&(x.firstChild.style.backgroundColor=o.backgroundColor),o.backgroundOpacity&&We(x.firstChild,"backgroundColor",fe(o.backgroundColor||"#000",o.backgroundOpacity)),o.windowColor&&(o.windowOpacity?We(x,"backgroundColor",fe(o.windowColor,o.windowOpacity)):x.style.backgroundColor=o.windowColor),o.edgeStyle&&("dropshadow"===o.edgeStyle?x.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ou:"raised"===o.edgeStyle?x.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ou:"depressed"===o.edgeStyle?x.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ou:"uniform"===o.edgeStyle&&(x.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ou)),o.fontPercent&&1!==o.fontPercent){var V=ge().parseFloat(x.style.fontSize);x.style.fontSize=V*o.fontPercent+"px",x.style.height="auto",x.style.top="auto"}o.fontFamily&&"default"!==o.fontFamily&&("small-caps"===o.fontFamily?x.firstChild.style.fontVariant="small-caps":x.firstChild.style.fontFamily=H[o.fontFamily])}}},a.updateForTrack=function(n){if(Array.isArray(n)||(n=[n]),"function"==typeof ge().WebVTT&&!n.every(function(De){return!De.activeCues})){for(var o=[],h=0;h<n.length;++h)for(var y=n[h],S=0;S<y.activeCues.length;++S)o.push(y.activeCues[S]);ge().WebVTT.processCues(ge(),o,this.el_);for(var x=0;x<n.length;++x){for(var V=n[x],re=0;re<V.activeCues.length;++re){var ee=V.activeCues[re].displayState;Pr(ee,"vjs-text-track-cue"),Pr(ee,"vjs-text-track-cue-"+(V.language?V.language:x))}this.player_.textTrackSettings&&this.updateDisplayState(V)}}},l}(Je);Je.registerComponent("TextTrackDisplay",yt);var Rt=function(m){function l(){return m.apply(this,arguments)||this}return W(l,m),l.prototype.createEl=function(){var n=this.player_.isAudio(),o=this.localize(n?"Audio Player":"Video Player"),h=wt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[o])}),y=m.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return y.appendChild(h),y},l}(Je);Je.registerComponent("LoadingSpinner",Rt);var Kt=function(m){function l(){return m.apply(this,arguments)||this}W(l,m);var a=l.prototype;return a.createEl=function(n,o,h){void 0===o&&(o={}),void 0===h&&(h={});var y=wt("button",o=Yr({className:this.buildCSSClass()},o),h=Yr({type:"button"},h));return y.appendChild(wt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(y),y},a.addChild=function(n,o){return void 0===o&&(o={}),Ln.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Je.prototype.addChild.call(this,n,o)},a.enable=function(){m.prototype.enable.call(this),this.el_.removeAttribute("disabled")},a.disable=function(){m.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},a.handleKeyDown=function(n){Ae().isEventKey(n,"Space")||Ae().isEventKey(n,"Enter")?n.stopPropagation():m.prototype.handleKeyDown.call(this,n)},l}(fd);Je.registerComponent("Button",Kt);var Vn=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).mouseused_=!1,o.on("mousedown",function(h){return o.handleMouseDown(h)}),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-big-play-button"},a.handleClick=function(n){var o=this.player_.play();if(this.mouseused_&&n.clientX&&n.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ya(o),void(this.player_.tech(!0)&&(!Cu&&!Oa||!h)&&this.player_.tech(!0).focus())}var y=this.player_.getChild("controlBar"),S=y&&y.getChild("playToggle");if(S){var x=function(){return S.focus()};Ml(o)?o.then(x,function(){}):this.setTimeout(x,1)}else this.player_.tech(!0).focus()},a.handleKeyDown=function(n){this.mouseused_=!1,m.prototype.handleKeyDown.call(this,n)},a.handleMouseDown=function(n){this.mouseused_=!0},l}(Kt);Vn.prototype.controlText_="Play Video",Je.registerComponent("BigPlayButton",Vn);var Hn=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).controlText(n&&n.controlText||o.localize("Close")),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-close-button "+m.prototype.buildCSSClass.call(this)},a.handleClick=function(n){this.trigger({type:"close",bubbles:!1})},a.handleKeyDown=function(n){Ae().isEventKey(n,"Esc")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):m.prototype.handleKeyDown.call(this,n)},l}(Kt);Je.registerComponent("CloseButton",Hn);var yr=function(m){function l(u,n){var o;return void 0===n&&(n={}),o=m.call(this,u,n)||this,n.replay=void 0===n.replay||n.replay,o.on(u,"play",function(h){return o.handlePlay(h)}),o.on(u,"pause",function(h){return o.handlePause(h)}),n.replay&&o.on(u,"ended",function(h){return o.handleEnded(h)}),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-play-control "+m.prototype.buildCSSClass.call(this)},a.handleClick=function(n){this.player_.paused()?Ya(this.player_.play()):this.player_.pause()},a.handleSeeked=function(n){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(n):this.handlePlay(n)},a.handlePlay=function(n){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},a.handlePause=function(n){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},a.handleEnded=function(n){var o=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return o.handleSeeked(h)})},l}(Kt);yr.prototype.controlText_="Play",Je.registerComponent("PlayToggle",yr);var ei=function(l,a){l=l<0?0:l;var u=Math.floor(l%60),n=Math.floor(l/60%60),o=Math.floor(l/3600),h=Math.floor(a/60%60),y=Math.floor(a/3600);return(isNaN(l)||l===1/0)&&(o=n=u="-"),(o=o>0||y>0?o+":":"")+(n=((o||h>=10)&&n<10?"0"+n:n)+":")+(u<10?"0"+u:u)},Xr=ei;function vu(m,l){return void 0===l&&(l=m),Xr(m,l)}var Bi=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on(u,["timeupdate","ended"],function(h){return o.updateContent(h)}),o.updateTextNode_(),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n=this.buildCSSClass(),o=m.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control"}),h=wt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return o.appendChild(h),this.contentEl_=wt("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),o.appendChild(this.contentEl_),o},a.dispose=function(){this.contentEl_=null,this.textNode_=null,m.prototype.dispose.call(this)},a.updateTextNode_=function(n){var o=this;void 0===n&&(n=0),n=vu(n),this.formattedTime_!==n&&(this.formattedTime_=n,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(o.contentEl_){var h=o.textNode_;h&&o.contentEl_.firstChild!==h&&(h=null,Ln.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),o.textNode_=Ze().createTextNode(o.formattedTime_),o.textNode_&&(h?o.contentEl_.replaceChild(o.textNode_,h):o.contentEl_.appendChild(o.textNode_))}}))},a.updateContent=function(n){},l}(Je);Bi.prototype.labelText_="Time",Bi.prototype.controlText_="Time",Je.registerComponent("TimeDisplay",Bi);var ba=function(m){function l(){return m.apply(this,arguments)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-current-time"},a.updateContent=function(n){var o;o=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(o)},l}(Bi);ba.prototype.labelText_="Current Time",ba.prototype.controlText_="Current Time",Je.registerComponent("CurrentTimeDisplay",ba);var oa=function(m){function l(u,n){var o,h=function(S){return o.updateContent(S)};return(o=m.call(this,u,n)||this).on(u,"durationchange",h),o.on(u,"loadstart",h),o.on(u,"loadedmetadata",h),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-duration"},a.updateContent=function(n){var o=this.player_.duration();this.updateTextNode_(o)},l}(Bi);oa.prototype.labelText_="Duration",oa.prototype.controlText_="Duration",Je.registerComponent("DurationDisplay",oa);var Yu=function(m){function l(){return m.apply(this,arguments)||this}return W(l,m),l.prototype.createEl=function(){var n=m.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),o=m.prototype.createEl.call(this,"div"),h=m.prototype.createEl.call(this,"span",{textContent:"/"});return o.appendChild(h),n.appendChild(o),n},l}(Je);Je.registerComponent("TimeDivider",Yu);var Qu=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on(u,"durationchange",function(h){return o.updateContent(h)}),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-remaining-time"},a.createEl=function(){var n=m.prototype.createEl.call(this);return n.insertBefore(wt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),n},a.updateContent=function(n){var o;"number"==typeof this.player_.duration()&&(o=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(o))},l}(Bi);Qu.prototype.labelText_="Remaining Time",Qu.prototype.controlText_="Remaining Time",Je.registerComponent("RemainingTimeDisplay",Qu);var Vh=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).updateShowing(),o.on(o.player(),"durationchange",function(h){return o.updateShowing(h)}),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n=m.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=wt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(wt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Ze().createTextNode(this.localize("LIVE"))),n.appendChild(this.contentEl_),n},a.dispose=function(){this.contentEl_=null,m.prototype.dispose.call(this)},a.updateShowing=function(n){this.player().duration()===1/0?this.show():this.hide()},l}(Je);Je.registerComponent("LiveDisplay",Vh);var Jd=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).updateLiveEdgeStatus(),o.player_.liveTracker&&(o.updateLiveEdgeStatusHandler_=function(h){return o.updateLiveEdgeStatus(h)},o.on(o.player_.liveTracker,"liveedgechange",o.updateLiveEdgeStatusHandler_)),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n=m.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=wt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),n.appendChild(this.textEl_),n},a.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},a.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},a.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,m.prototype.dispose.call(this)},l}(Kt);Jd.prototype.controlText_="Seek to live, currently playing live",Je.registerComponent("SeekToLive",Jd);var Pi=function(l,a,u){return l=Number(l),Math.min(u,Math.max(a,isNaN(l)?a:l))},us=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).handleMouseDown_=function(h){return o.handleMouseDown(h)},o.handleMouseUp_=function(h){return o.handleMouseUp(h)},o.handleKeyDown_=function(h){return o.handleKeyDown(h)},o.handleClick_=function(h){return o.handleClick(h)},o.handleMouseMove_=function(h){return o.handleMouseMove(h)},o.update_=function(h){return o.update(h)},o.bar=o.getChild(o.options_.barName),o.vertical(!!o.options_.vertical),o.enable(),o}W(l,m);var a=l.prototype;return a.enabled=function(){return this.enabled_},a.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},a.disable=function(){if(this.enabled()){var n=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},a.createEl=function(n,o,h){return void 0===o&&(o={}),void 0===h&&(h={}),o.className=o.className+" vjs-slider",o=Yr({tabIndex:0},o),h=Yr({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),m.prototype.createEl.call(this,n,o,h)},a.handleMouseDown=function(n){var o=this.bar.el_.ownerDocument;"mousedown"===n.type&&n.preventDefault(),"touchstart"===n.type&&!io&&n.preventDefault(),qo(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(o,"mousemove",this.handleMouseMove_),this.on(o,"mouseup",this.handleMouseUp_),this.on(o,"touchmove",this.handleMouseMove_),this.on(o,"touchend",this.handleMouseUp_),this.handleMouseMove(n)},a.handleMouseMove=function(n){},a.handleMouseUp=function(){var n=this.bar.el_.ownerDocument;na(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()},a.update=function(){var n=this;if(this.el_&&this.bar){var o=this.getProgress();return o===this.progress_||(this.progress_=o,this.requestNamedAnimationFrame("Slider#update",function(){var h=n.vertical()?"height":"width";n.bar.el().style[h]=(100*o).toFixed(2)+"%"})),o}},a.getProgress=function(){return Number(Pi(this.getPercent(),0,1).toFixed(4))},a.calculateDistance=function(n){var o=va(this.el_,n);return this.vertical()?o.y:o.x},a.handleKeyDown=function(n){Ae().isEventKey(n,"Left")||Ae().isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepBack()):Ae().isEventKey(n,"Right")||Ae().isEventKey(n,"Up")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):m.prototype.handleKeyDown.call(this,n)},a.handleClick=function(n){n.stopPropagation(),n.preventDefault()},a.vertical=function(n){if(void 0===n)return this.vertical_||!1;this.vertical_=!!n,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},l}(Je);Je.registerComponent("Slider",us);var fc=function(l,a){return Pi(l/a*100,0,100).toFixed(2)+"%"},hl=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).partEls_=[],o.on(u,"progress",function(h){return o.update(h)}),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n=m.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),o=wt("span",{className:"vjs-control-text"}),h=wt("span",{textContent:this.localize("Loaded")}),y=Ze().createTextNode(": ");return this.percentageEl_=wt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(o),o.appendChild(h),o.appendChild(y),o.appendChild(this.percentageEl_),n},a.dispose=function(){this.partEls_=null,this.percentageEl_=null,m.prototype.dispose.call(this)},a.update=function(n){var o=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=o.player_.liveTracker,y=o.player_.buffered(),S=h&&h.isLive()?h.seekableEnd():o.player_.duration(),x=o.player_.bufferedEnd(),V=o.partEls_,re=fc(x,S);o.percent_!==re&&(o.el_.style.width=re,en(o.percentageEl_,re),o.percent_=re);for(var ee=0;ee<y.length;ee++){var De=y.start(ee),ze=y.end(ee),Ve=V[ee];Ve||(Ve=o.el_.appendChild(wt()),V[ee]=Ve),(Ve.dataset.start!==De||Ve.dataset.end!==ze)&&(Ve.dataset.start=De,Ve.dataset.end=ze,Ve.style.left=fc(De,x),Ve.style.width=fc(ze-De,x))}for(var Be=V.length;Be>y.length;Be--)o.el_.removeChild(V[Be-1]);V.length=y.length})},l}(Je);Je.registerComponent("LoadProgressBar",hl);var jc=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update=Cr(ts(et(o),o.update),30),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},a.update=function(n,o,h){var y=Ko(this.el_),S=Ds(this.player_.el()),x=n.width*o;if(S&&y){var V=n.left-S.left+x,re=n.width-x+(S.right-n.right),ee=y.width/2;V<ee?ee+=ee-V:re<ee&&(ee=re),ee<0?ee=0:ee>y.width&&(ee=y.width),ee=Math.round(ee),this.el_.style.right="-"+ee+"px",this.write(h)}},a.write=function(n){en(this.el_,n)},a.updateTime=function(n,o,h,y){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var x,V=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var re=S.player_.liveTracker.liveWindow(),ee=re-o*re;x=(ee<1?"":"-")+vu(ee,re)}else x=vu(h,V);S.update(n,o,x),y&&y()})},l}(Je);Je.registerComponent("TimeTooltip",jc);var Hh=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update=Cr(ts(et(o),o.update),30),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},a.update=function(n,o){var h=this.getChild("timeTooltip");if(h){var y=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(n,o,y)}},l}(Je);Hh.prototype.options_={children:[]},!ws&&!ga&&Hh.prototype.options_.children.push("timeTooltip"),Je.registerComponent("PlayProgressBar",Hh);var xp=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update=Cr(ts(et(o),o.update),30),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(n,o){var h=this,y=o*this.player_.duration();this.getChild("timeTooltip").updateTime(n,o,y,function(){h.el_.style.left=n.width*o+"px"})},l}(Je);xp.prototype.options_={children:["timeTooltip"]},Je.registerComponent("MouseTimeDisplay",xp);var Mp=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).setEventHandlers_(),o}W(l,m);var a=l.prototype;return a.setEventHandlers_=function(){var n=this;this.update_=ts(this,this.update),this.update=Cr(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(o){return n.enableInterval_(o)},this.disableIntervalHandler_=function(o){return n.disableInterval_(o)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ze()&&"visibilityState"in Ze()&&this.on(Ze(),"visibilitychange",this.toggleVisibility_)},a.toggleVisibility_=function(n){"hidden"===Ze().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(n)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},a.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},a.disableInterval_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&n&&"ended"!==n.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},a.update=function(n){var o=this;if("hidden"!==Ze().visibilityState){var h=m.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var y=o.player_.ended()?o.player_.duration():o.getCurrentTime_(),S=o.player_.liveTracker,x=o.player_.duration();S&&S.isLive()&&(x=o.player_.liveTracker.liveCurrentTime()),o.percent_!==h&&(o.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),o.percent_=h),(o.currentTime_!==y||o.duration_!==x)&&(o.el_.setAttribute("aria-valuetext",o.localize("progress bar timing: currentTime={1} duration={2}",[vu(y,x),vu(x,x)],"{1} of {2}")),o.currentTime_=y,o.duration_=x),o.bar&&o.bar.update(Ds(o.el()),o.getProgress())}),h}},a.userSeek_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(n)},a.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},a.getPercent=function(){var o,n=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(o=(n-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(o=1)):o=n/this.player_.duration(),o},a.handleMouseDown=function(n){xl(n)&&(n.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),m.prototype.handleMouseDown.call(this,n))},a.handleMouseMove=function(n){if(xl(n)){var o,h=this.calculateDistance(n),y=this.player_.liveTracker;if(y&&y.isLive()){if(h>=.99)return void y.seekToLiveEdge();var S=y.seekableStart(),x=y.liveCurrentTime();if((o=S+h*y.liveWindow())>=x&&(o=x),o<=S&&(o=S+.1),o===1/0)return}else(o=h*this.player_.duration())===this.player_.duration()&&(o-=.1);this.userSeek_(o)}},a.enable=function(){m.prototype.enable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.show()},a.disable=function(){m.prototype.disable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.hide()},a.handleMouseUp=function(n){m.prototype.handleMouseUp.call(this,n),n&&n.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ya(this.player_.play()):this.update_()},a.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},a.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},a.handleAction=function(n){this.player_.paused()?this.player_.play():this.player_.pause()},a.handleKeyDown=function(n){var o=this.player_.liveTracker;if(Ae().isEventKey(n,"Space")||Ae().isEventKey(n,"Enter"))n.preventDefault(),n.stopPropagation(),this.handleAction(n);else if(Ae().isEventKey(n,"Home"))n.preventDefault(),n.stopPropagation(),this.userSeek_(0);else if(Ae().isEventKey(n,"End"))n.preventDefault(),n.stopPropagation(),o&&o.isLive()?this.userSeek_(o.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Ae()(n))){n.preventDefault(),n.stopPropagation();var h=10*(Ae().codes[Ae()(n)]-Ae().codes[0])/100;o&&o.isLive()?this.userSeek_(o.seekableStart()+o.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else Ae().isEventKey(n,"PgDn")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Ae().isEventKey(n,"PgUp")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):m.prototype.handleKeyDown.call(this,n)},a.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ze()&&"visibilityState"in Ze()&&this.off(Ze(),"visibilitychange",this.toggleVisibility_),m.prototype.dispose.call(this)},l}(us);Mp.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!ws&&!ga&&Mp.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Je.registerComponent("SeekBar",Mp);var kg=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).handleMouseMove=Cr(ts(et(o),o.handleMouseMove),30),o.throttledHandleMouseSeek=Cr(ts(et(o),o.handleMouseSeek),30),o.handleMouseUpHandler_=function(h){return o.handleMouseUp(h)},o.handleMouseDownHandler_=function(h){return o.handleMouseDown(h)},o.enable(),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},a.handleMouseMove=function(n){var o=this.getChild("seekBar");if(o){var h=o.getChild("playProgressBar"),y=o.getChild("mouseTimeDisplay");if(h||y){var S=o.el(),x=Ko(S),V=va(S,n).x;V=Pi(V,0,1),y&&y.update(x,V),h&&h.update(x,o.getProgress())}}},a.handleMouseSeek=function(n){var o=this.getChild("seekBar");o&&o.handleMouseMove(n)},a.enabled=function(){return this.enabled_},a.disable=function(){if(this.children().forEach(function(o){return o.disable&&o.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var n=this.getChild("seekBar");this.player_.scrubbing(!1),n.videoWasPlaying&&Ya(this.player_.play())}},a.enable=function(){this.children().forEach(function(n){return n.enable&&n.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},a.removeListenersAddedOnMousedownAndTouchstart=function(){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseSeek),this.off(n,"touchmove",this.throttledHandleMouseSeek),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},a.handleMouseDown=function(n){var o=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(n),this.on(o,"mousemove",this.throttledHandleMouseSeek),this.on(o,"touchmove",this.throttledHandleMouseSeek),this.on(o,"mouseup",this.handleMouseUpHandler_),this.on(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(n){var o=this.getChild("seekBar");o&&o.handleMouseUp(n),this.removeListenersAddedOnMousedownAndTouchstart()},l}(Je);kg.prototype.options_={children:["seekBar"]},Je.registerComponent("ProgressControl",kg);var kp=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on(u,["enterpictureinpicture","leavepictureinpicture"],function(h){return o.handlePictureInPictureChange(h)}),o.on(u,["disablepictureinpicturechanged","loadedmetadata"],function(h){return o.handlePictureInPictureEnabledChange(h)}),o.disable(),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-picture-in-picture-control "+m.prototype.buildCSSClass.call(this)},a.handlePictureInPictureEnabledChange=function(){Ze().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},a.handlePictureInPictureChange=function(n){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},a.handleClick=function(n){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},l}(Kt);kp.prototype.controlText_="Picture-in-Picture",Je.registerComponent("PictureInPictureToggle",kp);var Pg=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on(u,"fullscreenchange",function(h){return o.handleFullscreenChange(h)}),!1===Ze()[u.fsApi_.fullscreenEnabled]&&o.disable(),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-fullscreen-control "+m.prototype.buildCSSClass.call(this)},a.handleFullscreenChange=function(n){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},a.handleClick=function(n){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},l}(Kt);Pg.prototype.controlText_="Fullscreen",Je.registerComponent("FullscreenToggle",Pg);var Bc=function(m){function l(){return m.apply(this,arguments)||this}return W(l,m),l.prototype.createEl=function(){var n=m.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return n.appendChild(m.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),n},l}(Je);Je.registerComponent("VolumeLevel",Bc);var Og=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update=Cr(ts(et(o),o.update),30),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},a.update=function(n,o,h,y){if(!h){var S=Ds(this.el_),x=Ds(this.player_.el()),V=n.width*o;if(!x||!S)return;var re=n.left-x.left+V,ee=n.width-V+(x.right-n.right),De=S.width/2;re<De?De+=De-re:ee<De&&(De=ee),De<0?De=0:De>S.width&&(De=S.width),this.el_.style.right="-"+De+"px"}this.write(y+"%")},a.write=function(n){en(this.el_,n)},a.updateVolume=function(n,o,h,y,S){var x=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){x.update(n,o,h,y.toFixed(0)),S&&S()})},l}(Je);Je.registerComponent("VolumeLevelTooltip",Og);var Pp=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).update=Cr(ts(et(o),o.update),30),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(n,o,h){var y=this,S=100*o;this.getChild("volumeLevelTooltip").updateVolume(n,o,h,S,function(){h?y.el_.style.bottom=n.height*o+"px":y.el_.style.left=n.width*o+"px"})},l}(Je);Pp.prototype.options_={children:["volumeLevelTooltip"]},Je.registerComponent("MouseVolumeLevelDisplay",Pp);var $h=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on("slideractive",function(h){return o.updateLastVolume_(h)}),o.on(u,"volumechange",function(h){return o.updateARIAAttributes(h)}),u.ready(function(){return o.updateARIAAttributes()}),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},a.handleMouseDown=function(n){xl(n)&&m.prototype.handleMouseDown.call(this,n)},a.handleMouseMove=function(n){var o=this.getChild("mouseVolumeLevelDisplay");if(o){var h=this.el(),y=Ds(h),S=this.vertical(),x=va(h,n);x=Pi(x=S?x.y:x.x,0,1),o.update(y,x,S)}xl(n)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(n)))},a.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},a.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},a.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},a.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},a.updateARIAAttributes=function(n){var o=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",o),this.el_.setAttribute("aria-valuetext",o+"%")},a.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},a.updateLastVolume_=function(){var n=this,o=this.player_.volume();this.one("sliderinactive",function(){0===n.player_.volume()&&n.player_.lastVolume_(o)})},l}(us);$h.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!ws&&!ga&&$h.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),$h.prototype.playerEvent="volumechange",Je.registerComponent("VolumeBar",$h);var Op=function(m){function l(u,n){var o;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||vo(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(l,a){a.tech_&&!a.tech_.featuresVolumeControl&&l.addClass("vjs-hidden"),l.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?l.removeClass("vjs-hidden"):l.addClass("vjs-hidden")})}(et(o=m.call(this,u,n)||this),u),o.throttledHandleMouseMove=Cr(ts(et(o),o.handleMouseMove),30),o.handleMouseUpHandler_=function(h){return o.handleMouseUp(h)},o.on("mousedown",function(h){return o.handleMouseDown(h)}),o.on("touchstart",function(h){return o.handleMouseDown(h)}),o.on("mousemove",function(h){return o.handleMouseMove(h)}),o.on(o.volumeBar,["focus","slideractive"],function(){o.volumeBar.addClass("vjs-slider-active"),o.addClass("vjs-slider-active"),o.trigger("slideractive")}),o.on(o.volumeBar,["blur","sliderinactive"],function(){o.volumeBar.removeClass("vjs-slider-active"),o.removeClass("vjs-slider-active"),o.trigger("sliderinactive")}),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n="vjs-volume-horizontal";return this.options_.vertical&&(n="vjs-volume-vertical"),m.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+n})},a.handleMouseDown=function(n){var o=this.el_.ownerDocument;this.on(o,"mousemove",this.throttledHandleMouseMove),this.on(o,"touchmove",this.throttledHandleMouseMove),this.on(o,"mouseup",this.handleMouseUpHandler_),this.on(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(n){var o=this.el_.ownerDocument;this.off(o,"mousemove",this.throttledHandleMouseMove),this.off(o,"touchmove",this.throttledHandleMouseMove),this.off(o,"mouseup",this.handleMouseUpHandler_),this.off(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseMove=function(n){this.volumeBar.handleMouseMove(n)},l}(Je);Op.prototype.options_={children:["volumeBar"]},Je.registerComponent("VolumeControl",Op);var Uc=function(m){function l(u,n){var o;return function(l,a){a.tech_&&!a.tech_.featuresMuteControl&&l.addClass("vjs-hidden"),l.on(a,"loadstart",function(){a.tech_.featuresMuteControl?l.removeClass("vjs-hidden"):l.addClass("vjs-hidden")})}(et(o=m.call(this,u,n)||this),u),o.on(u,["loadstart","volumechange"],function(h){return o.update(h)}),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-mute-control "+m.prototype.buildCSSClass.call(this)},a.handleClick=function(n){var o=this.player_.volume(),h=this.player_.lastVolume_();0===o?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},a.update=function(n){this.updateIcon_(),this.updateControlText_()},a.updateIcon_=function(){var n=this.player_.volume(),o=3;ws&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===n||this.player_.muted()?o=0:n<.33?o=1:n<.67&&(o=2);for(var h=0;h<4;h++)Vr(this.el_,"vjs-vol-"+h);Pr(this.el_,"vjs-vol-"+o)},a.updateControlText_=function(){var o=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==o&&this.controlText(o)},l}(Kt);Uc.prototype.controlText_="Mute",Je.registerComponent("MuteToggle",Uc);var th=function(m){function l(u,n){var o;return void 0===n&&(n={}),n.inline=!(typeof n.inline<"u")||n.inline,(typeof n.volumeControl>"u"||vo(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(o=m.call(this,u,n)||this).handleKeyPressHandler_=function(h){return o.handleKeyPress(h)},o.on(u,["loadstart"],function(h){return o.volumePanelState_(h)}),o.on(o.muteToggle,"keyup",function(h){return o.handleKeyPress(h)}),o.on(o.volumeControl,"keyup",function(h){return o.handleVolumeControlKeyUp(h)}),o.on("keydown",function(h){return o.handleKeyPress(h)}),o.on("mouseover",function(h){return o.handleMouseOver(h)}),o.on("mouseout",function(h){return o.handleMouseOut(h)}),o.on(o.volumeControl,["slideractive"],o.sliderActive_),o.on(o.volumeControl,["sliderinactive"],o.sliderInactive_),o}W(l,m);var a=l.prototype;return a.sliderActive_=function(){this.addClass("vjs-slider-active")},a.sliderInactive_=function(){this.removeClass("vjs-slider-active")},a.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},a.createEl=function(){var n="vjs-volume-panel-horizontal";return this.options_.inline||(n="vjs-volume-panel-vertical"),m.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+n})},a.dispose=function(){this.handleMouseOut(),m.prototype.dispose.call(this)},a.handleVolumeControlKeyUp=function(n){Ae().isEventKey(n,"Esc")&&this.muteToggle.focus()},a.handleMouseOver=function(n){this.addClass("vjs-hover"),_a(Ze(),"keyup",this.handleKeyPressHandler_)},a.handleMouseOut=function(n){this.removeClass("vjs-hover"),so(Ze(),"keyup",this.handleKeyPressHandler_)},a.handleKeyPress=function(n){Ae().isEventKey(n,"Esc")&&this.handleMouseOut()},l}(Je);th.prototype.options_={children:["muteToggle","volumeControl"]},Je.registerComponent("VolumePanel",th);var pc=function(m){function l(u,n){var o;return o=m.call(this,u,n)||this,n&&(o.menuButton_=n.menuButton),o.focusedChild_=-1,o.on("keydown",function(h){return o.handleKeyDown(h)}),o.boundHandleBlur_=function(h){return o.handleBlur(h)},o.boundHandleTapClick_=function(h){return o.handleTapClick(h)},o}W(l,m);var a=l.prototype;return a.addEventListenerForItem=function(n){n instanceof Je&&(this.on(n,"blur",this.boundHandleBlur_),this.on(n,["tap","click"],this.boundHandleTapClick_))},a.removeEventListenerForItem=function(n){n instanceof Je&&(this.off(n,"blur",this.boundHandleBlur_),this.off(n,["tap","click"],this.boundHandleTapClick_))},a.removeChild=function(n){"string"==typeof n&&(n=this.getChild(n)),this.removeEventListenerForItem(n),m.prototype.removeChild.call(this,n)},a.addItem=function(n){var o=this.addChild(n);o&&this.addEventListenerForItem(o)},a.createEl=function(){this.contentEl_=wt(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var o=m.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return o.appendChild(this.contentEl_),_a(o,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),o},a.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,m.prototype.dispose.call(this)},a.handleBlur=function(n){var o=n.relatedTarget||Ze().activeElement;if(!this.children().some(function(y){return y.el()===o})){var h=this.menuButton_;h&&h.buttonPressed_&&o!==h.el().firstChild&&h.unpressButton()}},a.handleTapClick=function(n){if(this.menuButton_){this.menuButton_.unpressButton();var o=this.children();if(!Array.isArray(o))return;var h=o.filter(function(y){return y.el()===n.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},a.handleKeyDown=function(n){Ae().isEventKey(n,"Left")||Ae().isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):(Ae().isEventKey(n,"Right")||Ae().isEventKey(n,"Up"))&&(n.preventDefault(),n.stopPropagation(),this.stepBack())},a.stepForward=function(){var n=0;void 0!==this.focusedChild_&&(n=this.focusedChild_+1),this.focus(n)},a.stepBack=function(){var n=0;void 0!==this.focusedChild_&&(n=this.focusedChild_-1),this.focus(n)},a.focus=function(n){void 0===n&&(n=0);var o=this.children().slice();o.length&&o[0].hasClass("vjs-menu-title")&&o.shift(),o.length>0&&(n<0?n=0:n>=o.length&&(n=o.length-1),this.focusedChild_=n,o[n].el_.focus())},l}(Je);Je.registerComponent("Menu",pc);var Gh=function(m){function l(u,n){var o;void 0===n&&(n={}),(o=m.call(this,u,n)||this).menuButton_=new Kt(u,n),o.menuButton_.controlText(o.controlText_),o.menuButton_.el_.setAttribute("aria-haspopup","true");var h=Kt.prototype.buildCSSClass();o.menuButton_.el_.className=o.buildCSSClass()+" "+h,o.menuButton_.removeClass("vjs-control"),o.addChild(o.menuButton_),o.update(),o.enabled_=!0;var y=function(x){return o.handleClick(x)};return o.handleMenuKeyUp_=function(S){return o.handleMenuKeyUp(S)},o.on(o.menuButton_,"tap",y),o.on(o.menuButton_,"click",y),o.on(o.menuButton_,"keydown",function(S){return o.handleKeyDown(S)}),o.on(o.menuButton_,"mouseenter",function(){o.addClass("vjs-hover"),o.menu.show(),_a(Ze(),"keyup",o.handleMenuKeyUp_)}),o.on("mouseleave",function(S){return o.handleMouseLeave(S)}),o.on("keydown",function(S){return o.handleSubmenuKeyDown(S)}),o}W(l,m);var a=l.prototype;return a.update=function(){var n=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=n,this.addChild(n),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},a.createMenu=function(){var n=new pc(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var o=wt("li",{className:"vjs-menu-title",textContent:sn(this.options_.title),tabIndex:-1}),h=new Je(this.player_,{el:o});n.addItem(h)}if(this.items=this.createItems(),this.items)for(var y=0;y<this.items.length;y++)n.addItem(this.items[y]);return n},a.createItems=function(){},a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},a.buildWrapperCSSClass=function(){var n="vjs-menu-button";return"vjs-menu-button "+(n+=!0===this.options_.inline?"-inline":"-popup")+" "+Kt.prototype.buildCSSClass()+" "+m.prototype.buildCSSClass.call(this)},a.buildCSSClass=function(){var n="vjs-menu-button";return"vjs-menu-button "+(n+=!0===this.options_.inline?"-inline":"-popup")+" "+m.prototype.buildCSSClass.call(this)},a.controlText=function(n,o){return void 0===o&&(o=this.menuButton_.el()),this.menuButton_.controlText(n,o)},a.dispose=function(){this.handleMouseLeave(),m.prototype.dispose.call(this)},a.handleClick=function(n){this.buttonPressed_?this.unpressButton():this.pressButton()},a.handleMouseLeave=function(n){this.removeClass("vjs-hover"),so(Ze(),"keyup",this.handleMenuKeyUp_)},a.focus=function(){this.menuButton_.focus()},a.blur=function(){this.menuButton_.blur()},a.handleKeyDown=function(n){Ae().isEventKey(n,"Esc")||Ae().isEventKey(n,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ae().isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus())):(Ae().isEventKey(n,"Up")||Ae().isEventKey(n,"Down"))&&(this.buttonPressed_||(n.preventDefault(),this.pressButton()))},a.handleMenuKeyUp=function(n){(Ae().isEventKey(n,"Esc")||Ae().isEventKey(n,"Tab"))&&this.removeClass("vjs-hover")},a.handleSubmenuKeyPress=function(n){this.handleSubmenuKeyDown(n)},a.handleSubmenuKeyDown=function(n){(Ae().isEventKey(n,"Esc")||Ae().isEventKey(n,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ae().isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus()))},a.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ws&&Se())return;this.menu.focus()}},a.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},a.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},a.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},l}(Je);Je.registerComponent("MenuButton",Gh);var Rp=function(m){function l(a,u){var n,o=u.tracks;if((n=m.call(this,a,u)||this).items.length<=1&&n.hide(),!o)return et(n);var h=ts(et(n),n.update);return o.addEventListener("removetrack",h),o.addEventListener("addtrack",h),o.addEventListener("labelchange",h),n.player_.on("ready",h),n.player_.on("dispose",function(){o.removeEventListener("removetrack",h),o.removeEventListener("addtrack",h),o.removeEventListener("labelchange",h)}),n}return W(l,m),l}(Gh);Je.registerComponent("TrackButton",Rp);var nh=["Tab","Esc","Up","Down","Right","Left"],Xu=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).selectable=n.selectable,o.isSelected_=n.selected||!1,o.multiSelectable=n.multiSelectable,o.selected(o.isSelected_),o.el_.setAttribute("role",o.selectable?o.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),o}W(l,m);var a=l.prototype;return a.createEl=function(n,o,h){this.nonIconControl=!0;var y=m.prototype.createEl.call(this,"li",Yr({className:"vjs-menu-item",tabIndex:-1},o),h);return y.replaceChild(wt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),y.querySelector(".vjs-icon-placeholder")),y},a.handleKeyDown=function(n){nh.some(function(o){return Ae().isEventKey(n,o)})||m.prototype.handleKeyDown.call(this,n)},a.handleClick=function(n){this.selected(!0)},a.selected=function(n){this.selectable&&(n?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},l}(fd);Je.registerComponent("MenuItem",Xu);var zh=function(m){function l(u,n){var o,h=n.track,y=u.textTracks();n.label=h.label||h.language||"Unknown",n.selected="showing"===h.mode,(o=m.call(this,u,n)||this).track=h,o.kinds=(n.kinds||[n.kind||o.track.kind]).filter(Boolean);var V,S=function(){for(var ee=arguments.length,De=new Array(ee),ze=0;ze<ee;ze++)De[ze]=arguments[ze];o.handleTracksChange.apply(et(o),De)},x=function(){for(var ee=arguments.length,De=new Array(ee),ze=0;ze<ee;ze++)De[ze]=arguments[ze];o.handleSelectedLanguageChange.apply(et(o),De)};return u.on(["loadstart","texttrackchange"],S),y.addEventListener("change",S),y.addEventListener("selectedlanguagechange",x),o.on("dispose",function(){u.off(["loadstart","texttrackchange"],S),y.removeEventListener("change",S),y.removeEventListener("selectedlanguagechange",x)}),void 0===y.onchange&&o.on(["tap","click"],function(){if("object"!=typeof ge().Event)try{V=new(ge().Event)("change")}catch{}V||(V=Ze().createEvent("Event")).initEvent("change",!0,!0),y.dispatchEvent(V)}),o.handleTracksChange(),o}W(l,m);var a=l.prototype;return a.handleClick=function(n){var o=this.track,h=this.player_.textTracks();if(m.prototype.handleClick.call(this,n),h)for(var y=0;y<h.length;y++){var S=h[y];-1!==this.kinds.indexOf(S.kind)&&(S===o?"showing"!==S.mode&&(S.mode="showing"):"disabled"!==S.mode&&(S.mode="disabled"))}},a.handleTracksChange=function(n){var o="showing"===this.track.mode;o!==this.isSelected_&&this.selected(o)},a.handleSelectedLanguageChange=function(n){if("showing"===this.track.mode){var o=this.player_.cache_.selectedLanguage;if(o&&o.enabled&&o.language===this.track.language&&o.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function(){this.track=null,m.prototype.dispose.call(this)},l}(Xu);Je.registerComponent("TextTrackMenuItem",zh);var rh=function(m){function l(u,n){return n.track={player:u,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,m.call(this,u,n)||this}W(l,m);var a=l.prototype;return a.handleTracksChange=function(n){for(var o=this.player().textTracks(),h=!0,y=0,S=o.length;y<S;y++){var x=o[y];if(this.options_.kinds.indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},a.handleSelectedLanguageChange=function(n){for(var o=this.player().textTracks(),h=!0,y=0,S=o.length;y<S;y++){var x=o[y];if(["captions","descriptions","subtitles"].indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},l}(zh);Je.registerComponent("OffTextTrackMenuItem",rh);var ih=function(m){function l(u,n){return void 0===n&&(n={}),n.tracks=u.textTracks(),m.call(this,u,n)||this}return W(l,m),l.prototype.createItems=function(n,o){var h;void 0===n&&(n=[]),void 0===o&&(o=zh),this.label_&&(h=this.label_+" off"),n.push(new rh(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var y=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<y.length;S++){var x=y[S];if(this.kinds_.indexOf(x.kind)>-1){var V=new o(this.player_,{track:x,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});V.addClass("vjs-"+x.kind+"-menu-item"),n.push(V)}}return n},l}(Rp);Je.registerComponent("TextTrackButton",ih);var Np=function(m){function l(u,n){var o,h=n.track,y=n.cue,S=u.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=y.text,n.selected=y.startTime<=S&&S<y.endTime,(o=m.call(this,u,n)||this).track=h,o.cue=y,h.addEventListener("cuechange",ts(et(o),o.update)),o}W(l,m);var a=l.prototype;return a.handleClick=function(n){m.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},a.update=function(n){var o=this.cue,h=this.player_.currentTime();this.selected(o.startTime<=h&&h<o.endTime)},l}(Xu);Je.registerComponent("ChaptersTrackMenuItem",Np);var gd=function(m){function l(u,n,o){return m.call(this,u,n,o)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-chapters-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-chapters-button "+m.prototype.buildWrapperCSSClass.call(this)},a.update=function(n){(!this.track_||n&&("addtrack"===n.type||"removetrack"===n.type))&&this.setTrack(this.findChaptersTrack()),m.prototype.update.call(this)},a.setTrack=function(n){if(this.track_!==n){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var o=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);o&&o.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=n,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_)}}},a.findChaptersTrack=function(){for(var n=this.player_.textTracks()||[],o=n.length-1;o>=0;o--){var h=n[o];if(h.kind===this.kind_)return h}},a.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(sn(this.kind_))},a.createMenu=function(){return this.options_.title=this.getMenuCaption(),m.prototype.createMenu.call(this)},a.createItems=function(){var n=[];if(!this.track_)return n;var o=this.track_.cues;if(!o)return n;for(var h=0,y=o.length;h<y;h++){var x=new Np(this.player_,{track:this.track_,cue:o[h]});n.push(x)}return n},l}(ih);gd.prototype.kind_="chapters",gd.prototype.controlText_="Chapters",Je.registerComponent("ChaptersButton",gd);var Nl=function(m){function l(u,n,o){var h;h=m.call(this,u,n,o)||this;var y=u.textTracks(),S=ts(et(h),h.handleTracksChange);return y.addEventListener("change",S),h.on("dispose",function(){y.removeEventListener("change",S)}),h}W(l,m);var a=l.prototype;return a.handleTracksChange=function(n){for(var o=this.player().textTracks(),h=!1,y=0,S=o.length;y<S;y++){var x=o[y];if(x.kind!==this.kind_&&"showing"===x.mode){h=!0;break}}h?this.disable():this.enable()},a.buildCSSClass=function(){return"vjs-descriptions-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+m.prototype.buildWrapperCSSClass.call(this)},l}(ih);Nl.prototype.kind_="descriptions",Nl.prototype.controlText_="Descriptions",Je.registerComponent("DescriptionsButton",Nl);var Ju=function(m){function l(u,n,o){return m.call(this,u,n,o)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-subtitles-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+m.prototype.buildWrapperCSSClass.call(this)},l}(ih);Ju.prototype.kind_="subtitles",Ju.prototype.controlText_="Subtitles",Je.registerComponent("SubtitlesButton",Ju);var Ea=function(m){function l(u,n){var o;return n.track={player:u,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(o=m.call(this,u,n)||this).addClass("vjs-texttrack-settings"),o.controlText(", opens "+n.kind+" settings dialog"),o}return W(l,m),l.prototype.handleClick=function(n){this.player().getChild("textTrackSettings").open()},l}(zh);Je.registerComponent("CaptionSettingsMenuItem",Ea);var Vc=function(m){function l(u,n,o){return m.call(this,u,n,o)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-captions-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-captions-button "+m.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new Ea(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),m.prototype.createItems.call(this,n)},l}(ih);Vc.prototype.kind_="captions",Vc.prototype.controlText_="Captions",Je.registerComponent("CaptionsButton",Vc);var Hc=function(m){function l(){return m.apply(this,arguments)||this}return W(l,m),l.prototype.createEl=function(n,o,h){var y=m.prototype.createEl.call(this,n,o,h),S=y.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(S.appendChild(wt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(wt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),y},l}(zh);Je.registerComponent("SubsCapsMenuItem",Hc);var el=function(m){function l(u,n){var o;return void 0===n&&(n={}),(o=m.call(this,u,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(o.player_.language_)>-1&&(o.label_="captions"),o.menuButton_.controlText(sn(o.label_)),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-subs-caps-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+m.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new Ea(this.player_,{kind:this.label_})),this.hideThreshold_+=1),m.prototype.createItems.call(this,n,Hc)},l}(ih);el.prototype.kinds_=["captions","subtitles"],el.prototype.controlText_="Subtitles",Je.registerComponent("SubsCapsButton",el);var Bf=function(m){function l(u,n){var o,h=n.track,y=u.audioTracks();n.label=h.label||h.language||"Unknown",n.selected=h.enabled,(o=m.call(this,u,n)||this).track=h,o.addClass("vjs-"+h.kind+"-menu-item");var S=function(){for(var V=arguments.length,re=new Array(V),ee=0;ee<V;ee++)re[ee]=arguments[ee];o.handleTracksChange.apply(et(o),re)};return y.addEventListener("change",S),o.on("dispose",function(){y.removeEventListener("change",S)}),o}W(l,m);var a=l.prototype;return a.createEl=function(n,o,h){var y=m.prototype.createEl.call(this,n,o,h),S=y.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(S.appendChild(m.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(m.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),y},a.handleClick=function(n){m.prototype.handleClick.call(this,n),this.track.enabled=!0},a.handleTracksChange=function(n){this.selected(this.track.enabled)},l}(Xu);Je.registerComponent("AudioTrackMenuItem",Bf);var $c=function(m){function l(u,n){return void 0===n&&(n={}),n.tracks=u.audioTracks(),m.call(this,u,n)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-audio-button "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-audio-button "+m.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(n){void 0===n&&(n=[]),this.hideThreshold_=1;for(var o=this.player_.audioTracks(),h=0;h<o.length;h++)n.push(new Bf(this.player_,{track:o[h],selectable:!0,multiSelectable:!1}));return n},l}(Rp);$c.prototype.controlText_="Audio Track",Je.registerComponent("AudioTrackButton",$c);var Ll=function(m){function l(u,n){var o,h=n.rate,y=parseFloat(h,10);return n.label=h,n.selected=y===u.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(o=m.call(this,u,n)||this).label=h,o.rate=y,o.on(u,"ratechange",function(S){return o.update(S)}),o}W(l,m);var a=l.prototype;return a.handleClick=function(n){m.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},a.update=function(n){this.selected(this.player().playbackRate()===this.rate)},l}(Xu);Ll.prototype.contentElType="button",Je.registerComponent("PlaybackRateMenuItem",Ll);var sh=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).menuButton_.el_.setAttribute("aria-describedby",o.labelElId_),o.updateVisibility(),o.updateLabel(),o.on(u,"loadstart",function(h){return o.updateVisibility(h)}),o.on(u,"ratechange",function(h){return o.updateLabel(h)}),o.on(u,"playbackrateschange",function(h){return o.handlePlaybackRateschange(h)}),o}W(l,m);var a=l.prototype;return a.createEl=function(){var n=m.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=wt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),n.appendChild(this.labelEl_),n},a.dispose=function(){this.labelEl_=null,m.prototype.dispose.call(this)},a.buildCSSClass=function(){return"vjs-playback-rate "+m.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-playback-rate "+m.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){for(var n=this.playbackRates(),o=[],h=n.length-1;h>=0;h--)o.push(new Ll(this.player(),{rate:n[h]+"x"}));return o},a.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},a.handleClick=function(n){for(var o=this.player().playbackRate(),h=this.playbackRates(),y=h[0],S=0;S<h.length;S++)if(h[S]>o){y=h[S];break}this.player().playbackRate(y)},a.handlePlaybackRateschange=function(n){this.update()},a.playbackRates=function(){var n=this.player();return n.playbackRates&&n.playbackRates()||[]},a.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},a.updateVisibility=function(n){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},a.updateLabel=function(n){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},l}(Gh);sh.prototype.controlText_="Playback Rate",Je.registerComponent("PlaybackRateMenuButton",sh);var tl=function(m){function l(){return m.apply(this,arguments)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-spacer "+m.prototype.buildCSSClass.call(this)},a.createEl=function(n,o,h){return void 0===n&&(n="div"),void 0===o&&(o={}),void 0===h&&(h={}),o.className||(o.className=this.buildCSSClass()),m.prototype.createEl.call(this,n,o,h)},l}(Je);Je.registerComponent("Spacer",tl);var Rg=function(m){function l(){return m.apply(this,arguments)||this}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-custom-control-spacer "+m.prototype.buildCSSClass.call(this)},a.createEl=function(){return m.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},l}(tl);Je.registerComponent("CustomControlSpacer",Rg);var nl=function(m){function l(){return m.apply(this,arguments)||this}return W(l,m),l.prototype.createEl=function(){return m.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},l}(Je);nl.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ze()&&nl.prototype.options_.children.splice(nl.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Je.registerComponent("ControlBar",nl);var Ng=function(m){function l(u,n){var o;return(o=m.call(this,u,n)||this).on(u,"error",function(h){return o.open(h)}),o}W(l,m);var a=l.prototype;return a.buildCSSClass=function(){return"vjs-error-display "+m.prototype.buildCSSClass.call(this)},a.content=function(){var n=this.player().error();return n?this.localize(n.message):""},l}(Du);Ng.prototype.options_=rt({},Du.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Je.registerComponent("ErrorDisplay",Ng);var Ua="vjs-text-track-settings",Wh=["#000","Black"],Fl=["#00F","Blue"],Lp=["#0FF","Cyan"],rl=["#0F0","Green"],Uf=["#F0F","Magenta"],oh=["#F00","Red"],Lg=["#FFF","White"],au=["#FF0","Yellow"],ai=["1","Opaque"],ah=["0.5","Semi-Transparent"],Gc=["0","Transparent"],co={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Wh,Lg,oh,rl,Fl,au,Uf,Lp]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ai,ah,Gc]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Lg,Wh,oh,rl,Fl,au,Uf,Lp]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(l){return"1.00"===l?null:Number(l)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ai,ah]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Gc,ah,ai]}};function md(m,l){if(l&&(m=l(m)),m&&"none"!==m)return m}co.windowColor.options=co.backgroundColor.options;var xu=function(m){function l(u,n){var o;return n.temporary=!1,(o=m.call(this,u,n)||this).updateDisplay=o.updateDisplay.bind(et(o)),o.fill(),o.hasBeenOpened_=o.hasBeenFilled_=!0,o.endDialog=wt("p",{className:"vjs-control-text",textContent:o.localize("End of dialog window.")}),o.el().appendChild(o.endDialog),o.setDefaults(),void 0===n.persistTextTrackSettings&&(o.options_.persistTextTrackSettings=o.options_.playerOptions.persistTextTrackSettings),o.on(o.$(".vjs-done-button"),"click",function(){o.saveSettings(),o.close()}),o.on(o.$(".vjs-default-button"),"click",function(){o.setDefaults(),o.updateDisplay()}),Gs(co,function(h){o.on(o.$(h.selector),"change",o.updateDisplay)}),o.options_.persistTextTrackSettings&&o.restoreSettings(),o}W(l,m);var a=l.prototype;return a.dispose=function(){this.endDialog=null,m.prototype.dispose.call(this)},a.createElSelect_=function(n,o,h){var y=this;void 0===o&&(o=""),void 0===h&&(h="label");var S=co[n],x=S.id.replace("%s",this.id_),V=[o,x].join(" ").trim();return["<"+h+' id="'+x+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(S.label),"</"+h+">",'<select aria-labelledby="'+V+'">'].concat(S.options.map(function(re){var ee=x+"-"+re[1].replace(/\W+/g,"");return['<option id="'+ee+'" value="'+re[0]+'" ','aria-labelledby="'+V+" "+ee+'">',y.localize(re[1]),"</option>"].join("")})).concat("</select>").join("")},a.createElFgColor_=function(){var n="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",n),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",n),"</span>","</fieldset>"].join("")},a.createElBgColor_=function(){var n="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",n),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",n),"</span>","</fieldset>"].join("")},a.createElWinColor_=function(){var n="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",n),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",n),"</span>","</fieldset>"].join("")},a.createElColors_=function(){return wt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},a.createElFont_=function(){return wt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},a.createElControls_=function(){var n=this.localize("restore all settings to the default values");return wt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+n+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+n+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},a.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function(){return this.localize("Caption Settings Dialog")},a.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},a.buildCSSClass=function(){return m.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},a.getValues=function(){var n=this;return function Gi(m,l,a){return void 0===a&&(a=0),$s(m).reduce(function(u,n){return l(u,m[n],n)},a)}(co,function(o,h,y){var S=function qh(m,l){return md(m.options[m.options.selectedIndex].value,l)}(n.$(h.selector),h.parser);return void 0!==S&&(o[y]=S),o},{})},a.setValues=function(n){var o=this;Gs(co,function(h,y){!function Kh(m,l,a){if(l)for(var u=0;u<m.options.length;u++)if(md(m.options[u].value,a)===l){m.selectedIndex=u;break}}(o.$(h.selector),n[y],h.parser)})},a.setDefaults=function(){var n=this;Gs(co,function(o){var h=o.hasOwnProperty("default")?o.default:0;n.$(o.selector).selectedIndex=h})},a.restoreSettings=function(){var n;try{n=JSON.parse(ge().localStorage.getItem(Ua))}catch(o){Ln.warn(o)}n&&this.setValues(n)},a.saveSettings=function(){if(this.options_.persistTextTrackSettings){var n=this.getValues();try{Object.keys(n).length?ge().localStorage.setItem(Ua,JSON.stringify(n)):ge().localStorage.removeItem(Ua)}catch(o){Ln.warn(o)}}},a.updateDisplay=function(){var n=this.player_.getChild("textTrackDisplay");n&&n.updateDisplay()},a.conditionalBlur_=function(){this.previouslyActiveEl_=null;var n=this.player_.controlBar,o=n&&n.subsCapsButton,h=n&&n.captionsButton;o?o.focus():h&&h.focus()},l}(Du);Je.registerComponent("TextTrackSettings",xu);var uh=function(m){function l(u,n){var o,h=n.ResizeObserver||ge().ResizeObserver;null===n.ResizeObserver&&(h=!1);var y=jn({createEl:!h,reportTouchActivity:!1},n);return(o=m.call(this,u,y)||this).ResizeObserver=n.ResizeObserver||ge().ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=function(l,a,u,n){void 0===n&&(n=ge());var o,y=function(){var x=this,V=arguments,re=function(){o=null,re=null,l.apply(x,V)};n.clearTimeout(o),o=n.setTimeout(re,100)};return y.cancel=function(){n.clearTimeout(o),o=null},y}(function(){o.resizeHandler()},0,0,et(o)),h?(o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(u.el())):(o.loadListener_=function(){if(o.el_&&o.el_.contentWindow){var S=o.debouncedHandler_,x=o.unloadListener_=function(){so(this,"resize",S),so(this,"unload",x),x=null};_a(o.el_.contentWindow,"unload",x),_a(o.el_.contentWindow,"resize",S)}},o.one("load",o.loadListener_)),o}W(l,m);var a=l.prototype;return a.createEl=function(){return m.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},a.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},a.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,m.prototype.dispose.call(this)},l}(Je);Je.registerComponent("ResizeManager",uh);var Fp={trackingThreshold:30,liveTolerance:15},vd=function(m){function l(u,n){var o,h=jn(Fp,n,{createEl:!1});return(o=m.call(this,u,h)||this).handleVisibilityChange_=function(y){return o.handleVisibilityChange(y)},o.trackLiveHandler_=function(){return o.trackLive_()},o.handlePlay_=function(y){return o.handlePlay(y)},o.handleFirstTimeupdate_=function(y){return o.handleFirstTimeupdate(y)},o.handleSeeked_=function(y){return o.handleSeeked(y)},o.seekToLiveEdge_=function(y){return o.seekToLiveEdge(y)},o.reset_(),o.on(o.player_,"durationchange",function(y){return o.handleDurationchange(y)}),o.one(o.player_,"canplay",function(){return o.toggleTracking()}),Cu&&"hidden"in Ze()&&"visibilityState"in Ze()&&o.on(Ze(),"visibilitychange",o.handleVisibilityChange_),o}W(l,m);var a=l.prototype;return a.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ze().hidden?this.stopTracking():this.startTracking())},a.trackLive_=function(){var n=this.player_.seekable();if(n&&n.length){var o=Number(ge().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(o-this.lastTime_)/1e3;this.lastTime_=o,this.pastSeekEnd_=this.pastSeekEnd()+h;var y=this.liveCurrentTime(),S=this.player_.currentTime(),x=this.player_.paused()||this.seekedBehindLive_||Math.abs(y-S)>this.options_.liveTolerance;(!this.timeupdateSeen_||y===1/0)&&(x=!1),x!==this.behindLiveEdge_&&(this.behindLiveEdge_=x,this.trigger("liveedgechange"))}},a.handleDurationchange=function(){this.toggleTracking()},a.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},a.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},a.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},a.handleSeeked=function(){var n=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&n>2,this.nextSeekedFromUser_=!1,this.trackLive_()},a.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},a.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},a.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},a.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},a.seekableEnd=function(){for(var n=this.player_.seekable(),o=[],h=n?n.length:0;h--;)o.push(n.end(h));return o.length?o.sort()[o.length-1]:1/0},a.seekableStart=function(){for(var n=this.player_.seekable(),o=[],h=n?n.length:0;h--;)o.push(n.start(h));return o.length?o.sort()[0]:0},a.liveWindow=function(){var n=this.liveCurrentTime();return n===1/0?0:n-this.seekableStart()},a.isLive=function(){return this.isTracking()},a.atLiveEdge=function(){return!this.behindLiveEdge()},a.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},a.pastSeekEnd=function(){var n=this.seekableEnd();return-1!==this.lastSeekEnd_&&n!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=n,this.pastSeekEnd_},a.behindLiveEdge=function(){return this.behindLiveEdge_},a.isTracking=function(){return"number"==typeof this.trackingInterval_},a.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},a.dispose=function(){this.off(Ze(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),m.prototype.dispose.call(this)},l}(Je);Je.registerComponent("LiveTracker",vd);var Ms,fl=function(l){var a=l.el();if(a.hasAttribute("src"))return l.triggerSourceset(a.src),!0;var u=l.$$("source"),n=[],o="";if(!u.length)return!1;for(var h=0;h<u.length;h++){var y=u[h].src;y&&-1===n.indexOf(y)&&n.push(y)}return!!n.length&&(1===n.length&&(o=n[0]),l.triggerSourceset(o),!0)},Zh=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(l){var a=Ze().createElement(this.nodeName.toLowerCase());a.innerHTML=l;for(var u=Ze().createDocumentFragment();a.childNodes.length;)u.appendChild(a.childNodes[0]);return this.innerText="",ge().Element.prototype.appendChild.call(this,u),this.innerHTML}}),zc=function(l,a){for(var u={},n=0;n<l.length&&!((u=Object.getOwnPropertyDescriptor(l[n],a))&&u.set&&u.get);n++);return u.enumerable=!0,u.configurable=!0,u},gc=function(l){var a=l.el();if(!a.resetSourceWatch_){var u={},n=function(l){return zc([l.el(),ge().HTMLMediaElement.prototype,ge().Element.prototype,Zh],"innerHTML")}(l),o=function(y){return function(){for(var S=arguments.length,x=new Array(S),V=0;V<S;V++)x[V]=arguments[V];var re=y.apply(a,x);return fl(l),re}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){a[h]&&(u[h]=a[h],a[h]=o(u[h]))}),Object.defineProperty(a,"innerHTML",jn(n,{set:o(n.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(u).forEach(function(h){a[h]=u[h]}),Object.defineProperty(a,"innerHTML",n)},l.one("sourceset",a.resetSourceWatch_)}},pl=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Qd(ge().Element.prototype.getAttribute.call(this,"src")):""},set:function(l){return ge().Element.prototype.setAttribute.call(this,"src",l),l}}),Up=function(l,a,u,n){void 0===n&&(n=!0);var o=function(S){return Object.defineProperty(l,a,{value:S,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var S=u();return o(S),S}};return n&&(h.set=o),Object.defineProperty(l,a,h)},gr=function(m){function l(u,n){var o;o=m.call(this,u,n)||this;var h=u.source,y=!1;if(h&&(o.el_.currentSrc!==h.src||u.tag&&3===u.tag.initNetworkState_)?o.setSource(h):o.handleLateInit_(o.el_),u.enableSourceset&&o.setupSourcesetHandling_(),o.isScrubbing_=!1,o.el_.hasChildNodes()){for(var S=o.el_.childNodes,x=S.length,V=[];x--;){var re=S[x];"track"===re.nodeName.toLowerCase()&&(o.featuresNativeTextTracks?(o.remoteTextTrackEls().addTrackElement_(re),o.remoteTextTracks().addTrack(re.track),o.textTracks().addTrack(re.track),!y&&!o.el_.hasAttribute("crossorigin")&&Fc(re.src)&&(y=!0)):V.push(re))}for(var De=0;De<V.length;De++)o.el_.removeChild(V[De])}return o.proxyNativeTracks_(),o.featuresNativeTextTracks&&y&&Ln.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),o.restoreMetadataTracksInIOSNativePlayer_(),(ma||cl||Eu)&&!0===u.nativeControlsForTouch&&o.setControls(!0),o.proxyWebkitFullscreen_(),o.triggerReady(),o}W(l,m);var a=l.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),l.disposeMediaElement(this.el_),this.options_=null,m.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){!function(l){if(l.featuresSourceset){var a=l.el();if(!a.resetSourceset_){var u=function(l){return zc([l.el(),ge().HTMLMediaElement.prototype,pl],"src")}(l),n=a.setAttribute,o=a.load;Object.defineProperty(a,"src",jn(u,{set:function(y){var S=u.set.call(a,y);return l.triggerSourceset(a.src),S}})),a.setAttribute=function(h,y){var S=n.call(a,h,y);return/src/i.test(h)&&l.triggerSourceset(a.src),S},a.load=function(){var h=o.call(a);return fl(l)||(l.triggerSourceset(""),gc(l)),h},a.currentSrc?l.triggerSourceset(a.currentSrc):fl(l)||gc(l),a.resetSourceset_=function(){a.resetSourceset_=null,a.load=o,a.setAttribute=n,Object.defineProperty(a,"src",u),a.resetSourceWatch_&&a.resetSourceWatch_()}}}}(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){var o,n=this.textTracks(),h=function(){o=[];for(var x=0;x<n.length;x++){var V=n[x];"metadata"===V.kind&&o.push({track:V,storedMode:V.mode})}};h(),n.addEventListener("change",h),this.on("dispose",function(){return n.removeEventListener("change",h)});var y=function S(){for(var x=0;x<o.length;x++){var V=o[x];"disabled"===V.track.mode&&V.track.mode!==V.storedMode&&(V.track.mode=V.storedMode)}n.removeEventListener("change",S)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",h),n.removeEventListener("change",y),n.addEventListener("change",y)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",h),n.addEventListener("change",h),n.removeEventListener("change",y)})},a.overrideNative_=function(n,o){var h=this;if(o===this["featuresNative"+n+"Tracks"]){var y=n.toLowerCase();this[y+"TracksListeners_"]&&Object.keys(this[y+"TracksListeners_"]).forEach(function(S){h.el()[y+"Tracks"].removeEventListener(S,h[y+"TracksListeners_"][S])}),this["featuresNative"+n+"Tracks"]=!o,this[y+"TracksListeners_"]=null,this.proxyNativeTracksForType_(y)}},a.overrideNativeAudioTracks=function(n){this.overrideNative_("Audio",n)},a.overrideNativeVideoTracks=function(n){this.overrideNative_("Video",n)},a.proxyNativeTracksForType_=function(n){var o=this,h=iu[n],y=this.el()[h.getterName],S=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&y&&y.addEventListener){var x={change:function(ee){var De={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(De),"text"===n&&o[ia.remoteText.getterName]().trigger(De)},addtrack:function(ee){S.addTrack(ee.track)},removetrack:function(ee){S.removeTrack(ee.track)}},V=function(){for(var ee=[],De=0;De<S.length;De++){for(var ze=!1,Ve=0;Ve<y.length;Ve++)if(y[Ve]===S[De]){ze=!0;break}ze||ee.push(S[De])}for(;ee.length;)S.removeTrack(ee.shift())};this[h.getterName+"Listeners_"]=x,Object.keys(x).forEach(function(re){var ee=x[re];y.addEventListener(re,ee),o.on("dispose",function(De){return y.removeEventListener(re,ee)})}),this.on("loadstart",V),this.on("dispose",function(re){return o.off("loadstart",V)})}},a.proxyNativeTracks_=function(){var n=this;iu.names.forEach(function(o){n.proxyNativeTracksForType_(o)})},a.createEl=function(){var n=this.options_.tag;if(!n||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(n){var o=n.cloneNode(!0);n.parentNode&&n.parentNode.insertBefore(o,n),l.disposeMediaElement(n),n=o}else{n=Ze().createElement("video");var y=jn({},this.options_.tag&&Br(this.options_.tag));(!ma||!0!==this.options_.nativeControlsForTouch)&&delete y.controls,os(n,Yr(y,{id:this.options_.techId,class:"vjs-tech"}))}n.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Ws(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var S=["loop","muted","playsinline","autoplay"],x=0;x<S.length;x++){var V=S[x],re=this.options_[V];typeof re<"u"&&(re?Ws(n,V,V):ur(n,V),n[V]=re)}return n},a.handleLateInit_=function(n){if(0!==n.networkState&&3!==n.networkState){if(0===n.readyState){var o=!1,h=function(){o=!0};this.on("loadstart",h);var y=function(){o||this.trigger("loadstart")};return this.on("loadedmetadata",y),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",y),o||this.trigger("loadstart")})}var S=["loadstart"];S.push("loadedmetadata"),n.readyState>=2&&S.push("loadeddata"),n.readyState>=3&&S.push("canplay"),n.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(x){this.trigger(x)},this)})}},a.setScrubbing=function(n){this.isScrubbing_=n},a.scrubbing=function(){return this.isScrubbing_},a.setCurrentTime=function(n){try{this.isScrubbing_&&this.el_.fastSeek&&ea?this.el_.fastSeek(n):this.el_.currentTime=n}catch(o){Ln(o,"Video is not ready. (Video.js)")}},a.duration=function(){var n=this;return this.el_.duration===1/0&&ga&&io&&0===this.el_.currentTime?(this.on("timeupdate",function h(){n.el_.currentTime>0&&(n.el_.duration===1/0&&n.trigger("durationchange"),n.off("timeupdate",h))}),NaN):this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var n=this;if("webkitDisplayingFullscreen"in this.el_){var o=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",o),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){n.off("webkitbeginfullscreen",h),n.off("webkitendfullscreen",o)})}},a.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var n=ge().navigator&&ge().navigator.userAgent||"";if(/Android/.test(n)||!/Chrome|Mac OS X 10.5/.test(n))return!0}return!1},a.enterFullScreen=function(){var n=this.el_;if(n.paused&&n.networkState<=n.HAVE_METADATA)Ya(this.el_.play()),this.setTimeout(function(){n.pause();try{n.webkitEnterFullScreen()}catch(o){this.trigger("fullscreenerror",o)}},0);else try{n.webkitEnterFullScreen()}catch(o){this.trigger("fullscreenerror",o)}},a.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},a.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},a.src=function(n){if(void 0===n)return this.el_.src;this.setSrc(n)},a.reset=function(){l.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(n){this.el_.controls=!!n},a.addTextTrack=function(n,o,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(n,o,h):m.prototype.addTextTrack.call(this,n,o,h)},a.createRemoteTextTrack=function(n){if(!this.featuresNativeTextTracks)return m.prototype.createRemoteTextTrack.call(this,n);var o=Ze().createElement("track");return n.kind&&(o.kind=n.kind),n.label&&(o.label=n.label),(n.language||n.srclang)&&(o.srclang=n.language||n.srclang),n.default&&(o.default=n.default),n.id&&(o.id=n.id),n.src&&(o.src=n.src),o},a.addRemoteTextTrack=function(n,o){var h=m.prototype.addRemoteTextTrack.call(this,n,o);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},a.removeRemoteTextTrack=function(n){if(m.prototype.removeRemoteTextTrack.call(this,n),this.featuresNativeTextTracks)for(var o=this.$$("track"),h=o.length;h--;)(n===o[h]||n===o[h].track)&&this.el().removeChild(o[h])},a.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var n={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(n.droppedVideoFrames=this.el().webkitDroppedFrameCount,n.totalVideoFrames=this.el().webkitDecodedFrameCount),ge().performance&&"function"==typeof ge().performance.now?n.creationTime=ge().performance.now():ge().performance&&ge().performance.timing&&"number"==typeof ge().performance.timing.navigationStart&&(n.creationTime=ge().Date.now()-ge().performance.timing.navigationStart),n},l}(ki);Up(gr,"TEST_VID",function(){if(ce()){var m=Ze().createElement("video"),l=Ze().createElement("track");return l.kind="captions",l.srclang="en",l.label="English",m.appendChild(l),m}}),gr.isSupported=function(){try{gr.TEST_VID.volume=.5}catch{return!1}return!(!gr.TEST_VID||!gr.TEST_VID.canPlayType)},gr.canPlayType=function(m){return gr.TEST_VID.canPlayType(m)},gr.canPlaySource=function(m,l){return gr.canPlayType(m.type)},gr.canControlVolume=function(){try{var m=gr.TEST_VID.volume;return gr.TEST_VID.volume=m/2+.1,m!==gr.TEST_VID.volume}catch{return!1}},gr.canMuteVolume=function(){try{var m=gr.TEST_VID.muted;return gr.TEST_VID.muted=!m,gr.TEST_VID.muted?Ws(gr.TEST_VID,"muted","muted"):ur(gr.TEST_VID,"muted"),m!==gr.TEST_VID.muted}catch{return!1}},gr.canControlPlaybackRate=function(){if(ga&&io&&Gu<58)return!1;try{var m=gr.TEST_VID.playbackRate;return gr.TEST_VID.playbackRate=m/2+.1,m!==gr.TEST_VID.playbackRate}catch{return!1}},gr.canOverrideAttributes=function(){try{var m=function(){};Object.defineProperty(Ze().createElement("video"),"src",{get:m,set:m}),Object.defineProperty(Ze().createElement("audio"),"src",{get:m,set:m}),Object.defineProperty(Ze().createElement("video"),"innerHTML",{get:m,set:m}),Object.defineProperty(Ze().createElement("audio"),"innerHTML",{get:m,set:m})}catch{return!1}return!0},gr.supportsNativeTextTracks=function(){return ea||ws&&io},gr.supportsNativeVideoTracks=function(){return!(!gr.TEST_VID||!gr.TEST_VID.videoTracks)},gr.supportsNativeAudioTracks=function(){return!(!gr.TEST_VID||!gr.TEST_VID.audioTracks)},gr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(m){var a=m[1];Up(gr.prototype,m[0],function(){return gr[a]()},!0)}),gr.prototype.movingMediaElementInDOM=!ws,gr.prototype.featuresFullscreenResize=!0,gr.prototype.featuresProgressEvents=!0,gr.prototype.featuresTimeupdateEvents=!0,gr.patchCanPlayType=function(){$u>=4&&!ll&&!io&&(Ms=gr.TEST_VID&&gr.TEST_VID.constructor.prototype.canPlayType,gr.TEST_VID.constructor.prototype.canPlayType=function(m){return m&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(m)?"maybe":Ms.call(this,m)})},gr.unpatchCanPlayType=function(){var m=gr.TEST_VID.constructor.prototype.canPlayType;return Ms&&(gr.TEST_VID.constructor.prototype.canPlayType=Ms),m},gr.patchCanPlayType(),gr.disposeMediaElement=function(m){if(m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("src"),"function"==typeof m.load&&function(){try{m.load()}catch{}}()}},gr.resetMediaElement=function(m){if(m){for(var l=m.querySelectorAll("source"),a=l.length;a--;)m.removeChild(l[a]);m.removeAttribute("src"),"function"==typeof m.load&&function(){try{m.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(m){gr.prototype[m]=function(){return this.el_[m]||this.el_.hasAttribute(m)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(m){gr.prototype["set"+sn(m)]=function(l){this.el_[m]=l,l?this.el_.setAttribute(m,m):this.el_.removeAttribute(m)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(m){gr.prototype[m]=function(){return this.el_[m]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(m){gr.prototype["set"+sn(m)]=function(l){this.el_[m]=l}}),["pause","load","play"].forEach(function(m){gr.prototype[m]=function(){return this.el_[m]()}}),ki.withSourceHandlers(gr),gr.nativeSourceHandler={},gr.nativeSourceHandler.canPlayType=function(m){try{return gr.TEST_VID.canPlayType(m)}catch{return""}},gr.nativeSourceHandler.canHandleSource=function(m,l){if(m.type)return gr.nativeSourceHandler.canPlayType(m.type);if(m.src){var a=cd(m.src);return gr.nativeSourceHandler.canPlayType("video/"+a)}return""},gr.nativeSourceHandler.handleSource=function(m,l,a){l.setSrc(m.src)},gr.nativeSourceHandler.dispose=function(){},gr.registerSourceHandler(gr.nativeSourceHandler),ki.registerTech("Html5",gr);var aa=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],vc={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},gl=["tiny","xsmall","small","medium","large","xlarge","huge"],yd={};gl.forEach(function(m){var l="x"===m.charAt(0)?"x-"+m.substring(1):m;yd[m]="vjs-layout-"+l});var yu={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Xs=function(m){function l(u,n,o){var h;if(u.id=u.id||n.id||"vjs_video_"+lr(),(n=Yr(l.getTagSettings(u),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof u.closest){var y=u.closest("[lang]");y&&y.getAttribute&&(n.language=y.getAttribute("lang"))}else for(var S=u;S&&1===S.nodeType;){if(Br(S).hasOwnProperty("lang")){n.language=S.getAttribute("lang");break}S=S.parentNode}if((h=m.call(this,null,n,o)||this).boundDocumentFullscreenChange_=function(ee){return h.documentFullscreenChange_(ee)},h.boundFullWindowOnEscKey_=function(ee){return h.fullWindowOnEscKey(ee)},h.boundUpdateStyleEl_=function(ee){return h.updateStyleEl_(ee)},h.boundApplyInitTime_=function(ee){return h.applyInitTime_(ee)},h.boundUpdateCurrentBreakpoint_=function(ee){return h.updateCurrentBreakpoint_(ee)},h.boundHandleTechClick_=function(ee){return h.handleTechClick_(ee)},h.boundHandleTechDoubleClick_=function(ee){return h.handleTechDoubleClick_(ee)},h.boundHandleTechTouchStart_=function(ee){return h.handleTechTouchStart_(ee)},h.boundHandleTechTouchMove_=function(ee){return h.handleTechTouchMove_(ee)},h.boundHandleTechTouchEnd_=function(ee){return h.handleTechTouchEnd_(ee)},h.boundHandleTechTap_=function(ee){return h.handleTechTap_(ee)},h.isFullscreen_=!1,h.log=$i(h.id_),h.fsApi_=Vt,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=u,h.tagAttributes=u&&Br(u),h.language(h.options_.language),n.languages){var x={};Object.getOwnPropertyNames(n.languages).forEach(function(ee){x[ee.toLowerCase()]=n.languages[ee]}),h.languages_=x}else h.languages_=l.prototype.options_.languages;h.resetCache_(),h.poster_=n.poster||"",h.controls_=!!n.controls,u.controls=!1,u.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],u.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(function(ee){if("function"!=typeof h[ee])throw new Error('plugin "'+ee+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),de(et(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(_a(Ze(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var V=jn(h.options_);n.plugins&&Object.keys(n.plugins).forEach(function(ee){h[ee](n.plugins[ee])}),n.debug&&h.debug(!0),h.options_.playerOptions=V,h.middleware_=[],h.playbackRates(n.playbackRates),h.initChildren(),h.isAudio("audio"===u.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),ma&&h.addClass("vjs-touch-enabled"),ws||h.addClass("vjs-workinghover"),l.players[h.id_]=et(h);var re="7.15.4".split(".")[0];return h.addClass("vjs-v"+re),h.userActive(!0),h.reportUserActivity(),h.one("play",function(ee){return h.listenForUserActivity_(ee)}),h.on("stageclick",function(ee){return h.handleStageClick_(ee)}),h.on("keydown",function(ee){return h.handleKeyDown(ee)}),h.on("languagechange",function(ee){return h.handleLanguagechange(ee)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h}W(l,m);var a=l.prototype;return a.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),so(Ze(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),so(Ze(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),l.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Qs(m){ns[m.id()]=null}(this),Eo.names.forEach(function(o){var y=n[Eo[o].getterName]();y&&y.off&&y.off()}),m.prototype.dispose.call(this)},a.createEl=function(){var o,n=this.tag,h=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),y="video-js"===this.tag.tagName.toLowerCase();h?o=this.el_=n.parentNode:y||(o=this.el_=m.prototype.createEl.call(this,"div"));var S=Br(n);if(y){for(o=this.el_=n,n=this.tag=Ze().createElement("video");o.children.length;)n.appendChild(o.firstChild);Ci(o,"video-js")||Pr(o,"video-js"),o.appendChild(n),h=this.playerElIngest_=o,Object.keys(o).forEach(function(ze){try{n[ze]=o[ze]}catch{}})}if(n.setAttribute("tabindex","-1"),S.tabindex="-1",(Cu||io&&Xl)&&(n.setAttribute("role","application"),S.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in S&&delete S.width,"height"in S&&delete S.height,Object.getOwnPropertyNames(S).forEach(function(ze){y&&"class"===ze||o.setAttribute(ze,S[ze]),y&&n.setAttribute(ze,S[ze])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=o.player=this,this.addClass("vjs-paused"),!0!==ge().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=zi("vjs-styles-dimensions");var x=ra(".vjs-styles-defaults"),V=ra("head");V.insertBefore(this.styleEl_,x?x.nextSibling:V.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var re=n.getElementsByTagName("a"),ee=0;ee<re.length;ee++){var De=re.item(ee);Pr(De,"vjs-hidden"),De.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!h&&n.parentNode.insertBefore(o,n),sr(n,o),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=o,o},a.crossOrigin=function(n){if(!n)return this.techGet_("crossOrigin");"anonymous"===n||"use-credentials"===n?this.techCall_("setCrossOrigin",n):Ln.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+n+'"')},a.width=function(n){return this.dimension("width",n)},a.height=function(n){return this.dimension("height",n)},a.dimension=function(n,o){var h=n+"_";if(void 0===o)return this[h]||0;if(""===o||"auto"===o)return this[h]=void 0,void this.updateStyleEl_();var y=parseFloat(o);isNaN(y)?Ln.error('Improper value "'+o+'" supplied for for '+n):(this[h]=y,this.updateStyleEl_())},a.fluid=function(n){var o=this;if(void 0===n)return!!this.fluid_;this.fluid_=!!n,bo(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),n?(this.addClass("vjs-fluid"),this.fill(!1),function(l,a){bo(l)?a():(l.eventedCallbacks||(l.eventedCallbacks=[]),l.eventedCallbacks.push(a))}(this,function(){o.on(["playerreset","resize"],o.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},a.fill=function(n){if(void 0===n)return!!this.fill_;this.fill_=!!n,n?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},a.aspectRatio=function(n){if(void 0===n)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(n))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=n,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0!==ge().VIDEOJS_NO_DYNAMIC_STYLE){var y,S,V,re=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),ee=re[1]/re[0];y=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/ee:this.videoWidth()||300,S=void 0!==this.height_?this.height_:y*ee,V=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(V),To(this.styleEl_,"\n      ."+V+" {\n        width: "+y+"px;\n        height: "+S+"px;\n      }\n\n      ."+V+".vjs-fluid {\n        padding-top: "+100*ee+"%;\n      }\n    ")}else{var n="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(n>=0&&(h.width=n),o>=0&&(h.height=o))}},a.loadTech_=function(n,o){var h=this;this.tech_&&this.unloadTech_();var y=sn(n),S=n.charAt(0).toLowerCase()+n.slice(1);"Html5"!==y&&this.tag&&(ki.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=y,this.isReady_=!1;var x=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(x=!1);var V={source:o,autoplay:x,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Eo.names.forEach(function(ee){var De=Eo[ee];V[De.getterName]=h[De.privateName]}),Yr(V,this.options_[y]),Yr(V,this.options_[S]),Yr(V,this.options_[n.toLowerCase()]),this.tag&&(V.tag=this.tag),o&&o.src===this.cache_.src&&this.cache_.currentTime>0&&(V.startTime=this.cache_.currentTime);var re=ki.getTech(n);if(!re)throw new Error("No Tech named '"+y+"' exists! '"+y+"' should be registered using videojs.registerTech()'");this.tech_=new re(V),this.tech_.ready(ts(this,this.handleTechReady_),!0),function(l,a){l.forEach(function(u){var n=a.addRemoteTextTrack(u).track;!u.src&&u.cues&&u.cues.forEach(function(o){return n.addCue(o)})}),a.textTracks()}(this.textTracksJson_||[],this.tech_),aa.forEach(function(ee){h.on(h.tech_,ee,function(De){return h["handleTech"+sn(ee)+"_"](De)})}),Object.keys(vc).forEach(function(ee){h.on(h.tech_,ee,function(De){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+vc[ee]+"_"].bind(h),event:De}):h["handleTech"+vc[ee]+"_"](De)})}),this.on(this.tech_,"loadstart",function(ee){return h.handleTechLoadStart_(ee)}),this.on(this.tech_,"sourceset",function(ee){return h.handleTechSourceset_(ee)}),this.on(this.tech_,"waiting",function(ee){return h.handleTechWaiting_(ee)}),this.on(this.tech_,"ended",function(ee){return h.handleTechEnded_(ee)}),this.on(this.tech_,"seeking",function(ee){return h.handleTechSeeking_(ee)}),this.on(this.tech_,"play",function(ee){return h.handleTechPlay_(ee)}),this.on(this.tech_,"firstplay",function(ee){return h.handleTechFirstPlay_(ee)}),this.on(this.tech_,"pause",function(ee){return h.handleTechPause_(ee)}),this.on(this.tech_,"durationchange",function(ee){return h.handleTechDurationChange_(ee)}),this.on(this.tech_,"fullscreenchange",function(ee,De){return h.handleTechFullscreenChange_(ee,De)}),this.on(this.tech_,"fullscreenerror",function(ee,De){return h.handleTechFullscreenError_(ee,De)}),this.on(this.tech_,"enterpictureinpicture",function(ee){return h.handleTechEnterPictureInPicture_(ee)}),this.on(this.tech_,"leavepictureinpicture",function(ee){return h.handleTechLeavePictureInPicture_(ee)}),this.on(this.tech_,"error",function(ee){return h.handleTechError_(ee)}),this.on(this.tech_,"posterchange",function(ee){return h.handleTechPosterChange_(ee)}),this.on(this.tech_,"textdata",function(ee){return h.handleTechTextData_(ee)}),this.on(this.tech_,"ratechange",function(ee){return h.handleTechRateChange_(ee)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==y||!this.tag)&&sr(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var n=this;Eo.names.forEach(function(o){var h=Eo[o];n[h.privateName]=n[h.getterName]()}),this.textTracksJson_=function(l){var a=l.$$("track"),u=Array.prototype.map.call(a,function(o){return o.track});return Array.prototype.map.call(a,function(o){var h=Kd(o.track);return o.src&&(h.src=o.src),h}).concat(Array.prototype.filter.call(l.textTracks(),function(o){return-1===u.indexOf(o)}).map(Kd))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},a.tech=function(n){return void 0===n&&Ln.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},a.manualAutoplay_=function(n){var o=this;if(this.tech_&&"string"==typeof n){var y,h=function(){var x=o.muted();o.muted(!0);var V=function(){o.muted(x)};o.playTerminatedQueue_.push(V);var re=o.play();if(Ml(re))return re.catch(function(ee){throw V(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(ee||""))})};if("any"!==n||this.muted()?y="muted"!==n||this.muted()?this.play():h():Ml(y=this.play())&&(y=y.catch(h)),Ml(y))return y.then(function(){o.trigger({type:"autoplay-success",autoplay:n})}).catch(function(){o.trigger({type:"autoplay-failure",autoplay:n})})}},a.updateSourceCaches_=function(n){void 0===n&&(n="");var o=n,h="";"string"!=typeof o&&(o=n.src,h=n.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],o&&!h&&(h=function(l,a){if(!a)return"";if(l.cache_.source.src===a&&l.cache_.source.type)return l.cache_.source.type;var u=l.cache_.sources.filter(function(y){return y.src===a});if(u.length)return u[0].type;for(var n=l.$$("source"),o=0;o<n.length;o++){var h=n[o];if(h.type&&h.src&&h.src===a)return h.type}return Co(a)}(this,o)),this.cache_.source=jn({},n,{src:o,type:h});for(var y=this.cache_.sources.filter(function(De){return De.src&&De.src===o}),S=[],x=this.$$("source"),V=[],re=0;re<x.length;re++){var ee=Br(x[re]);S.push(ee),ee.src&&ee.src===o&&V.push(ee.src)}V.length&&!y.length?this.cache_.sources=S:y.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=o},a.handleTechSourceset_=function(n){var o=this;if(!this.changingSrc_){var h=function(V){return o.updateSourceCaches_(V)},y=this.currentSource().src,S=n.src;y&&!/^blob:/.test(y)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==y)&&(h=function(){}),h(S),n.src||this.tech_.any(["sourceset","loadstart"],function(x){if("sourceset"!==x.type){var V=o.techGet("currentSrc");o.lastSource_.tech=V,o.updateSourceCaches_(V)}})}this.lastSource_={player:this.currentSource().src,tech:n.src},this.trigger({src:n.src,type:"sourceset"})},a.hasStarted=function(n){if(void 0===n)return this.hasStarted_;n!==this.hasStarted_&&(this.hasStarted_=n,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},a.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},a.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(n){return n.callback(n.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},a.handleTechWaiting_=function(){var n=this;this.addClass("vjs-waiting"),this.trigger("waiting");var o=this.currentTime();this.on("timeupdate",function y(){o!==n.currentTime()&&(n.removeClass("vjs-waiting"),n.off("timeupdate",y))})},a.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},a.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},a.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},a.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},a.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},a.handleTechFirstPlay_=function(){this.options_.starttime&&(Ln.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},a.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},a.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},a.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},a.handleTechClick_=function(n){this.controls_&&(this.paused()?Ya(this.play()):this.pause())},a.handleTechDoubleClick_=function(n){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(n.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,n):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(n){n.cancelable&&n.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},a.documentFullscreenChange_=function(n){var o=n.target.player;if(!o||o===this){var h=this.el(),y=Ze()[this.fsApi_.fullscreenElement]===h;!y&&h.matches?y=h.matches(":"+this.fsApi_.fullscreen):!y&&h.msMatchesSelector&&(y=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(y)}},a.handleTechFullscreenChange_=function(n,o){o&&(o.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(o.isFullscreen))},a.handleTechFullscreenError_=function(n,o){this.trigger("fullscreenerror",o)},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},a.handleTechEnterPictureInPicture_=function(n){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(n){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var n=this.tech_.error();this.error(n)},a.handleTechTextData_=function(){var n=null;arguments.length>1&&(n=arguments[1]),this.trigger("textdata",n)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},a.techCall_=function(n,o){this.ready(function(){if(n in ko)return function Mo(m,l,a,u){return l[a](m.reduce(hd(a),u))}(this.middleware_,this.tech_,n,o);if(n in Xa)return Dp(this.middleware_,this.tech_,n,o);try{this.tech_&&this.tech_[n](o)}catch(h){throw Ln(h),h}},!0)},a.techGet_=function(n){if(this.tech_&&this.tech_.isReady_){if(n in Ol)return function Uh(m,l,a){return m.reduceRight(hd(a),l[a]())}(this.middleware_,this.tech_,n);if(n in Xa)return Dp(this.middleware_,this.tech_,n);try{return this.tech_[n]()}catch(o){throw void 0===this.tech_[n]?(Ln("Video.js: "+n+" method not defined for "+this.techName_+" playback technology.",o),o):"TypeError"===o.name?(Ln("Video.js: "+n+" unavailable on "+this.techName_+" playback technology element.",o),this.tech_.isReady_=!1,o):(Ln(o),o)}}},a.play=function(){var n=this,o=this.options_.Promise||ge().Promise;return o?new o(function(h){n.play_(h)}):this.play_()},a.play_=function(n){var o=this;void 0===n&&(n=Ya),this.playCallbacks_.push(n);var h=!(this.changingSrc_||!this.src()&&!this.currentSrc());if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(S){o.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&(ea||ws)&&this.load());var y=this.techGet_("play");null===y?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(y)},a.runPlayTerminatedQueue_=function(){var n=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],n.forEach(function(o){o()})},a.runPlayCallbacks_=function(n){var o=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],o.forEach(function(h){h(n)})},a.pause=function(){this.techCall_("pause")},a.paused=function(){return!1!==this.techGet_("paused")},a.played=function(){return this.techGet_("played")||Fa(0,0)},a.scrubbing=function(n){if(typeof n>"u")return this.scrubbing_;this.scrubbing_=!!n,this.techCall_("setScrubbing",this.scrubbing_),n?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},a.currentTime=function(n){return typeof n<"u"?(n<0&&(n=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",n),void(this.cache_.initTime=0)):(this.cache_.initTime=n,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},a.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},a.duration=function(n){if(void 0===n)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(n=parseFloat(n))<0&&(n=1/0),n!==this.cache_.duration&&(this.cache_.duration=n,n===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(n)||this.trigger("durationchange"))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var n=this.techGet_("buffered");return(!n||!n.length)&&(n=Fa(0,0)),n},a.bufferedPercent=function(){return qu(this.buffered(),this.duration())},a.bufferedEnd=function(){var n=this.buffered(),o=this.duration(),h=n.end(n.length-1);return h>o&&(h=o),h},a.volume=function(n){var o;return void 0!==n?(o=Math.max(0,Math.min(1,parseFloat(n))),this.cache_.volume=o,this.techCall_("setVolume",o),void(o>0&&this.lastVolume_(o))):(o=parseFloat(this.techGet_("volume")),isNaN(o)?1:o)},a.muted=function(n){if(void 0===n)return this.techGet_("muted")||!1;this.techCall_("setMuted",n)},a.defaultMuted=function(n){return void 0!==n?this.techCall_("setDefaultMuted",n):this.techGet_("defaultMuted")||!1},a.lastVolume_=function(n){if(void 0===n||0===n)return this.cache_.lastVolume;this.cache_.lastVolume=n},a.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},a.isFullscreen=function(n){if(void 0!==n){var o=this.isFullscreen_;return this.isFullscreen_=!!n,this.isFullscreen_!==o&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},a.requestFullscreen=function(n){var o=this.options_.Promise||ge().Promise;if(o){var h=this;return new o(function(y,S){function x(){h.off("fullscreenerror",re),h.off("fullscreenchange",V)}function V(){x(),y()}function re(De,ze){x(),S(ze)}h.one("fullscreenchange",V),h.one("fullscreenerror",re);var ee=h.requestFullscreenHelper_(n);ee&&(ee.then(x,x),ee.then(y,S))})}return this.requestFullscreenHelper_()},a.requestFullscreenHelper_=function(n){var h,o=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==n&&(h=n)),this.fsApi_.requestFullscreen){var y=this.el_[this.fsApi_.requestFullscreen](h);return y&&y.then(function(){return o.isFullscreen(!0)},function(){return o.isFullscreen(!1)}),y}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},a.exitFullscreen=function(){var n=this.options_.Promise||ge().Promise;if(n){var o=this;return new n(function(h,y){function S(){o.off("fullscreenerror",V),o.off("fullscreenchange",x)}function x(){S(),h()}function V(ee,De){S(),y(De)}o.one("fullscreenchange",x),o.one("fullscreenerror",V);var re=o.exitFullscreenHelper_();re&&(re.then(S,S),re.then(h,y))})}return this.exitFullscreenHelper_()},a.exitFullscreenHelper_=function(){var n=this;if(this.fsApi_.requestFullscreen){var o=Ze()[this.fsApi_.exitFullscreen]();return o&&Ya(o.then(function(){return n.isFullscreen(!1)})),o}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},a.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ze().documentElement.style.overflow,_a(Ze(),"keydown",this.boundFullWindowOnEscKey_),Ze().documentElement.style.overflow="hidden",Pr(Ze().body,"vjs-full-window"),this.trigger("enterFullWindow")},a.fullWindowOnEscKey=function(n){Ae().isEventKey(n,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},a.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,so(Ze(),"keydown",this.boundFullWindowOnEscKey_),Ze().documentElement.style.overflow=this.docOrigOverflow,Vr(Ze().body,"vjs-full-window"),this.trigger("exitFullWindow")},a.disablePictureInPicture=function(n){if(void 0===n)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",n),this.options_.disablePictureInPicture=n,this.trigger("disablepictureinpicturechanged")},a.isInPictureInPicture=function(n){return void 0!==n?(this.isInPictureInPicture_=!!n,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},a.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ze()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},a.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ze())return Ze().exitPictureInPicture()},a.handleKeyDown=function(n){var S,x,o=this.options_.userActions;o&&o.hotkeys&&(x=(S=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),S.isContentEditable||("input"===x?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(S.type):-1!==["textarea"].indexOf(x))||("function"==typeof o.hotkeys?o.hotkeys.call(this,n):this.handleHotkeys(n)))},a.handleHotkeys=function(n){var o=this.options_.userActions?this.options_.userActions.hotkeys:{},h=o.fullscreenKey,S=o.muteKey,x=void 0===S?function(Ve){return Ae().isEventKey(Ve,"m")}:S,V=o.playPauseKey,re=void 0===V?function(Ve){return Ae().isEventKey(Ve,"k")||Ae().isEventKey(Ve,"Space")}:V;if((void 0===h?function(Ve){return Ae().isEventKey(Ve,"f")}:h).call(this,n)){n.preventDefault(),n.stopPropagation();var ee=Je.getComponent("FullscreenToggle");!1!==Ze()[this.fsApi_.fullscreenEnabled]&&ee.prototype.handleClick.call(this,n)}else x.call(this,n)?(n.preventDefault(),n.stopPropagation(),Je.getComponent("MuteToggle").prototype.handleClick.call(this,n)):re.call(this,n)&&(n.preventDefault(),n.stopPropagation(),Je.getComponent("PlayToggle").prototype.handleClick.call(this,n))},a.canPlayType=function(n){for(var o,h=0,y=this.options_.techOrder;h<y.length;h++){var S=y[h],x=ki.getTech(S);if(x||(x=Je.getComponent(S)),x){if(x.isSupported()&&(o=x.canPlayType(n)))return o}else Ln.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},a.selectSource=function(n){var ee,o=this,h=this.options_.techOrder.map(function(re){return[re,ki.getTech(re)]}).filter(function(re){var ee=re[0],De=re[1];return De?De.isSupported():(Ln.error('The "'+ee+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),y=function(ee,De,ze){var Ve;return ee.some(function(Be){return De.some(function(Wt){if(Ve=ze(Be,Wt))return!0})}),Ve},V=function(ee,De){var ze=ee[0];if(ee[1].canPlaySource(De,o.options_[ze.toLowerCase()]))return{source:De,tech:ze}};return(this.options_.sourceOrder?y(n,h,(ee=V,function(De,ze){return ee(ze,De)})):y(h,n,V))||!1},a.handleSrc_=function(n,o){var h=this;if(typeof n>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var y=Iu(n);if(y.length){if(this.changingSrc_=!0,o||(this.cache_.sources=y),this.updateSourceCaches_(y[0]),sa(this,y[0],function(V,re){if(h.middleware_=re,o||(h.cache_.sources=y),h.updateSourceCaches_(V),h.src_(V))return y.length>1?h.handleSrc_(y.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void h.triggerReady());!function Xd(m,l){m.forEach(function(a){return a.setTech&&a.setTech(l)})}(re,h.tech_)}),this.options_.retryOnError&&y.length>1){var S=function(){h.error(null),h.handleSrc_(y.slice(1),!0)},x=function(){h.off("error",S)};this.one("error",S),this.one("playing",x),this.resetRetryOnError_=function(){h.off("error",S),h.off("playing",x)}}}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},a.src=function(n){return this.handleSrc_(n,!1)},a.src_=function(n){var o=this,h=this.selectSource([n]);return!h||(function(l,a){return sn(l)===sn(a)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",n):this.techCall_("src",n.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){o.changingSrc_=!1}),!1))},a.load=function(){this.techCall_("load")},a.reset=function(){var n=this,o=this.options_.Promise||ge().Promise;this.paused()||!o?this.doReset_():Ya(this.play().then(function(){return n.doReset_()}))},a.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),bo(this)&&this.trigger("playerreset")},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var n=this.controlBar,o=n.durationDisplay,h=n.remainingTimeDisplay;o&&o.updateContent(),h&&h.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},a.currentSources=function(){var n=this.currentSource(),o=[];return 0!==Object.keys(n).length&&o.push(n),this.cache_.sources||o},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},a.currentType=function(){return this.currentSource()&&this.currentSource().type||""},a.preload=function(n){return void 0!==n?(this.techCall_("setPreload",n),void(this.options_.preload=n)):this.techGet_("preload")},a.autoplay=function(n){if(void 0===n)return this.options_.autoplay||!1;var o;"string"==typeof n&&/(any|play|muted)/.test(n)||!0===n&&this.options_.normalizeAutoplay?(this.options_.autoplay=n,this.manualAutoplay_("string"==typeof n?n:"play"),o=!1):this.options_.autoplay=!!n,o=typeof o>"u"?this.options_.autoplay:o,this.tech_&&this.techCall_("setAutoplay",o)},a.playsinline=function(n){return void 0!==n?(this.techCall_("setPlaysinline",n),this.options_.playsinline=n,this):this.techGet_("playsinline")},a.loop=function(n){return void 0!==n?(this.techCall_("setLoop",n),void(this.options_.loop=n)):this.techGet_("loop")},a.poster=function(n){if(void 0===n)return this.poster_;n||(n=""),n!==this.poster_&&(this.poster_=n,this.techCall_("setPoster",n),this.isPosterFromTech_=!1,this.trigger("posterchange"))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var n=this.tech_.poster()||"";n!==this.poster_&&(this.poster_=n,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},a.controls=function(n){if(void 0===n)return!!this.controls_;this.controls_!==(n=!!n)&&(this.controls_=n,this.usingNativeControls()&&this.techCall_("setControls",n),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},a.usingNativeControls=function(n){if(void 0===n)return!!this.usingNativeControls_;this.usingNativeControls_!==(n=!!n)&&(this.usingNativeControls_=n,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},a.error=function(n){var o=this;if(void 0===n)return this.error_||null;if(ne("beforeerror").forEach(function(y){var S=y(o,n);zs(S)&&!Array.isArray(S)||"string"==typeof S||"number"==typeof S||null===S?n=S:o.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&n&&4===n.code){var h=function(){this.error(n)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===n)return this.error_=n,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Do(n),this.addClass("vjs-error"),Ln.error("(CODE:"+this.error_.code+" "+Do.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ne("error").forEach(function(y){return y(o,o.error_)})},a.reportUserActivity=function(n){this.userActivity_=!0},a.userActive=function(n){if(void 0===n)return this.userActive_;if((n=!!n)!==this.userActive_){if(this.userActive_=n,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(o){o.stopPropagation(),o.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},a.listenForUserActivity_=function(){var n,o,h,y=ts(this,this.reportUserActivity),V=function(ze){y(),this.clearInterval(n)};this.on("mousedown",function(){y(),this.clearInterval(n),n=this.setInterval(y,250)}),this.on("mousemove",function(ze){(ze.screenX!==o||ze.screenY!==h)&&(o=ze.screenX,h=ze.screenY,y())}),this.on("mouseup",V),this.on("mouseleave",V);var ee,re=this.getChild("controlBar");re&&!ws&&!ga&&(re.on("mouseenter",function(De){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),re.on("mouseleave",function(De){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",y),this.on("keyup",y),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(ee);var De=this.options_.inactivityTimeout;De<=0||(ee=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},De))}},250)},a.playbackRate=function(n){if(void 0===n)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",n)},a.defaultPlaybackRate=function(n){return void 0!==n?this.techCall_("setDefaultPlaybackRate",n):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},a.isAudio=function(n){if(void 0===n)return!!this.isAudio_;this.isAudio_=!!n},a.addTextTrack=function(n,o,h){if(this.tech_)return this.tech_.addTextTrack(n,o,h)},a.addRemoteTextTrack=function(n,o){if(this.tech_)return this.tech_.addRemoteTextTrack(n,o)},a.removeRemoteTextTrack=function(n){void 0===n&&(n={});var h=n.track;if(h||(h=n),this.tech_)return this.tech_.removeRemoteTextTrack(h)},a.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(n){if(void 0===n)return this.language_;this.language_!==String(n).toLowerCase()&&(this.language_=String(n).toLowerCase(),bo(this)&&this.trigger("languagechange"))},a.languages=function(){return jn(l.prototype.options_.languages,this.languages_)},a.toJSON=function(){var n=jn(this.options_),o=n.tracks;n.tracks=[];for(var h=0;h<o.length;h++){var y=o[h];(y=jn(y)).player=void 0,n.tracks[h]=y}return n},a.createModal=function(n,o){var h=this;(o=o||{}).content=n||"";var y=new Du(this,o);return this.addChild(y),y.on("dispose",function(){h.removeChild(y)}),y.open(),y},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var n=this.currentBreakpoint(),o=this.currentWidth(),h=0;h<gl.length;h++){var y=gl[h];if(o<=this.breakpoints_[y]){if(n===y)return;n&&this.removeClass(yd[n]),this.addClass(yd[y]),this.breakpoint_=y;break}}},a.removeCurrentBreakpoint_=function(){var n=this.currentBreakpointClass();this.breakpoint_="",n&&this.removeClass(n)},a.breakpoints=function(n){return void 0===n||(this.breakpoint_="",this.breakpoints_=Yr({},yu,n),this.updateCurrentBreakpoint_()),Yr(this.breakpoints_)},a.responsive=function(n){return void 0===n?this.responsive_:(n=!!n)!==this.responsive_?(this.responsive_=n,n?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),n):void 0},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return yd[this.breakpoint_]||""},a.loadMedia=function(n,o){var h=this;if(n&&"object"==typeof n){this.reset(),this.cache_.media=jn(n);var y=this.cache_.media,x=y.poster,V=y.src,re=y.textTracks;!y.artwork&&x&&(this.cache_.media.artwork=[{src:x,type:Co(x)}]),V&&this.src(V),x&&this.poster(x),Array.isArray(re)&&re.forEach(function(ee){return h.addRemoteTextTrack(ee,!1)}),this.ready(o)}},a.getMedia=function(){if(!this.cache_.media){var n=this.poster(),y={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(S){return{kind:S.kind,label:S.label,language:S.language,src:S.src}})};return n&&(y.poster=n,y.artwork=[{src:y.poster,type:Co(y.poster)}]),y}return jn(this.cache_.media)},l.getTagSettings=function(n){var o={sources:[],tracks:[]},h=Br(n),y=h["data-setup"];if(Ci(n,"vjs-fill")&&(h.fill=!0),Ci(n,"vjs-fluid")&&(h.fluid=!0),null!==y){var S=Ee()(y||"{}"),x=S[0],V=S[1];x&&Ln.error(x),Yr(h,V)}if(Yr(o,h),n.hasChildNodes())for(var re=n.childNodes,ee=0,De=re.length;ee<De;ee++){var ze=re[ee],Ve=ze.nodeName.toLowerCase();"source"===Ve?o.sources.push(Br(ze)):"track"===Ve&&o.tracks.push(Br(ze))}return o},a.flexNotSupported_=function(){var n=Ze().createElement("i");return!("flexBasis"in n.style||"webkitFlexBasis"in n.style||"mozFlexBasis"in n.style||"msFlexBasis"in n.style||"msFlexOrder"in n.style)},a.debug=function(n){if(void 0===n)return this.debugEnabled_;n?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},a.playbackRates=function(n){if(void 0===n)return this.cache_.playbackRates;Array.isArray(n)&&n.every(function(o){return"number"==typeof o})&&(this.cache_.playbackRates=n,this.trigger("playbackrateschange"))},l}(Je);Eo.names.forEach(function(m){var l=Eo[m];Xs.prototype[l.getterName]=function(){return this.tech_?this.tech_[l.getterName]():(this[l.privateName]=this[l.privateName]||new l.ListClass,this[l.privateName])}}),Xs.prototype.crossorigin=Xs.prototype.crossOrigin,Xs.players={};var jl=ge().navigator;Xs.prototype.options_={techOrder:ki.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:jl&&(jl.languages&&jl.languages[0]||jl.userLanguage||jl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(m){Xs.prototype[m]=function(){return this.techGet_(m)}}),aa.forEach(function(m){Xs.prototype["handleTech"+sn(m)+"_"]=function(){return this.trigger(m)}}),Je.registerComponent("Player",Xs);var Bl="plugin",_u="activePlugins_",yc={},Yh=function(l){return yc.hasOwnProperty(l)},Qh=function(l){return Yh(l)?yc[l]:void 0},_d=function(l,a){l[_u]=l[_u]||{},l[_u][a]=!0},Td=function(l,a,u){var n=(u?"before":"")+"pluginsetup";l.trigger(n,a),l.trigger(n+":"+a.name,a)},_=function(l,a){return a.prototype.name=l,function(){Td(this,{name:l,plugin:a,instance:null},!0);for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];var h=Ht(a,[this].concat(n));return this[l]=function(){return h},Td(this,h.getEventHash()),h}},E=function(){function m(a){if(this.constructor===m)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=a,this.log||(this.log=this.player.log.createLogger(this.name)),de(this),delete this.trigger,Ue(this,this.constructor.defaultState),_d(a,this.name),this.dispose=this.dispose.bind(this),a.on("dispose",this.dispose)}var l=m.prototype;return l.version=function(){return this.constructor.VERSION},l.getEventHash=function(u){return void 0===u&&(u={}),u.name=this.name,u.plugin=this.constructor,u.instance=this,u},l.trigger=function(u,n){return void 0===n&&(n={}),ru(this.eventBusEl_,u,this.getEventHash(n))},l.handleStateChanged=function(u){},l.dispose=function(){var u=this.name,n=this.player;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[_u][u]=!1,this.player=this.state=null,n[u]=_(u,yc[u])},m.isBasic=function(u){var n="string"==typeof u?Qh(u):u;return"function"==typeof n&&!m.prototype.isPrototypeOf(n.prototype)},m.registerPlugin=function(u,n){if("string"!=typeof u)throw new Error('Illegal plugin name, "'+u+'", must be a string, was '+typeof u+".");if(Yh(u))Ln.warn('A plugin named "'+u+'" already exists. You may want to avoid re-registering plugins!');else if(Xs.prototype.hasOwnProperty(u))throw new Error('Illegal plugin name, "'+u+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+u+'", must be a function, was '+typeof n+".");return yc[u]=n,u!==Bl&&(Xs.prototype[u]=m.isBasic(n)?function(l,a){var u=function(){Td(this,{name:l,plugin:a,instance:null},!0);var o=a.apply(this,arguments);return _d(this,l),Td(this,{name:l,plugin:a,instance:o}),o};return Object.keys(a).forEach(function(n){u[n]=a[n]}),u}(u,n):_(u,n)),n},m.deregisterPlugin=function(u){if(u===Bl)throw new Error("Cannot de-register base plugin.");Yh(u)&&(delete yc[u],delete Xs.prototype[u])},m.getPlugins=function(u){var n;return void 0===u&&(u=Object.keys(yc)),u.forEach(function(o){var h=Qh(o);h&&((n=n||{})[o]=h)}),n},m.getPluginVersion=function(u){var n=Qh(u);return n&&n.VERSION||""},m}();E.getPlugin=Qh,E.BASE_PLUGIN_NAME=Bl,E.registerPlugin(Bl,E),Xs.prototype.usingPlugin=function(m){return!!this[_u]&&!0===this[_u][m]},Xs.prototype.hasPlugin=function(m){return!!Yh(m)};var se=function(l){return 0===l.indexOf("#")?l.slice(1):l};function Z(m,l,a){var u=Z.getPlayer(m);if(u)return l&&Ln.warn('Player "'+m+'" is already initialised. Options will not be applied.'),a&&u.ready(a),u;var n="string"==typeof m?ra("#"+se(m)):m;if(!K(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&Ln.warn("The element supplied is not included in the DOM"),l=l||{},ne("beforesetup").forEach(function(h){var y=h(n,jn(l));zs(y)&&!Array.isArray(y)?l=jn(l,y):Ln.error("please return an object in beforesetup hooks")});var o=Je.getComponent("Player");return u=new o(n,l,a),ne("setup").forEach(function(h){return h(u)}),u}if(Z.hooks_=J,Z.hooks=ne,Z.hook=function(l,a){ne(l,a)},Z.hookOnce=function(l,a){ne(l,[].concat(a).map(function(u){return function o(){return tt(l,o),u.apply(void 0,arguments)}}))},Z.removeHook=tt,!0!==ge().VIDEOJS_NO_DYNAMIC_STYLE&&ce()){var st=ra(".vjs-styles-defaults");if(!st){st=zi("vjs-styles-defaults");var Nt=ra("head");Nt&&Nt.insertBefore(st,Nt.firstChild),To(st,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}wu(1,Z),Z.VERSION="7.15.4",Z.options=Xs.prototype.options_,Z.getPlayers=function(){return Xs.players},Z.getPlayer=function(m){var a,l=Xs.players;if("string"==typeof m){var u=se(m),n=l[u];if(n)return n;a=ra("#"+u)}else a=m;if(K(a)){var h=a.player,y=a.playerId;if(h||l[y])return h||l[y]}},Z.getAllPlayers=function(){return Object.keys(Xs.players).map(function(m){return Xs.players[m]}).filter(Boolean)},Z.players=Xs.players,Z.getComponent=Je.getComponent,Z.registerComponent=function(m,l){ki.isTech(l)&&Ln.warn("The "+m+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Je.registerComponent.call(Je,m,l)},Z.getTech=ki.getTech,Z.registerTech=ki.registerTech,Z.use=function hc(m,l){js[m]=js[m]||[],js[m].push(l)},Object.defineProperty(Z,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Z.middleware,"TERMINATOR",{value:Qa,writeable:!1,enumerable:!0}),Z.browser=Jl,Z.TOUCH_ENABLED=ma,Z.extend=function(l,a){void 0===a&&(a={});var u=function(){l.apply(this,arguments)},n={};for(var o in"object"==typeof a?(a.constructor!==Object.prototype.constructor&&(u=a.constructor),n=a):"function"==typeof a&&(u=a),function Gt(m,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(l&&l.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),l&&Ke(m,l)}(u,l),l&&(u.super_=l),n)n.hasOwnProperty(o)&&(u.prototype[o]=n[o]);return u},Z.mergeOptions=jn,Z.bind=ts,Z.registerPlugin=E.registerPlugin,Z.deregisterPlugin=E.deregisterPlugin,Z.plugin=function(m,l){return Ln.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),E.registerPlugin(m,l)},Z.getPlugins=E.getPlugins,Z.getPlugin=E.getPlugin,Z.getPluginVersion=E.getPluginVersion,Z.addLanguage=function(m,l){var a;return m=(""+m).toLowerCase(),(Z.options.languages=jn(Z.options.languages,((a={})[m]=l,a)))[m]},Z.log=Ln,Z.createLogger=$i,Z.createTimeRange=Z.createTimeRanges=Fa,Z.formatTime=vu,Z.setFormatTime=function Ba(m){Xr=m},Z.resetFormatTime=function Si(){Xr=ei},Z.parseUrl=Lc,Z.isCrossOrigin=Fc,Z.EventTarget=oo,Z.on=_a,Z.one=dl,Z.off=so,Z.trigger=ru,Z.xhr=Y(),Z.TextTrack=cc,Z.AudioTrack=dd,Z.VideoTrack=jh,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(m){Z[m]=function(){return Ln.warn("videojs."+m+"() is deprecated; use videojs.dom."+m+"() instead"),Or[m].apply(null,arguments)}}),Z.computedStyle=Wo,Z.dom=Or,Z.url=Mg,Z.defineLazyProperty=Up,Z.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var mn=qe,Pn=function(l,a,u){return l&&u&&u.responseURL&&a!==u.responseURL?u.responseURL:a},zn=function(l){return Z.log.debug?Z.log.debug.bind(Z,"VHS:",l+" >"):function(){}},nr=1/30,Zi=.1,Au=function(l,a){var n,u=[];if(l&&l.length)for(n=0;n<l.length;n++)a(l.start(n),l.end(n))&&u.push([l.start(n),l.end(n)]);return Z.createTimeRanges(u)},Ul=function(l,a){return Au(l,function(u,n){return u-Zi<=a&&n+Zi>=a})},bd=function(l,a){return Au(l,function(u){return u-nr>=a})},Kc=function(l){var a=[];if(!l||!l.length)return"";for(var u=0;u<l.length;u++)a.push(l.start(u)+" => "+l.end(u));return a.join(", ")},Mu=function(l){for(var a=[],u=0;u<l.length;u++)a.push({start:l.start(u),end:l.end(u)});return a},Ed=function(l){if(l&&l.length&&l.end)return l.end(l.length-1)},lh=Z.createTimeRange,Xh=function(l){return(l.segments||[]).reduce(function(a,u,n){return u.parts?u.parts.forEach(function(o,h){a.push({duration:o.duration,segmentIndex:n,partIndex:h,part:o,segment:u})}):a.push({duration:u.duration,segmentIndex:n,partIndex:null,segment:u,part:null}),a},[])},Cd=function(l){var a=l.segments&&l.segments.length&&l.segments[l.segments.length-1];return a&&a.parts||[]},ch=function(l){var a=l.preloadSegment;if(a){var u=a.parts;return(a.preloadHints||[]).reduce(function(h,y){return h+("PART"===y.type?1:0)},0)+(u&&u.length?u.length:0)}},Qv=function(l,a){if(a.endList)return 0;if(l&&l.suggestedPresentationDelay)return l.suggestedPresentationDelay;var u=Cd(a).length>0;return u&&a.serverControl&&a.serverControl.partHoldBack?a.serverControl.partHoldBack:u&&a.partTargetDuration?3*a.partTargetDuration:a.serverControl&&a.serverControl.holdBack?a.serverControl.holdBack:a.targetDuration?3*a.targetDuration:0},Fg=function(l,a,u){if(typeof a>"u"&&(a=l.mediaSequence+l.segments.length),a<l.mediaSequence)return 0;var n=function(l,a){var u=0,n=a-l.mediaSequence,o=l.segments[n];if(o){if(typeof o.start<"u")return{result:o.start,precise:!0};if(typeof o.end<"u")return{result:o.end-o.duration,precise:!0}}for(;n--;){if(typeof(o=l.segments[n]).end<"u")return{result:u+o.end,precise:!0};if(u+=o.duration,typeof o.start<"u")return{result:u+o.start,precise:!0}}return{result:u,precise:!1}}(l,a);if(n.precise)return n.result;var o=function(l,a){for(var n,u=0,o=a-l.mediaSequence;o<l.segments.length;o++){if(typeof(n=l.segments[o]).start<"u")return{result:n.start-u,precise:!0};if(u+=n.duration,typeof n.end<"u")return{result:n.end-u,precise:!0}}return{result:-1,precise:!1}}(l,a);return o.precise?o.result:n.result+u},Jh=function(l,a,u){if(!l)return 0;if("number"!=typeof u&&(u=0),typeof a>"u"){if(l.totalDuration)return l.totalDuration;if(!l.endList)return ge()[1/0]}return Fg(l,a,u)},ef=function(l){var a=l.defaultDuration,u=l.durationList,n=l.startIndex,o=l.endIndex,h=0;if(n>o){var y=[o,n];n=y[0],o=y[1]}if(n<0){for(var S=n;S<Math.min(0,o);S++)h+=a;n=0}for(var x=n;x<o;x++)h+=u[x].duration;return h},Um=function(l,a,u,n){if(!l||!l.segments)return null;if(l.endList)return Jh(l);if(null===a)return null;var o=Fg(l,l.mediaSequence+l.segments.length,a=a||0);return u&&(o-=n="number"==typeof n?n:Qv(null,l)),Math.max(0,o)},dh=function(l){return l.excludeUntil&&l.excludeUntil>Date.now()},tf=function(l){return l.excludeUntil&&l.excludeUntil===1/0},ml=function(l){var a=dh(l);return!l.disabled&&!a},hh=function(l,a){return a.attributes&&a.attributes[l]},fh=function(l,a){if(1===l.playlists.length)return!0;var u=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===l.playlists.filter(function(n){return!!ml(n)&&(n.attributes.BANDWIDTH||0)<u}).length},nf=function(l,a){return!(!l&&!a||!l&&a||l&&!a||!(l===a||l.id&&a.id&&l.id===a.id||l.resolvedUri&&a.resolvedUri&&l.resolvedUri===a.resolvedUri||l.uri&&a.uri&&l.uri===a.uri))},jg=function(l,a){var u=l&&l.mediaGroups&&l.mediaGroups.AUDIO||{},n=!1;for(var o in u){for(var h in u[o])if(n=a(u[o][h]))break;if(n)break}return!!n},Hf=function(l){if(!l||!l.playlists||!l.playlists.length)return jg(l,function(h){return h.playlists&&h.playlists.length||h.uri});for(var u=function(y){var S=l.playlists[y],x=S.attributes&&S.attributes.CODECS;return x&&x.split(",").every(function(re){return an(re)})||jg(l,function(re){return nf(S,re)})?"continue":{v:!1}},n=0;n<l.playlists.length;n++){var o=u(n);if("continue"!==o&&"object"==typeof o)return o.v}return!0},Va={liveEdgeDelay:Qv,duration:Jh,seekable:function(l,a,u){var o=a||0,h=Um(l,a,!0,u);return null===h?lh():lh(o,h)},getMediaInfoForTime:function(l){for(var a=l.playlist,u=l.currentTime,n=l.startingSegmentIndex,o=l.startingPartIndex,h=l.startTime,y=l.experimentalExactManifestTimings,S=u-h,x=Xh(a),V=0,re=0;re<x.length;re++){var ee=x[re];if(n===ee.segmentIndex&&("number"!=typeof o||"number"!=typeof ee.partIndex||o===ee.partIndex)){V=re;break}}if(S<0){if(V>0)for(var De=V-1;De>=0;De--){var ze=x[De];if(S+=ze.duration,y){if(S<0)continue}else if(S+nr<=0)continue;return{partIndex:ze.partIndex,segmentIndex:ze.segmentIndex,startTime:h-ef({defaultDuration:a.targetDuration,durationList:x,startIndex:V,endIndex:De})}}return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:u}}if(V<0){for(var Ve=V;Ve<0;Ve++)if((S-=a.targetDuration)<0)return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:u};V=0}for(var Be=V;Be<x.length;Be++){var Wt=x[Be];if(S-=Wt.duration,y){if(S>0)continue}else if(S-nr>=0)continue;return{partIndex:Wt.partIndex,segmentIndex:Wt.segmentIndex,startTime:h+ef({defaultDuration:a.targetDuration,durationList:x,startIndex:V,endIndex:Be})}}return{segmentIndex:x[x.length-1].segmentIndex,partIndex:x[x.length-1].partIndex,startTime:u}},isEnabled:ml,isDisabled:function(l){return l.disabled},isBlacklisted:dh,isIncompatible:tf,playlistEnd:Um,isAes:function(l){for(var a=0;a<l.segments.length;a++)if(l.segments[a].key)return!0;return!1},hasAttribute:hh,estimateSegmentRequestTime:function(l,a,u,n){return void 0===n&&(n=0),hh("BANDWIDTH",u)?(l*u.attributes.BANDWIDTH-8*n)/a:NaN},isLowestEnabledRendition:fh,isAudioOnly:Hf,playlistMatch:nf},Hp=Z.log,Sd=function(l,a){return l+"-"+a},rf=function(l,a){l.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(u){if(l.mediaGroups[u])for(var n in l.mediaGroups[u])for(var o in l.mediaGroups[u][n])a(l.mediaGroups[u][n][o],u,n,o)})},Vm=function(l){var a=l.playlist,u=l.uri;a.id=l.id,a.playlistErrors_=0,u&&(a.uri=u),a.attributes=a.attributes||{}},sf=function(l,a){l.uri=a;for(var u=0;u<l.playlists.length;u++)l.playlists[u].uri||(l.playlists[u].uri="placeholder-uri-"+u);var o=Hf(l);rf(l,function(h,y,S,x){var V="placeholder-uri-"+y+"-"+S+"-"+x;if(!h.playlists||!h.playlists.length){if(o&&"AUDIO"===y&&!h.uri)for(var re=0;re<l.playlists.length;re++){var ee=l.playlists[re];if(ee.attributes&&ee.attributes.AUDIO&&ee.attributes.AUDIO===S)return}h.playlists=[rt({},h)]}h.playlists.forEach(function(De,ze){var Ve=Sd(ze,V);De.uri?De.resolvedUri=De.resolvedUri||mn(l.uri,De.uri):(De.uri=0===ze?V:Ve,De.resolvedUri=De.uri),De.id=De.id||Ve,De.attributes=De.attributes||{},l.playlists[De.id]=De,l.playlists[De.uri]=De})}),function(l){for(var a=l.playlists.length;a--;){var u=l.playlists[a];Vm({playlist:u,id:Sd(a,u.uri)}),u.resolvedUri=mn(l.uri,u.uri),l.playlists[u.id]=u,l.playlists[u.uri]=u,u.attributes.BANDWIDTH||Hp.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(l),function(l){rf(l,function(a){a.uri&&(a.resolvedUri=mn(l.uri,a.uri))})}(l)},Bg=Z.mergeOptions,iy=function(l,a){if(!l)return a;var u=Bg(l,a);if(l.preloadHints&&!a.preloadHints&&delete u.preloadHints,l.parts&&!a.parts)delete u.parts;else if(l.parts&&a.parts)for(var n=0;n<a.parts.length;n++)l.parts&&l.parts[n]&&(u.parts[n]=Bg(l.parts[n],a.parts[n]));return!l.skipped&&a.skipped&&(u.skipped=!1),l.preload&&!a.preload&&(u.preload=!1),u},Hm=function(l,a){!l.resolvedUri&&l.uri&&(l.resolvedUri=mn(a,l.uri)),l.key&&!l.key.resolvedUri&&(l.key.resolvedUri=mn(a,l.key.uri)),l.map&&!l.map.resolvedUri&&(l.map.resolvedUri=mn(a,l.map.uri)),l.map&&l.map.key&&!l.map.key.resolvedUri&&(l.map.key.resolvedUri=mn(a,l.map.key.uri)),l.parts&&l.parts.length&&l.parts.forEach(function(u){u.resolvedUri||(u.resolvedUri=mn(a,u.uri))}),l.preloadHints&&l.preloadHints.length&&l.preloadHints.forEach(function(u){u.resolvedUri||(u.resolvedUri=mn(a,u.uri))})},Tc=function(l){var a=l.segments||[],u=l.preloadSegment;if(u&&u.parts&&u.parts.length){if(u.preloadHints)for(var n=0;n<u.preloadHints.length;n++)if("MAP"===u.preloadHints[n].type)return a;u.duration=l.targetDuration,u.preload=!0,a.push(u)}return a},$m=function(l,a){return l===a||l.segments&&a.segments&&l.segments.length===a.segments.length&&l.endList===a.endList&&l.mediaSequence===a.mediaSequence},Gm=function(l,a,u){void 0===u&&(u=$m);var n=Bg(l,{}),o=n.playlists[a.id];if(!o||u(o,a))return null;a.segments=Tc(a);var h=Bg(o,a);if(h.preloadSegment&&!a.preloadSegment&&delete h.preloadSegment,o.segments){if(a.skip){a.segments=a.segments||[];for(var y=0;y<a.skip.skippedSegments;y++)a.segments.unshift({skipped:!0})}h.segments=function(l,a,u){var n=l.slice(),o=a.slice();u=u||0;for(var y,h=[],S=0;S<o.length;S++){var x=n[S+u],V=o[S];x?(y=x.map||y,h.push(iy(x,V))):(y&&!V.map&&(V.map=y),h.push(V))}return h}(o.segments,a.segments,a.mediaSequence-o.mediaSequence)}h.segments.forEach(function(x){Hm(x,h.resolvedUri)});for(var S=0;S<n.playlists.length;S++)n.playlists[S].id===a.id&&(n.playlists[S]=h);return n.playlists[a.id]=h,n.playlists[a.uri]=h,rf(l,function(x,V,re,ee){if(x.playlists)for(var De=0;De<x.playlists.length;De++)a.id===x.playlists[De].id&&(x.playlists[De]=a)}),n},Ug=function(l,a){var u=l.segments[l.segments.length-1],n=u&&u.parts&&u.parts[u.parts.length-1],o=n&&n.duration||u&&u.duration;return a&&o?1e3*o:500*(l.partTargetDuration||l.targetDuration||10)},Dd=function(m){function l(u,n,o){var h;if(void 0===o&&(o={}),h=m.call(this)||this,!u)throw new Error("A non-empty playlist URL or object is required");h.logger_=zn("PlaylistLoader");var S=o.withCredentials,x=void 0!==S&&S,V=o.handleManifestRedirects,re=void 0!==V&&V;h.src=u,h.vhs_=n,h.withCredentials=x,h.handleManifestRedirects=re;var ee=n.options_;return h.customTagParsers=ee&&ee.customTagParsers||[],h.customTagMappers=ee&&ee.customTagMappers||[],h.experimentalLLHLS=ee&&ee.experimentalLLHLS||!1,h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(et(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}W(l,m);var a=l.prototype;return a.handleMediaupdatetimeout_=function(){var n=this;if("HAVE_METADATA"===this.state){var o=this.media(),h=mn(this.master.uri,o.uri);this.experimentalLLHLS&&(h=function(l,a){if(a.endList)return l;var u=[];if(a.serverControl&&a.serverControl.canBlockReload){var n=a.preloadSegment,o=a.mediaSequence+a.segments.length;if(n){var h=n.parts||[],y=ch(a)-1;y>-1&&y!==h.length-1&&u.push("_HLS_part="+y),(y>-1||h.length)&&o--}u.unshift("_HLS_msn="+o)}return a.serverControl&&a.serverControl.canSkipUntil&&u.unshift("_HLS_skip="+(a.serverControl.canSkipDateranges?"v2":"YES")),u.forEach(function(S,x){l+=(0===x?"?":"&")+S}),l}(h,o)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(y,S){if(n.request){if(y)return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA");n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})}})}},a.playlistRequestError=function(n,o,h){var y=o.uri,S=o.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[S],status:n.status,message:"HLS playlist request error at URL: "+y+".",responseText:n.responseText,code:n.status>=500?4:2},this.trigger("error")},a.parseManifest_=function(n){var o=this,h=n.url;return function(l){var a=l.onwarn,u=l.oninfo,n=l.manifestString,o=l.customTagParsers,h=void 0===o?[]:o,y=l.customTagMappers,S=void 0===y?[]:y,x=l.experimentalLLHLS,V=new ir;a&&V.on("warn",a),u&&V.on("info",u),h.forEach(function(Ve){return V.addParser(Ve)}),S.forEach(function(Ve){return V.addTagMapper(Ve)}),V.push(n),V.end();var re=V.manifest;if(x||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Ve){re.hasOwnProperty(Ve)&&delete re[Ve]}),re.segments&&re.segments.forEach(function(Ve){["parts","preloadHints"].forEach(function(Be){Ve.hasOwnProperty(Be)&&delete Ve[Be]})})),!re.targetDuration){var ee=10;re.segments&&re.segments.length&&(ee=re.segments.reduce(function(Ve,Be){return Math.max(Ve,Be.duration)},0)),a&&a("manifest has no targetDuration defaulting to "+ee),re.targetDuration=ee}var De=Cd(re);if(De.length&&!re.partTargetDuration){var ze=De.reduce(function(Ve,Be){return Math.max(Ve,Be.duration)},0);a&&(a("manifest has no partTargetDuration defaulting to "+ze),Hp.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),re.partTargetDuration=ze}return re}({onwarn:function(x){return o.logger_("m3u8-parser warn for "+h+": "+x.message)},oninfo:function(x){return o.logger_("m3u8-parser info for "+h+": "+x.message)},manifestString:n.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},a.haveMetadata=function(n){var o=n.playlistString,h=n.playlistObject,y=n.url,S=n.id;this.request=null,this.state="HAVE_METADATA";var x=h||this.parseManifest_({url:y,manifestString:o});x.lastRequest=Date.now(),Vm({playlist:x,uri:y,id:S});var V=Gm(this.master,x);this.targetDuration=x.partTargetDuration||x.targetDuration,V?(this.master=V,this.media_=this.master.playlists[S]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ug(this.media(),!!V)),this.trigger("loadedplaylist")},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),ge().clearTimeout(this.mediaUpdateTimeout),ge().clearTimeout(this.finalRenditionTimeout),this.off()},a.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},a.media=function(n,o){var h=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(ge().clearTimeout(this.finalRenditionTimeout),o){var y=(n.partTargetDuration||n.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ge().setTimeout(this.media.bind(this,n,!1),y)}else{var S=this.state,x=!this.media_||n.id!==this.media_.id,V=this.master.playlists[n.id];if(V&&V.endList||n.endList&&n.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(x&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Ug(n,!0)),x){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(re,ee){if(h.request){if(n.lastRequest=Date.now(),n.resolvedUri=Pn(h.handleManifestRedirects,n.resolvedUri,ee),re)return h.playlistRequestError(h.request,n,S);h.haveMetadata({playlistString:ee.responseText,url:n.uri,id:n.id}),h.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")}})}}},a.pause=function(){this.mediaUpdateTimeout&&(ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},a.load=function(n){var o=this;this.mediaUpdateTimeout&&(ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(n){var y=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ge().setTimeout(function(){o.mediaUpdateTimeout=null,o.load()},y)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},a.updateMediaUpdateTimeout_=function(n){var o=this;this.mediaUpdateTimeout&&(ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=ge().setTimeout(function(){o.mediaUpdateTimeout=null,o.trigger("mediaupdatetimeout"),o.updateMediaUpdateTimeout_(n)},n))},a.start=function(){var n=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=ge().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){n.setupInitialPlaylist(n.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(o,h){if(n.request){if(n.request=null,o)return n.error={status:h.status,message:"HLS playlist request error at URL: "+n.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.src=Pn(n.handleManifestRedirects,n.src,h);var y=n.parseManifest_({manifestString:h.responseText,url:n.src});n.setupInitialPlaylist(y)}})},a.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},a.setupInitialPlaylist=function(n){if(this.state="HAVE_MASTER",n.playlists)return this.master=n,sf(this.master,this.srcUri()),n.playlists.forEach(function(h){h.segments=Tc(h),h.segments.forEach(function(y){Hm(y,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var o=this.srcUri()||ge().location.href;this.master=function(l,a){var u=Sd(0,a),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ge().location.href,resolvedUri:ge().location.href,playlists:[{uri:a,id:u,resolvedUri:a,attributes:{}}]};return n.playlists[u]=n.playlists[0],n.playlists[a]=n.playlists[0],n}(0,o),this.haveMetadata({playlistObject:n,url:o,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},l}(Z.EventTarget),Zc=Z.xhr,ku=Z.mergeOptions,vl=function(l,a,u,n){var o="arraybuffer"===l.responseType?l.response:l.responseText;!a&&o&&(l.responseTime=Date.now(),l.roundTripTime=l.responseTime-l.requestTime,l.bytesReceived=o.byteLength||o.length,l.bandwidth||(l.bandwidth=Math.floor(l.bytesReceived/l.roundTripTime*8*1e3))),u.headers&&(l.responseHeaders=u.headers),a&&"ETIMEDOUT"===a.code&&(l.timedout=!0),!a&&!l.aborted&&200!==u.statusCode&&206!==u.statusCode&&0!==u.statusCode&&(a=new Error("XHR Failed with a response of: "+(l&&(o||l.responseText)))),n(a,l)},af=function(){var l=function a(u,n){u=ku({timeout:45e3},u);var o=a.beforeRequest||Z.Vhs.xhr.beforeRequest;if(o&&"function"==typeof o){var h=o(u);h&&(u=h)}var S=(!0===Z.Vhs.xhr.original?Zc:Z.Vhs.xhr)(u,function(V,re){return vl(S,V,re,n)}),x=S.abort;return S.abort=function(){return S.aborted=!0,x.apply(S,arguments)},S.uri=u.uri,S.requestTime=Date.now(),S};return l.original=!0,l},Gf=function(l){var a={};return l.byterange&&(a.Range=function(l){return"bytes="+l.offset+"-"+(l.offset+l.length-1)}(l.byterange)),a},sy=function(l,a){return l.start(a)+"-"+l.end(a)},w0=function(l,a){var u=l.toString(16);return"00".substring(0,2-u.length)+u+(a%2?" ":"")},D0=function(l){return l>=32&&l<126?String.fromCharCode(l):"."},Vg=function(l){var a={};return Object.keys(l).forEach(function(u){var n=l[u];a[u]=ArrayBuffer.isView(n)?{bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:n}),a},uf=function(l){var a=l.byterange||{length:1/0,offset:0};return[a.length,a.offset,l.resolvedUri].join(",")},oy=function(l){return l.resolvedUri},Hg=function(l){for(var a=Array.prototype.slice.call(l),u=16,n="",y=0;y<a.length/u;y++)n+=a.slice(y*u,y*u+u).map(w0).join("")+" "+a.slice(y*u,y*u+u).map(D0).join("")+"\n";return n},I0=Object.freeze({__proto__:null,createTransferableMessage:Vg,initSegmentId:uf,segmentKeyId:oy,hexDump:Hg,tagDump:function(l){return Hg(l.bytes)},textRanges:function(l){var u,a="";for(u=0;u<l.length;u++)a+=sy(l,u)+" ";return a}}),A0=function m(l){var a=l.programTime,u=l.playlist,n=l.retryCount,o=void 0===n?2:n,h=l.seekTo,y=l.pauseAfterSeek,S=void 0===y||y,x=l.tech,V=l.callback;if(!V)throw new Error("seekToProgramTime: callback must be provided");if(typeof a>"u"||!u||!h)return V({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!u.endList&&!x.hasStarted_)return V({message:"player must be playing a live stream to start buffering"});if(!function(l){if(!l.segments||0===l.segments.length)return!1;for(var a=0;a<l.segments.length;a++)if(!l.segments[a].dateTimeObject)return!1;return!0}(u))return V({message:"programDateTime tags must be provided in the manifest "+u.resolvedUri});var re=function(l,a){var u;try{u=new Date(l)}catch{return null}if(!a||!a.segments||0===a.segments.length)return null;var n=a.segments[0];if(u<n.dateTimeObject)return null;for(var o=0;o<a.segments.length-1&&(n=a.segments[o],!(u<a.segments[o+1].dateTimeObject));o++);var y=a.segments[a.segments.length-1],S=y.dateTimeObject,x=y.videoTimingInfo?function(l){return l.transmuxedPresentationEnd-l.transmuxedPresentationStart-l.transmuxerPrependedSeconds}(y.videoTimingInfo):y.duration+.25*y.duration;return u>new Date(S.getTime()+1e3*x)?null:(u>S&&(n=y),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Va.duration(a,a.mediaSequence+a.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(a,u);if(!re)return V({message:a+" was not found in the stream"});var ee=re.segment,De=function(l,a){var u,n;try{u=new Date(l),n=new Date(a)}catch{}var o=u.getTime();return(n.getTime()-o)/1e3}(ee.dateTimeObject,a);if("estimate"===re.type)return 0===o?V({message:a+" is not buffered yet. Try again"}):(h(re.estimatedStart+De),void x.one("seeked",function(){m({programTime:a,playlist:u,retryCount:o-1,seekTo:h,pauseAfterSeek:S,tech:x,callback:V})}));var ze=ee.start+De;x.one("seeked",function(){return V(null,x.currentTime())}),S&&x.pause(),h(ze)},Gg=function(l,a){if(4===l.readyState)return a()},Wg=Z.mergeOptions,Km=function(l,a){if(!$m(l,a)||l.sidx&&a.sidx&&(l.sidx.offset!==a.sidx.offset||l.sidx.length!==a.sidx.length))return!1;if(!l.sidx&&a.sidx||l.sidx&&!a.sidx||l.segments&&!a.segments||!l.segments&&a.segments)return!1;if(!l.segments&&!a.segments)return!0;for(var u=0;u<l.segments.length;u++){var n=l.segments[u],o=a.segments[u];if(n.uri!==o.uri)return!1;if(n.byterange||o.byterange){var h=n.byterange,y=o.byterange;if(h&&!y||!h&&y||h.offset!==y.offset||h.length!==y.length)return!1}}return!0},Qm=function(l,a){return(!l.map&&!a.map||!(!l.map||!a.map||l.map.byterange.offset!==a.map.byterange.offset||l.map.byterange.length!==a.map.byterange.length))&&l.uri===a.uri&&l.byterange.offset===a.byterange.offset&&l.byterange.length===a.byterange.length},qg=function(l,a){var u={};for(var n in l){var h=l[n].sidx;if(h){var y=Pe(h);if(!a[y])break;Qm(a[y].sidxInfo,h)&&(u[y]=a[y])}}return u},xd=function(m){function l(u,n,o,h){var y;void 0===o&&(o={}),(y=m.call(this)||this).masterPlaylistLoader_=h||et(y),h||(y.isMaster_=!0);var x=o.withCredentials,V=void 0!==x&&x,re=o.handleManifestRedirects,ee=void 0!==re&&re;if(y.vhs_=n,y.withCredentials=V,y.handleManifestRedirects=ee,!u)throw new Error("A non-empty playlist URL or object is required");return y.on("minimumUpdatePeriod",function(){y.refreshXml_()}),y.on("mediaupdatetimeout",function(){y.refreshMedia_(y.media().id)}),y.state="HAVE_NOTHING",y.loadedPlaylists_={},y.logger_=zn("DashPlaylistLoader"),y.isMaster_?(y.masterPlaylistLoader_.srcUrl=u,y.masterPlaylistLoader_.sidxMapping_={}):y.childPlaylist_=u,y}W(l,m);var a=l.prototype;return a.requestErrored_=function(n,o,h){return!this.request||(this.request=null,n?(this.error="object"!=typeof n||n instanceof Error?{status:o.status,message:"DASH request error at URL: "+o.uri,response:o.response,code:2}:n,h&&(this.state=h),this.trigger("error"),!0):void 0)},a.addSidxSegments_=function(n,o,h){var y=this,S=n.sidx&&Pe(n.sidx);if(n.sidx&&S&&!this.masterPlaylistLoader_.sidxMapping_[S]){var x=Pn(this.handleManifestRedirects,n.sidx.resolvedUri),V=function(ee,De){if(!y.requestErrored_(ee,De,o)){var Ve,ze=y.masterPlaylistLoader_.sidxMapping_;try{Ve=yi()(xt(De.response).subarray(8))}catch(Be){return void y.requestErrored_(Be,De,o)}return ze[S]={sidxInfo:n.sidx,sidx:Ve},be(n,Ve,n.sidx.resolvedUri),h(!0)}};this.request=function(l,a,u){var o,n=[],h=!1,y=function(ee,De,ze,Ve){return De.abort(),h=!0,u(ee,De,ze,Ve)},S=function(ee,De){if(!h){if(ee)return y(ee,De,"",n);var ze=De.responseText.substring(n&&n.byteLength||0,De.responseText.length);if(n=function(){for(var l=arguments.length,a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];if((a=a.filter(function(y){return y&&(y.byteLength||y.length)&&"string"!=typeof y})).length<=1)return xt(a[0]);var n=a.reduce(function(y,S,x){return y+(S.byteLength||S.length)},0),o=new Uint8Array(n),h=0;return a.forEach(function(y){y=xt(y),o.set(y,h),h+=y.byteLength}),o}(n,Us(ze,!0)),o=o||ro(n),n.length<10||o&&n.length<o+2)return Gg(De,function(){return y(ee,De,"",n)});var Ve=Q(n);return"ts"===Ve&&n.length<188||!Ve&&n.length<376?Gg(De,function(){return y(ee,De,"",n)}):y(null,De,Ve,n)}},V=a({uri:l,beforeSend:function(ee){ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.addEventListener("progress",function(De){return vl(ee,null,{statusCode:ee.status},S)})}},function(re,ee){return vl(V,re,ee,S)});return V}(x,this.vhs_.xhr,function(re,ee,De,ze){if(re)return V(re,ee);if(!De||"mp4"!==De)return V({status:ee.status,message:"Unsupported "+(De||"unknown")+" container type for sidx segment at URL: "+x,response:"",playlist:n,internal:!0,blacklistDuration:1/0,code:2},ee);var Ve=n.sidx.byterange,Be=Ve.offset,Wt=Ve.length;if(ze.length>=Wt+Be)return V(re,{response:ze.subarray(Be,Be+Wt),status:ee.status,uri:ee.uri});y.request=y.vhs_.xhr({uri:x,responseType:"arraybuffer",headers:Gf({byterange:n.sidx.byterange})},V)})}else this.mediaRequest_=ge().setTimeout(function(){return h(!1)},0)},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ge().clearTimeout(this.minimumUpdatePeriodTimeout_),ge().clearTimeout(this.mediaRequest_),ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},a.hasPendingRequest=function(){return this.request||this.mediaRequest_},a.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},a.media=function(n){var o=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof n){if(!this.masterPlaylistLoader_.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.masterPlaylistLoader_.master.playlists[n]}var y=!this.media_||n.id!==this.media_.id;if(y&&this.loadedPlaylists_[n.id]&&this.loadedPlaylists_[n.id].endList)return this.state="HAVE_METADATA",this.media_=n,void(y&&(this.trigger("mediachanging"),this.trigger("mediachange")));y&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(n,h,function(S){o.haveMetadata({startingState:h,playlist:n})}))},a.haveMetadata=function(n){var o=n.startingState,h=n.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===o?"loadedmetadata":"mediachange")},a.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(ge().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},a.load=function(n){var o=this;ge().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(n){var y=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ge().setTimeout(function(){return o.load()},y)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},a.start=function(){var n=this;this.started=!0,this.isMaster_?this.requestMaster_(function(o,h){n.haveMaster_(),!n.hasPendingRequest()&&!n.media_&&n.media(n.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ge().setTimeout(function(){return n.haveMaster_()},0)},a.requestMaster_=function(n){var o=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,y){if(!o.requestErrored_(h,y)){var S=y.responseText!==o.masterPlaylistLoader_.masterXml_;return o.masterPlaylistLoader_.masterXml_=y.responseText,o.masterLoaded_=y.responseHeaders&&y.responseHeaders.date?Date.parse(y.responseHeaders.date):Date.now(),o.masterPlaylistLoader_.srcUrl=Pn(o.handleManifestRedirects,o.masterPlaylistLoader_.srcUrl,y),S?(o.handleMaster_(),void o.syncClientServerClock_(function(){return n(y,S)})):n(y,S)}"HAVE_NOTHING"===o.state&&(o.started=!1)})},a.syncClientServerClock_=function(n){var o=this,h=function(l){return function(l){var a=si(l,"UTCTiming")[0];if(!a)return null;var u=_i(a);switch(u.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":u.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":u.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":u.method="DIRECT",u.value=Date.parse(u.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return u}(xa(l))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),n()):void(this.request=this.vhs_.xhr({uri:mn(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(y,S){if(o.request){if(y)return o.masterPlaylistLoader_.clientOffset_=o.masterLoaded_-Date.now(),n();var x;x="HEAD"===h.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):o.masterLoaded_:Date.parse(S.responseText),o.masterPlaylistLoader_.clientOffset_=x-Date.now(),n()}}))},a.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},a.handleMaster_=function(){this.mediaRequest_=null;var n=function(l){var u=l.srcUrl,h=As(l.masterXml,{manifestUri:u,clientOffset:l.clientOffset,sidxMapping:l.sidxMapping});return sf(h,u),h}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),o=this.masterPlaylistLoader_.master;o&&(n=function(l,a,u){for(var n=!0,o=Wg(l,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod}),h=0;h<a.playlists.length;h++){var y=a.playlists[h];if(y.sidx){var S=Pe(y.sidx);u&&u[S]&&u[S].sidx&&be(y,u[S].sidx,y.sidx.resolvedUri)}var x=Gm(o,y,Km);x&&(o=x,n=!1)}return rf(a,function(V,re,ee,De){if(V.playlists&&V.playlists.length){var ze=V.playlists[0].id,Ve=Gm(o,V.playlists[0],Km);Ve&&((o=Ve).mediaGroups[re][ee][De].playlists[0]=o.playlists[ze],n=!1)}}),a.minimumUpdatePeriod!==l.minimumUpdatePeriod&&(n=!1),n?null:o}(o,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||o;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!o||n&&n.minimumUpdatePeriod!==o.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!n},a.updateMinimumUpdatePeriodTimeout_=function(){var n=this.masterPlaylistLoader_;n.createMupOnMedia_&&(n.off("loadedmetadata",n.createMupOnMedia_),n.createMupOnMedia_=null),n.minimumUpdatePeriodTimeout_&&(ge().clearTimeout(n.minimumUpdatePeriodTimeout_),n.minimumUpdatePeriodTimeout_=null);var o=n.master&&n.master.minimumUpdatePeriod;0===o&&(n.media()?o=1e3*n.media().targetDuration:(n.createMupOnMedia_=n.updateMinimumUpdatePeriodTimeout_,n.one("loadedmetadata",n.createMupOnMedia_))),"number"!=typeof o||o<=0?o<0&&this.logger_("found invalid minimumUpdatePeriod of "+o+", not setting a timeout"):this.createMUPTimeout_(o)},a.createMUPTimeout_=function(n){var o=this.masterPlaylistLoader_;o.minimumUpdatePeriodTimeout_=ge().setTimeout(function(){o.minimumUpdatePeriodTimeout_=null,o.trigger("minimumUpdatePeriod"),o.createMUPTimeout_(n)},n)},a.refreshXml_=function(){var n=this;this.requestMaster_(function(o,h){h&&(n.media_&&(n.media_=n.masterPlaylistLoader_.master.playlists[n.media_.id]),n.masterPlaylistLoader_.sidxMapping_=function(l,a){var n=qg(l.playlists,a);return rf(l,function(o,h,y,S){o.playlists&&o.playlists.length&&(n=Wg(n,qg(o.playlists,a)))}),n}(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.sidxMapping_),n.addSidxSegments_(n.media(),n.state,function(y){n.refreshMedia_(n.media().id)}))})},a.refreshMedia_=function(n){var o=this;if(!n)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,y=!this.media_||this.media_!==h[n];y?this.media_=h[n]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function x(){o.media().endList||(o.mediaUpdateTimeout=ge().setTimeout(function(){o.trigger("mediaupdatetimeout"),x()},Ug(o.media(),!!y)))}(),this.trigger("loadedplaylist")},l}(Z.EventTarget),ti={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Kg=function(l){return l.on=l.addEventListener,l.off=l.removeEventListener,l},Kf=function(l){return function(){var a=function(l){try{return URL.createObjectURL(new Blob([l],{type:"application/javascript"}))}catch{var a=new BlobBuilder;return a.append(l),URL.createObjectURL(a.getBlob())}}(l),u=Kg(new Worker(a));u.objURL=a;var n=u.terminate;return u.on=u.addEventListener,u.off=u.removeEventListener,u.terminate=function(){return URL.revokeObjectURL(a),n.call(this)},u}},cf=function(l){return"var browserWorkerPolyFill = "+Kg.toString()+";\nbrowserWorkerPolyFill(self);\n"+l},Xm=function(l){return l.toString().replace(/^function.+?{/,"").slice(0,-1)},Jm=cf(Xm(function(){var m=function(){this.init=function(){var A={};this.on=function(j,F){A[j]||(A[j]=[]),A[j]=A[j].concat(F)},this.off=function(j,F){var G;return!!A[j]&&(G=A[j].indexOf(F),A[j]=A[j].slice(),A[j].splice(G,1),G>-1)},this.trigger=function(j){var F,G,ae,pe;if(F=A[j])if(2===arguments.length)for(ae=F.length,G=0;G<ae;++G)F[G].call(this,arguments[1]);else{for(pe=[],G=arguments.length,G=1;G<arguments.length;++G)pe.push(arguments[G]);for(ae=F.length,G=0;G<ae;++G)F[G].apply(this,pe)}},this.dispose=function(){A={}}}};m.prototype.pipe=function(we){return this.on("data",function(A){we.push(A)}),this.on("done",function(A){we.flush(A)}),this.on("partialdone",function(A){we.partialFlush(A)}),this.on("endedtimeline",function(A){we.endTimeline(A)}),this.on("reset",function(A){we.reset(A)}),we},m.prototype.push=function(we){this.trigger("data",we)},m.prototype.flush=function(we){this.trigger("done",we)},m.prototype.partialFlush=function(we){this.trigger("partialdone",we)},m.prototype.endTimeline=function(we){this.trigger("endedtimeline",we)},m.prototype.reset=function(we){this.trigger("reset",we)};var u,n,o,h,y,S,x,V,re,ee,De,ze,Ve,Be,Wt,Lt,cn,hn,rn,qn,tr,wn,_n,Zn,ps,Oo,ks,cu,Is,yf,Hl,Nu,$l,za,Dc,Qo,we,A,l=m,a=Math.pow(2,32)-1;(function(){var we;if(_n={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(we in _n)_n.hasOwnProperty(we)&&(_n[we]=[we.charCodeAt(0),we.charCodeAt(1),we.charCodeAt(2),we.charCodeAt(3)]);Zn=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Oo=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ps=new Uint8Array([0,0,0,1]),ks=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),cu=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Is={video:ks,audio:cu},Nu=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Hl=new Uint8Array([0,0,0,0,0,0,0,0]),$l=new Uint8Array([0,0,0,0,0,0,0,0]),za=$l,Dc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Qo=$l,yf=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),u=function(A){var G,ae,j=[],F=0;for(G=1;G<arguments.length;G++)j.push(arguments[G]);for(G=j.length;G--;)F+=j[G].byteLength;for(ae=new Uint8Array(F+8),new DataView(ae.buffer,ae.byteOffset,ae.byteLength).setUint32(0,ae.byteLength),ae.set(A,4),G=0,F=8;G<j.length;G++)ae.set(j[G],F),F+=j[G].byteLength;return ae},n=function(){return u(_n.dinf,u(_n.dref,Nu))},o=function(A){return u(_n.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,A.audioobjecttype<<3|A.samplingfrequencyindex>>>1,A.samplingfrequencyindex<<7|A.channelcount<<3,6,1,2]))},h=function(){return u(_n.ftyp,Zn,ps,Zn,Oo)},Lt=function(A){return u(_n.hdlr,Is[A])},y=function(A){return u(_n.mdat,A)},Wt=function(A){var j=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,A.duration>>>24&255,A.duration>>>16&255,A.duration>>>8&255,255&A.duration,85,196,0,0]);return A.samplerate&&(j[12]=A.samplerate>>>24&255,j[13]=A.samplerate>>>16&255,j[14]=A.samplerate>>>8&255,j[15]=255&A.samplerate),u(_n.mdhd,j)},Be=function(A){return u(_n.mdia,Wt(A),Lt(A.type),x(A))},S=function(A){return u(_n.mfhd,new Uint8Array([0,0,0,0,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A]))},x=function(A){return u(_n.minf,"video"===A.type?u(_n.vmhd,yf):u(_n.smhd,Hl),n(),hn(A))},V=function(A,j){for(var F=[],G=j.length;G--;)F[G]=qn(j[G]);return u.apply(null,[_n.moof,S(A)].concat(F))},re=function(A){for(var j=A.length,F=[];j--;)F[j]=ze(A[j]);return u.apply(null,[_n.moov,De(4294967295)].concat(F).concat(ee(A)))},ee=function(A){for(var j=A.length,F=[];j--;)F[j]=tr(A[j]);return u.apply(null,[_n.mvex].concat(F))},De=function(A){var j=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(_n.mvhd,j)},cn=function(A){var G,ae,j=A.samples||[],F=new Uint8Array(4+j.length);for(ae=0;ae<j.length;ae++)F[ae+4]=(G=j[ae].flags).dependsOn<<4|G.isDependedOn<<2|G.hasRedundancy;return u(_n.sdtp,F)},hn=function(A){return u(_n.stbl,rn(A),u(_n.stts,Qo),u(_n.stsc,za),u(_n.stsz,Dc),u(_n.stco,$l))},rn=function(F){return u(_n.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===F.type?we(F):A(F))},we=function(F){var nt,_t,G=F.sps||[],ae=F.pps||[],pe=[],Ge=[];for(nt=0;nt<G.length;nt++)pe.push((65280&G[nt].byteLength)>>>8),pe.push(255&G[nt].byteLength),pe=pe.concat(Array.prototype.slice.call(G[nt]));for(nt=0;nt<ae.length;nt++)Ge.push((65280&ae[nt].byteLength)>>>8),Ge.push(255&ae[nt].byteLength),Ge=Ge.concat(Array.prototype.slice.call(ae[nt]));if(_t=[_n.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&F.width)>>8,255&F.width,(65280&F.height)>>8,255&F.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(_n.avcC,new Uint8Array([1,F.profileIdc,F.profileCompatibility,F.levelIdc,255].concat([G.length],pe,[ae.length],Ge))),u(_n.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],F.sarRatio){var pt=F.sarRatio[0],Ct=F.sarRatio[1];_t.push(u(_n.pasp,new Uint8Array([(4278190080&pt)>>24,(16711680&pt)>>16,(65280&pt)>>8,255&pt,(4278190080&Ct)>>24,(16711680&Ct)>>16,(65280&Ct)>>8,255&Ct])))}return u.apply(null,_t)},A=function(F){return u(_n.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&F.channelcount)>>8,255&F.channelcount,(65280&F.samplesize)>>8,255&F.samplesize,0,0,0,0,(65280&F.samplerate)>>8,255&F.samplerate,0,0]),o(F))},Ve=function(A){var j=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,0,(4278190080&A.duration)>>24,(16711680&A.duration)>>16,(65280&A.duration)>>8,255&A.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&A.width)>>8,255&A.width,0,0,(65280&A.height)>>8,255&A.height,0,0]);return u(_n.tkhd,j)},qn=function(A){var j,F,G,ae,Ge,nt;return j=u(_n.tfhd,new Uint8Array([0,0,0,58,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Ge=Math.floor(A.baseMediaDecodeTime/(a+1)),nt=Math.floor(A.baseMediaDecodeTime%(a+1)),F=u(_n.tfdt,new Uint8Array([1,0,0,0,Ge>>>24&255,Ge>>>16&255,Ge>>>8&255,255&Ge,nt>>>24&255,nt>>>16&255,nt>>>8&255,255&nt])),"audio"===A.type?(G=wn(A,92),u(_n.traf,j,F,G)):(ae=cn(A),G=wn(A,ae.length+92),u(_n.traf,j,F,G,ae))},ze=function(A){return A.duration=A.duration||4294967295,u(_n.trak,Ve(A),Be(A))},tr=function(A){var j=new Uint8Array([0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==A.type&&(j[j.length-1]=0),u(_n.trex,j)},function(){var we,A,j;j=function(G,ae){var pe=0,Ge=0,nt=0,_t=0;return G.length&&(void 0!==G[0].duration&&(pe=1),void 0!==G[0].size&&(Ge=2),void 0!==G[0].flags&&(nt=4),void 0!==G[0].compositionTimeOffset&&(_t=8)),[0,0,pe|Ge|nt|_t,1,(4278190080&G.length)>>>24,(16711680&G.length)>>>16,(65280&G.length)>>>8,255&G.length,(4278190080&ae)>>>24,(16711680&ae)>>>16,(65280&ae)>>>8,255&ae]},A=function(G,ae){var pe,Ge,nt,_t,pt,Ct;for(nt=j(_t=G.samples||[],ae+=20+16*_t.length),(Ge=new Uint8Array(nt.length+16*_t.length)).set(nt),pe=nt.length,Ct=0;Ct<_t.length;Ct++)Ge[pe++]=(4278190080&(pt=_t[Ct]).duration)>>>24,Ge[pe++]=(16711680&pt.duration)>>>16,Ge[pe++]=(65280&pt.duration)>>>8,Ge[pe++]=255&pt.duration,Ge[pe++]=(4278190080&pt.size)>>>24,Ge[pe++]=(16711680&pt.size)>>>16,Ge[pe++]=(65280&pt.size)>>>8,Ge[pe++]=255&pt.size,Ge[pe++]=pt.flags.isLeading<<2|pt.flags.dependsOn,Ge[pe++]=pt.flags.isDependedOn<<6|pt.flags.hasRedundancy<<4|pt.flags.paddingValue<<1|pt.flags.isNonSyncSample,Ge[pe++]=61440&pt.flags.degradationPriority,Ge[pe++]=15&pt.flags.degradationPriority,Ge[pe++]=(4278190080&pt.compositionTimeOffset)>>>24,Ge[pe++]=(16711680&pt.compositionTimeOffset)>>>16,Ge[pe++]=(65280&pt.compositionTimeOffset)>>>8,Ge[pe++]=255&pt.compositionTimeOffset;return u(_n.trun,Ge)},we=function(G,ae){var pe,Ge,nt,_t,pt,Ct;for(nt=j(_t=G.samples||[],ae+=20+8*_t.length),(pe=new Uint8Array(nt.length+8*_t.length)).set(nt),Ge=nt.length,Ct=0;Ct<_t.length;Ct++)pe[Ge++]=(4278190080&(pt=_t[Ct]).duration)>>>24,pe[Ge++]=(16711680&pt.duration)>>>16,pe[Ge++]=(65280&pt.duration)>>>8,pe[Ge++]=255&pt.duration,pe[Ge++]=(4278190080&pt.size)>>>24,pe[Ge++]=(16711680&pt.size)>>>16,pe[Ge++]=(65280&pt.size)>>>8,pe[Ge++]=255&pt.size;return u(_n.trun,pe)},wn=function(G,ae){return"audio"===G.type?we(G,ae):A(G,ae)}}();var Ca,Cm,bf,hp,fp,Sm,wm,J0,Tu_mdat=y,Tu_moof=V,Mh=function(A,j){var F={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return F.dataOffset=j,F.compositionTimeOffset=A.pts-A.dts,F.duration=A.duration,F.size=4*A.length,F.size+=A.byteLength,A.keyFrame&&(F.flags.dependsOn=2,F.flags.isNonSyncSample=0),F},sl=[33,16,5,32,164,27],Gl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ps=function(A){for(var j=[];A--;)j.push(0);return j};Cm=function(A){return 9e4*A},bf=function(A,j){return A*j},hp=function(A){return A/9e4},fp=function(A,j){return A/j},Sm=function(A,j){return Cm(fp(A,j))},wm=function(A,j){return bf(hp(A),j)},J0=function(A,j,F){return hp(F?A:A-j)};var Bs_secondsToVideoTs=Cm,Bs_videoTsToSeconds=hp,Bs_audioTsToVideoTs=Sm,Bs_videoTsToAudioTs=wm,Bs_metadataTsToSeconds=J0,Dm_prefixWithSilence=function(A,j,F,G){var ae,pt,Ct,gn,pe=0,Ge=0,nt=0,_t=0;if(j.length&&(ae=Bs_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),pe=Math.ceil(9e4/(A.samplerate/1024)),F&&G&&(Ge=ae-Math.max(F,G),_t=(nt=Math.floor(Ge/pe))*pe),!(nt<1||_t>45e3))){for((pt=function(){if(!Ca){var A={96e3:[sl,[227,64],Ps(154),[56]],88200:[sl,[231],Ps(170),[56]],64e3:[sl,[248,192],Ps(240),[56]],48e3:[sl,[255,192],Ps(268),[55,148,128],Ps(54),[112]],44100:[sl,[255,192],Ps(268),[55,163,128],Ps(84),[112]],32e3:[sl,[255,192],Ps(268),[55,234],Ps(226),[112]],24e3:[sl,[255,192],Ps(268),[55,255,128],Ps(268),[111,112],Ps(126),[224]],16e3:[sl,[255,192],Ps(268),[55,255,128],Ps(268),[111,255],Ps(269),[223,108],Ps(195),[1,192]],12e3:[Gl,Ps(268),[3,127,248],Ps(268),[6,255,240],Ps(268),[13,255,224],Ps(268),[27,253,128],Ps(259),[56]],11025:[Gl,Ps(268),[3,127,248],Ps(268),[6,255,240],Ps(268),[13,255,224],Ps(268),[27,255,192],Ps(268),[55,175,128],Ps(108),[112]],8e3:[Gl,Ps(268),[3,121,16],Ps(47),[7]]};Ca=function(A){return Object.keys(A).reduce(function(j,F){return j[F]=new Uint8Array(A[F].reduce(function(G,ae){return G.concat(ae)},[])),j},{})}(A)}return Ca}()[A.samplerate])||(pt=j[0].data),Ct=0;Ct<nt;Ct++)j.splice(0,0,{data:pt,dts:(gn=j[0]).dts-pe,pts:gn.pts-pe});return A.baseMediaDecodeTime-=Math.floor(Bs_videoTsToAudioTs(_t,A.samplerate)),_t}},bl_clearDtsInfo=function(A){delete A.minSegmentDts,delete A.maxSegmentDts,delete A.minSegmentPts,delete A.maxSegmentPts},bl_calculateTrackBaseMediaDecodeTime=function(A,j){var F,ae=A.minSegmentDts;return j||(ae-=A.timelineStartInfo.dts),F=A.timelineStartInfo.baseMediaDecodeTime,F+=ae,F=Math.max(0,F),"audio"===A.type&&(F*=A.samplerate/9e4,F=Math.floor(F)),F},bl_collectDtsInfo=function(A,j){"number"==typeof j.pts&&(void 0===A.timelineStartInfo.pts&&(A.timelineStartInfo.pts=j.pts),A.minSegmentPts=void 0===A.minSegmentPts?j.pts:Math.min(A.minSegmentPts,j.pts),A.maxSegmentPts=void 0===A.maxSegmentPts?j.pts:Math.max(A.maxSegmentPts,j.pts)),"number"==typeof j.dts&&(void 0===A.timelineStartInfo.dts&&(A.timelineStartInfo.dts=j.dts),A.minSegmentDts=void 0===A.minSegmentDts?j.dts:Math.min(A.minSegmentDts,j.dts),A.maxSegmentDts=void 0===A.maxSegmentDts?j.dts:Math.max(A.maxSegmentDts,j.dts))},Xo=function we(A){A=A||{},we.prototype.init.call(this),this.parse708captions_="boolean"!=typeof A.parse708captions||A.parse708captions,this.captionPackets_=[],this.ccStreams_=[new fo(0,0),new fo(0,1),new fo(1,0),new fo(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ro),this.reset(),this.ccStreams_.forEach(function(j){j.on("data",this.trigger.bind(this,"data")),j.on("partialdone",this.trigger.bind(this,"partialdone")),j.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Xo.prototype=new l).push=function(we){var A,j,F;if("sei_rbsp"===we.nalUnitType&&(A=function(A){for(var j=0,F={payloadType:-1,payloadSize:0},G=0,ae=0;j<A.byteLength&&128!==A[j];){for(;255===A[j];)G+=255,j++;for(G+=A[j++];255===A[j];)ae+=255,j++;if(ae+=A[j++],!F.payload&&4===G){if("GA94"===String.fromCharCode(A[j+3],A[j+4],A[j+5],A[j+6])){F.payloadType=G,F.payloadSize=ae,F.payload=A.subarray(j,j+ae);break}F.payload=void 0}j+=ae,G=0,ae=0}return F}(we.escapedRBSP)).payload&&4===A.payloadType&&(j=function(A){return 181!==A.payload[0]||49!=(A.payload[1]<<8|A.payload[2])||"GA94"!==String.fromCharCode(A.payload[3],A.payload[4],A.payload[5],A.payload[6])||3!==A.payload[7]?null:A.payload.subarray(8,A.payload.length-1)}(A))){if(we.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(we.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));F=function(A,j){var G,ae,pe,Ge,F=[];if(!(64&j[0]))return F;for(ae=31&j[0],G=0;G<ae;G++)Ge={type:3&j[2+(pe=3*G)],pts:A},4&j[pe+2]&&(Ge.ccData=j[pe+3]<<8|j[pe+4],F.push(Ge));return F}(we.pts,j),this.captionPackets_=this.captionPackets_.concat(F),this.latestDts_!==we.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=we.dts}},Xo.prototype.flushCCStreams=function(we){this.ccStreams_.forEach(function(A){return"flush"===we?A.flush():A.partialFlush()},this)},Xo.prototype.flushStream=function(we){this.captionPackets_.length?(this.captionPackets_.forEach(function(A,j){A.presortIndex=j}),this.captionPackets_.sort(function(A,j){return A.pts===j.pts?A.presortIndex-j.presortIndex:A.pts-j.pts}),this.captionPackets_.forEach(function(A){A.type<2?this.dispatchCea608Packet(A):this.dispatchCea708Packet(A)},this),this.captionPackets_.length=0,this.flushCCStreams(we)):this.flushCCStreams(we)},Xo.prototype.flush=function(){return this.flushStream("flush")},Xo.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Xo.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(we){we.reset()})},Xo.prototype.dispatchCea608Packet=function(we){this.setsTextOrXDSActive(we)?this.activeCea608Channel_[we.type]=null:this.setsChannel1Active(we)?this.activeCea608Channel_[we.type]=0:this.setsChannel2Active(we)&&(this.activeCea608Channel_[we.type]=1),null!==this.activeCea608Channel_[we.type]&&this.ccStreams_[(we.type<<1)+this.activeCea608Channel_[we.type]].push(we)},Xo.prototype.setsChannel1Active=function(we){return 4096==(30720&we.ccData)},Xo.prototype.setsChannel2Active=function(we){return 6144==(30720&we.ccData)},Xo.prototype.setsTextOrXDSActive=function(we){return 256==(28928&we.ccData)||4138==(30974&we.ccData)||6186==(30974&we.ccData)},Xo.prototype.dispatchCea708Packet=function(we){this.parse708captions_&&this.cc708Stream_.push(we)};var Ud={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ed=function(A){return 32<=A&&A<=127||160<=A&&A<=255},Lu=function(A){this.windowNum=A,this.reset()};Lu.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Lu.prototype.getText=function(){return this.rows.join("\n")},Lu.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Lu.prototype.newLine=function(we){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(we),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Lu.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Lu.prototype.addText=function(we){this.rows[this.rowIdx]+=we},Lu.prototype.backspace=function(){if(!this.isEmpty()){var we=this.rows[this.rowIdx];this.rows[this.rowIdx]=we.substr(0,we.length-1)}};var pp=function(A){this.serviceNum=A,this.text="",this.currentWindow=new Lu(-1),this.windows=[]};pp.prototype.init=function(we,A){this.startPts=we;for(var j=0;j<8;j++)this.windows[j]=new Lu(j),"function"==typeof A&&(this.windows[j].beforeRowOverflow=A)},pp.prototype.setCurrentWindow=function(we){this.currentWindow=this.windows[we]};var Ro=function we(){we.prototype.init.call(this);var A=this;this.current708Packet=null,this.services={},this.push=function(j){3===j.type?(A.new708Packet(),A.add708Bytes(j)):(null===A.current708Packet&&A.new708Packet(),A.add708Bytes(j))}};Ro.prototype=new l,Ro.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ro.prototype.add708Bytes=function(we){var A=we.ccData,j=A>>>8,F=255&A;this.current708Packet.ptsVals.push(we.pts),this.current708Packet.data.push(j),this.current708Packet.data.push(F)},Ro.prototype.push708Packet=function(){var we=this.current708Packet,A=we.data,j=null,F=null,G=0,ae=A[G++];for(we.seq=ae>>6,we.sizeCode=63&ae;G<A.length;G++)F=31&(ae=A[G++]),7==(j=ae>>5)&&F>0&&(j=ae=A[G++]),this.pushServiceBlock(j,G,F),F>0&&(G+=F-1)},Ro.prototype.pushServiceBlock=function(we,A,j){var F,G=A,ae=this.current708Packet.data,pe=this.services[we];for(pe||(pe=this.initService(we,G));G<A+j&&G<ae.length;G++)ed(F=ae[G])?G=this.handleText(G,pe):16===F?G=this.extendedCommands(G,pe):128<=F&&F<=135?G=this.setCurrentWindow(G,pe):152<=F&&F<=159?G=this.defineWindow(G,pe):136===F?G=this.clearWindows(G,pe):140===F?G=this.deleteWindows(G,pe):137===F?G=this.displayWindows(G,pe):138===F?G=this.hideWindows(G,pe):139===F?G=this.toggleWindows(G,pe):151===F?G=this.setWindowAttributes(G,pe):144===F?G=this.setPenAttributes(G,pe):145===F?G=this.setPenColor(G,pe):146===F?G=this.setPenLocation(G,pe):143===F?pe=this.reset(G,pe):8===F?pe.currentWindow.backspace():12===F?pe.currentWindow.clearText():13===F?pe.currentWindow.pendingNewLine=!0:14===F?pe.currentWindow.clearText():141===F&&G++},Ro.prototype.extendedCommands=function(we,A){var F=this.current708Packet.data[++we];return ed(F)&&(we=this.handleText(we,A,!0)),we},Ro.prototype.getPts=function(we){return this.current708Packet.ptsVals[Math.floor(we/2)]},Ro.prototype.initService=function(we,A){var j=this;return this.services[we]=new pp(we),this.services[we].init(this.getPts(A),function(F){j.flushDisplayed(F,j.services[we])}),this.services[we]},Ro.prototype.handleText=function(we,A,j){var pe=function(A){var j=Ud[A]||A;return 4096&A&&A===j?"":String.fromCharCode(j)}((j?4096:0)|this.current708Packet.data[we]),Ge=A.currentWindow;return Ge.pendingNewLine&&!Ge.isEmpty()&&Ge.newLine(this.getPts(we)),Ge.pendingNewLine=!1,Ge.addText(pe),we},Ro.prototype.setCurrentWindow=function(we,A){return A.setCurrentWindow(7&this.current708Packet.data[we]),we},Ro.prototype.defineWindow=function(we,A){var j=this.current708Packet.data,F=j[we];A.setCurrentWindow(7&F);var ae=A.currentWindow;return F=j[++we],ae.visible=(32&F)>>5,ae.rowLock=(16&F)>>4,ae.columnLock=(8&F)>>3,ae.priority=7&F,F=j[++we],ae.relativePositioning=(128&F)>>7,ae.anchorVertical=127&F,F=j[++we],ae.anchorHorizontal=F,F=j[++we],ae.anchorPoint=(240&F)>>4,ae.rowCount=15&F,F=j[++we],ae.columnCount=63&F,F=j[++we],ae.windowStyle=(56&F)>>3,ae.penStyle=7&F,ae.virtualRowCount=ae.rowCount+1,we},Ro.prototype.setWindowAttributes=function(we,A){var j=this.current708Packet.data,F=j[we],G=A.currentWindow.winAttr;return F=j[++we],G.fillOpacity=(192&F)>>6,G.fillRed=(48&F)>>4,G.fillGreen=(12&F)>>2,G.fillBlue=3&F,F=j[++we],G.borderType=(192&F)>>6,G.borderRed=(48&F)>>4,G.borderGreen=(12&F)>>2,G.borderBlue=3&F,F=j[++we],G.borderType+=(128&F)>>5,G.wordWrap=(64&F)>>6,G.printDirection=(48&F)>>4,G.scrollDirection=(12&F)>>2,G.justify=3&F,F=j[++we],G.effectSpeed=(240&F)>>4,G.effectDirection=(12&F)>>2,G.displayEffect=3&F,we},Ro.prototype.flushDisplayed=function(we,A){for(var j=[],F=0;F<8;F++)A.windows[F].visible&&!A.windows[F].isEmpty()&&j.push(A.windows[F].getText());A.endPts=we,A.text=j.join("\n\n"),this.pushCaption(A),A.startPts=we},Ro.prototype.pushCaption=function(we){""!==we.text&&(this.trigger("data",{startPts:we.startPts,endPts:we.endPts,text:we.text,stream:"cc708_"+we.serviceNum}),we.text="",we.startPts=we.endPts)},Ro.prototype.displayWindows=function(we,A){var F=this.current708Packet.data[++we],G=this.getPts(we);this.flushDisplayed(G,A);for(var ae=0;ae<8;ae++)F&1<<ae&&(A.windows[ae].visible=1);return we},Ro.prototype.hideWindows=function(we,A){var F=this.current708Packet.data[++we],G=this.getPts(we);this.flushDisplayed(G,A);for(var ae=0;ae<8;ae++)F&1<<ae&&(A.windows[ae].visible=0);return we},Ro.prototype.toggleWindows=function(we,A){var F=this.current708Packet.data[++we],G=this.getPts(we);this.flushDisplayed(G,A);for(var ae=0;ae<8;ae++)F&1<<ae&&(A.windows[ae].visible^=1);return we},Ro.prototype.clearWindows=function(we,A){var F=this.current708Packet.data[++we],G=this.getPts(we);this.flushDisplayed(G,A);for(var ae=0;ae<8;ae++)F&1<<ae&&A.windows[ae].clearText();return we},Ro.prototype.deleteWindows=function(we,A){var F=this.current708Packet.data[++we],G=this.getPts(we);this.flushDisplayed(G,A);for(var ae=0;ae<8;ae++)F&1<<ae&&A.windows[ae].reset();return we},Ro.prototype.setPenAttributes=function(we,A){var j=this.current708Packet.data,F=j[we],G=A.currentWindow.penAttr;return F=j[++we],G.textTag=(240&F)>>4,G.offset=(12&F)>>2,G.penSize=3&F,F=j[++we],G.italics=(128&F)>>7,G.underline=(64&F)>>6,G.edgeType=(56&F)>>3,G.fontStyle=7&F,we},Ro.prototype.setPenColor=function(we,A){var j=this.current708Packet.data,F=j[we],G=A.currentWindow.penColor;return F=j[++we],G.fgOpacity=(192&F)>>6,G.fgRed=(48&F)>>4,G.fgGreen=(12&F)>>2,G.fgBlue=3&F,F=j[++we],G.bgOpacity=(192&F)>>6,G.bgRed=(48&F)>>4,G.bgGreen=(12&F)>>2,G.bgBlue=3&F,F=j[++we],G.edgeRed=(48&F)>>4,G.edgeGreen=(12&F)>>2,G.edgeBlue=3&F,we},Ro.prototype.setPenLocation=function(we,A){var j=this.current708Packet.data,F=j[we],G=A.currentWindow.penLoc;return A.currentWindow.pendingNewLine=!0,F=j[++we],G.row=15&F,F=j[++we],G.column=63&F,we},Ro.prototype.reset=function(we,A){var j=this.getPts(we);return this.flushDisplayed(j,A),this.initService(A.serviceNum,we)};var qy={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},yg=function(A){return null===A?"":(A=qy[A]||A,String.fromCharCode(A))},r_=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ol=function(){for(var A=[],j=15;j--;)A.push("");return A},fo=function we(A,j){we.prototype.init.call(this),this.field_=A||0,this.dataChannel_=j||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(F){var G,ae,pe,Ge,nt;if((G=32639&F.ccData)!==this.lastControlCode_){if(4096==(61440&G)?this.lastControlCode_=G:G!==this.PADDING_&&(this.lastControlCode_=null),pe=G>>>8,Ge=255&G,G!==this.PADDING_)if(G===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(G===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(F.pts),this.flushDisplayed(F.pts),ae=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ae,this.startPts_=F.pts;else if(G===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(F.pts);else if(G===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(F.pts);else if(G===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(F.pts);else if(G===this.CARRIAGE_RETURN_)this.clearFormatting(F.pts),this.flushDisplayed(F.pts),this.shiftRowsUp_(),this.startPts_=F.pts;else if(G===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(G===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(F.pts),this.displayed_=ol();else if(G===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ol();else if(G===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(F.pts),this.displayed_=ol()),this.mode_="paintOn",this.startPts_=F.pts;else if(this.isSpecialCharacter(pe,Ge))nt=yg((pe=(3&pe)<<8)|Ge),this[this.mode_](F.pts,nt),this.column_++;else if(this.isExtCharacter(pe,Ge))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),nt=yg((pe=(3&pe)<<8)|Ge),this[this.mode_](F.pts,nt),this.column_++;else if(this.isMidRowCode(pe,Ge))this.clearFormatting(F.pts),this[this.mode_](F.pts," "),this.column_++,14==(14&Ge)&&this.addFormatting(F.pts,["i"]),1==(1&Ge)&&this.addFormatting(F.pts,["u"]);else if(this.isOffsetControlCode(pe,Ge))this.column_+=3&Ge;else if(this.isPAC(pe,Ge)){var _t=r_.indexOf(7968&G);"rollUp"===this.mode_&&(_t-this.rollUpRows_+1<0&&(_t=this.rollUpRows_-1),this.setRollUp(F.pts,_t)),_t!==this.row_&&(this.clearFormatting(F.pts),this.row_=_t),1&Ge&&-1===this.formatting_.indexOf("u")&&this.addFormatting(F.pts,["u"]),16==(16&G)&&(this.column_=4*((14&G)>>1)),this.isColorPAC(Ge)&&14==(14&Ge)&&this.addFormatting(F.pts,["i"])}else this.isNormalChar(pe)&&(0===Ge&&(Ge=null),nt=yg(pe),nt+=yg(Ge),this[this.mode_](F.pts,nt),this.column_+=nt.length)}else this.lastControlCode_=null}};fo.prototype=new l,fo.prototype.flushDisplayed=function(we){var A=this.displayed_.map(function(j,F){try{return j.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+F+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");A.length&&this.trigger("data",{startPts:this.startPts_,endPts:we,text:A,stream:this.name_})},fo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ol(),this.nonDisplayed_=ol(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},fo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},fo.prototype.isSpecialCharacter=function(we,A){return we===this.EXT_&&A>=48&&A<=63},fo.prototype.isExtCharacter=function(we,A){return(we===this.EXT_+1||we===this.EXT_+2)&&A>=32&&A<=63},fo.prototype.isMidRowCode=function(we,A){return we===this.EXT_&&A>=32&&A<=47},fo.prototype.isOffsetControlCode=function(we,A){return we===this.OFFSET_&&A>=33&&A<=35},fo.prototype.isPAC=function(we,A){return we>=this.BASE_&&we<this.BASE_+8&&A>=64&&A<=127},fo.prototype.isColorPAC=function(we){return we>=64&&we<=79||we>=96&&we<=127},fo.prototype.isNormalChar=function(we){return we>=32&&we<=127},fo.prototype.setRollUp=function(we,A){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(we),this.nonDisplayed_=ol(),this.displayed_=ol()),void 0!==A&&A!==this.row_)for(var j=0;j<this.rollUpRows_;j++)this.displayed_[A-j]=this.displayed_[this.row_-j],this.displayed_[this.row_-j]="";void 0===A&&(A=this.row_),this.topRow_=A-this.rollUpRows_+1},fo.prototype.addFormatting=function(we,A){this.formatting_=this.formatting_.concat(A);var j=A.reduce(function(F,G){return F+"<"+G+">"},"");this[this.mode_](we,j)},fo.prototype.clearFormatting=function(we){if(this.formatting_.length){var A=this.formatting_.reverse().reduce(function(j,F){return j+"</"+F+">"},"");this.formatting_=[],this[this.mode_](we,A)}},fo.prototype.popOn=function(we,A){var j=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=j+=A},fo.prototype.rollUp=function(we,A){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=A},fo.prototype.shiftRowsUp_=function(){var we;for(we=0;we<this.topRow_;we++)this.displayed_[we]="";for(we=this.row_+1;we<15;we++)this.displayed_[we]="";for(we=this.topRow_;we<this.row_;we++)this.displayed_[we]=this.displayed_[we+1];this.displayed_[this.row_]=""},fo.prototype.paintOn=function(we,A){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=A};var kh={CaptionStream:Xo,Cea608Stream:fo,Cea708Stream:Ro},Wa={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Rv=function(A,j){var F=1;for(A>j&&(F=-1);Math.abs(j-A)>4294967296;)A+=8589934592*F;return A},xm=function we(A){var j,F;we.prototype.init.call(this),this.type_=A||"shared",this.push=function(G){"shared"!==this.type_&&G.type!==this.type_||(void 0===F&&(F=G.dts),G.dts=Rv(G.dts,F),G.pts=Rv(G.pts,F),j=G.dts,this.trigger("data",G))},this.flush=function(){F=j,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){F=void 0,j=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};xm.prototype=new l;var td,_g_TimestampRolloverStream=xm,_g_handleRollover=Rv,Tg=function(A,j,F){var G,ae="";for(G=j;G<F;G++)ae+="%"+("00"+A[G].toString(16)).slice(-2);return ae},zl=function(A,j,F){return decodeURIComponent(Tg(A,j,F))},Yy=function(A,j,F){return unescape(Tg(A,j,F))},Ph=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},Ef={TXXX:function(A){var j;if(3===A.data[0]){for(j=1;j<A.data.length;j++)if(0===A.data[j]){A.description=zl(A.data,1,j),A.value=zl(A.data,j+1,A.data.length).replace(/\0*$/,"");break}A.data=A.value}},WXXX:function(A){var j;if(3===A.data[0])for(j=1;j<A.data.length;j++)if(0===A.data[j]){A.description=zl(A.data,1,j),A.url=zl(A.data,j+1,A.data.length);break}},PRIV:function(A){var j;for(j=0;j<A.data.length;j++)if(0===A.data[j]){A.owner=Yy(A.data,0,j);break}A.privateData=A.data.subarray(j+1),A.data=A.privateData}};td=function(A){var pe,j={descriptor:A&&A.descriptor},F=0,G=[],ae=0;if(td.prototype.init.call(this),this.dispatchType=Wa.METADATA_STREAM_TYPE.toString(16),j.descriptor)for(pe=0;pe<j.descriptor.length;pe++)this.dispatchType+=("00"+j.descriptor[pe].toString(16)).slice(-2);this.push=function(Ge){var nt,_t,pt,Ct,gn;if("timed-metadata"===Ge.type){if(Ge.dataAlignmentIndicator&&(ae=0,G.length=0),0===G.length&&(Ge.data.length<10||Ge.data[0]!=="I".charCodeAt(0)||Ge.data[1]!=="D".charCodeAt(0)||Ge.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(G.push(Ge),ae+=Ge.data.byteLength,1===G.length&&(F=Ph(Ge.data.subarray(6,10)),F+=10),!(ae<F)){for(nt={data:new Uint8Array(F),frames:[],pts:G[0].pts,dts:G[0].dts},gn=0;gn<F;)nt.data.set(G[0].data.subarray(0,F-gn),gn),gn+=G[0].data.byteLength,ae-=G[0].data.byteLength,G.shift();_t=10,64&nt.data[5]&&(_t+=4,_t+=Ph(nt.data.subarray(10,14)),F-=Ph(nt.data.subarray(16,20)));do{if((pt=Ph(nt.data.subarray(_t+4,_t+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Ct={id:String.fromCharCode(nt.data[_t],nt.data[_t+1],nt.data[_t+2],nt.data[_t+3]),data:nt.data.subarray(_t+10,_t+pt+10)}).key=Ct.id,Ef[Ct.id]&&(Ef[Ct.id](Ct),"com.apple.streaming.transportStreamTimestamp"===Ct.owner)){var _r=Ct.data,Rn=(1&_r[3])<<30|_r[4]<<22|_r[5]<<14|_r[6]<<6|_r[7]>>>2;Rn*=4,Ct.timeStamp=Rn+=3&_r[7],void 0===nt.pts&&void 0===nt.dts&&(nt.pts=Ct.timeStamp,nt.dts=Ct.timeStamp),this.trigger("timestamp",Ct)}nt.frames.push(Ct),_t+=10,_t+=pt}while(_t<F);this.trigger("data",nt)}}}},td.prototype=new l;var Cf,gp,Ac,Qy=td,Am=_g_TimestampRolloverStream;Cf=function(){var A=new Uint8Array(188),j=0;Cf.prototype.init.call(this),this.push=function(F){var pe,G=0,ae=188;for(j?((pe=new Uint8Array(F.byteLength+j)).set(A.subarray(0,j)),pe.set(F,j),j=0):pe=F;ae<pe.byteLength;)71!==pe[G]||71!==pe[ae]?(G++,ae++):(this.trigger("data",pe.subarray(G,ae)),G+=188,ae+=188);G<pe.byteLength&&(A.set(pe.subarray(G),0),j=pe.byteLength-G)},this.flush=function(){188===j&&71===A[0]&&(this.trigger("data",A),j=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){j=0,this.trigger("reset")}},Cf.prototype=new l,gp=function(){var A,j,F,G;gp.prototype.init.call(this),G=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,A=function(pe,Ge){var nt=0;Ge.payloadUnitStartIndicator&&(nt+=pe[nt]+1),"pat"===Ge.type?j(pe.subarray(nt),Ge):F(pe.subarray(nt),Ge)},j=function(pe,Ge){Ge.section_number=pe[7],Ge.last_section_number=pe[8],G.pmtPid=(31&pe[10])<<8|pe[11],Ge.pmtPid=G.pmtPid},F=function(pe,Ge){var _t,Ct;if(1&pe[5]){for(G.programMapTable={video:null,audio:null,"timed-metadata":{}},_t=3+((15&pe[1])<<8|pe[2])-4,Ct=12+((15&pe[10])<<8|pe[11]);Ct<_t;){var gn=pe[Ct],Qn=(31&pe[Ct+1])<<8|pe[Ct+2];gn===Wa.H264_STREAM_TYPE&&null===G.programMapTable.video?G.programMapTable.video=Qn:gn===Wa.ADTS_STREAM_TYPE&&null===G.programMapTable.audio?G.programMapTable.audio=Qn:gn===Wa.METADATA_STREAM_TYPE&&(G.programMapTable["timed-metadata"][Qn]=gn),Ct+=5+((15&pe[Ct+3])<<8|pe[Ct+4])}Ge.programMapTable=G.programMapTable}},this.push=function(ae){var pe={},Ge=4;if(pe.payloadUnitStartIndicator=!!(64&ae[1]),pe.pid=31&ae[1],pe.pid<<=8,pe.pid|=ae[2],(48&ae[3])>>>4>1&&(Ge+=ae[Ge]+1),0===pe.pid)pe.type="pat",A(ae.subarray(Ge),pe),this.trigger("data",pe);else if(pe.pid===this.pmtPid)for(pe.type="pmt",A(ae.subarray(Ge),pe),this.trigger("data",pe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([ae,Ge,pe]):this.processPes_(ae,Ge,pe)},this.processPes_=function(ae,pe,Ge){Ge.streamType=Ge.pid===this.programMapTable.video?Wa.H264_STREAM_TYPE:Ge.pid===this.programMapTable.audio?Wa.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Ge.pid],Ge.type="pes",Ge.data=ae.subarray(pe),this.trigger("data",Ge)}},gp.prototype=new l,gp.STREAM_TYPES={h264:27,adts:15},Ac=function(){var pe,A=this,j=!1,F={data:[],size:0},G={data:[],size:0},ae={data:[],size:0},nt=function(pt,Ct,gn){var qa,Qn=new Uint8Array(pt.size),_r={type:Ct},Rn=0,Jr=0,Jo=!1;if(pt.data.length&&!(pt.size<9)){for(_r.trackId=pt.data[0].pid,Rn=0;Rn<pt.data.length;Rn++)Qn.set((qa=pt.data[Rn]).data,Jr),Jr+=qa.data.byteLength;(function(pt,Ct){var gn,Qn=pt[0]<<16|pt[1]<<8|pt[2];Ct.data=new Uint8Array,1===Qn&&(Ct.packetLength=6+(pt[4]<<8|pt[5]),Ct.dataAlignmentIndicator=0!=(4&pt[6]),192&(gn=pt[7])&&(Ct.pts=(14&pt[9])<<27|(255&pt[10])<<20|(254&pt[11])<<12|(255&pt[12])<<5|(254&pt[13])>>>3,Ct.pts*=4,Ct.pts+=(6&pt[13])>>>1,Ct.dts=Ct.pts,64&gn&&(Ct.dts=(14&pt[14])<<27|(255&pt[15])<<20|(254&pt[16])<<12|(255&pt[17])<<5|(254&pt[18])>>>3,Ct.dts*=4,Ct.dts+=(6&pt[18])>>>1)),Ct.data=pt.subarray(9+pt[8]))})(Qn,_r),Jo="video"===Ct||_r.packetLength<=pt.size,(gn||Jo)&&(pt.size=0,pt.data.length=0),Jo&&A.trigger("data",_r)}};Ac.prototype.init.call(this),this.push=function(_t){({pat:function(){},pes:function(){var Ct,gn;switch(_t.streamType){case Wa.H264_STREAM_TYPE:Ct=F,gn="video";break;case Wa.ADTS_STREAM_TYPE:Ct=G,gn="audio";break;case Wa.METADATA_STREAM_TYPE:Ct=ae,gn="timed-metadata";break;default:return}_t.payloadUnitStartIndicator&&nt(Ct,gn,!0),Ct.data.push(_t),Ct.size+=_t.data.byteLength},pmt:function(){var Ct={type:"metadata",tracks:[]};null!==(pe=_t.programMapTable).video&&Ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.video,codec:"avc",type:"video"}),null!==pe.audio&&Ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.audio,codec:"adts",type:"audio"}),j=!0,A.trigger("data",Ct)}})[_t.type]()},this.reset=function(){F.size=0,F.data.length=0,G.size=0,G.data.length=0,this.trigger("reset")},this.flushStreams_=function(){nt(F,"video"),nt(G,"audio"),nt(ae,"timed-metadata")},this.flush=function(){if(!j&&pe){var _t={type:"metadata",tracks:[]};null!==pe.video&&_t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.video,codec:"avc",type:"video"}),null!==pe.audio&&_t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.audio,codec:"adts",type:"audio"}),A.trigger("data",_t)}j=!1,this.flushStreams_(),this.trigger("done")}},Ac.prototype=new l;var Mm={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Cf,TransportParseStream:gp,ElementaryStream:Ac,TimestampRolloverStream:Am,CaptionStream:kh.CaptionStream,Cea608Stream:kh.Cea608Stream,Cea708Stream:kh.Cea708Stream,MetadataStream:Qy};for(var bg in Wa)Wa.hasOwnProperty(bg)&&(Mm[bg]=Wa[bg]);var nd,El=Mm,Nv=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];nd=function(A){var j,F=0;nd.prototype.init.call(this),this.skipWarn_=function(G,ae){this.trigger("log",{level:"warn",message:"adts skiping bytes "+G+" to "+ae+" in frame "+F+" outside syncword"})},this.push=function(G){var pe,Ge,nt,_t,pt,ae=0;if(A||(F=0),"audio"===G.type){j&&j.length?(nt=j,(j=new Uint8Array(nt.byteLength+G.data.byteLength)).set(nt),j.set(G.data,nt.byteLength)):j=G.data;for(var Ct;ae+7<j.length;)if(255===j[ae]&&240==(246&j[ae+1])){if("number"==typeof Ct&&(this.skipWarn_(Ct,ae),Ct=null),Ge=2*(1&~j[ae+1]),pt=9e4*(_t=1024*(1+(3&j[ae+6])))/Nv[(60&j[ae+2])>>>2],j.byteLength-ae<(pe=(3&j[ae+3])<<11|j[ae+4]<<3|(224&j[ae+5])>>5))break;this.trigger("data",{pts:G.pts+F*pt,dts:G.dts+F*pt,sampleCount:_t,audioobjecttype:1+(j[ae+2]>>>6&3),channelcount:(1&j[ae+2])<<2|(192&j[ae+3])>>>6,samplerate:Nv[(60&j[ae+2])>>>2],samplingfrequencyindex:(60&j[ae+2])>>>2,samplesize:16,data:j.subarray(ae+7+Ge,ae+pe)}),F++,ae+=pe}else"number"!=typeof Ct&&(Ct=ae),ae++;"number"==typeof Ct&&(this.skipWarn_(Ct,ae),Ct=null),j=j.subarray(ae)}},this.flush=function(){F=0,this.trigger("done")},this.reset=function(){j=void 0,this.trigger("reset")},this.endTimeline=function(){j=void 0,this.trigger("endedtimeline")}},nd.prototype=new l;var Xy,Gd=nd;Xy=function(A){var j=A.byteLength,F=0,G=0;this.length=function(){return 8*j},this.bitsAvailable=function(){return 8*j+G},this.loadWord=function(){var ae=A.byteLength-j,pe=new Uint8Array(4),Ge=Math.min(4,j);if(0===Ge)throw new Error("no bytes available");pe.set(A.subarray(ae,ae+Ge)),F=new DataView(pe.buffer).getUint32(0),G=8*Ge,j-=Ge},this.skipBits=function(ae){var pe;G>ae?(F<<=ae,G-=ae):(ae-=G,ae-=8*(pe=Math.floor(ae/8)),j-=pe,this.loadWord(),F<<=ae,G-=ae)},this.readBits=function(ae){var pe=Math.min(G,ae),Ge=F>>>32-pe;return(G-=pe)>0?F<<=pe:j>0&&this.loadWord(),(pe=ae-pe)>0?Ge<<pe|this.readBits(pe):Ge},this.skipLeadingZeros=function(){var ae;for(ae=0;ae<G;++ae)if(F&2147483648>>>ae)return F<<=ae,G-=ae,ae;return this.loadWord(),ae+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var ae=this.skipLeadingZeros();return this.readBits(ae+1)-1},this.readExpGolomb=function(){var ae=this.readUnsignedExpGolomb();return 1&ae?1+ae>>>1:-1*(ae>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var wf,mp,vp,k_=Xy;mp=function(){var j,F,A=0;mp.prototype.init.call(this),this.push=function(G){var ae;F?((ae=new Uint8Array(F.byteLength+G.data.byteLength)).set(F),ae.set(G.data,F.byteLength),F=ae):F=G.data;for(var pe=F.byteLength;A<pe-3;A++)if(1===F[A+2]){j=A+5;break}for(;j<pe;)switch(F[j]){case 0:if(0!==F[j-1]){j+=2;break}if(0!==F[j-2]){j++;break}A+3!==j-2&&this.trigger("data",F.subarray(A+3,j-2));do{j++}while(1!==F[j]&&j<pe);A=j-2,j+=3;break;case 1:if(0!==F[j-1]||0!==F[j-2]){j+=3;break}this.trigger("data",F.subarray(A+3,j-2)),A=j-2,j+=3;break;default:j+=3}F=F.subarray(A),j-=A,A=0},this.reset=function(){F=null,A=0,this.trigger("reset")},this.flush=function(){F&&F.byteLength>3&&this.trigger("data",F.subarray(A+3)),F=null,A=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},mp.prototype=new l,vp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},wf=function(){var j,F,G,ae,pe,Ge,nt,A=new mp;wf.prototype.init.call(this),j=this,this.push=function(_t){"video"===_t.type&&(F=_t.trackId,G=_t.pts,ae=_t.dts,A.push(_t))},A.on("data",function(_t){var pt={trackId:F,pts:G,dts:ae,data:_t,nalUnitTypeCode:31&_t[0]};switch(pt.nalUnitTypeCode){case 5:pt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:pt.nalUnitType="sei_rbsp",pt.escapedRBSP=pe(_t.subarray(1));break;case 7:pt.nalUnitType="seq_parameter_set_rbsp",pt.escapedRBSP=pe(_t.subarray(1)),pt.config=Ge(pt.escapedRBSP);break;case 8:pt.nalUnitType="pic_parameter_set_rbsp";break;case 9:pt.nalUnitType="access_unit_delimiter_rbsp"}j.trigger("data",pt)}),A.on("done",function(){j.trigger("done")}),A.on("partialdone",function(){j.trigger("partialdone")}),A.on("reset",function(){j.trigger("reset")}),A.on("endedtimeline",function(){j.trigger("endedtimeline")}),this.flush=function(){A.flush()},this.partialFlush=function(){A.partialFlush()},this.reset=function(){A.reset()},this.endTimeline=function(){A.endTimeline()},nt=function(pt,Ct){var _r,gn=8,Qn=8;for(_r=0;_r<pt;_r++)0!==Qn&&(Qn=(gn+Ct.readExpGolomb()+256)%256),gn=0===Qn?gn:Qn},pe=function(pt){for(var _r,Rn,Ct=pt.byteLength,gn=[],Qn=1;Qn<Ct-2;)0===pt[Qn]&&0===pt[Qn+1]&&3===pt[Qn+2]?(gn.push(Qn+2),Qn+=2):Qn++;if(0===gn.length)return pt;_r=Ct-gn.length,Rn=new Uint8Array(_r);var Jr=0;for(Qn=0;Qn<_r;Jr++,Qn++)Jr===gn[0]&&(Jr++,gn.shift()),Rn[Qn]=pt[Jr];return Rn},Ge=function(pt){var Rn,Jr,Jo,qa,Wd,Fm,xg,Nh,Zv,jm,Lh,Of,Ct=0,gn=0,Qn=0,_r=0,Sa=[1,1];if(Jr=(Rn=new k_(pt)).readUnsignedByte(),qa=Rn.readUnsignedByte(),Jo=Rn.readUnsignedByte(),Rn.skipUnsignedExpGolomb(),vp[Jr]&&(3===(Wd=Rn.readUnsignedExpGolomb())&&Rn.skipBits(1),Rn.skipUnsignedExpGolomb(),Rn.skipUnsignedExpGolomb(),Rn.skipBits(1),Rn.readBoolean()))for(Lh=3!==Wd?8:12,Of=0;Of<Lh;Of++)Rn.readBoolean()&&nt(Of<6?16:64,Rn);if(Rn.skipUnsignedExpGolomb(),0===(Fm=Rn.readUnsignedExpGolomb()))Rn.readUnsignedExpGolomb();else if(1===Fm)for(Rn.skipBits(1),Rn.skipExpGolomb(),Rn.skipExpGolomb(),xg=Rn.readUnsignedExpGolomb(),Of=0;Of<xg;Of++)Rn.skipExpGolomb();if(Rn.skipUnsignedExpGolomb(),Rn.skipBits(1),Nh=Rn.readUnsignedExpGolomb(),Zv=Rn.readUnsignedExpGolomb(),0===(jm=Rn.readBits(1))&&Rn.skipBits(1),Rn.skipBits(1),Rn.readBoolean()&&(Ct=Rn.readUnsignedExpGolomb(),gn=Rn.readUnsignedExpGolomb(),Qn=Rn.readUnsignedExpGolomb(),_r=Rn.readUnsignedExpGolomb()),Rn.readBoolean()&&Rn.readBoolean())switch(Rn.readUnsignedByte()){case 1:Sa=[1,1];break;case 2:Sa=[12,11];break;case 3:Sa=[10,11];break;case 4:Sa=[16,11];break;case 5:Sa=[40,33];break;case 6:Sa=[24,11];break;case 7:Sa=[20,11];break;case 8:Sa=[32,11];break;case 9:Sa=[80,33];break;case 10:Sa=[18,11];break;case 11:Sa=[15,11];break;case 12:Sa=[64,33];break;case 13:Sa=[160,99];break;case 14:Sa=[4,3];break;case 15:Sa=[3,2];break;case 16:Sa=[2,1];break;case 255:Sa=[Rn.readUnsignedByte()<<8|Rn.readUnsignedByte(),Rn.readUnsignedByte()<<8|Rn.readUnsignedByte()]}return{profileIdc:Jr,levelIdc:Jo,profileCompatibility:qa,width:16*(Nh+1)-2*Ct-2*gn,height:(2-jm)*(Zv+1)*16-2*Qn-2*_r,sarRatio:Sa}}},wf.prototype=new l;var Tp,Jy={H264Stream:wf,NalByteStream:mp},i_=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],yp=function(A,j){var F=A[j+6]<<21|A[j+7]<<14|A[j+8]<<7|A[j+9];return F=F>=0?F:0,(16&A[j+5])>>4?F+20:F+10},e0=function we(A,j){return A.length-j<10||A[j]!=="I".charCodeAt(0)||A[j+1]!=="D".charCodeAt(0)||A[j+2]!=="3".charCodeAt(0)?j:we(A,j+=yp(A,j))},Df=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},r0=function(A,j,F){return unescape(function(A,j,F){var G,ae="";for(G=j;G<F;G++)ae+="%"+("00"+A[G].toString(16)).slice(-2);return ae}(A,j,F))},_p={isLikelyAacData:function(A){var j=e0(A,0);return A.length>=j+2&&255==(255&A[j])&&240==(240&A[j+1])&&16==(22&A[j+1])},parseId3TagSize:yp,parseAdtsSize:function(A,j){return 6144&A[j+3]|A[j+4]<<3|(224&A[j+5])>>5},parseType:function(A,j){return A[j]==="I".charCodeAt(0)&&A[j+1]==="D".charCodeAt(0)&&A[j+2]==="3".charCodeAt(0)?"timed-metadata":!0&A[j]&&240==(240&A[j+1])?"audio":null},parseSampleRate:function(A){for(var j=0;j+5<A.length;){if(255===A[j]&&240==(246&A[j+1]))return i_[(60&A[j+2])>>>2];j++}return null},parseAacTimestamp:function(A){var j,F,G;j=10,64&A[5]&&(j+=4,j+=Df(A.subarray(10,14)));do{if((F=Df(A.subarray(j+4,j+8)))<1)return null;if("PRIV"===String.fromCharCode(A[j],A[j+1],A[j+2],A[j+3])){G=A.subarray(j+10,j+F+10);for(var pe=0;pe<G.byteLength;pe++)if(0===G[pe]){if("com.apple.streaming.transportStreamTimestamp"===r0(G,0,pe)){var nt=G.subarray(pe+1),_t=(1&nt[3])<<30|nt[4]<<22|nt[5]<<14|nt[6]<<6|nt[7]>>>2;return(_t*=4)+(3&nt[7])}break}}j+=10,j+=F}while(j<A.byteLength);return null}};Tp=function(){var A=new Uint8Array,j=0;Tp.prototype.init.call(this),this.setTimestamp=function(F){j=F},this.push=function(F){var Ge,nt,_t,G=0,ae=0;for(A.length?(_t=A.length,(A=new Uint8Array(F.byteLength+_t)).set(A.subarray(0,_t)),A.set(F,_t)):A=F;A.length-ae>=3;)if(A[ae]!=="I".charCodeAt(0)||A[ae+1]!=="D".charCodeAt(0)||A[ae+2]!=="3".charCodeAt(0))if(255!=(255&A[ae])||240!=(240&A[ae+1]))ae++;else{if(A.length-ae<7||ae+(G=_p.parseAdtsSize(A,ae))>A.length)break;nt={type:"audio",data:A.subarray(ae,ae+G),pts:j,dts:j},this.trigger("data",nt),ae+=G}else{if(A.length-ae<10||ae+(G=_p.parseId3TagSize(A,ae))>A.length)break;Ge={type:"timed-metadata",data:A.subarray(ae,ae+G)},this.trigger("data",Ge),ae+=G}A=A.length-ae>0?A.subarray(ae):new Uint8Array},this.reset=function(){A=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){A=new Uint8Array,this.trigger("endedtimeline")}},Tp.prototype=new l;var Cl,Sl,xf,al,bp=Tp,Uv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],km=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],If=Jy.H264Stream,s0=_p.isLikelyAacData,o0=function(A,j){var F;if(A.length!==j.length)return!1;for(F=0;F<A.length;F++)if(A[F]!==j[F])return!1;return!0},Eg=function(A,j,F,G,ae,pe){return{start:{dts:A,pts:A+(F-j)},end:{dts:A+(G-j),pts:A+(ae-F)},prependedContentDuration:pe,baseMediaDecodeTime:A}};Sl=function(A,j){var G,F=[],ae=0,pe=0,Ge=1/0;G=(j=j||{}).firstSequenceNumber||0,Sl.prototype.init.call(this),this.push=function(nt){bl_collectDtsInfo(A,nt),A&&Uv.forEach(function(_t){A[_t]=nt[_t]}),F.push(nt)},this.setEarliestDts=function(nt){ae=nt},this.setVideoBaseMediaDecodeTime=function(nt){Ge=nt},this.setAudioAppendStart=function(nt){pe=nt},this.flush=function(){var nt,_t,pt,Ct,gn,Qn,_r;0!==F.length?(nt=function(A,j,F){return j.minSegmentDts>=F?A:(j.minSegmentDts=1/0,A.filter(function(G){return G.dts>=F&&(j.minSegmentDts=Math.min(j.minSegmentDts,G.dts),j.minSegmentPts=j.minSegmentDts,!0)}))}(F,A,ae),A.baseMediaDecodeTime=bl_calculateTrackBaseMediaDecodeTime(A,j.keepOriginalTimestamps),_r=Dm_prefixWithSilence(A,nt,pe,Ge),A.samples=function(A){var j,G=[];for(j=0;j<A.length;j++)G.push({size:A[j].data.byteLength,duration:1024});return G}(nt),pt=Tu_mdat(function(A){var j,F,G=0,ae=new Uint8Array(function(A){var j,G=0;for(j=0;j<A.length;j++)G+=A[j].data.byteLength;return G}(A));for(j=0;j<A.length;j++)ae.set((F=A[j]).data,G),G+=F.data.byteLength;return ae}(nt)),F=[],_t=Tu_moof(G,[A]),Ct=new Uint8Array(_t.byteLength+pt.byteLength),G++,Ct.set(_t),Ct.set(pt,_t.byteLength),bl_clearDtsInfo(A),gn=Math.ceil(9216e4/A.samplerate),nt.length&&(Qn=nt.length*gn,this.trigger("segmentTimingInfo",Eg(Bs_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),nt[0].dts,nt[0].pts,nt[0].dts+Qn,nt[0].pts+Qn,_r||0)),this.trigger("timingInfo",{start:nt[0].pts,end:nt[0].pts+Qn})),this.trigger("data",{track:A,boxes:Ct}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){bl_clearDtsInfo(A),F=[],this.trigger("reset")}},Sl.prototype=new l,Cl=function(A,j){var F,pe,Ge,G=[],ae=[];F=(j=j||{}).firstSequenceNumber||0,Cl.prototype.init.call(this),delete A.minPTS,this.gopCache_=[],this.push=function(nt){bl_collectDtsInfo(A,nt),"seq_parameter_set_rbsp"===nt.nalUnitType&&!pe&&(pe=nt.config,A.sps=[nt.data],km.forEach(function(_t){A[_t]=pe[_t]},this)),"pic_parameter_set_rbsp"===nt.nalUnitType&&!Ge&&(Ge=nt.data,A.pps=[nt.data]),G.push(nt)},this.flush=function(){for(var nt,_t,pt,Ct,gn,Qn,Rn,Jr,_r=0;G.length&&"access_unit_delimiter_rbsp"!==G[0].nalUnitType;)G.shift();if(0===G.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(nt=function(A){var j,F,G=[],ae=[];for(ae.byteLength=0,ae.nalCount=0,ae.duration=0,G.byteLength=0,j=0;j<A.length;j++)"access_unit_delimiter_rbsp"===(F=A[j]).nalUnitType?(G.length&&(G.duration=F.dts-G.dts,ae.byteLength+=G.byteLength,ae.nalCount+=G.length,ae.duration+=G.duration,ae.push(G)),(G=[F]).byteLength=F.data.byteLength,G.pts=F.pts,G.dts=F.dts):("slice_layer_without_partitioning_rbsp_idr"===F.nalUnitType&&(G.keyFrame=!0),G.duration=F.dts-G.dts,G.byteLength+=F.data.byteLength,G.push(F));return ae.length&&(!G.duration||G.duration<=0)&&(G.duration=ae[ae.length-1].duration),ae.byteLength+=G.byteLength,ae.nalCount+=G.length,ae.duration+=G.duration,ae.push(G),ae}(G),(pt=function(A){var j,F,G=[],ae=[];for(G.byteLength=0,G.nalCount=0,G.duration=0,G.pts=A[0].pts,G.dts=A[0].dts,ae.byteLength=0,ae.nalCount=0,ae.duration=0,ae.pts=A[0].pts,ae.dts=A[0].dts,j=0;j<A.length;j++)(F=A[j]).keyFrame?(G.length&&(ae.push(G),ae.byteLength+=G.byteLength,ae.nalCount+=G.nalCount,ae.duration+=G.duration),(G=[F]).nalCount=F.length,G.byteLength=F.byteLength,G.pts=F.pts,G.dts=F.dts,G.duration=F.duration):(G.duration+=F.duration,G.nalCount+=F.length,G.byteLength+=F.byteLength,G.push(F));return ae.length&&G.duration<=0&&(G.duration=ae[ae.length-1].duration),ae.byteLength+=G.byteLength,ae.nalCount+=G.nalCount,ae.duration+=G.duration,ae.push(G),ae}(nt))[0][0].keyFrame||((_t=this.getGopForFusion_(G[0],A))?(_r=_t.duration,pt.unshift(_t),pt.byteLength+=_t.byteLength,pt.nalCount+=_t.nalCount,pt.pts=_t.pts,pt.dts=_t.dts,pt.duration+=_t.duration):pt=function(A){var j;return!A[0][0].keyFrame&&A.length>1&&(j=A.shift(),A.byteLength-=j.byteLength,A.nalCount-=j.nalCount,A[0][0].dts=j.dts,A[0][0].pts=j.pts,A[0][0].duration+=j.duration),A}(pt)),ae.length){var Jo;if(!(Jo=j.alignGopsAtEnd?this.alignGopsAtEnd_(pt):this.alignGopsAtStart_(pt)))return this.gopCache_.unshift({gop:pt.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),G=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");bl_clearDtsInfo(A),pt=Jo}bl_collectDtsInfo(A,pt),A.samples=function(A,j){var F,G,ae,pe,nt=j||0,_t=[];for(F=0;F<A.length;F++)for(pe=A[F],G=0;G<pe.length;G++)nt+=(ae=Mh(pe[G],nt)).size,_t.push(ae);return _t}(pt),gn=Tu_mdat(function(A){var j,F,G,ae,pe,Ge,nt=0,gn=new Uint8Array(A.byteLength+4*A.nalCount),Qn=new DataView(gn.buffer);for(j=0;j<A.length;j++)for(ae=A[j],F=0;F<ae.length;F++)for(pe=ae[F],G=0;G<pe.length;G++)Qn.setUint32(nt,(Ge=pe[G]).data.byteLength),gn.set(Ge.data,nt+=4),nt+=Ge.data.byteLength;return gn}(pt)),A.baseMediaDecodeTime=bl_calculateTrackBaseMediaDecodeTime(A,j.keepOriginalTimestamps),this.trigger("processedGopsInfo",pt.map(function(qa){return{pts:qa.pts,dts:qa.dts,byteLength:qa.byteLength}})),this.trigger("segmentTimingInfo",Eg(A.baseMediaDecodeTime,(Rn=pt[0]).dts,Rn.pts,(Jr=pt[pt.length-1]).dts+Jr.duration,Jr.pts+Jr.duration,_r)),this.trigger("timingInfo",{start:pt[0].pts,end:pt[pt.length-1].pts+pt[pt.length-1].duration}),this.gopCache_.unshift({gop:pt.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),G=[],this.trigger("baseMediaDecodeTime",A.baseMediaDecodeTime),this.trigger("timelineStartInfo",A.timelineStartInfo),Ct=Tu_moof(F,[A]),Qn=new Uint8Array(Ct.byteLength+gn.byteLength),F++,Qn.set(Ct),Qn.set(gn,Ct.byteLength),this.trigger("data",{track:A,boxes:Qn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),G=[],this.gopCache_.length=0,ae.length=0,this.trigger("reset")},this.resetStream_=function(){bl_clearDtsInfo(A),pe=void 0,Ge=void 0},this.getGopForFusion_=function(nt){var gn,Qn,_r,Rn,Jr,Ct=1/0;for(Jr=0;Jr<this.gopCache_.length;Jr++)_r=(Rn=this.gopCache_[Jr]).gop,A.pps&&o0(A.pps[0],Rn.pps[0])&&A.sps&&o0(A.sps[0],Rn.sps[0])&&(_r.dts<A.timelineStartInfo.dts||(gn=nt.dts-_r.dts-_r.duration)>=-1e4&&gn<=45e3&&(!Qn||Ct>gn)&&(Qn=Rn,Ct=gn));return Qn?Qn.gop:null},this.alignGopsAtStart_=function(nt){var _t,pt,Ct,gn,Qn,_r,Rn,Jr;for(Qn=nt.byteLength,_r=nt.nalCount,Rn=nt.duration,_t=pt=0;_t<ae.length&&pt<nt.length&&(Ct=ae[_t]).pts!==(gn=nt[pt]).pts;)gn.pts>Ct.pts?_t++:(pt++,Qn-=gn.byteLength,_r-=gn.nalCount,Rn-=gn.duration);return 0===pt?nt:pt===nt.length?null:((Jr=nt.slice(pt)).byteLength=Qn,Jr.duration=Rn,Jr.nalCount=_r,Jr.pts=Jr[0].pts,Jr.dts=Jr[0].dts,Jr)},this.alignGopsAtEnd_=function(nt){var _t,pt,Ct,gn,Qn,_r,Rn;for(_t=ae.length-1,pt=nt.length-1,Qn=null,_r=!1;_t>=0&&pt>=0;){if((Ct=ae[_t]).pts===(gn=nt[pt]).pts){_r=!0;break}Ct.pts>gn.pts?_t--:(_t===ae.length-1&&(Qn=pt),pt--)}if(!_r&&null===Qn)return null;if(0===(Rn=_r?pt:Qn))return nt;var Jr=nt.slice(Rn),Jo=Jr.reduce(function(qa,Wd){return qa.byteLength+=Wd.byteLength,qa.duration+=Wd.duration,qa.nalCount+=Wd.nalCount,qa},{byteLength:0,duration:0,nalCount:0});return Jr.byteLength=Jo.byteLength,Jr.duration=Jo.duration,Jr.nalCount=Jo.nalCount,Jr.pts=Jr[0].pts,Jr.dts=Jr[0].dts,Jr},this.alignGopsWith=function(nt){ae=nt}},Cl.prototype=new l,al=function(A,j){this.numberOfTracks=0,this.metadataStream=j,this.remuxTracks=!(typeof(A=A||{}).remux<"u"&&!A.remux),this.keepOriginalTimestamps="boolean"==typeof A.keepOriginalTimestamps&&A.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,al.prototype.init.call(this),this.push=function(F){return F.text?this.pendingCaptions.push(F):F.frames?this.pendingMetadata.push(F):(this.pendingTracks.push(F.track),this.pendingBytes+=F.boxes.byteLength,"video"===F.track.type&&(this.videoTrack=F.track,this.pendingBoxes.push(F.boxes)),void("audio"===F.track.type&&(this.audioTrack=F.track,this.pendingBoxes.unshift(F.boxes))))}},al.prototype=new l,al.prototype.flush=function(we){var F,G,ae,Ge,A=0,j={captions:[],captionStreams:{},metadata:[],info:{}},pe=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==we&&"AudioSegmentStream"!==we)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(pe=this.videoTrack.timelineStartInfo.pts,km.forEach(function(nt){j.info[nt]=this.videoTrack[nt]},this)):this.audioTrack&&(pe=this.audioTrack.timelineStartInfo.pts,Uv.forEach(function(nt){j.info[nt]=this.audioTrack[nt]},this)),this.videoTrack||this.audioTrack){for(j.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,ae=function(A){var G,j=h(),F=re(A);return(G=new Uint8Array(j.byteLength+F.byteLength)).set(j),G.set(F,j.byteLength),G}(this.pendingTracks),j.initSegment=new Uint8Array(ae.byteLength),j.initSegment.set(ae),j.data=new Uint8Array(this.pendingBytes),Ge=0;Ge<this.pendingBoxes.length;Ge++)j.data.set(this.pendingBoxes[Ge],A),A+=this.pendingBoxes[Ge].byteLength;for(Ge=0;Ge<this.pendingCaptions.length;Ge++)(F=this.pendingCaptions[Ge]).startTime=Bs_metadataTsToSeconds(F.startPts,pe,this.keepOriginalTimestamps),F.endTime=Bs_metadataTsToSeconds(F.endPts,pe,this.keepOriginalTimestamps),j.captionStreams[F.stream]=!0,j.captions.push(F);for(Ge=0;Ge<this.pendingMetadata.length;Ge++)(G=this.pendingMetadata[Ge]).cueTime=Bs_metadataTsToSeconds(G.pts,pe,this.keepOriginalTimestamps),j.metadata.push(G);for(j.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",j),Ge=0;Ge<j.captions.length;Ge++)this.trigger("caption",F=j.captions[Ge]);for(Ge=0;Ge<j.metadata.length;Ge++)this.trigger("id3Frame",G=j.metadata[Ge])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},al.prototype.setRemux=function(we){this.remuxTracks=we},xf=function(A){var G,ae,j=this,F=!0;xf.prototype.init.call(this),this.baseMediaDecodeTime=(A=A||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var pe={};this.transmuxPipeline_=pe,pe.type="aac",pe.metadataStream=new El.MetadataStream,pe.aacStream=new bp,pe.audioTimestampRolloverStream=new El.TimestampRolloverStream("audio"),pe.timedMetadataTimestampRolloverStream=new El.TimestampRolloverStream("timed-metadata"),pe.adtsStream=new Gd,pe.coalesceStream=new al(A,pe.metadataStream),pe.headOfPipeline=pe.aacStream,pe.aacStream.pipe(pe.audioTimestampRolloverStream).pipe(pe.adtsStream),pe.aacStream.pipe(pe.timedMetadataTimestampRolloverStream).pipe(pe.metadataStream).pipe(pe.coalesceStream),pe.metadataStream.on("timestamp",function(Ge){pe.aacStream.setTimestamp(Ge.timeStamp)}),pe.aacStream.on("data",function(Ge){"timed-metadata"!==Ge.type&&"audio"!==Ge.type||pe.audioSegmentStream||(ae=ae||{timelineStartInfo:{baseMediaDecodeTime:j.baseMediaDecodeTime},codec:"adts",type:"audio"},pe.coalesceStream.numberOfTracks++,pe.audioSegmentStream=new Sl(ae,A),pe.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),pe.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),pe.adtsStream.pipe(pe.audioSegmentStream).pipe(pe.coalesceStream),j.trigger("trackinfo",{hasAudio:!!ae,hasVideo:!!G}))}),pe.coalesceStream.on("data",this.trigger.bind(this,"data")),pe.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var pe={};this.transmuxPipeline_=pe,pe.type="ts",pe.metadataStream=new El.MetadataStream,pe.packetStream=new El.TransportPacketStream,pe.parseStream=new El.TransportParseStream,pe.elementaryStream=new El.ElementaryStream,pe.timestampRolloverStream=new El.TimestampRolloverStream,pe.adtsStream=new Gd,pe.h264Stream=new If,pe.captionStream=new El.CaptionStream(A),pe.coalesceStream=new al(A,pe.metadataStream),pe.headOfPipeline=pe.packetStream,pe.packetStream.pipe(pe.parseStream).pipe(pe.elementaryStream).pipe(pe.timestampRolloverStream),pe.timestampRolloverStream.pipe(pe.h264Stream),pe.timestampRolloverStream.pipe(pe.adtsStream),pe.timestampRolloverStream.pipe(pe.metadataStream).pipe(pe.coalesceStream),pe.h264Stream.pipe(pe.captionStream).pipe(pe.coalesceStream),pe.elementaryStream.on("data",function(Ge){var nt;if("metadata"===Ge.type){for(nt=Ge.tracks.length;nt--;)G||"video"!==Ge.tracks[nt].type?!ae&&"audio"===Ge.tracks[nt].type&&((ae=Ge.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime):(G=Ge.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime;G&&!pe.videoSegmentStream&&(pe.coalesceStream.numberOfTracks++,pe.videoSegmentStream=new Cl(G,A),pe.videoSegmentStream.on("log",j.getLogTrigger_("videoSegmentStream")),pe.videoSegmentStream.on("timelineStartInfo",function(_t){ae&&!A.keepOriginalTimestamps&&(ae.timelineStartInfo=_t,pe.audioSegmentStream.setEarliestDts(_t.dts-j.baseMediaDecodeTime))}),pe.videoSegmentStream.on("processedGopsInfo",j.trigger.bind(j,"gopInfo")),pe.videoSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"videoSegmentTimingInfo")),pe.videoSegmentStream.on("baseMediaDecodeTime",function(_t){ae&&pe.audioSegmentStream.setVideoBaseMediaDecodeTime(_t)}),pe.videoSegmentStream.on("timingInfo",j.trigger.bind(j,"videoTimingInfo")),pe.h264Stream.pipe(pe.videoSegmentStream).pipe(pe.coalesceStream)),ae&&!pe.audioSegmentStream&&(pe.coalesceStream.numberOfTracks++,pe.audioSegmentStream=new Sl(ae,A),pe.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),pe.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),pe.audioSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"audioSegmentTimingInfo")),pe.adtsStream.pipe(pe.audioSegmentStream).pipe(pe.coalesceStream)),j.trigger("trackinfo",{hasAudio:!!ae,hasVideo:!!G})}}),pe.coalesceStream.on("data",this.trigger.bind(this,"data")),pe.coalesceStream.on("id3Frame",function(Ge){Ge.dispatchType=pe.metadataStream.dispatchType,j.trigger("id3Frame",Ge)}),pe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),pe.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(pe){var Ge=this.transmuxPipeline_;A.keepOriginalTimestamps||(this.baseMediaDecodeTime=pe),ae&&(ae.timelineStartInfo.dts=void 0,ae.timelineStartInfo.pts=void 0,bl_clearDtsInfo(ae),Ge.audioTimestampRolloverStream&&Ge.audioTimestampRolloverStream.discontinuity()),G&&(Ge.videoSegmentStream&&(Ge.videoSegmentStream.gopCache_=[]),G.timelineStartInfo.dts=void 0,G.timelineStartInfo.pts=void 0,bl_clearDtsInfo(G),Ge.captionStream.reset()),Ge.timestampRolloverStream&&Ge.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(pe){ae&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(pe)},this.setRemux=function(pe){var Ge=this.transmuxPipeline_;A.remux=pe,Ge&&Ge.coalesceStream&&Ge.coalesceStream.setRemux(pe)},this.alignGopsWith=function(pe){G&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(pe)},this.getLogTrigger_=function(pe){var Ge=this;return function(nt){nt.stream=pe,Ge.trigger("log",nt)}},this.push=function(pe){if(F){var Ge=s0(pe);if(Ge&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Ge&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),this.transmuxPipeline_)for(var nt=Object.keys(this.transmuxPipeline_),_t=0;_t<nt.length;_t++){var pt=nt[_t];"headOfPipeline"===pt||!this.transmuxPipeline_[pt].on||this.transmuxPipeline_[pt].on("log",this.getLogTrigger_(pt))}F=!1}this.transmuxPipeline_.headOfPipeline.push(pe)},this.flush=function(){F=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},xf.prototype=new l;var Cg,$v,Gv,s_={Transmuxer:xf,VideoSegmentStream:Cl,AudioSegmentStream:Sl,AUDIO_PROPERTIES:Uv,VIDEO_PROPERTIES:km,generateSegmentTimingInfo:Eg},Pm_toUnsigned=function(A){return A>>>0},Oh=function(A){var j="";return j+=String.fromCharCode(A[0]),j+=String.fromCharCode(A[1]),(j+=String.fromCharCode(A[2]))+String.fromCharCode(A[3])},a_=Pm_toUnsigned,uo=function we(A,j){var G,ae,pe,Ge,nt,F=[];if(!j.length)return null;for(G=0;G<A.byteLength;)ae=a_(A[G]<<24|A[G+1]<<16|A[G+2]<<8|A[G+3]),pe=Oh(A.subarray(G+4,G+8)),Ge=ae>1?G+ae:A.byteLength,pe===j[0]&&(1===j.length?F.push(A.subarray(G+8,Ge)):(nt=we(A.subarray(G+8,Ge),j.slice(1))).length&&(F=F.concat(nt))),G=Ge;return F},Af=Pm_toUnsigned,Mf=function(A){return{isLeading:(12&A[0])>>>2,dependsOn:3&A[0],isDependedOn:(192&A[1])>>>6,hasRedundancy:(48&A[1])>>>4,paddingValue:(14&A[1])>>>1,isNonSyncSample:1&A[1],degradationPriority:A[2]<<8|A[3]}},rd=function(A){for(var ae,pe,j=A.byteLength,F=[],G=1;G<j-2;)0===A[G]&&0===A[G+1]&&3===A[G+2]?(F.push(G+2),G+=2):G++;if(0===F.length)return A;ae=j-F.length,pe=new Uint8Array(ae);var Ge=0;for(G=0;G<ae;Ge++,G++)Ge===F[0]&&(Ge++,F.shift()),pe[G]=A[Ge];return pe},l_=kh.CaptionStream,c_=function(A,j){for(var F=A,G=0;G<j.length;G++){var ae=j[G];if(F<ae.size)return ae;F-=ae.size}return null},sd=function(A,j){var F=uo(A,["moof","traf"]),G=uo(A,["mdat"]),ae={},pe=[];return G.forEach(function(Ge,nt){pe.push({mdat:Ge,traf:F[nt]})}),pe.forEach(function(Ge){var Jr,Jo,nt=Ge.mdat,_t=Ge.traf,Ct=function(A){var Ct,j=new DataView(A.buffer,A.byteOffset,A.byteLength),F={version:A[0],flags:new Uint8Array(A.subarray(1,4)),trackId:j.getUint32(4)},G=1&F.flags[2],ae=2&F.flags[2],pe=8&F.flags[2],Ge=16&F.flags[2],nt=32&F.flags[2],_t=65536&F.flags[0],pt=131072&F.flags[0];return Ct=8,G&&(Ct+=4,F.baseDataOffset=j.getUint32(12),Ct+=4),ae&&(F.sampleDescriptionIndex=j.getUint32(Ct),Ct+=4),pe&&(F.defaultSampleDuration=j.getUint32(Ct),Ct+=4),Ge&&(F.defaultSampleSize=j.getUint32(Ct),Ct+=4),nt&&(F.defaultSampleFlags=j.getUint32(Ct)),_t&&(F.durationIsEmpty=!0),!G&&pt&&(F.baseDataOffsetIsMoof=!0),F}(uo(_t,["tfhd"])[0]),gn=Ct.trackId,Qn=uo(_t,["tfdt"]),_r=Qn.length>0?function(A){var j={version:A[0],flags:new Uint8Array(A.subarray(1,4)),baseMediaDecodeTime:Af(A[4]<<24|A[5]<<16|A[6]<<8|A[7])};return 1===j.version&&(j.baseMediaDecodeTime*=Math.pow(2,32),j.baseMediaDecodeTime+=Af(A[8]<<24|A[9]<<16|A[10]<<8|A[11])),j}(Qn[0]).baseMediaDecodeTime:0,Rn=uo(_t,["trun"]);j===gn&&Rn.length>0&&(Jr=function(A,j,F){var G=j,ae=F.defaultSampleDuration||0,pe=F.defaultSampleSize||0,Ge=F.trackId,nt=[];return A.forEach(function(_t){var Ct=function(A){var gn,j={version:A[0],flags:new Uint8Array(A.subarray(1,4)),samples:[]},F=new DataView(A.buffer,A.byteOffset,A.byteLength),G=1&j.flags[2],ae=4&j.flags[2],pe=1&j.flags[1],Ge=2&j.flags[1],nt=4&j.flags[1],_t=8&j.flags[1],pt=F.getUint32(4),Ct=8;for(G&&(j.dataOffset=F.getInt32(Ct),Ct+=4),ae&&pt&&(gn={flags:Mf(A.subarray(Ct,Ct+4))},Ct+=4,pe&&(gn.duration=F.getUint32(Ct),Ct+=4),Ge&&(gn.size=F.getUint32(Ct),Ct+=4),_t&&(gn.compositionTimeOffset=1===j.version?F.getInt32(Ct):F.getUint32(Ct),Ct+=4),j.samples.push(gn),pt--);pt--;)gn={},pe&&(gn.duration=F.getUint32(Ct),Ct+=4),Ge&&(gn.size=F.getUint32(Ct),Ct+=4),nt&&(gn.flags=Mf(A.subarray(Ct,Ct+4)),Ct+=4),_t&&(gn.compositionTimeOffset=1===j.version?F.getInt32(Ct):F.getUint32(Ct),Ct+=4),j.samples.push(gn);return j}(_t).samples;Ct.forEach(function(gn){void 0===gn.duration&&(gn.duration=ae),void 0===gn.size&&(gn.size=pe),gn.trackId=Ge,gn.dts=G,void 0===gn.compositionTimeOffset&&(gn.compositionTimeOffset=0),gn.pts=G+gn.compositionTimeOffset,G+=gn.duration}),nt=nt.concat(Ct)}),nt}(Rn,_r,Ct),Jo=function(A,j,F){var pe,Ge,nt,_t,G=new DataView(A.buffer,A.byteOffset,A.byteLength),ae={logs:[],seiNals:[]};for(Ge=0;Ge+4<A.length;Ge+=nt)if(nt=G.getUint32(Ge),Ge+=4,!(nt<=0))switch(31&A[Ge]){case 6:var pt=A.subarray(Ge+1,Ge+1+nt),Ct=c_(Ge,j);if(pe={nalUnitType:"sei_rbsp",size:nt,data:pt,escapedRBSP:rd(pt),trackId:F},Ct)pe.pts=Ct.pts,pe.dts=Ct.dts,_t=Ct;else{if(!_t){ae.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Ge+" for trackId "+F+". See mux.js#223."});break}pe.pts=_t.pts,pe.dts=_t.dts}ae.seiNals.push(pe)}return ae}(nt,Jr,gn),ae[gn]||(ae[gn]={seiNals:[],logs:[]}),ae[gn].seiNals=ae[gn].seiNals.concat(Jo.seiNals),ae[gn].logs=ae[gn].logs.concat(Jo.logs))}),ae},h_=function(){var j,F,G,ae,pe,Ge,A=!1;this.isInitialized=function(){return A},this.init=function(nt){j=new l_,A=!0,Ge=!!nt&&nt.isPartial,j.on("data",function(_t){_t.startTime=_t.startPts/ae,_t.endTime=_t.endPts/ae,pe.captions.push(_t),pe.captionStreams[_t.stream]=!0}),j.on("log",function(_t){pe.logs.push(_t)})},this.isNewInit=function(nt,_t){return!(nt&&0===nt.length||_t&&"object"==typeof _t&&0===Object.keys(_t).length||G===nt[0]&&ae===_t[G])},this.parse=function(nt,_t,pt){var Ct;if(!this.isInitialized())return null;if(!_t||!pt)return null;if(this.isNewInit(_t,pt))ae=pt[G=_t[0]];else if(null===G||!ae)return F.push(nt),null;for(;F.length>0;){var gn=F.shift();this.parse(gn,_t,pt)}return Ct=function(A,j,F){if(null===j)return null;var ae=sd(A,j)[j]||{};return{seiNals:ae.seiNals,logs:ae.logs,timescale:F}}(nt,G,ae),Ct&&Ct.logs&&(pe.logs=pe.logs.concat(Ct.logs)),null!==Ct&&Ct.seiNals?(this.pushNals(Ct.seiNals),this.flushStream(),pe):pe.logs.length?{logs:pe.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(nt){if(!this.isInitialized()||!nt||0===nt.length)return null;nt.forEach(function(_t){j.push(_t)})},this.flushStream=function(){if(!this.isInitialized())return null;Ge?j.partialFlush():j.flush()},this.clearParsedCaptions=function(){pe.captions=[],pe.captionStreams={},pe.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;j.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){F=[],G=null,ae=null,pe?this.clearParsedCaptions():pe={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ep=Pm_toUnsigned,Nm=function(A){return("00"+A.toString(16)).slice(-2)};Cg=function(A,j){var F,G,ae;return F=uo(j,["moof","traf"]),G=[].concat.apply([],F.map(function(pe){return uo(pe,["tfhd"]).map(function(Ge){var nt,_t,pt;return nt=Ep(Ge[4]<<24|Ge[5]<<16|Ge[6]<<8|Ge[7]),_t=A[nt]||9e4,(pt="number"!=typeof(pt=uo(pe,["tfdt"]).map(function(Ct){var gn,Qn;return gn=Ct[0],Qn=Ep(Ct[4]<<24|Ct[5]<<16|Ct[6]<<8|Ct[7]),1===gn&&(Qn*=Math.pow(2,32),Qn+=Ep(Ct[8]<<24|Ct[9]<<16|Ct[10]<<8|Ct[11])),Qn})[0])||isNaN(pt)?1/0:pt)/_t})})),ae=Math.min.apply(null,G),isFinite(ae)?ae:0},Gv=function(A){var F=0===A[0]?12:20;return Ep(A[F]<<24|A[F+1]<<16|A[F+2]<<8|A[F+3])},$v=function(A){var j=uo(A,["moov","trak"]),F=[];return j.forEach(function(G){var Ge,nt,ae={},pe=uo(G,["tkhd"])[0];pe&&(nt=(Ge=new DataView(pe.buffer,pe.byteOffset,pe.byteLength)).getUint8(0),ae.id=Ge.getUint32(0===nt?12:20));var _t=uo(G,["mdia","hdlr"])[0];if(_t){var pt=Oh(_t.subarray(8,12));ae.type="vide"===pt?"video":"soun"===pt?"audio":pt}var Ct=uo(G,["mdia","minf","stbl","stsd"])[0];if(Ct){var gn=Ct.subarray(8);ae.codec=Oh(gn.subarray(4,8));var _r,Qn=uo(gn,[ae.codec])[0];Qn&&(/^[a-z]vc[1-9]$/i.test(ae.codec)?(_r=Qn.subarray(78),"avcC"===Oh(_r.subarray(4,8))&&_r.length>11?(ae.codec+=".",ae.codec+=Nm(_r[9]),ae.codec+=Nm(_r[10]),ae.codec+=Nm(_r[11])):ae.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(ae.codec)?(_r=Qn.subarray(28),"esds"===Oh(_r.subarray(4,8))&&_r.length>20&&0!==_r[19]?(ae.codec+="."+Nm(_r[19]),ae.codec+="."+Nm(_r[20]>>>2&63).replace(/^0/,"")):ae.codec="mp4a.40.2"):ae.codec=ae.codec.toLowerCase())}var Jr=uo(G,["mdia","mdhd"])[0];Jr&&(ae.timescale=Gv(Jr)),F.push(ae)}),F};var f0_startTime=Cg,f0_tracks=$v,zv=function(A){var j=31&A[1];return(j<<=8)|A[2]},Sg=function(A){return!!(64&A[1])},kf=function(A){var j=0;return(48&A[3])>>>4>1&&(j+=A[4]+1),j},wg=function(A){switch(A){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Dg={parseType:function(A,j){var F=zv(A);return 0===F?"pat":F===j?"pmt":j?"pes":null},parsePat:function(A){var j=Sg(A),F=4+kf(A);return j&&(F+=A[F]+1),(31&A[F+10])<<8|A[F+11]},parsePmt:function(A){var j={},F=Sg(A),G=4+kf(A);if(F&&(G+=A[G]+1),1&A[G+5]){var pe;pe=3+((15&A[G+1])<<8|A[G+2])-4;for(var nt=12+((15&A[G+10])<<8|A[G+11]);nt<pe;){var _t=G+nt;j[(31&A[_t+1])<<8|A[_t+2]]=A[_t],nt+=5+((15&A[_t+3])<<8|A[_t+4])}return j}},parsePayloadUnitStartIndicator:Sg,parsePesType:function(A,j){switch(j[zv(A)]){case Wa.H264_STREAM_TYPE:return"video";case Wa.ADTS_STREAM_TYPE:return"audio";case Wa.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(A){if(!Sg(A))return null;var F=4+kf(A);if(F>=A.byteLength)return null;var ae,G=null;return 192&(ae=A[F+7])&&((G={}).pts=(14&A[F+9])<<27|(255&A[F+10])<<20|(254&A[F+11])<<12|(255&A[F+12])<<5|(254&A[F+13])>>>3,G.pts*=4,G.pts+=(6&A[F+13])>>>1,G.dts=G.pts,64&ae&&(G.dts=(14&A[F+14])<<27|(255&A[F+15])<<20|(254&A[F+16])<<12|(255&A[F+17])<<5|(254&A[F+18])>>>3,G.dts*=4,G.dts+=(6&A[F+18])>>>1)),G},videoPacketContainsKeyFrame:function(A){for(var j=4+kf(A),F=A.subarray(j),G=0,ae=0,pe=!1;ae<F.byteLength-3;ae++)if(1===F[ae+2]){G=ae+5;break}for(;G<F.byteLength;)switch(F[G]){case 0:if(0!==F[G-1]){G+=2;break}if(0!==F[G-2]){G++;break}ae+3!==G-2&&"slice_layer_without_partitioning_rbsp_idr"===wg(31&F[ae+3])&&(pe=!0);do{G++}while(1!==F[G]&&G<F.length);ae=G-2,G+=3;break;case 1:if(0!==F[G-1]||0!==F[G-2]){G+=3;break}"slice_layer_without_partitioning_rbsp_idr"===wg(31&F[ae+3])&&(pe=!0),ae=G-2,G+=3;break;default:G+=3}return F=F.subarray(ae),G-=ae,ae=0,F&&F.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===wg(31&F[ae+3])&&(pe=!0),pe}},Wl=_g_handleRollover,xs={};xs.ts=Dg,xs.aac=_p;var Rh=9e4,bu=188,qv=function(A,j,F){for(var pe,nt,_t,pt,G=0,ae=bu,Ct=!1;ae<=A.byteLength;)if(71!==A[G]||71!==A[ae]&&ae!==A.byteLength)G++,ae++;else{if("pes"===(pe=A.subarray(G,ae),xs.ts.parseType(pe,j.pid))&&(nt=xs.ts.parsePesType(pe,j.table),_t=xs.ts.parsePayloadUnitStartIndicator(pe),"audio"===nt&&_t&&(pt=xs.ts.parsePesTime(pe))&&(pt.type="audio",F.audio.push(pt),Ct=!0)),Ct)break;G+=bu,ae+=bu}for(G=(ae=A.byteLength)-bu,Ct=!1;G>=0;)if(71!==A[G]||71!==A[ae]&&ae!==A.byteLength)G--,ae--;else{if("pes"===(pe=A.subarray(G,ae),xs.ts.parseType(pe,j.pid))&&(nt=xs.ts.parsePesType(pe,j.table),_t=xs.ts.parsePayloadUnitStartIndicator(pe),"audio"===nt&&_t&&(pt=xs.ts.parsePesTime(pe))&&(pt.type="audio",F.audio.push(pt),Ct=!0)),Ct)break;G-=bu,ae-=bu}},Kv=function(A,j,F){for(var pe,nt,_t,pt,Ct,gn,Qn,G=0,ae=bu,_r=!1,Rn={data:[],size:0};ae<A.byteLength;)if(71!==A[G]||71!==A[ae])G++,ae++;else{if("pes"===(pe=A.subarray(G,ae),xs.ts.parseType(pe,j.pid))&&(nt=xs.ts.parsePesType(pe,j.table),_t=xs.ts.parsePayloadUnitStartIndicator(pe),"video"===nt&&(_t&&!_r&&(pt=xs.ts.parsePesTime(pe))&&(pt.type="video",F.video.push(pt),_r=!0),!F.firstKeyFrame))){if(_t&&0!==Rn.size){for(Ct=new Uint8Array(Rn.size),gn=0;Rn.data.length;)Qn=Rn.data.shift(),Ct.set(Qn,gn),gn+=Qn.byteLength;if(xs.ts.videoPacketContainsKeyFrame(Ct)){var Jr=xs.ts.parsePesTime(Ct);Jr?(F.firstKeyFrame=Jr,F.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Rn.size=0}Rn.data.push(pe),Rn.size+=pe.byteLength}if(_r&&F.firstKeyFrame)break;G+=bu,ae+=bu}for(G=(ae=A.byteLength)-bu,_r=!1;G>=0;)if(71!==A[G]||71!==A[ae])G--,ae--;else{if("pes"===(pe=A.subarray(G,ae),xs.ts.parseType(pe,j.pid))&&(nt=xs.ts.parsePesType(pe,j.table),_t=xs.ts.parsePayloadUnitStartIndicator(pe),"video"===nt&&_t&&(pt=xs.ts.parsePesTime(pe))&&(pt.type="video",F.video.push(pt),_r=!0)),_r)break;G-=bu,ae-=bu}},m0_inspect=function(A,j){var G;return G=xs.aac.isLikelyAacData(A)?function(A){for(var nt,j=!1,F=0,G=null,ae=null,pe=0,Ge=0;A.length-Ge>=3;){switch(xs.aac.parseType(A,Ge)){case"timed-metadata":if(A.length-Ge<10){j=!0;break}if((pe=xs.aac.parseId3TagSize(A,Ge))>A.length){j=!0;break}null===ae&&(nt=A.subarray(Ge,Ge+pe),ae=xs.aac.parseAacTimestamp(nt)),Ge+=pe;break;case"audio":if(A.length-Ge<7){j=!0;break}if((pe=xs.aac.parseAdtsSize(A,Ge))>A.length){j=!0;break}null===G&&(nt=A.subarray(Ge,Ge+pe),G=xs.aac.parseSampleRate(nt)),F++,Ge+=pe;break;default:Ge++}if(j)return null}if(null===G||null===ae)return null;var pt=Rh/G;return{audio:[{type:"audio",dts:ae,pts:ae},{type:"audio",dts:ae+1024*F*pt,pts:ae+1024*F*pt}]}}(A):function(A){var j={pid:null,table:null},F={};for(var G in function(A,j){for(var ae,F=0,G=bu;G<A.byteLength;)if(71!==A[F]||71!==A[G])F++,G++;else{switch(ae=A.subarray(F,G),xs.ts.parseType(ae,j.pid)){case"pat":j.pid=xs.ts.parsePat(ae);break;case"pmt":var Ge=xs.ts.parsePmt(ae);j.table=j.table||{},Object.keys(Ge).forEach(function(nt){j.table[nt]=Ge[nt]})}F+=bu,G+=bu}}(A,j),j.table)if(j.table.hasOwnProperty(G))switch(j.table[G]){case Wa.H264_STREAM_TYPE:F.video=[],Kv(A,j,F),0===F.video.length&&delete F.video;break;case Wa.ADTS_STREAM_TYPE:F.audio=[],qv(A,j,F),0===F.audio.length&&delete F.audio}return F}(A),G&&(G.audio||G.video)?(function(A,j){if(A.audio&&A.audio.length){var F=j;(typeof F>"u"||isNaN(F))&&(F=A.audio[0].dts),A.audio.forEach(function(pe){pe.dts=Wl(pe.dts,F),pe.pts=Wl(pe.pts,F),pe.dtsTime=pe.dts/Rh,pe.ptsTime=pe.pts/Rh})}if(A.video&&A.video.length){var G=j;if((typeof G>"u"||isNaN(G))&&(G=A.video[0].dts),A.video.forEach(function(pe){pe.dts=Wl(pe.dts,G),pe.pts=Wl(pe.pts,G),pe.dtsTime=pe.dts/Rh,pe.ptsTime=pe.pts/Rh}),A.firstKeyFrame){var ae=A.firstKeyFrame;ae.dts=Wl(ae.dts,G),ae.pts=Wl(ae.pts,G),ae.dtsTime=ae.dts/Rh,ae.ptsTime=ae.pts/Rh}}}(G,j),G):null},Cp=function(){function we(j,F){this.options=F||{},this.self=j,this.init()}var A=we.prototype;return A.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s_.Transmuxer(this.options),function(A,j){j.on("data",function(F){var G=F.initSegment;F.initSegment={data:G.buffer,byteOffset:G.byteOffset,byteLength:G.byteLength};var ae=F.data;F.data=ae.buffer,A.postMessage({action:"data",segment:F,byteOffset:ae.byteOffset,byteLength:ae.byteLength},[F.data])}),j.on("done",function(F){A.postMessage({action:"done"})}),j.on("gopInfo",function(F){A.postMessage({action:"gopInfo",gopInfo:F})}),j.on("videoSegmentTimingInfo",function(F){var G={start:{decode:Bs_videoTsToSeconds(F.start.dts),presentation:Bs_videoTsToSeconds(F.start.pts)},end:{decode:Bs_videoTsToSeconds(F.end.dts),presentation:Bs_videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:Bs_videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(G.prependedContentDuration=Bs_videoTsToSeconds(F.prependedContentDuration)),A.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:G})}),j.on("audioSegmentTimingInfo",function(F){var G={start:{decode:Bs_videoTsToSeconds(F.start.dts),presentation:Bs_videoTsToSeconds(F.start.pts)},end:{decode:Bs_videoTsToSeconds(F.end.dts),presentation:Bs_videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:Bs_videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(G.prependedContentDuration=Bs_videoTsToSeconds(F.prependedContentDuration)),A.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:G})}),j.on("id3Frame",function(F){A.postMessage({action:"id3Frame",id3Frame:F})}),j.on("caption",function(F){A.postMessage({action:"caption",caption:F})}),j.on("trackinfo",function(F){A.postMessage({action:"trackinfo",trackInfo:F})}),j.on("audioTimingInfo",function(F){A.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Bs_videoTsToSeconds(F.start),end:Bs_videoTsToSeconds(F.end)}})}),j.on("videoTimingInfo",function(F){A.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Bs_videoTsToSeconds(F.start),end:Bs_videoTsToSeconds(F.end)}})}),j.on("log",function(F){A.postMessage({action:"log",log:F})})}(this.self,this.transmuxer)},A.pushMp4Captions=function(F){this.captionParser||(this.captionParser=new h_,this.captionParser.init());var G=new Uint8Array(F.data,F.byteOffset,F.byteLength),ae=this.captionParser.parse(G,F.trackIds,F.timescales);this.self.postMessage({action:"mp4Captions",captions:ae&&ae.captions||[],logs:ae&&ae.logs||[],data:G.buffer},[G.buffer])},A.probeMp4StartTime=function(F){var ae=F.data,pe=f0_startTime(F.timescales,ae);this.self.postMessage({action:"probeMp4StartTime",startTime:pe,data:ae},[ae.buffer])},A.probeMp4Tracks=function(F){var G=F.data,ae=f0_tracks(G);this.self.postMessage({action:"probeMp4Tracks",tracks:ae,data:G},[G.buffer])},A.probeTs=function(F){var G=F.data,ae=F.baseStartTime,pe="number"!=typeof ae||isNaN(ae)?void 0:9e4*ae,Ge=m0_inspect(G,pe),nt=null;Ge&&((nt={hasVideo:Ge.video&&2===Ge.video.length||!1,hasAudio:Ge.audio&&2===Ge.audio.length||!1}).hasVideo&&(nt.videoStart=Ge.video[0].ptsTime),nt.hasAudio&&(nt.audioStart=Ge.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:nt,data:G},[G.buffer])},A.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},A.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},A.push=function(F){var G=new Uint8Array(F.data,F.byteOffset,F.byteLength);this.transmuxer.push(G)},A.reset=function(){this.transmuxer.reset()},A.setTimestampOffset=function(F){this.transmuxer.setBaseMediaDecodeTime(Math.round(Bs_secondsToVideoTs(F.timestampOffset||0)))},A.setAudioAppendStart=function(F){this.transmuxer.setAudioAppendStart(Math.ceil(Bs_secondsToVideoTs(F.appendStart)))},A.setRemux=function(F){this.transmuxer.setRemux(F.remux)},A.flush=function(F){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},A.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},A.alignGopsWith=function(F){this.transmuxer.alignGopsWith(F.gopsToAlignWith.slice())},we}();self.onmessage=function(we){"init"===we.data.action&&we.data.options?this.messageHandlers=new Cp(self,we.data.options):(this.messageHandlers||(this.messageHandlers=new Cp(self)),we.data&&we.data.action&&"init"!==we.data.action&&this.messageHandlers[we.data.action]&&this.messageHandlers[we.data.action](we.data))}})),uu=Kf(Jm),tv=function(l){var a=l.transmuxer,u=l.bytes,n=l.audioAppendStart,o=l.gopsToAlignWith,h=l.remux,y=l.onData,S=l.onTrackInfo,x=l.onAudioTimingInfo,V=l.onVideoTimingInfo,re=l.onVideoSegmentTimingInfo,ee=l.onAudioSegmentTimingInfo,De=l.onId3,ze=l.onCaptions,Ve=l.onDone,Be=l.onEndedTimeline,Wt=l.onTransmuxerLog,Lt=l.isEndOfTimeline,cn={buffer:[]},hn=Lt;if(a.onmessage=function(_n){a.currentTransmux===l&&("data"===_n.data.action&&function(l,a,u){var n=l.data.segment,o=n.type,h=n.initSegment,V=n.videoFrameDtsTime,re=n.videoFramePtsTime;a.buffer.push({captions:n.captions,captionStreams:n.captionStreams,metadata:n.metadata});var ee=l.data.segment.boxes||{data:l.data.segment.data},De={type:o,data:new Uint8Array(ee.data,ee.data.byteOffset,ee.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};typeof V<"u"&&(De.videoFrameDtsTime=V),typeof re<"u"&&(De.videoFramePtsTime=re),u(De)}(_n,cn,y),"trackinfo"===_n.data.action&&S(_n.data.trackInfo),"gopInfo"===_n.data.action&&function(l,a){a.gopInfo=l.data.gopInfo}(_n,cn),"audioTimingInfo"===_n.data.action&&x(_n.data.audioTimingInfo),"videoTimingInfo"===_n.data.action&&V(_n.data.videoTimingInfo),"videoSegmentTimingInfo"===_n.data.action&&re(_n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===_n.data.action&&ee(_n.data.audioSegmentTimingInfo),"id3Frame"===_n.data.action&&De([_n.data.id3Frame],_n.data.id3Frame.dispatchType),"caption"===_n.data.action&&ze(_n.data.caption),"endedtimeline"===_n.data.action&&(hn=!1,Be()),"log"===_n.data.action&&Wt(_n.data.log),"transmuxed"===_n.data.type&&(hn||(a.onmessage=null,function(l){var a=l.transmuxedData,u=l.callback;a.buffer=[],u(a)}({transmuxedData:cn,callback:Ve}),bc(a))))},n&&a.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(o)&&a.postMessage({action:"alignGopsWith",gopsToAlignWith:o}),typeof h<"u"&&a.postMessage({action:"setRemux",remux:h}),u.byteLength){var qn=u instanceof ArrayBuffer?u:u.buffer,tr=u instanceof ArrayBuffer?0:u.byteOffset;a.postMessage({action:"push",data:qn,byteOffset:tr,byteLength:u.byteLength},[qn])}Lt&&a.postMessage({action:"endTimeline"}),a.postMessage({action:"flush"})},bc=function(l){l.currentTransmux=null,l.transmuxQueue.length&&(l.currentTransmux=l.transmuxQueue.shift(),"function"==typeof l.currentTransmux?l.currentTransmux():tv(l.currentTransmux))},mh=function(l,a){l.postMessage({action:a}),bc(l)},Yc_reset=function(l){!function(l,a){if(!a.currentTransmux)return a.currentTransmux=l,void mh(a,l);a.transmuxQueue.push(mh.bind(null,a,l))}("reset",l)},df=function(l){var a=l.transmuxer,u=l.endAction||l.action,n=l.callback,o=rt({},l,{endAction:null,transmuxer:null,callback:null});if(a.addEventListener("message",function x(V){V.data.action===u&&(a.removeEventListener("message",x),V.data.data&&(V.data.data=new Uint8Array(V.data.data,l.byteOffset||0,l.byteLength||V.data.data.byteLength),l.data&&(l.data=V.data.data)),n(V.data))}),l.data){var y=l.data instanceof ArrayBuffer;o.byteOffset=y?0:l.data.byteOffset,o.byteLength=l.data.byteLength,a.postMessage(o,[y?l.data:l.data.buffer])}else a.postMessage(o)},Qc=function(l){l.forEach(function(a){a.abort()})},rv=function(l,a){return a.timedout?{status:a.status,message:"HLS request timed-out at URL: "+a.uri,code:-101,xhr:a}:a.aborted?{status:a.status,message:"HLS request aborted at URL: "+a.uri,code:-102,xhr:a}:l?{status:a.status,message:"HLS request errored at URL: "+a.uri,code:2,xhr:a}:"arraybuffer"===a.responseType&&0===a.response.byteLength?{status:a.status,message:"Empty HLS response at URL: "+a.uri,code:2,xhr:a}:null},zp=function(l,a,u){return function(n,o){var h=o.response,y=rv(n,o);if(y)return u(y,l);if(16!==h.byteLength)return u({status:o.status,message:"Invalid HLS key at URL: "+o.uri,code:2,xhr:o},l);for(var S=new DataView(h),x=new Uint32Array([S.getUint32(0),S.getUint32(4),S.getUint32(8),S.getUint32(12)]),V=0;V<a.length;V++)a[V].bytes=x;return u(null,l)}},Xg=function(l,a){var u=Q(l.map.bytes);if("mp4"!==u)return a({internal:!0,message:"Found unsupported "+(u||"unknown")+" container for initialization segment at URL: "+(l.map.resolvedUri||l.map.uri),code:2});df({action:"probeMp4Tracks",data:l.map.bytes,transmuxer:l.transmuxer,callback:function(h){var y=h.tracks;return l.map.bytes=h.data,y.forEach(function(x){l.map.tracks=l.map.tracks||{},!l.map.tracks[x.type]&&(l.map.tracks[x.type]=x,"number"==typeof x.id&&x.timescale&&(l.map.timescales=l.map.timescales||{},l.map.timescales[x.id]=x.timescale))}),a(null)}})},k0=function(l){var a=l.segment,u=l.bytes,n=l.trackInfoFn,o=l.timingInfoFn,h=l.videoSegmentTimingInfoFn,y=l.audioSegmentTimingInfoFn,S=l.id3Fn,x=l.captionsFn,V=l.isEndOfTimeline,re=l.endedTimelineFn,ee=l.dataFn,De=l.doneFn,ze=l.onTransmuxerLog,Ve=a.map&&a.map.tracks||{},Be=!(!Ve.audio||!Ve.video),Wt=o.bind(null,a,"audio","start"),Lt=o.bind(null,a,"audio","end"),cn=o.bind(null,a,"video","start"),hn=o.bind(null,a,"video","end");df({action:"probeTs",transmuxer:a.transmuxer,data:u,baseStartTime:a.baseStartTime,callback:function(tr){a.bytes=u=tr.data;var wn=tr.result;wn&&(n(a,{hasAudio:wn.hasAudio,hasVideo:wn.hasVideo,isMuxed:Be}),n=null,wn.hasAudio&&!Be&&Wt(wn.audioStart),wn.hasVideo&&cn(wn.videoStart),Wt=null,cn=null),function(l){if(!l.transmuxer.currentTransmux)return l.transmuxer.currentTransmux=l,void tv(l);l.transmuxer.transmuxQueue.push(l)}({bytes:u,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:Be,onData:function(wn){wn.type="combined"===wn.type?"video":wn.type,ee(a,wn)},onTrackInfo:function(wn){n&&(Be&&(wn.isMuxed=!0),n(a,wn))},onAudioTimingInfo:function(wn){Wt&&typeof wn.start<"u"&&(Wt(wn.start),Wt=null),Lt&&typeof wn.end<"u"&&Lt(wn.end)},onVideoTimingInfo:function(wn){cn&&typeof wn.start<"u"&&(cn(wn.start),cn=null),hn&&typeof wn.end<"u"&&hn(wn.end)},onVideoSegmentTimingInfo:function(wn){h(wn)},onAudioSegmentTimingInfo:function(wn){y(wn)},onId3:function(wn,_n){S(a,wn,_n)},onCaptions:function(wn){x(a,[wn])},isEndOfTimeline:V,onEndedTimeline:function(){re()},onTransmuxerLog:ze,onDone:function(wn){De&&(wn.type="combined"===wn.type?"video":wn.type,De(null,a,wn))}})}})},iv=function(l){var a=l.segment,u=l.bytes,n=l.trackInfoFn,o=l.timingInfoFn,h=l.videoSegmentTimingInfoFn,y=l.audioSegmentTimingInfoFn,S=l.id3Fn,x=l.captionsFn,V=l.isEndOfTimeline,re=l.endedTimelineFn,ee=l.dataFn,De=l.doneFn,ze=l.onTransmuxerLog,Ve=new Uint8Array(u);if(function(l){return ji(l,["moof"]).length>0}(Ve)){a.isFmp4=!0;var Be=a.map.tracks,Wt={isFmp4:!0,hasVideo:!!Be.video,hasAudio:!!Be.audio};Be.audio&&Be.audio.codec&&"enca"!==Be.audio.codec&&(Wt.audioCodec=Be.audio.codec),Be.video&&Be.video.codec&&"encv"!==Be.video.codec&&(Wt.videoCodec=Be.video.codec),Be.video&&Be.audio&&(Wt.isMuxed=!0),n(a,Wt);var Lt=function(hn){ee(a,{data:Ve,type:Wt.hasAudio&&!Wt.isMuxed?"audio":"video"}),hn&&hn.length&&x(a,hn),De(null,a,{})};df({action:"probeMp4StartTime",timescales:a.map.timescales,data:Ve,transmuxer:a.transmuxer,callback:function(hn){var rn=hn.data,qn=hn.startTime;u=rn.buffer,a.bytes=Ve=rn,Wt.hasAudio&&!Wt.isMuxed&&o(a,"audio","start",qn),Wt.hasVideo&&o(a,"video","start",qn),Be.video&&rn.byteLength&&a.transmuxer?df({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:Ve,timescales:a.map.timescales,trackIds:[Be.video.id],callback:function(wn){u=wn.data.buffer,a.bytes=Ve=wn.data,wn.logs.forEach(function(_n){ze(Z.mergeOptions(_n,{stream:"mp4CaptionParser"}))}),Lt(wn.captions)}}):Lt()}})}else{if(a.transmuxer)return typeof a.container>"u"&&(a.container=Q(Ve)),"ts"!==a.container&&"aac"!==a.container?(n(a,{hasAudio:!1,hasVideo:!1}),void De(null,a,{})):void k0({segment:a,bytes:u,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:y,id3Fn:S,captionsFn:x,isEndOfTimeline:V,endedTimelineFn:re,dataFn:ee,doneFn:De,onTransmuxerLog:ze});De(null,a,{})}},Xc=function(l,a){var S,u=l.id,n=l.key,o=l.encryptedBytes,h=l.decryptionWorker;h.addEventListener("message",function x(V){if(V.data.source===u){h.removeEventListener("message",x);var re=V.data.decrypted;a(new Uint8Array(re.bytes,re.byteOffset,re.byteLength))}}),S=n.bytes.slice?n.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.bytes)),h.postMessage(Vg({source:u,encrypted:o,key:S,iv:n.iv}),[o.buffer,S.buffer])},P0=function(l){var a=l.xhr,u=l.xhrOptions,o=l.segment,h=l.abortFn,y=l.progressFn,S=l.trackInfoFn,x=l.timingInfoFn,V=l.videoSegmentTimingInfoFn,re=l.audioSegmentTimingInfoFn,ee=l.id3Fn,De=l.captionsFn,ze=l.isEndOfTimeline,Ve=l.endedTimelineFn,Be=l.dataFn,cn=[],hn=function(l){var a=l.activeXhrs,u=l.decryptionWorker,n=l.trackInfoFn,o=l.timingInfoFn,h=l.videoSegmentTimingInfoFn,y=l.audioSegmentTimingInfoFn,S=l.id3Fn,x=l.captionsFn,V=l.isEndOfTimeline,re=l.endedTimelineFn,ee=l.dataFn,De=l.doneFn,ze=l.onTransmuxerLog,Ve=0,Be=!1;return function(Wt,Lt){if(!Be){if(Wt)return Be=!0,Qc(a),De(Wt,Lt);if((Ve+=1)===a.length){var cn=function(){if(Lt.encryptedBytes)return function(l){var u=l.segment,n=l.trackInfoFn,o=l.timingInfoFn,h=l.videoSegmentTimingInfoFn,y=l.audioSegmentTimingInfoFn,S=l.id3Fn,x=l.captionsFn,V=l.isEndOfTimeline,re=l.endedTimelineFn,ee=l.dataFn,De=l.doneFn,ze=l.onTransmuxerLog;Xc({id:u.requestId,key:u.key,encryptedBytes:u.encryptedBytes,decryptionWorker:l.decryptionWorker},function(Ve){u.bytes=Ve,iv({segment:u,bytes:u.bytes,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:y,id3Fn:S,captionsFn:x,isEndOfTimeline:V,endedTimelineFn:re,dataFn:ee,doneFn:De,onTransmuxerLog:ze})})}({decryptionWorker:u,segment:Lt,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:y,id3Fn:S,captionsFn:x,isEndOfTimeline:V,endedTimelineFn:re,dataFn:ee,doneFn:De,onTransmuxerLog:ze});iv({segment:Lt,bytes:Lt.bytes,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:y,id3Fn:S,captionsFn:x,isEndOfTimeline:V,endedTimelineFn:re,dataFn:ee,doneFn:De,onTransmuxerLog:ze})};if(Lt.endOfAllRequests=Date.now(),Lt.map&&Lt.map.encryptedBytes&&!Lt.map.bytes)return Xc({decryptionWorker:u,id:Lt.requestId+"-init",encryptedBytes:Lt.map.encryptedBytes,key:Lt.map.key},function(hn){Lt.map.bytes=hn,Xg(Lt,function(rn){if(rn)return Qc(a),De(rn,Lt);cn()})});cn()}}}}({activeXhrs:cn,decryptionWorker:l.decryptionWorker,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:V,audioSegmentTimingInfoFn:re,id3Fn:ee,captionsFn:De,isEndOfTimeline:ze,endedTimelineFn:Ve,dataFn:Be,doneFn:l.doneFn,onTransmuxerLog:l.onTransmuxerLog});if(o.key&&!o.key.bytes){var rn=[o.key];o.map&&!o.map.bytes&&o.map.key&&o.map.key.resolvedUri===o.key.resolvedUri&&rn.push(o.map.key);var wn=a(Z.mergeOptions(u,{uri:o.key.resolvedUri,responseType:"arraybuffer"}),zp(o,rn,hn));cn.push(wn)}if(o.map&&!o.map.bytes){if(o.map.key&&(!o.key||o.key.resolvedUri!==o.map.key.resolvedUri)){var Oo=a(Z.mergeOptions(u,{uri:o.map.key.resolvedUri,responseType:"arraybuffer"}),zp(o,[o.map.key],hn));cn.push(Oo)}var ks=Z.mergeOptions(u,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:Gf(o.map)}),cu=function(l){var a=l.segment,u=l.finishProcessingFn;return function(n,o){var h=rv(n,o);if(h)return u(h,a);var y=new Uint8Array(o.response);if(a.map.key)return a.map.encryptedBytes=y,u(null,a);a.map.bytes=y,Xg(a,function(S){if(S)return S.xhr=o,S.status=o.status,u(S,a);u(null,a)})}}({segment:o,finishProcessingFn:hn}),Is=a(ks,cu);cn.push(Is)}var yf=Z.mergeOptions(u,{uri:o.part&&o.part.resolvedUri||o.resolvedUri,responseType:"arraybuffer",headers:Gf(o)}),Nu=a(yf,function(l){var a=l.segment,u=l.finishProcessingFn,n=l.responseType;return function(o,h){var y=rv(o,h);if(y)return u(y,a);var S="arraybuffer"!==n&&h.responseText?function(l){for(var a=new Uint8Array(new ArrayBuffer(l.length)),u=0;u<l.length;u++)a[u]=l.charCodeAt(u);return a.buffer}(h.responseText.substring(a.lastReachedChar||0)):h.response;return a.stats=function(l){return{bandwidth:l.bandwidth,bytesReceived:l.bytesReceived||0,roundTripTime:l.roundTripTime||0}}(h),a.key?a.encryptedBytes=new Uint8Array(S):a.bytes=new Uint8Array(S),u(null,a)}}({segment:o,finishProcessingFn:hn,responseType:yf.responseType}));Nu.addEventListener("progress",function(l){var a=l.segment,u=l.progressFn;return function(n){if(!n.target.aborted)return a.stats=Z.mergeOptions(a.stats,function(l){var a=l.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0};return n.bytesReceived=l.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(n)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),u(n,a)}}({segment:o,progressFn:y,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:V,audioSegmentTimingInfoFn:re,id3Fn:ee,captionsFn:De,isEndOfTimeline:ze,endedTimelineFn:Ve,dataFn:Be})),cn.push(Nu);var $l={};return cn.forEach(function(za){za.addEventListener("loadend",function(l){var a=l.loadendState,u=l.abortFn;return function(n){n.target.aborted&&u&&!a.calledAbortFn&&(u(),a.calledAbortFn=!0)}}({loadendState:$l,abortFn:h}))}),function(){return Qc(cn)}},w_=zn("CodecUtils"),Jg=function(l,a){var u=a.attributes||{};return l&&l.mediaGroups&&l.mediaGroups.AUDIO&&u.AUDIO&&l.mediaGroups.AUDIO[u.AUDIO]},av=function(l){var a={};return l.forEach(function(u){var n=u.mediaType,o=u.type,h=u.details;a[n]=a[n]||[],a[n].push(hr(""+o+h))}),Object.keys(a).forEach(function(u){if(a[u].length>1)return w_("multiple "+u+" codecs found as attributes: "+a[u].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(a[u]=null);a[u]=a[u][0]}),a},Wp=function(l){var a=0;return l.audio&&a++,l.video&&a++,a},qp=function(l,a){var u=a.attributes||{},n=av(function(l){var a=l.attributes||{};if(a.CODECS)return Sr(a.CODECS)}(a)||[]);if(Jg(l,a)&&!n.audio&&!function(l,a){if(!Jg(l,a))return!0;var n=l.mediaGroups.AUDIO[(a.attributes||{}).AUDIO];for(var o in n)if(!n[o].uri&&!n[o].playlists)return!0;return!1}(l,a)){var o=av(function(l,a){if(!l.mediaGroups.AUDIO||!a)return null;var u=l.mediaGroups.AUDIO[a];if(!u)return null;for(var n in u){var o=u[n];if(o.default&&o.playlists)return Sr(o.playlists[0].attributes.CODECS)}return null}(l,u.AUDIO)||[]);o.audio&&(n.audio=o.audio)}return n},Xf=zn("PlaylistSelector"),Jf=function(l){if(l&&l.playlist){var a=l.playlist;return JSON.stringify({id:a.id,bandwidth:l.bandwidth,width:l.width,height:l.height,codecs:a.attributes&&a.attributes.CODECS||""})}},vh=function(l,a){if(!l)return"";var u=ge().getComputedStyle(l);return u?u[a]:""},Ec=function(l,a){var u=l.slice();l.sort(function(n,o){var h=a(n,o);return 0===h?u.indexOf(n)-u.indexOf(o):h})},yh=function(l,a){var u,n;return l.attributes.BANDWIDTH&&(u=l.attributes.BANDWIDTH),u=u||ge().Number.MAX_VALUE,a.attributes.BANDWIDTH&&(n=a.attributes.BANDWIDTH),u-(n||ge().Number.MAX_VALUE)},ep=function(l,a,u,n,o,h){if(l){var y={bandwidth:a,width:u,height:n,limitRenditionByPlayerDimensions:o},S=l.playlists;Va.isAudioOnly(l)&&(S=h.getAudioTrackPlaylists_(),y.audioOnly=!0);var x=S.map(function(Zn){var Oo=Zn.attributes&&Zn.attributes.RESOLUTION&&Zn.attributes.RESOLUTION.width,ks=Zn.attributes&&Zn.attributes.RESOLUTION&&Zn.attributes.RESOLUTION.height;return{bandwidth:Zn.attributes&&Zn.attributes.BANDWIDTH||ge().Number.MAX_VALUE,width:Oo,height:ks,playlist:Zn}});Ec(x,function(Zn,ps){return Zn.bandwidth-ps.bandwidth});var V=(x=x.filter(function(Zn){return!Va.isIncompatible(Zn.playlist)})).filter(function(Zn){return Va.isEnabled(Zn.playlist)});V.length||(V=x.filter(function(Zn){return!Va.isDisabled(Zn.playlist)}));var re=V.filter(function(Zn){return Zn.bandwidth*ti.BANDWIDTH_VARIANCE<a}),ee=re[re.length-1],De=re.filter(function(Zn){return Zn.bandwidth===ee.bandwidth})[0];if(!1===o){var ze=De||V[0]||x[0];if(ze&&ze.playlist){var Ve="sortedPlaylistReps";return De&&(Ve="bandwidthBestRep"),V[0]&&(Ve="enabledPlaylistReps"),Xf("choosing "+Jf(ze)+" using "+Ve+" with options",y),ze.playlist}return Xf("could not choose a playlist with options",y),null}var Be=re.filter(function(Zn){return Zn.width&&Zn.height});Ec(Be,function(Zn,ps){return Zn.width-ps.width});var Wt=Be.filter(function(Zn){return Zn.width===u&&Zn.height===n});ee=Wt[Wt.length-1];var cn,hn,rn,qn,Lt=Wt.filter(function(Zn){return Zn.bandwidth===ee.bandwidth})[0];if(Lt||(hn=(cn=Be.filter(function(Zn){return Zn.width>u||Zn.height>n})).filter(function(Zn){return Zn.width===cn[0].width&&Zn.height===cn[0].height}),ee=hn[hn.length-1],rn=hn.filter(function(Zn){return Zn.bandwidth===ee.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var tr=Be.map(function(Zn){return Zn.pixelDiff=Math.abs(Zn.width-u)+Math.abs(Zn.height-n),Zn});Ec(tr,function(Zn,ps){return Zn.pixelDiff===ps.pixelDiff?ps.bandwidth-Zn.bandwidth:Zn.pixelDiff-ps.pixelDiff}),qn=tr[0]}var wn=qn||rn||Lt||De||V[0]||x[0];if(wn&&wn.playlist){var _n="sortedPlaylistReps";return qn?_n="leastPixelDiffRep":rn?_n="resolutionPlusOneRep":Lt?_n="resolutionBestRep":De?_n="bandwidthBestRep":V[0]&&(_n="enabledPlaylistReps"),Xf("choosing "+Jf(wn)+" using "+_n+" with options",y),wn.playlist}return Xf("could not choose a playlist with options",y),null}},_h=function(){var l=this.useDevicePixelRatio&&ge().devicePixelRatio||1;return ep(this.playlists.master,this.systemBandwidth,parseInt(vh(this.tech_.el(),"width"),10)*l,parseInt(vh(this.tech_.el(),"height"),10)*l,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Th=function(l,a,u){var n,o;if(u&&u.cues)for(n=u.cues.length;n--;)(o=u.cues[n]).startTime>=l&&o.endTime<=a&&u.removeCue(o)},Qp=function(l){return"number"==typeof l&&isFinite(l)},Eh=1/60,gf=function(l){var a=l.startOfSegment,u=l.duration,n=l.segment,o=l.part,h=l.playlist,y=h.mediaSequence,S=h.id,x=h.segments,re=l.mediaIndex,ee=l.partIndex,De=l.timeline,ze=(void 0===x?[]:x).length-1,Ve="mediaIndex/partIndex increment";l.getMediaInfoForTime?Ve="getMediaInfoForTime ("+l.getMediaInfoForTime+")":l.isSyncRequest&&(Ve="getSyncSegmentCandidate (isSyncRequest)");var Be="number"==typeof ee,Wt=l.segment.uri?"segment":"pre-segment",Lt=Be?ch({preloadSegment:n})-1:0;return Wt+" ["+(y+re)+"/"+(y+ze)+"]"+(Be?" part ["+ee+"/"+Lt+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(Be?" part start/end ["+o.start+" => "+o.end+"]":"")+" startOfSegment ["+a+"] duration ["+u+"] timeline ["+De+"] selected by ["+Ve+"] playlist ["+S+"]"},uv=function(l){return l+"TimingInfo"},lv=function(l){var a=l.timelineChangeController,n=l.segmentTimeline,o=l.loaderType,h=l.audioDisabled;if(l.currentTimeline===n)return!1;if("audio"===o){var y=a.lastTimelineChange({type:"main"});return!y||y.to!==n}if("main"===o&&h){var S=a.pendingTimelineChange({type:"audio"});return!(S&&S.to===n)}return!1},nm=function(l){var a=l.segmentDuration,u=l.maxDuration;return!!a&&Math.round(a)>u+nr},Cc=function(m){function l(u,n){var o;if(o=m.call(this)||this,!u)throw new TypeError("Initialization settings are required");if("function"!=typeof u.currentTime)throw new TypeError("No currentTime getter specified");if(!u.mediaSource)throw new TypeError("No MediaSource specified");return o.bandwidth=u.bandwidth,o.throughput={rate:0,count:0},o.roundTrip=NaN,o.resetStats_(),o.mediaIndex=null,o.partIndex=null,o.hasPlayed_=u.hasPlayed,o.currentTime_=u.currentTime,o.seekable_=u.seekable,o.seeking_=u.seeking,o.duration_=u.duration,o.mediaSource_=u.mediaSource,o.vhs_=u.vhs,o.loaderType_=u.loaderType,o.currentMediaInfo_=void 0,o.startingMediaInfo_=void 0,o.segmentMetadataTrack_=u.segmentMetadataTrack,o.goalBufferLength_=u.goalBufferLength,o.sourceType_=u.sourceType,o.sourceUpdater_=u.sourceUpdater,o.inbandTextTracks_=u.inbandTextTracks,o.state_="INIT",o.timelineChangeController_=u.timelineChangeController,o.shouldSaveSegmentTimingInfo_=!0,o.parse708captions_=u.parse708captions,o.experimentalExactManifestTimings=u.experimentalExactManifestTimings,o.checkBufferTimeout_=null,o.error_=void 0,o.currentTimeline_=-1,o.pendingSegment_=null,o.xhrOptions_=null,o.pendingSegments_=[],o.audioDisabled_=!1,o.isPendingTimestampOffset_=!1,o.gopBuffer_=[],o.timeMapping_=0,o.safeAppend_=Z.browser.IE_VERSION>=11,o.appendInitSegment_={audio:!0,video:!0},o.playlistOfLastInitSegment_={audio:null,video:null},o.callQueue_=[],o.loadQueue_=[],o.metadataQueue_={id3:[],caption:[]},o.waitingOnRemove_=!1,o.quotaExceededErrorRetryTimeout_=null,o.activeInitSegmentId_=null,o.initSegments_={},o.cacheEncryptionKeys_=u.cacheEncryptionKeys,o.keyCache_={},o.decrypter_=u.decrypter,o.syncController_=u.syncController,o.syncPoint_={segmentIndex:0,time:0},o.transmuxer_=o.createTransmuxer_(),o.triggerSyncInfoUpdate_=function(){return o.trigger("syncinfoupdate")},o.syncController_.on("syncinfoupdate",o.triggerSyncInfoUpdate_),o.mediaSource_.addEventListener("sourceopen",function(){o.isEndOfStream_()||(o.ended_=!1)}),o.fetchAtBuffer_=!1,o.logger_=zn("SegmentLoader["+o.loaderType_+"]"),Object.defineProperty(et(o),"state",{get:function(){return this.state_},set:function(y){y!==this.state_&&(this.logger_(this.state_+" -> "+y),this.state_=y,this.trigger("statechange"))}}),o.sourceUpdater_.on("ready",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"main"===o.loaderType_&&o.timelineChangeController_.on("pendingtimelinechange",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"audio"===o.loaderType_&&o.timelineChangeController_.on("timelinechange",function(){o.hasEnoughInfoToLoad_()&&o.processLoadQueue_(),o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),o}W(l,m);var a=l.prototype;return a.createTransmuxer_=function(){return function(l){var a=new uu;a.currentTransmux=null,a.transmuxQueue=[];var u=a.terminate;return a.terminate=function(){return a.currentTransmux=null,a.transmuxQueue.length=0,u.call(a)},a.postMessage({action:"init",options:l}),a}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},a.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},a.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ge().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},a.setAudio=function(n){this.audioDisabled_=!n,n?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},a.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},a.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ge().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},a.checkForAbort_=function(n){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==n:(this.state="READY",!0)},a.error=function(n){return typeof n<"u"&&(this.logger_("error occurred:",n),this.error_=n),this.pendingSegment_=null,this.error_},a.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Yc_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},a.buffered_=function(){var n=this.getMediaInfo_();if(!this.sourceUpdater_||!n)return Z.createTimeRanges();if("main"===this.loaderType_){var h=n.hasVideo;if(h&&n.hasAudio&&!this.audioDisabled_&&!n.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},a.initSegmentForMap=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=uf(n),y=this.initSegments_[h];return o&&!y&&n.bytes&&(this.initSegments_[h]=y={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:n.bytes,tracks:n.tracks,timescales:n.timescales}),y||n},a.segmentKey=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=oy(n),y=this.keyCache_[h];this.cacheEncryptionKeys_&&o&&!y&&n.bytes&&(this.keyCache_[h]=y={resolvedUri:n.resolvedUri,bytes:n.bytes});var S={resolvedUri:(y||n).resolvedUri};return y&&(S.bytes=y.bytes),S},a.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},a.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.playlist=function(n,o){if(void 0===o&&(o={}),n){var h=this.playlist_,y=this.pendingSegment_;this.playlist_=n,this.xhrOptions_=o,"INIT"===this.state&&(n.syncInfo={mediaSequence:n.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(n));var S=null;if(h&&(h.id?S=h.id:h.uri&&(S=h.uri)),this.logger_("playlist update ["+S+" => "+(n.id||n.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==n.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var x=n.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+x+"]"),null!==this.mediaIndex)if(this.mediaIndex-=x,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var V=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!V.parts||!V.parts.length||!V.parts[this.partIndex])){var re=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=re}}y&&(y.mediaIndex-=x,y.mediaIndex<0?(y.mediaIndex=null,y.partIndex=null):(y.mediaIndex>=0&&(y.segment=n.segments[y.mediaIndex]),y.partIndex>=0&&y.segment.parts&&(y.part=y.segment.parts[y.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,n)}},a.pause=function(){this.checkBufferTimeout_&&(ge().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},a.paused=function(){return null===this.checkBufferTimeout_},a.resetEverything=function(n){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,n),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},a.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},a.resyncLoader=function(){this.transmuxer_&&Yc_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},a.remove=function(n,o,h,y){if(void 0===h&&(h=function(){}),void 0===y&&(y=!1),o===1/0&&(o=this.duration_()),o<=n)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var S=1,x=function(){0==--S&&h()};for(var V in(y||!this.audioDisabled_)&&(S++,this.sourceUpdater_.removeAudio(n,o,x)),(y||"main"===this.loaderType_)&&(this.gopBuffer_=function(l,a,u,n){for(var o=Math.ceil((a-n)*Oe.ONE_SECOND_IN_TS),h=Math.ceil((u-n)*Oe.ONE_SECOND_IN_TS),y=l.slice(),S=l.length;S--&&!(l[S].pts<=h););if(-1===S)return y;for(var x=S+1;x--&&!(l[x].pts<=o););return x=Math.max(x,0),y.splice(x,S-x+1),y}(this.gopBuffer_,n,o,this.timeMapping_),S++,this.sourceUpdater_.removeVideo(n,o,x)),this.inbandTextTracks_)Th(n,o,this.inbandTextTracks_[V]);Th(n,o,this.segmentMetadataTrack_),x()}else this.logger_("skipping remove because no source updater or starting media info")},a.monitorBuffer_=function(){this.checkBufferTimeout_&&ge().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ge().setTimeout(this.monitorBufferTick_.bind(this),1)},a.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&ge().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ge().setTimeout(this.monitorBufferTick_.bind(this),500)},a.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var n=this.chooseNextRequest_();n&&("number"==typeof n.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline})),this.loadSegment_(n))}},a.isEndOfStream_=function(n,o,h){if(void 0===n&&(n=this.mediaIndex),void 0===o&&(o=this.playlist_),void 0===h&&(h=this.partIndex),!o||!this.mediaSource_)return!1;var y="number"==typeof n&&o.segments[n];return o.endList&&"open"===this.mediaSource_.readyState&&n+1===o.segments.length&&(!y||!y.parts||h+1===y.parts.length)},a.chooseNextRequest_=function(){var n=Ed(this.buffered_())||0,o=Math.max(0,n-this.currentTime_()),h=!this.hasPlayed_()&&o>=1,y=o>=this.goalBufferLength_(),S=this.playlist_.segments;if(!S.length||h||y)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var x={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(x.isSyncRequest)x.mediaIndex=function(l,a,u){a=a||[];for(var n=[],o=0,h=0;h<a.length;h++){var y=a[h];if(l===y.timeline&&(n.push(h),(o+=y.duration)>u))return h}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,S,n);else if(null!==this.mediaIndex){var V=S[this.mediaIndex],re="number"==typeof this.partIndex?this.partIndex:-1;x.startOfSegment=V.end?V.end:n,V.parts&&V.parts[re+1]?(x.mediaIndex=this.mediaIndex,x.partIndex=re+1):x.mediaIndex=this.mediaIndex+1}else{var ee=Va.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),De=ee.segmentIndex,ze=ee.startTime,Ve=ee.partIndex;x.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",x.mediaIndex=De,x.startOfSegment=ze,x.partIndex=Ve}var Be=S[x.mediaIndex];return Be&&("number"!=typeof x.partIndex||Be&&"number"==typeof x.partIndex&&Be.parts&&Be.parts[x.partIndex])?("number"!=typeof x.partIndex&&Be.parts&&(x.partIndex=0),x.mediaIndex>=S.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(x)):null},a.generateSegmentInfo_=function(n){var o=n.playlist,h=n.mediaIndex,y=n.startOfSegment,S=n.isSyncRequest,x=n.partIndex,V=n.forceTimestampOffset,re=n.getMediaInfoForTime,ee=o.segments[h],De="number"==typeof x&&ee.parts[x],ze={requestId:"segment-loader-"+Math.random(),uri:De&&De.resolvedUri||ee.resolvedUri,mediaIndex:h,partIndex:De?x:null,isSyncRequest:S,startOfSegment:y,playlist:o,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:ee.timeline,duration:De&&De.duration||ee.duration,segment:ee,part:De,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:re},Ve=typeof V<"u"?V:this.isPendingTimestampOffset_;ze.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:ee.timeline,currentTimeline:this.currentTimeline_,startOfSegment:y,buffered:this.buffered_(),overrideCheck:Ve});var Be=Ed(this.sourceUpdater_.audioBuffered());return"number"==typeof Be&&(ze.audioAppendStart=Be-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(ze.gopsToAlignWith=function(l,a,u){if(typeof a>"u"||null===a||!l.length)return[];var o,n=Math.ceil((a-u+3)*Oe.ONE_SECOND_IN_TS);for(o=0;o<l.length&&!(l[o].pts>n);o++);return l.slice(o)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),ze},a.timestampOffsetForSegment_=function(n){return function(l){var a=l.segmentTimeline,u=l.currentTimeline,n=l.startOfSegment,o=l.buffered;return l.overrideCheck||a!==u?a<u?n:o.length?o.end(o.length-1):n:null}(n)},a.earlyAbortWhenNeeded_=function(n){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(n.firstBytesReceivedAt||Date.now())<1e3)){var o=this.currentTime_(),h=n.bandwidth,y=this.pendingSegment_.duration,S=Va.estimateSegmentRequestTime(y,h,this.playlist_,n.bytesReceived),x=function(l,a,u){return void 0===u&&(u=1),((l.length?l.end(l.length-1):0)-a)/u}(this.buffered_(),o,this.vhs_.tech_.playbackRate())-1;if(!(S<=x)){var V=function(l){var u=l.currentTime,n=l.bandwidth,o=l.duration,h=l.segmentDuration,y=l.timeUntilRebuffer,S=l.currentTimeline,x=l.syncController,V=l.master.playlists.filter(function(Ve){return!Va.isIncompatible(Ve)}),re=V.filter(Va.isEnabled);re.length||(re=V.filter(function(Ve){return!Va.isDisabled(Ve)}));var De=re.filter(Va.hasAttribute.bind(null,"BANDWIDTH")).map(function(Ve){var Wt=x.getSyncPoint(Ve,o,S,u)?1:2;return{playlist:Ve,rebufferingImpact:Va.estimateSegmentRequestTime(h,n,Ve)*Wt-y}}),ze=De.filter(function(Ve){return Ve.rebufferingImpact<=0});return Ec(ze,function(Ve,Be){return yh(Be.playlist,Ve.playlist)}),ze.length?ze[0]:(Ec(De,function(Ve,Be){return Ve.rebufferingImpact-Be.rebufferingImpact}),De[0]||null)}({master:this.vhs_.playlists.master,currentTime:o,bandwidth:h,duration:this.duration_(),segmentDuration:y,timeUntilRebuffer:x,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(V){var De=.5;x<=nr&&(De=1),V.playlist&&V.playlist.uri!==this.playlist_.uri&&!(S-x-V.rebufferingImpact<De)&&(this.bandwidth=V.playlist.attributes.BANDWIDTH*ti.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},a.handleAbort_=function(n){this.logger_("Aborting "+gf(n)),this.mediaRequestsAborted+=1},a.handleProgress_=function(n,o){this.earlyAbortWhenNeeded_(o.stats),!this.checkForAbort_(o.requestId)&&this.trigger("progress")},a.handleTrackInfo_=function(n,o){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&(this.checkForIllegalMediaSwitch(o)||(function(l,a){if(!l&&!a||!l&&a||l&&!a)return!1;if(l===a)return!0;var u=Object.keys(l).sort(),n=Object.keys(a).sort();if(u.length!==n.length)return!1;for(var o=0;o<u.length;o++){var h=u[o];if(h!==n[o]||l[h]!==a[h])return!1}return!0}(this.currentMediaInfo_,o=o||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=o,this.currentMediaInfo_=o,this.logger_("trackinfo update",o),this.trigger("trackinfo")),!this.checkForAbort_(n.requestId)&&(this.pendingSegment_.trackInfo=o,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},a.handleTimingInfo_=function(n,o,h,y){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){var S=this.pendingSegment_,x=uv(o);S[x]=S[x]||{},S[x][h]=y,this.logger_("timinginfo: "+o+" - "+h+" - "+y),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},a.handleCaptions_=function(n,o){var h=this;if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(0===o.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,n,o));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),x={};o.forEach(function(V){x[V.stream]=x[V.stream]||{startTime:1/0,captions:[],endTime:0};var re=x[V.stream];re.startTime=Math.min(re.startTime,V.startTime+S),re.endTime=Math.max(re.endTime,V.endTime+S),re.captions.push(V)}),Object.keys(x).forEach(function(V){var re=x[V],ee=re.startTime,De=re.endTime,ze=re.captions,Ve=h.inbandTextTracks_;h.logger_("adding cues from "+ee+" -> "+De+" for "+V),function(l,a,u){if(!l[u]){a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"});var n=u;/^cc708_/.test(u)&&(n="SERVICE"+u.split("_")[1]);var o=a.textTracks().getTrackById(n);if(o)l[u]=o;else{var y=u,S=u,x=!1,V=(a.options_.vhs&&a.options_.vhs.captionServices||{})[n];V&&(y=V.label,S=V.language,x=V.default),l[u]=a.addRemoteTextTrack({kind:"captions",id:n,default:x,label:y,language:S},!1).track}}}(Ve,h.vhs_.tech_,V),Th(ee,De,Ve[V]),function(l){var a=l.inbandTextTracks,u=l.captionArray,n=l.timestampOffset;if(u){var o=ge().WebKitDataCue||ge().VTTCue;u.forEach(function(h){a[h.stream].addCue(new o(h.startTime+n,h.endTime+n,h.text))})}}({captionArray:ze,inbandTextTracks:Ve,timestampOffset:S})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},a.handleId3_=function(n,o,h){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,n,o,h));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(l,a,u){l.metadataTrack_||(l.metadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,l.metadataTrack_.inBandMetadataTrackDispatchType=a)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(l){var a=l.inbandTextTracks,u=l.metadataArray,n=l.timestampOffset,o=l.videoDuration;if(u){var h=ge().WebKitDataCue||ge().VTTCue,y=a.metadataTrack_;if(y&&(u.forEach(function(De){var ze=De.cueTime+n;"number"!=typeof ze||ge().isNaN(ze)||ze<0||!(ze<1/0)||De.frames.forEach(function(Ve){var Be=new h(ze,ze,Ve.value||Ve.url||Ve.data||"");Be.frame=Ve,Be.value=Ve,function(l){Object.defineProperties(l.frame,{id:{get:function(){return Z.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),l.value.key}},value:{get:function(){return Z.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),l.value.data}},privateData:{get:function(){return Z.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),l.value.data}}})}(Be),y.addCue(Be)})}),y.cues&&y.cues.length)){for(var S=y.cues,x=[],V=0;V<S.length;V++)S[V]&&x.push(S[V]);var re=x.reduce(function(De,ze){var Ve=De[ze.startTime]||[];return Ve.push(ze),De[ze.startTime]=Ve,De},{}),ee=Object.keys(re).sort(function(De,ze){return Number(De)-Number(ze)});ee.forEach(function(De,ze){var Ve=re[De],Be=Number(ee[ze+1])||o;Ve.forEach(function(Wt){Wt.endTime=Be})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:o,timestampOffset:S,videoDuration:this.duration_()})}},a.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(n){return n()}),this.metadataQueue_.caption.forEach(function(n){return n()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},a.processCallQueue_=function(){var n=this.callQueue_;this.callQueue_=[],n.forEach(function(o){return o()})},a.processLoadQueue_=function(){var n=this.loadQueue_;this.loadQueue_=[],n.forEach(function(o){return o()})},a.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var n=this.pendingSegment_;return!(!n||this.getCurrentMediaInfo_()&&lv({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.getCurrentMediaInfo_=function(n){return void 0===n&&(n=this.pendingSegment_),n&&n.trackInfo||this.currentMediaInfo_},a.getMediaInfo_=function(n){return void 0===n&&(n=this.pendingSegment_),this.getCurrentMediaInfo_(n)||this.startingMediaInfo_},a.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var n=this.pendingSegment_,o=this.getCurrentMediaInfo_();return!(!n||!o||o.hasVideo&&!n.videoTimingInfo||o.hasAudio&&!this.audioDisabled_&&!o.isMuxed&&!n.audioTimingInfo||lv({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.handleData_=function(n,o){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,n,o));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.segment),"closed"!==this.mediaSource_.readyState){if(n.map&&(n.map=this.initSegmentForMap(n.map,!0),h.segment.map=n.map),n.key&&this.segmentKey(n.key,!0),h.isFmp4=n.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[uv(o.type)].start;else{var x,y=this.getCurrentMediaInfo_(),S="main"===this.loaderType_&&y&&y.hasVideo;S&&(x=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:x,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,o.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var V=this.chooseNextRequest_();if(V.mediaIndex!==h.mediaIndex||V.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,o)}}},a.updateAppendInitSegmentStatus=function(n,o){"main"===this.loaderType_&&"number"==typeof n.timestampOffset&&!n.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[o]!==n.playlist&&(this.appendInitSegment_[o]=!0)},a.getInitSegmentAndUpdateState_=function(n){var o=n.type,h=n.initSegment,y=n.map,S=n.playlist;if(y){var x=uf(y);if(this.activeInitSegmentId_===x)return null;h=this.initSegmentForMap(y,!0).bytes,this.activeInitSegmentId_=x}return h&&this.appendInitSegment_[o]?(this.playlistOfLastInitSegment_[o]=S,this.appendInitSegment_[o]=!1,this.activeInitSegmentId_=null,h):null},a.handleQuotaExceededError_=function(n,o){var h=this,y=n.segmentInfo,S=n.type,x=n.bytes,V=this.sourceUpdater_.audioBuffered(),re=this.sourceUpdater_.videoBuffered();V.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Mu(V).join(", ")),re.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Mu(re).join(", "));var ee=V.length?V.start(0):0,De=V.length?V.end(V.length-1):0,ze=re.length?re.start(0):0,Ve=re.length?re.end(re.length-1):0;if(De-ee<=1&&Ve-ze<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+x.byteLength+", audio buffer: "+Mu(V).join(", ")+", video buffer: "+Mu(re).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:y,type:S,bytes:x}));var Wt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Wt),this.remove(0,Wt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=ge().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},a.handleAppendError_=function(n,o){var h=n.segmentInfo,y=n.type,S=n.bytes;if(o){if(22===o.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:y,bytes:S});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",o),this.error(y+" append of "+S.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},a.appendToSourceBuffer_=function(n){var o=n.segmentInfo,h=n.type,y=n.initSegment,S=n.data,x=n.bytes;if(!x){var V=[S],re=S.byteLength;y&&(V.unshift(y),re+=y.byteLength),x=function(l){var u,a=0;return l.bytes&&(u=new Uint8Array(l.bytes),l.segments.forEach(function(n){u.set(n,a),a+=n.byteLength})),u}({bytes:re,segments:V})}this.sourceUpdater_.appendBuffer({segmentInfo:o,type:h,bytes:x},this.handleAppendError_.bind(this,{segmentInfo:o,type:h,bytes:x}))},a.handleSegmentTimingInfo_=function(n,o,h){if(this.pendingSegment_&&o===this.pendingSegment_.requestId){var y=this.pendingSegment_.segment,S=n+"TimingInfo";y[S]||(y[S]={}),y[S].transmuxerPrependedSeconds=h.prependedContentDuration||0,y[S].transmuxedPresentationStart=h.start.presentation,y[S].transmuxedDecodeStart=h.start.decode,y[S].transmuxedPresentationEnd=h.end.presentation,y[S].transmuxedDecodeEnd=h.end.decode,y[S].baseMediaDecodeTime=h.baseMediaDecodeTime}},a.appendData_=function(n,o){var h=o.type,y=o.data;if(y&&y.byteLength&&("audio"!==h||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:h,initSegment:o.initSegment,playlist:n.playlist,map:n.isFmp4?n.segment.map:null});this.appendToSourceBuffer_({segmentInfo:n,type:h,initSegment:S,data:y})}},a.loadSegment_=function(n){var o=this;this.state="WAITING",this.pendingSegment_=n,this.trimBackBuffer_(n),"number"==typeof n.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(n):this.loadQueue_.push(function(){var h=rt({},n,{forceTimestampOffset:!0});rt(n,o.generateSegmentInfo_(h)),o.isPendingTimestampOffset_=!1,o.updateTransmuxerAndRequestSegment_(n)})},a.updateTransmuxerAndRequestSegment_=function(n){var o=this;this.shouldUpdateTransmuxerTimestampOffset_(n.timestampOffset)&&(this.gopBuffer_.length=0,n.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:n.timestampOffset}));var h=this.createSimplifiedSegmentObj_(n),V=this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex)||null!==this.mediaIndex&&n.timeline!==this.currentTimeline_&&n.timeline>0;this.logger_("Requesting "+gf(n)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),n.abortRequests=P0({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,n),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",n.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",n.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:V,endedTimelineFn:function(){o.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(ee){var De=ee.message,ze=ee.level,Ve=ee.stream;o.logger_(gf(n)+" logged from transmuxer stream "+Ve+" as a "+ze+": "+De)}})},a.trimBackBuffer_=function(n){var o=function(l,a,u){var n=a-ti.BACK_BUFFER_LENGTH;return l.length&&(n=Math.max(n,l.start(0))),Math.min(a-u,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);o>0&&this.remove(0,o)},a.createSimplifiedSegmentObj_=function(n){var o=n.segment,h=n.part,y={resolvedUri:h?h.resolvedUri:o.resolvedUri,byterange:h?h.byterange:o.byterange,requestId:n.requestId,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,part:n.part},S=n.playlist.segments[n.mediaIndex-1];if(S&&S.timeline===o.timeline&&(S.videoTimingInfo?y.baseStartTime=S.videoTimingInfo.transmuxedDecodeEnd:S.audioTimingInfo&&(y.baseStartTime=S.audioTimingInfo.transmuxedDecodeEnd)),o.key){var x=o.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence]);y.key=this.segmentKey(o.key),y.key.iv=x}return o.map&&(y.map=this.initSegmentForMap(o.map)),y},a.saveTransferStats_=function(n){this.mediaRequests+=1,n&&(this.mediaBytesTransferred+=n.bytesReceived,this.mediaTransferDuration+=n.roundTripTime)},a.saveBandwidthRelatedStats_=function(n,o){this.pendingSegment_.byteLength=o.bytesReceived,n<Eh?this.logger_("Ignoring segment's bandwidth because its duration of "+n+" is less than the min to record "+Eh):(this.bandwidth=o.bandwidth,this.roundTrip=o.roundTripTime)},a.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},a.segmentRequestFinished_=function(n,o,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,n,o,h));else if(this.saveTransferStats_(o.stats),this.pendingSegment_&&o.requestId===this.pendingSegment_.requestId){if(n){if(this.pendingSegment_=null,this.state="READY",-102===n.code)return;return this.pause(),-101===n.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(n),void this.trigger("error"))}var y=this.pendingSegment_;this.saveBandwidthRelatedStats_(y.duration,o.stats),y.endOfAllRequests=o.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(l,a,u){if(!a.length)return l;if(u)return a.slice();for(var n=a[0].pts,o=0;o<l.length&&!(l[o].pts>=n);o++);return l.slice(0,o).concat(a)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(y)}},a.setTimeMapping_=function(n){var o=this.syncController_.mappingForTimeline(n);null!==o&&(this.timeMapping_=o)},a.updateMediaSecondsLoaded_=function(n){this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration},a.shouldUpdateTransmuxerTimestampOffset_=function(n){return null!==n&&("main"===this.loaderType_&&n!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&n!==this.sourceUpdater_.audioTimestampOffset())},a.trueSegmentStart_=function(n){var o=n.currentStart,y=n.mediaIndex,S=n.firstVideoFrameTimeForData;if(typeof o<"u")return o;if(!n.useVideoTimingInfo)return n.audioTimingInfo.start;var De=n.playlist.segments[y-1];return 0===y||!De||typeof De.start>"u"||De.end!==S+n.currentVideoTimestampOffset?S:n.videoTimingInfo.start},a.waitForAppendsToComplete_=function(n){var o=this.getCurrentMediaInfo_(n);if(!o)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var x="main"===this.loaderType_&&o.hasVideo,V=!this.audioDisabled_&&o.hasAudio&&!o.isMuxed;if(n.waitingOnAppends=0,!n.hasAppendedData_)return!n.timingInfo&&"number"==typeof n.timestampOffset&&(this.isPendingTimestampOffset_=!0),n.timingInfo={start:0},n.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(n),this.processMetadataQueue_()),void this.checkAppendsDone_(n);x&&n.waitingOnAppends++,V&&n.waitingOnAppends++,x&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,n)),V&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,n))},a.checkAppendsDone_=function(n){this.checkForAbort_(n.requestId)||(n.waitingOnAppends--,0===n.waitingOnAppends&&this.handleAppendsDone_())},a.checkForIllegalMediaSwitch=function(n){var o=function(l,a,u){return"main"===l&&a&&u?u.hasAudio||u.hasVideo?a.hasVideo&&!u.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.hasVideo&&u.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),n);return!!o&&(this.error({message:o,blacklistDuration:1/0}),this.trigger("error"),!0)},a.updateSourceBufferTimestampOffset_=function(n){if(null!==n.timestampOffset&&"number"==typeof n.timingInfo.start&&!n.changedTimestampOffset&&"main"===this.loaderType_){var o=!1;n.timestampOffset-=n.timingInfo.start,n.changedTimestampOffset=!0,n.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(n.timestampOffset),o=!0),n.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(n.timestampOffset),o=!0),o&&this.trigger("timestampoffset")}},a.updateTimingInfoEnd_=function(n){n.timingInfo=n.timingInfo||{};var o=this.getMediaInfo_(),y="main"===this.loaderType_&&o&&o.hasVideo&&n.videoTimingInfo?n.videoTimingInfo:n.audioTimingInfo;y&&(n.timingInfo.end="number"==typeof y.end?y.end:y.start+n.duration)},a.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var n=this.pendingSegment_;this.updateTimingInfoEnd_(n),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=function(l,a){if("hls"!==a)return null;var u=function(l,a){return Math.max(l&&"number"==typeof l.start&&"number"==typeof l.end?l.end-l.start:0,a&&"number"==typeof a.start&&"number"==typeof a.end?a.end-a.start:0)}(l.audioTimingInfo,l.videoTimingInfo);if(!u)return null;var n=l.playlist.targetDuration,o=nm({segmentDuration:u,maxDuration:2*n}),h=nm({segmentDuration:u,maxDuration:n});return o||h?{severity:o?"warn":"info",message:"Segment with index "+l.mediaIndex+" from playlist "+l.playlist.id+" has a duration of "+u+" when the reported duration is "+l.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(n,this.sourceType_);if(o&&("warn"===o.severity?Z.log.warn(o.message):this.logger_(o.message)),this.recordThroughput_(n),this.pendingSegment_=null,this.state="READY",!n.isSyncRequest||(this.trigger("syncinfoupdate"),n.hasAppendedData_)){this.logger_("Appended "+gf(n)),this.addSegmentMetadataCue_(n),this.fetchAtBuffer_=!0,this.currentTimeline_!==n.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:n.timeline})),this.currentTimeline_=n.timeline,this.trigger("syncinfoupdate");var h=n.segment;h.end&&this.currentTime_()-h.end>3*n.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=n.mediaIndex,this.partIndex=n.partIndex,this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex)&&this.endOfStream(),this.trigger("appended"),n.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.logger_("Throwing away un-appended sync request "+gf(n))},a.recordThroughput_=function(n){if(n.duration<Eh)this.logger_("Ignoring segment's throughput because its duration of "+n.duration+" is less than the min to record "+Eh);else{var o=this.throughput.rate,h=Date.now()-n.endOfAllRequests+1,y=Math.floor(n.byteLength/h*8*1e3);this.throughput.rate+=(y-o)/++this.throughput.count}},a.addSegmentMetadataCue_=function(n){if(this.segmentMetadataTrack_){var o=n.segment,h=o.start,y=o.end;if(Qp(h)&&Qp(y)){Th(h,y,this.segmentMetadataTrack_);var S=ge().WebKitDataCue||ge().VTTCue,x={custom:o.custom,dateTimeObject:o.dateTimeObject,dateTimeString:o.dateTimeString,bandwidth:n.playlist.attributes.BANDWIDTH,resolution:n.playlist.attributes.RESOLUTION,codecs:n.playlist.attributes.CODECS,byteLength:n.byteLength,uri:n.uri,timeline:n.timeline,playlist:n.playlist.id,start:h,end:y},re=new S(h,y,JSON.stringify(x));re.value=x,this.segmentMetadataTrack_.addCue(re)}}},l}(Z.EventTarget);function Vl(){}var Wr,Jp=function(l){return"string"!=typeof l?l:l.replace(/./,function(a){return a.toUpperCase()})},cv=["video","audio"],eg=function(l,a){var u=a[l+"Buffer"];return u&&u.updating||a.queuePending[l]},rm=function m(l,a){if(0!==a.queue.length){var u=0,n=a.queue[u];if("mediaSource"===n.type)return void(!a.updating()&&"closed"!==a.mediaSource.readyState&&(a.queue.shift(),n.action(a),n.doneFn&&n.doneFn(),m("audio",a),m("video",a)));if("mediaSource"!==l&&a.ready()&&"closed"!==a.mediaSource.readyState&&!eg(l,a)){if(n.type!==l){if(u=function(l,a){for(var u=0;u<a.length;u++){var n=a[u];if("mediaSource"===n.type)return null;if(n.type===l)return u}return null}(l,a.queue),null===u)return;n=a.queue[u]}if(a.queue.splice(u,1),a.queuePending[l]=n,n.action(l,a),!n.doneFn)return a.queuePending[l]=null,void m(l,a)}}},im=function(l,a){var u=a[l+"Buffer"],n=Jp(l);u&&(u.removeEventListener("updateend",a["on"+n+"UpdateEnd_"]),u.removeEventListener("error",a["on"+n+"Error_"]),a.codecs[l]=null,a[l+"Buffer"]=null)},Pu=function(l,a){return l&&a&&-1!==Array.prototype.indexOf.call(l.sourceBuffers,a)},Ha_appendBuffer=function(l,a,u){return function(n,o){var h=o[n+"Buffer"];if(Pu(o.mediaSource,h)){o.logger_("Appending segment "+a.mediaIndex+"'s "+l.length+" bytes to "+n+"Buffer");try{h.appendBuffer(l)}catch(y){o.logger_("Error with code "+y.code+" "+(22===y.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+a.mediaIndex+" to "+n+"Buffer"),o.queuePending[n]=null,u(y)}}}},Ha_remove=function(l,a){return function(u,n){var o=n[u+"Buffer"];if(Pu(n.mediaSource,o)){n.logger_("Removing "+l+" to "+a+" from "+u+"Buffer");try{o.remove(l,a)}catch{n.logger_("Remove "+l+" to "+a+" from "+u+"Buffer failed")}}}},Ha_timestampOffset=function(l){return function(a,u){var n=u[a+"Buffer"];Pu(u.mediaSource,n)&&(u.logger_("Setting "+a+"timestampOffset to "+l),n.timestampOffset=l)}},Ha_callback=function(l){return function(a,u){l()}},Ha_endOfStream=function(l){return function(a){if("open"===a.mediaSource.readyState){a.logger_("Calling mediaSource endOfStream("+(l||"")+")");try{a.mediaSource.endOfStream(l)}catch(u){Z.log.warn("Failed to call media source endOfStream",u)}}}},Ha_duration=function(l){return function(a){a.logger_("Setting mediaSource duration to "+l);try{a.mediaSource.duration=l}catch(u){Z.log.warn("Failed to set media source duration",u)}}},Ha_addSourceBuffer=function(l,a){return function(u){var n=Jp(l),o=Nn(a);u.logger_("Adding "+l+"Buffer with codec "+a+" to mediaSource");var h=u.mediaSource.addSourceBuffer(o);h.addEventListener("updateend",u["on"+n+"UpdateEnd_"]),h.addEventListener("error",u["on"+n+"Error_"]),u.codecs[l]=a,u[l+"Buffer"]=h}},Ha_removeSourceBuffer=function(l){return function(a){var u=a[l+"Buffer"];if(im(l,a),Pu(a.mediaSource,u)){a.logger_("Removing "+l+"Buffer with codec "+a.codecs[l]+" from mediaSource");try{a.mediaSource.removeSourceBuffer(u)}catch(n){Z.log.warn("Failed to removeSourceBuffer "+l+"Buffer",n)}}}},Ha_changeType=function(l){return function(a,u){var n=u[a+"Buffer"],o=Nn(l);Pu(u.mediaSource,n)&&u.codecs[a]!==l&&(u.logger_("changing "+a+"Buffer codec from "+u.codecs[a]+" to "+l),n.changeType(o),u.codecs[a]=l)}},il=function(l){var a=l.type,u=l.sourceUpdater;u.queue.push({type:a,action:l.action,doneFn:l.doneFn,name:l.name}),rm(a,u)},F0=function(l,a){return function(u){if(a.queuePending[l]){var n=a.queuePending[l].doneFn;a.queuePending[l]=null,n&&n(a[l+"Error_"])}rm(l,a)}},$a=function(m){function l(u){var n;return(n=m.call(this)||this).mediaSource=u,n.sourceopenListener_=function(){return rm("mediaSource",et(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=zn("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=F0("video",et(n)),n.onAudioUpdateEnd_=F0("audio",et(n)),n.onVideoError_=function(o){n.videoError_=o},n.onAudioError_=function(o){n.audioError_=o},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}W(l,m);var a=l.prototype;return a.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},a.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},a.hasInitializedAnyEme=function(){return this.initializedEme_},a.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},a.createSourceBuffers=function(n){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(n),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},a.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},a.addSourceBuffer=function(n,o){il({type:"mediaSource",sourceUpdater:this,action:Ha_addSourceBuffer(n,o),name:"addSourceBuffer"})},a.abort=function(n){il({type:n,sourceUpdater:this,action:function(l,a){if("open"===a.mediaSource.readyState){var u=a[l+"Buffer"];if(Pu(a.mediaSource,u)){a.logger_("calling abort on "+l+"Buffer");try{u.abort()}catch(n){Z.log.warn("Failed to abort on "+l+"Buffer",n)}}}},name:"abort"})},a.removeSourceBuffer=function(n){this.canRemoveSourceBuffer()?il({type:"mediaSource",sourceUpdater:this,action:Ha_removeSourceBuffer(n),name:"removeSourceBuffer"}):Z.log.error("removeSourceBuffer is not supported!")},a.canRemoveSourceBuffer=function(){return!Z.browser.IE_VERSION&&!Z.browser.IS_FIREFOX&&ge().MediaSource&&ge().MediaSource.prototype&&"function"==typeof ge().MediaSource.prototype.removeSourceBuffer},l.canChangeType=function(){return ge().SourceBuffer&&ge().SourceBuffer.prototype&&"function"==typeof ge().SourceBuffer.prototype.changeType},a.canChangeType=function(){return this.constructor.canChangeType()},a.changeType=function(n,o){this.canChangeType()?il({type:n,sourceUpdater:this,action:Ha_changeType(o),name:"changeType"}):Z.log.error("changeType is not supported!")},a.addOrChangeSourceBuffers=function(n){var o=this;if(!n||"object"!=typeof n||0===Object.keys(n).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(n).forEach(function(h){var y=n[h];if(!o.hasCreatedSourceBuffers())return o.addSourceBuffer(h,y);o.canChangeType()&&o.changeType(h,y)})},a.appendBuffer=function(n,o){var h=this,y=n.segmentInfo,S=n.type,x=n.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([n,o]),void this.logger_("delayed audio append of "+x.length+" until video append");if(il({type:S,sourceUpdater:this,action:Ha_appendBuffer(x,y||{mediaIndex:-1},o),doneFn:o,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var re=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+re.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,re.forEach(function(ee){h.appendBuffer.apply(h,ee)})}},a.audioBuffered=function(){return Pu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Z.createTimeRange()},a.videoBuffered=function(){return Pu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Z.createTimeRange()},a.buffered=function(){var n=Pu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,o=Pu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return o&&!n?this.audioBuffered():n&&!o?this.videoBuffered():function(l,a){var u=null,n=null,o=0,h=[],y=[];if(!(l&&l.length&&a&&a.length))return Z.createTimeRange();for(var S=l.length;S--;)h.push({time:l.start(S),type:"start"}),h.push({time:l.end(S),type:"end"});for(S=a.length;S--;)h.push({time:a.start(S),type:"start"}),h.push({time:a.end(S),type:"end"});for(h.sort(function(x,V){return x.time-V.time}),S=0;S<h.length;S++)"start"===h[S].type?2==++o&&(u=h[S].time):"end"===h[S].type&&1==--o&&(n=h[S].time),null!==u&&null!==n&&(y.push([u,n]),u=null,n=null);return Z.createTimeRanges(y)}(this.audioBuffered(),this.videoBuffered())},a.setDuration=function(n,o){void 0===o&&(o=Vl),il({type:"mediaSource",sourceUpdater:this,action:Ha_duration(n),name:"duration",doneFn:o})},a.endOfStream=function(n,o){void 0===n&&(n=null),void 0===o&&(o=Vl),"string"!=typeof n&&(n=void 0),il({type:"mediaSource",sourceUpdater:this,action:Ha_endOfStream(n),name:"endOfStream",doneFn:o})},a.removeAudio=function(n,o,h){void 0===h&&(h=Vl),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?il({type:"audio",sourceUpdater:this,action:Ha_remove(n,o),doneFn:h,name:"remove"}):h()},a.removeVideo=function(n,o,h){void 0===h&&(h=Vl),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?il({type:"video",sourceUpdater:this,action:Ha_remove(n,o),doneFn:h,name:"remove"}):h()},a.updating=function(){return!(!eg("audio",this)&&!eg("video",this))},a.audioTimestampOffset=function(n){return typeof n<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==n&&(il({type:"audio",sourceUpdater:this,action:Ha_timestampOffset(n),name:"timestampOffset"}),this.audioTimestampOffset_=n),this.audioTimestampOffset_},a.videoTimestampOffset=function(n){return typeof n<"u"&&this.videoBuffer&&this.videoTimestampOffset!==n&&(il({type:"video",sourceUpdater:this,action:Ha_timestampOffset(n),name:"timestampOffset"}),this.videoTimestampOffset_=n),this.videoTimestampOffset_},a.audioQueueCallback=function(n){this.audioBuffer&&il({type:"audio",sourceUpdater:this,action:Ha_callback(n),name:"callback"})},a.videoQueueCallback=function(n){this.videoBuffer&&il({type:"video",sourceUpdater:this,action:Ha_callback(n),name:"callback"})},a.dispose=function(){var n=this;this.trigger("dispose"),cv.forEach(function(o){n.abort(o),n.canRemoveSourceBuffer()?n.removeSourceBuffer(o):n[o+"QueueCallback"](function(){return im(o,n)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},l}(Z.EventTarget),mf=function(l){return decodeURIComponent(escape(String.fromCharCode.apply(null,l)))},tp=new Uint8Array("\n\n".split("").map(function(m){return m.charCodeAt(0)})),tg=function(m){function l(u,n){var o;return void 0===n&&(n={}),(o=m.call(this,u,n)||this).mediaSource_=null,o.subtitlesTrack_=null,o.loaderType_="subtitle",o.featuresNativeTextTracks_=u.featuresNativeTextTracks,o.shouldSaveSegmentTimingInfo_=!1,o}W(l,m);var a=l.prototype;return a.createTransmuxer_=function(){return null},a.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Z.createTimeRanges();var n=this.subtitlesTrack_.cues;return Z.createTimeRanges([[n[0].startTime,n[n.length-1].startTime]])},a.initSegmentForMap=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=uf(n),y=this.initSegments_[h];if(o&&!y&&n.bytes){var x=new Uint8Array(tp.byteLength+n.bytes.byteLength);x.set(n.bytes),x.set(tp,n.bytes.byteLength),this.initSegments_[h]=y={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:x}}return y||n},a.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.track=function(n){return typeof n>"u"||(this.subtitlesTrack_=n,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},a.remove=function(n,o){Th(n,o,this.subtitlesTrack_)},a.fillBuffer_=function(){var n=this,o=this.chooseNextRequest_();if(o){if(null===this.syncController_.timestampOffsetForTimeline(o.timeline))return this.syncController_.one("timestampoffset",function(){n.state="READY",n.paused()||n.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(o)}},a.timestampOffsetForSegment_=function(){return null},a.chooseNextRequest_=function(){return this.skipEmptySegments_(m.prototype.chooseNextRequest_.call(this))},a.skipEmptySegments_=function(n){for(;n&&n.segment.empty;){if(n.mediaIndex+1>=n.playlist.segments.length){n=null;break}n=this.generateSegmentInfo_({playlist:n.playlist,mediaIndex:n.mediaIndex+1,startOfSegment:n.startOfSegment+n.duration,isSyncRequest:n.isSyncRequest})}return n},a.stopForError=function(n){this.error(n),this.state="READY",this.pause(),this.trigger("error")},a.segmentRequestFinished_=function(n,o,h){var y=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(o.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(n)return-101===n.code&&this.handleTimeout_(),-102===n.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(n);var S=this.pendingSegment_;this.saveBandwidthRelatedStats_(S.duration,o.stats),this.state="APPENDING",this.trigger("appending");var x=S.segment;if(x.map&&(x.map.bytes=o.map.bytes),S.bytes=o.bytes,"function"!=typeof ge().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var V,re=function(){y.subtitlesTrack_.tech_.off("vttjsloaded",V),y.stopForError({message:"Error loading vtt.js"})};return V=function(){y.subtitlesTrack_.tech_.off("vttjserror",re),y.segmentRequestFinished_(n,o,h)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",V),void this.subtitlesTrack_.tech_.one("vttjserror",re)}x.requested=!0;try{this.parseVTTCues_(S)}catch(ee){return void this.stopForError({message:ee.message})}if(this.updateTimeMapping_(S,this.syncController_.timelines[S.timeline],this.playlist_),S.timingInfo=S.cues.length?{start:S.cues[0].startTime,end:S.cues[S.cues.length-1].endTime}:{start:S.startOfSegment,end:S.startOfSegment+S.duration},S.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");S.byteLength=S.bytes.byteLength,this.mediaSecondsLoaded+=x.duration,S.cues.forEach(function(ee){y.subtitlesTrack_.addCue(y.featuresNativeTextTracks_?new(ge().VTTCue)(ee.startTime,ee.endTime,ee.text):ee)}),function(l){var a=l.cues;if(a)for(var u=0;u<a.length;u++){for(var n=[],o=0,h=0;h<a.length;h++)a[u].startTime===a[h].startTime&&a[u].endTime===a[h].endTime&&a[u].text===a[h].text&&++o>1&&n.push(a[h]);n.length&&n.forEach(function(y){return l.removeCue(y)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},a.handleData_=function(){},a.updateTimingInfoEnd_=function(){},a.parseVTTCues_=function(n){var o,h=!1;"function"==typeof ge().TextDecoder?o=new(ge().TextDecoder)("utf8"):(o=ge().WebVTT.StringDecoder(),h=!0);var y=new(ge().WebVTT.Parser)(ge(),ge().vttjs,o);if(n.cues=[],n.timestampmap={MPEGTS:0,LOCAL:0},y.oncue=n.cues.push.bind(n.cues),y.ontimestampmap=function(V){n.timestampmap=V},y.onparsingerror=function(V){Z.log.warn("Error encountered when parsing cues: "+V.message)},n.segment.map){var S=n.segment.map.bytes;h&&(S=mf(S)),y.parse(S)}var x=n.bytes;h&&(x=mf(x)),y.parse(x),y.flush()},a.updateTimeMapping_=function(n,o,h){var y=n.segment;if(o){if(!n.cues.length)return void(y.empty=!0);var S=n.timestampmap,x=S.MPEGTS/Oe.ONE_SECOND_IN_TS-S.LOCAL+o.mapping;n.cues.forEach(function(ee){ee.startTime+=x,ee.endTime+=x}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+n.mediaIndex,time:Math.min(n.cues[0].startTime,n.cues[n.cues.length-1].startTime-y.duration)})}},l}(Cc),np=function(l,a){for(var u=l.cues,n=0;n<u.length;n++){var o=u[n];if(a>=o.adStartTime&&a<=o.adEndTime)return o}return null},hv=[{name:"VOD",run:function(l,a,u,n,o){return u!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(l,a,u,n,o){if(!Object.keys(l.timelineToDatetimeMappings).length)return null;var h=null,y=null,S=Xh(a);o=o||0;for(var x=0;x<S.length;x++){var re=S[a.endList||0===o?x:S.length-(x+1)],ee=re.segment,De=l.timelineToDatetimeMappings[ee.timeline];if(De&&ee.dateTimeObject){var Ve=ee.dateTimeObject.getTime()/1e3+De;if(ee.parts&&"number"==typeof re.partIndex)for(var Be=0;Be<re.partIndex;Be++)Ve+=ee.parts[Be].duration;var Wt=Math.abs(o-Ve);if(null!==y&&(0===Wt||y<Wt))break;y=Wt,h={time:Ve,segmentIndex:re.segmentIndex,partIndex:re.partIndex}}}return h}},{name:"Segment",run:function(l,a,u,n,o){var h=null,y=null;o=o||0;for(var S=Xh(a),x=0;x<S.length;x++){var re=S[a.endList||0===o?x:S.length-(x+1)],ee=re.segment,De=re.part&&re.part.start||ee&&ee.start;if(ee.timeline===n&&typeof De<"u"){var ze=Math.abs(o-De);if(null!==y&&y<ze)break;(!h||null===y||y>=ze)&&(y=ze,h={time:De,segmentIndex:re.segmentIndex,partIndex:re.partIndex})}}return h}},{name:"Discontinuity",run:function(l,a,u,n,o){var h=null;if(o=o||0,a.discontinuityStarts&&a.discontinuityStarts.length)for(var y=null,S=0;S<a.discontinuityStarts.length;S++){var x=a.discontinuityStarts[S],re=l.discontinuities[a.discontinuitySequence+S+1];if(re){var ee=Math.abs(o-re.time);if(null!==y&&y<ee)break;(!h||null===y||y>=ee)&&(y=ee,h={time:re.time,segmentIndex:x,partIndex:null})}}return h}},{name:"Playlist",run:function(l,a,u,n,o){return a.syncInfo?{time:a.syncInfo.time,segmentIndex:a.syncInfo.mediaSequence-a.mediaSequence,partIndex:null}:null}}],j0=function(m){function l(u){var n;return(n=m.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=zn("SyncController"),n}W(l,m);var a=l.prototype;return a.getSyncPoint=function(n,o,h,y){var S=this.runStrategies_(n,o,h,y);return S.length?this.selectSyncPoint_(S,{key:"time",value:y}):null},a.getExpiredTime=function(n,o){if(!n||!n.segments)return null;var h=this.runStrategies_(n,o,n.discontinuitySequence,0);if(!h.length)return null;var y=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return y.segmentIndex>0&&(y.time*=-1),Math.abs(y.time+ef({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:y.segmentIndex,endIndex:0}))},a.runStrategies_=function(n,o,h,y){for(var S=[],x=0;x<hv.length;x++){var V=hv[x],re=V.run(this,n,o,h,y);re&&(re.strategy=V.name,S.push({strategy:V.name,syncPoint:re}))}return S},a.selectSyncPoint_=function(n,o){for(var h=n[0].syncPoint,y=Math.abs(n[0].syncPoint[o.key]-o.value),S=n[0].strategy,x=1;x<n.length;x++){var V=Math.abs(n[x].syncPoint[o.key]-o.value);V<y&&(y=V,h=n[x].syncPoint,S=n[x].strategy)}return this.logger_("syncPoint for ["+o.key+": "+o.value+"] chosen with strategy ["+S+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},a.saveExpiredSegmentInfo=function(n,o){for(var y=o.mediaSequence-n.mediaSequence-1;y>=0;y--){var S=n.segments[y];if(S&&typeof S.start<"u"){o.syncInfo={mediaSequence:n.mediaSequence+y,time:S.start},this.logger_("playlist refresh sync: [time:"+o.syncInfo.time+", mediaSequence: "+o.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},a.setDateTimeMappingForStart=function(n){if(this.timelineToDatetimeMappings={},n.segments&&n.segments.length&&n.segments[0].dateTimeObject){var o=n.segments[0],h=o.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[o.timeline]=-h}},a.saveSegmentTimingInfo=function(n){var o=n.segmentInfo,h=n.shouldSaveTimelineMapping,y=this.calculateSegmentTimeMapping_(o,o.timingInfo,h),S=o.segment;y&&(this.saveDiscontinuitySyncInfo_(o),o.playlist.syncInfo||(o.playlist.syncInfo={mediaSequence:o.playlist.mediaSequence+o.mediaIndex,time:S.start}));var x=S.dateTimeObject;S.discontinuity&&h&&x&&(this.timelineToDatetimeMappings[S.timeline]=-x.getTime()/1e3)},a.timestampOffsetForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].time},a.mappingForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].mapping},a.calculateSegmentTimeMapping_=function(n,o,h){var V,re,y=n.segment,S=n.part,x=this.timelines[n.timeline];if("number"==typeof n.timestampOffset)x={time:n.startOfSegment,mapping:n.startOfSegment-o.start},h&&(this.timelines[n.timeline]=x,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+n.timeline+": [time: "+x.time+"] [mapping: "+x.mapping+"]")),V=n.startOfSegment,re=o.end+x.mapping;else{if(!x)return!1;V=o.start+x.mapping,re=o.end+x.mapping}return S&&(S.start=V,S.end=re),(!y.start||V<y.start)&&(y.start=V),y.end=re,!0},a.saveDiscontinuitySyncInfo_=function(n){var o=n.playlist,h=n.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(o.discontinuityStarts&&o.discontinuityStarts.length)for(var y=0;y<o.discontinuityStarts.length;y++){var S=o.discontinuityStarts[y],x=o.discontinuitySequence+y+1,V=S-n.mediaIndex,re=Math.abs(V);if(!this.discontinuities[x]||this.discontinuities[x].accuracy>re){var ee;ee=V<0?h.start-ef({defaultDuration:o.targetDuration,durationList:o.segments,startIndex:n.mediaIndex,endIndex:S}):h.end+ef({defaultDuration:o.targetDuration,durationList:o.segments,startIndex:n.mediaIndex+1,endIndex:S}),this.discontinuities[x]={time:ee,accuracy:re}}}},a.dispose=function(){this.trigger("dispose"),this.off()},l}(Z.EventTarget),B0=function(m){function l(){var u;return(u=m.call(this)||this).pendingTimelineChanges_={},u.lastTimelineChanges_={},u}W(l,m);var a=l.prototype;return a.clearPendingTimelineChange=function(n){this.pendingTimelineChanges_[n]=null,this.trigger("pendingtimelinechange")},a.pendingTimelineChange=function(n){var o=n.type,h=n.from,y=n.to;return"number"==typeof h&&"number"==typeof y&&(this.pendingTimelineChanges_[o]={type:o,from:h,to:y},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[o]},a.lastTimelineChange=function(n){var o=n.type,h=n.from,y=n.to;return"number"==typeof h&&"number"==typeof y&&(this.lastTimelineChanges_[o]={type:o,from:h,to:y},delete this.pendingTimelineChanges_[o],this.trigger("timelinechange")),this.lastTimelineChanges_[o]},a.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},l}(Z.EventTarget),U0=cf(Xm(function(){function m(Ve,Be,Wt){return Ve(Wt={path:Be,exports:{},require:function(cn,hn){return function l(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Wt.exports),Wt.exports}var a=m(function(Ve){function Be(Lt,cn){for(var hn=0;hn<cn.length;hn++){var rn=cn[hn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Lt,rn.key,rn)}}Ve.exports=function Wt(Lt,cn,hn){return cn&&Be(Lt.prototype,cn),hn&&Be(Lt,hn),Lt},Ve.exports.default=Ve.exports,Ve.exports.__esModule=!0}),u=m(function(Ve){function Be(Wt,Lt){return Ve.exports=Be=Object.setPrototypeOf||function(hn,rn){return hn.__proto__=rn,hn},Ve.exports.default=Ve.exports,Ve.exports.__esModule=!0,Be(Wt,Lt)}Ve.exports=Be,Ve.exports.default=Ve.exports,Ve.exports.__esModule=!0}),n=m(function(Ve){Ve.exports=function Be(Wt,Lt){Wt.prototype=Object.create(Lt.prototype),Wt.prototype.constructor=Wt,u(Wt,Lt)},Ve.exports.default=Ve.exports,Ve.exports.__esModule=!0}),o=function(){function Ve(){this.listeners={}}var Be=Ve.prototype;return Be.on=function(Lt,cn){this.listeners[Lt]||(this.listeners[Lt]=[]),this.listeners[Lt].push(cn)},Be.off=function(Lt,cn){if(!this.listeners[Lt])return!1;var hn=this.listeners[Lt].indexOf(cn);return this.listeners[Lt]=this.listeners[Lt].slice(0),this.listeners[Lt].splice(hn,1),hn>-1},Be.trigger=function(Lt){var cn=this.listeners[Lt];if(cn)if(2===arguments.length)for(var hn=cn.length,rn=0;rn<hn;++rn)cn[rn].call(this,arguments[1]);else for(var qn=Array.prototype.slice.call(arguments,1),tr=cn.length,wn=0;wn<tr;++wn)cn[wn].apply(this,qn)},Be.dispose=function(){this.listeners={}},Be.pipe=function(Lt){this.on("data",function(cn){Lt.push(cn)})},Ve}(),S=null,x=function(){function Ve(Wt){S||(S=function(){var rn,qn,tr,Zn,ps,ks,cu,Is,Be=[[[],[],[],[],[]],[[],[],[],[],[]]],Wt=Be[0],Lt=Be[1],cn=Wt[4],hn=Lt[4],wn=[],_n=[];for(rn=0;rn<256;rn++)_n[(wn[rn]=rn<<1^283*(rn>>7))^rn]=rn;for(qn=tr=0;!cn[qn];qn^=Zn||1,tr=_n[tr]||1)for(cn[qn]=ks=(ks=tr^tr<<1^tr<<2^tr<<3^tr<<4)>>8^255&ks^99,hn[ks]=qn,Is=16843009*wn[ps=wn[Zn=wn[qn]]]^65537*ps^257*Zn^16843008*qn,cu=257*wn[ks]^16843008*ks,rn=0;rn<4;rn++)Wt[rn][qn]=cu=cu<<24^cu>>>8,Lt[rn][ks]=Is=Is<<24^Is>>>8;for(rn=0;rn<5;rn++)Wt[rn]=Wt[rn].slice(0),Lt[rn]=Lt[rn].slice(0);return Be}()),this._tables=[[S[0][0].slice(),S[0][1].slice(),S[0][2].slice(),S[0][3].slice(),S[0][4].slice()],[S[1][0].slice(),S[1][1].slice(),S[1][2].slice(),S[1][3].slice(),S[1][4].slice()]];var Lt,cn,hn,rn=this._tables[0][4],qn=this._tables[1],tr=Wt.length,wn=1;if(4!==tr&&6!==tr&&8!==tr)throw new Error("Invalid aes key size");var _n=Wt.slice(0),Zn=[];for(this._key=[_n,Zn],Lt=tr;Lt<4*tr+28;Lt++)hn=_n[Lt-1],(Lt%tr==0||8===tr&&Lt%tr==4)&&(hn=rn[hn>>>24]<<24^rn[hn>>16&255]<<16^rn[hn>>8&255]<<8^rn[255&hn],Lt%tr==0&&(hn=hn<<8^hn>>>24^wn<<24,wn=wn<<1^283*(wn>>7))),_n[Lt]=_n[Lt-tr]^hn;for(cn=0;Lt;cn++,Lt--)hn=_n[3&cn?Lt:Lt-4],Zn[cn]=Lt<=4||cn<4?hn:qn[0][rn[hn>>>24]]^qn[1][rn[hn>>16&255]]^qn[2][rn[hn>>8&255]]^qn[3][rn[255&hn]]}return Ve.prototype.decrypt=function(Lt,cn,hn,rn,qn,tr){var ks,cu,Is,Hl,wn=this._key[1],_n=Lt^wn[0],Zn=rn^wn[1],ps=hn^wn[2],Oo=cn^wn[3],yf=wn.length/4-2,Nu=4,$l=this._tables[1],za=$l[0],Dc=$l[1],Qo=$l[2],Tu=$l[3],Fd=$l[4];for(Hl=0;Hl<yf;Hl++)ks=za[_n>>>24]^Dc[Zn>>16&255]^Qo[ps>>8&255]^Tu[255&Oo]^wn[Nu],cu=za[Zn>>>24]^Dc[ps>>16&255]^Qo[Oo>>8&255]^Tu[255&_n]^wn[Nu+1],Is=za[ps>>>24]^Dc[Oo>>16&255]^Qo[_n>>8&255]^Tu[255&Zn]^wn[Nu+2],Oo=za[Oo>>>24]^Dc[_n>>16&255]^Qo[Zn>>8&255]^Tu[255&ps]^wn[Nu+3],Nu+=4,_n=ks,Zn=cu,ps=Is;for(Hl=0;Hl<4;Hl++)qn[(3&-Hl)+tr]=Fd[_n>>>24]<<24^Fd[Zn>>16&255]<<16^Fd[ps>>8&255]<<8^Fd[255&Oo]^wn[Nu++],ks=_n,_n=Zn,Zn=ps,ps=Oo,Oo=ks},Ve}(),V=function(Ve){function Be(){var Lt;return(Lt=Ve.call(this,o)||this).jobs=[],Lt.delay=1,Lt.timeout_=null,Lt}n(Be,Ve);var Wt=Be.prototype;return Wt.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Wt.push=function(cn){this.jobs.push(cn),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Be}(o),re=function(Be){return Be<<24|(65280&Be)<<8|(16711680&Be)>>8|Be>>>24},De=function(){function Ve(Wt,Lt,cn,hn){var rn=Ve.STEP,qn=new Int32Array(Wt.buffer),tr=new Uint8Array(Wt.byteLength),wn=0;for(this.asyncStream_=new V,this.asyncStream_.push(this.decryptChunk_(qn.subarray(wn,wn+rn),Lt,cn,tr)),wn=rn;wn<qn.length;wn+=rn)cn=new Uint32Array([re(qn[wn-4]),re(qn[wn-3]),re(qn[wn-2]),re(qn[wn-1])]),this.asyncStream_.push(this.decryptChunk_(qn.subarray(wn,wn+rn),Lt,cn,tr));this.asyncStream_.push(function(){hn(null,function h(Ve){return Ve.subarray(0,Ve.byteLength-Ve[Ve.byteLength-1])}(tr))})}return Ve.prototype.decryptChunk_=function(Lt,cn,hn,rn){return function(){var qn=function(Be,Wt,Lt){var tr,wn,_n,Zn,ps,Oo,ks,cu,Is,cn=new Int32Array(Be.buffer,Be.byteOffset,Be.byteLength>>2),hn=new x(Array.prototype.slice.call(Wt)),rn=new Uint8Array(Be.byteLength),qn=new Int32Array(rn.buffer);for(tr=Lt[0],wn=Lt[1],_n=Lt[2],Zn=Lt[3],Is=0;Is<cn.length;Is+=4)ps=re(cn[Is]),Oo=re(cn[Is+1]),ks=re(cn[Is+2]),cu=re(cn[Is+3]),hn.decrypt(ps,Oo,ks,cu,qn,Is),qn[Is]=re(qn[Is]^tr),qn[Is+1]=re(qn[Is+1]^wn),qn[Is+2]=re(qn[Is+2]^_n),qn[Is+3]=re(qn[Is+3]^Zn),tr=ps,wn=Oo,_n=ks,Zn=cu;return rn}(Lt,cn,hn);rn.set(qn,Lt.byteOffset)}},a(Ve,null,[{key:"STEP",get:function(){return 32e3}}]),Ve}();self.onmessage=function(Ve){var Be=Ve.data,Wt=new Uint8Array(Be.encrypted.bytes,Be.encrypted.byteOffset,Be.encrypted.byteLength),Lt=new Uint32Array(Be.key.bytes,Be.key.byteOffset,Be.key.byteLength/4),cn=new Uint32Array(Be.iv.bytes,Be.iv.byteOffset,Be.iv.byteLength/4);new De(Wt,Lt,cn,function(hn,rn){self.postMessage(function(Be){var Wt={};return Object.keys(Be).forEach(function(Lt){var cn=Be[Lt];Wt[Lt]=ArrayBuffer.isView(cn)?{bytes:cn.buffer,byteOffset:cn.byteOffset,byteLength:cn.byteLength}:cn}),Wt}({source:Be.source,decrypted:rn}),[rn.buffer])})}})),V0=Kf(U0),sm=function(l){var a=l.default?"main":"alternative";return l.characteristics&&l.characteristics.indexOf("public.accessibility.describes-video")>=0&&(a="main-desc"),a},Pd=function(l,a){l.abort(),l.pause(),a&&a.activePlaylistLoader&&(a.activePlaylistLoader.pause(),a.activePlaylistLoader=null)},Sc=function(l,a){a.activePlaylistLoader=l,l.load()},ng={AUDIO:function(l,a){return function(){var n=a.mediaTypes[l],o=a.blacklistCurrentPlaylist;Pd(a.segmentLoaders[l],n);var h=n.activeTrack(),y=n.activeGroup(),S=(y.filter(function(re){return re.default})[0]||y[0]).id,x=n.tracks[S];if(h!==x){for(var V in Z.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[V].enabled=n.tracks[V]===x;n.onTrackChanged()}else o({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(l,a){return function(){var u=a.segmentLoaders[l],n=a.mediaTypes[l];Z.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Pd(u,n);var o=n.activeTrack();o&&(o.mode="disabled"),n.onTrackChanged()}}},om={AUDIO:function(l,a,u){if(a){var n=u.tech,o=u.requestOptions,h=u.segmentLoaders[l];a.on("loadedmetadata",function(){var y=a.media();h.playlist(y,o),(!n.paused()||y.endList&&"none"!==n.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),o),n.paused()||h.load()}),a.on("error",ng[l](l,u))}},SUBTITLES:function(l,a,u){var n=u.tech,o=u.requestOptions,h=u.segmentLoaders[l],y=u.mediaTypes[l];a.on("loadedmetadata",function(){var S=a.media();h.playlist(S,o),h.track(y.activeTrack()),(!n.paused()||S.endList&&"none"!==n.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),o),n.paused()||h.load()}),a.on("error",ng[l](l,u))}},sp={AUDIO:function(l,a){var u=a.vhs,n=a.sourceType,o=a.segmentLoaders[l],h=a.requestOptions,y=a.master.mediaGroups,S=a.mediaTypes[l],x=S.groups,V=S.tracks,re=S.logger_,ee=a.masterPlaylistLoader,De=Hf(ee.master);for(var ze in(!y[l]||0===Object.keys(y[l]).length)&&(y[l]={main:{default:{default:!0}}},De&&(y[l].main.default.playlists=ee.master.playlists)),y[l])for(var Ve in x[ze]||(x[ze]=[]),y[l][ze]){var Be=y[l][ze][Ve],Wt=void 0;if(De?(re("AUDIO group '"+ze+"' label '"+Ve+"' is a master playlist"),Be.isMasterPlaylist=!0,Wt=null):Wt="vhs-json"===n&&Be.playlists?new Dd(Be.playlists[0],u,h):Be.resolvedUri?new Dd(Be.resolvedUri,u,h):Be.playlists&&"dash"===n?new xd(Be.playlists[0],u,h,ee):null,Be=Z.mergeOptions({id:Ve,playlistLoader:Wt},Be),om[l](l,Be.playlistLoader,a),x[ze].push(Be),typeof V[Ve]>"u"){var Lt=new Z.AudioTrack({id:Ve,kind:sm(Be),enabled:!1,language:Be.language,default:Be.default,label:Ve});V[Ve]=Lt}}o.on("error",ng[l](l,a))},SUBTITLES:function(l,a){var u=a.tech,n=a.vhs,o=a.sourceType,h=a.segmentLoaders[l],y=a.requestOptions,S=a.master.mediaGroups,x=a.mediaTypes[l],V=x.groups,re=x.tracks,ee=a.masterPlaylistLoader;for(var De in S[l])for(var ze in V[De]||(V[De]=[]),S[l][De])if(!S[l][De][ze].forced){var Ve=S[l][De][ze],Be=void 0;if("hls"===o)Be=new Dd(Ve.resolvedUri,n,y);else if("dash"===o){if(!Ve.playlists.filter(function(cn){return cn.excludeUntil!==1/0}).length)return;Be=new xd(Ve.playlists[0],n,y,ee)}else"vhs-json"===o&&(Be=new Dd(Ve.playlists?Ve.playlists[0]:Ve.resolvedUri,n,y));if(Ve=Z.mergeOptions({id:ze,playlistLoader:Be},Ve),om[l](l,Ve.playlistLoader,a),V[De].push(Ve),typeof re[ze]>"u"){var Lt=u.addRemoteTextTrack({id:ze,kind:"subtitles",default:Ve.default&&Ve.autoselect,language:Ve.language,label:ze},!1).track;re[ze]=Lt}}h.on("error",ng[l](l,a))},"CLOSED-CAPTIONS":function(l,a){var u=a.tech,n=a.master.mediaGroups,o=a.mediaTypes[l],h=o.groups,y=o.tracks;for(var S in n[l])for(var x in h[S]||(h[S]=[]),n[l][S]){var V=n[l][S][x];if(/^(?:CC|SERVICE)/.test(V.instreamId)){var re=u.options_.vhs&&u.options_.vhs.captionServices||{},ee={label:x,language:V.language,instreamId:V.instreamId,default:V.default&&V.autoselect};if(re[ee.instreamId]&&(ee=Z.mergeOptions(ee,re[ee.instreamId])),void 0===ee.default&&delete ee.default,h[S].push(Z.mergeOptions({id:x},V)),typeof y[x]>"u"){var De=u.addRemoteTextTrack({id:ee.instreamId,kind:"captions",default:ee.default,language:ee.language,label:ee.label},!1).track;y[x]=De}}}}},am=function m(l,a){for(var u=0;u<l.length;u++)if(nf(a,l[u])||l[u].playlists&&m(l[u].playlists,a))return!0;return!1},um={AUDIO:function(l,a){return function(){var u=a.mediaTypes[l].tracks;for(var n in u)if(u[n].enabled)return u[n];return null}},SUBTITLES:function(l,a){return function(){var u=a.mediaTypes[l].tracks;for(var n in u)if("showing"===u[n].mode||"hidden"===u[n].mode)return u[n];return null}}},Ey=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],lm=function(l){return this.audioSegmentLoader_[l]+this.mainSegmentLoader_[l]},pv=function(m){function l(u){var n;n=m.call(this)||this;var o=u.src,h=u.handleManifestRedirects,y=u.withCredentials,S=u.tech,x=u.bandwidth,V=u.externVhs,re=u.useCueTags,ee=u.blacklistDuration,De=u.enableLowInitialPlaylist,ze=u.sourceType,Ve=u.cacheEncryptionKeys,Be=u.experimentalBufferBasedABR,Wt=u.experimentalLeastPixelDiffSelector;if(!o)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Lt=u.maxPlaylistRetries;(null===Lt||typeof Lt>"u")&&(Lt=1/0),Wr=V,n.experimentalBufferBasedABR=!!Be,n.experimentalLeastPixelDiffSelector=!!Wt,n.withCredentials=y,n.tech_=S,n.vhs_=S.vhs,n.sourceType_=ze,n.useCueTags_=re,n.blacklistDuration=ee,n.maxPlaylistRetries=Lt,n.enableLowInitialPlaylist=De,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:y,handleManifestRedirects:h,maxPlaylistRetries:Lt,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var l={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){l[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Vl,activeTrack:Vl,getActiveGroup:Vl,onGroupChanged:Vl,onTrackChanged:Vl,lastTrack_:null,logger_:zn("MediaGroups["+a+"]")}}),l}(),n.mediaSource=new(ge().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(et(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(et(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(et(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Z.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new j0(u),n.segmentMetadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new V0,n.sourceUpdater_=new $a(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new B0;var cn={vhs:n.vhs_,parse708captions:u.parse708captions,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:x,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:Ve,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:u.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new xd(o,n.vhs_,n.requestOptions_):new Dd(o,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Cc(Z.mergeOptions(cn,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),u),n.audioSegmentLoader_=new Cc(Z.mergeOptions(cn,{loaderType:"audio"}),u),n.subtitleSegmentLoader_=new tg(Z.mergeOptions(cn,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),u),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),Ey.forEach(function(rn){n[rn+"_"]=lm.bind(et(n),rn)}),n.logger_=zn("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var hn="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(hn,function(){var rn=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-rn,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n}W(l,m);var a=l.prototype;return a.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},a.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},a.appendsToLoadedData_=function(){var n=this.mainAppendsToLoadedData_(),o=this.audioAppendsToLoadedData_();return-1===n||-1===o?-1:n+o},a.timeToLoadedData_=function(){return this.timeToLoadedData__},a.checkABR_=function(){var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,"abr")},a.switchMedia_=function(n,o,h){var y=this.media(),S=y&&(y.id||y.uri),x=n.id||n.uri;S&&S!==x&&(this.logger_("switch media "+S+" -> "+x+" from "+o),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+o})),this.masterPlaylistLoader_.media(n,h)},a.startABRTimer_=function(){var n=this;this.stopABRTimer_(),this.abrTimer_=ge().setInterval(function(){return n.checkABR_()},250)},a.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ge().clearInterval(this.abrTimer_),this.abrTimer_=null)},a.getAudioTrackPlaylists_=function(){var n=this.master(),o=n&&n.playlists||[];if(!n||!n.mediaGroups||!n.mediaGroups.AUDIO)return o;var S,h=n.mediaGroups.AUDIO,y=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)S=this.mediaTypes_.AUDIO.activeTrack();else{var x=h.main||y.length&&h[y[0]];for(var V in x)if(x[V].default){S={label:V};break}}if(!S)return o;var re=[];for(var ee in h)if(h[ee][S.label]){var De=h[ee][S.label];if(De.playlists&&De.playlists.length)re.push.apply(re,De.playlists);else if(De.uri)re.push(De);else if(n.playlists.length)for(var ze=0;ze<n.playlists.length;ze++){var Ve=n.playlists[ze];Ve.attributes&&Ve.attributes.AUDIO&&Ve.attributes.AUDIO===ee&&re.push(Ve)}}return re.length?re:o},a.setupMasterPlaylistLoaderListeners_=function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var o=n.masterPlaylistLoader_.media(),h=1.5*o.targetDuration*1e3;n.requestOptions_.timeout=fh(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?0:h,o.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(o,n.requestOptions_),n.mainSegmentLoader_.load()),function(l){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(ze){sp[ze](ze,l)});var a=l.mediaTypes,u=l.masterPlaylistLoader,n=l.tech,o=l.vhs,h=l.segmentLoaders,y=h.AUDIO,S=h.main;["AUDIO","SUBTITLES"].forEach(function(ze){a[ze].activeGroup=function(l,a){return function(u){var o=a.mediaTypes[l].groups,h=a.masterPlaylistLoader.media();if(!h)return null;var y=null;h.attributes[l]&&(y=o[h.attributes[l]]);var S=Object.keys(o);if(!y)if("AUDIO"===l&&S.length>1&&Hf(a.master))for(var x=0;x<S.length;x++){var V=o[S[x]];if(am(V,h)){y=V;break}}else o.main?y=o.main:1===S.length&&(y=o[S[0]]);return typeof u>"u"?y:null!==u&&y&&y.filter(function(re){return re.id===u.id})[0]||null}}(ze,l),a[ze].activeTrack=um[ze](ze,l),a[ze].onGroupChanged=function(l,a){return function(){var u=a.segmentLoaders,n=u[l],o=u.main,h=a.mediaTypes[l],y=h.activeTrack(),S=h.getActiveGroup(),x=h.activePlaylistLoader,V=h.lastGroup_;if((!S||!V||S.id!==V.id)&&(h.lastGroup_=S,h.lastTrack_=y,Pd(n,h),S&&!S.isMasterPlaylist)){if(!S.playlistLoader)return void(x&&o.resetEverything());n.resyncLoader(),Sc(S.playlistLoader,h)}}}(ze,l),a[ze].onGroupChanging=function(l,a){return function(){var u=a.segmentLoaders[l];a.mediaTypes[l].lastGroup_=null,u.abort(),u.pause()}}(ze,l),a[ze].onTrackChanged=function(l,a){return function(){var u=a.masterPlaylistLoader,n=a.segmentLoaders,o=n[l],h=n.main,y=a.mediaTypes[l],S=y.activeTrack(),x=y.getActiveGroup(),V=y.activePlaylistLoader,re=y.lastTrack_;if((!re||!S||re.id!==S.id)&&(y.lastGroup_=x,y.lastTrack_=S,Pd(o,y),x)){if(x.isMasterPlaylist){if(!S||!re||S.id===re.id)return;var ee=a.vhs.masterPlaylistController_,De=ee.selectPlaylist();if(ee.media()===De)return;return y.logger_("track change. Switching master audio from "+re.id+" to "+S.id),u.pause(),h.resetEverything(),void ee.fastQualityChange_(De)}if("AUDIO"===l){if(!x.playlistLoader)return h.setAudio(!0),void h.resetEverything();o.setAudio(!0),h.setAudio(!1)}if(V===x.playlistLoader)return void Sc(x.playlistLoader,y);o.track&&o.track(S),o.resetEverything(),Sc(x.playlistLoader,y)}}}(ze,l),a[ze].getActiveGroup=function(l,a){var u=a.mediaTypes;return function(){var n=u[l].activeTrack();return n?u[l].activeGroup(n):null}}(ze,l)});var x=a.AUDIO.activeGroup();if(x){var V=(x.filter(function(ze){return ze.default})[0]||x[0]).id;a.AUDIO.tracks[V].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged(),a.AUDIO.getActiveGroup().playlistLoader?(S.setAudio(!1),y.setAudio(!0)):S.setAudio(!0)}u.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(ze){return a[ze].onGroupChanged()})}),u.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(ze){return a[ze].onGroupChanging()})});var ee=function(){a.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var De in n.audioTracks().addEventListener("change",ee),n.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),o.on("dispose",function(){n.audioTracks().removeEventListener("change",ee),n.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),a.AUDIO.tracks)n.audioTracks().addTrack(a.AUDIO.tracks[De])}({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,vhs:n.vhs_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),o),n.setupFirstPlay(),!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()?n.trigger("selectedinitialmedia"):n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){n.loadOnPlay_&&n.tech_.off("play",n.loadOnPlay_);var o=n.masterPlaylistLoader_.media();if(!o){var h;if(n.excludeUnsupportedVariants_(),n.enableLowInitialPlaylist&&(h=n.selectInitialPlaylist()),h||(h=n.selectPlaylist()),!h||!n.shouldSwitchToMedia_(h))return;if(n.initialMedia_=h,n.switchMedia_(n.initialMedia_,"initial"),"vhs-json"!==n.sourceType_||!n.initialMedia_.segments)return;o=n.initialMedia_}n.handleUpdatedMediaPlaylist(o)}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var o=n.masterPlaylistLoader_.media(),h=1.5*o.targetDuration*1e3;n.requestOptions_.timeout=fh(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?0:h,n.mainSegmentLoader_.playlist(o,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var o=n.masterPlaylistLoader_.media();"playlist-unchanged"!==o.lastExcludeReason_&&n.stuckAtPlaylistEnd_(o)&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},a.handleUpdatedMediaPlaylist=function(n){this.useCueTags_&&this.updateAdCues_(n),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.updateDuration(!n.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},a.triggerPresenceUsage_=function(n,o){var h=n.mediaGroups||{},y=!0,S=Object.keys(h.AUDIO);for(var x in h.AUDIO)for(var V in h.AUDIO[x])h.AUDIO[x][V].uri||(y=!1);y&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Wr.Playlist.isAes(o)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(h.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},a.shouldSwitchToMedia_=function(n){var o=this.masterPlaylistLoader_.media(),h=this.tech_.buffered();return function(l){var a=l.currentPlaylist,u=l.nextPlaylist,n=l.forwardBuffer,o=l.bufferLowWaterLine,h=l.bufferHighWaterLine,y=l.duration,S=l.experimentalBufferBasedABR,x=l.log;if(!u)return Z.log.warn("We received no playlist to switch to. Please check your stream."),!1;var V="allowing switch "+(a&&a.id||"null")+" -> "+u.id;if(!a)return x(V+" as current playlist is not set"),!0;if(u.id===a.id)return!1;if(!a.endList)return x(V+" as current playlist is live"),!0;var re=S?ti.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ti.MAX_BUFFER_LOW_WATER_LINE;if(y<re)return x(V+" as duration < max low water line ("+y+" < "+re+")"),!0;var ee=u.attributes.BANDWIDTH,De=a.attributes.BANDWIDTH;if(ee<De&&(!S||n<h)){var ze=V+" as next bandwidth < current bandwidth ("+ee+" < "+De+")";return S&&(ze+=" and forwardBuffer < bufferHighWaterLine ("+n+" < "+h+")"),x(ze),!0}if((!S||ee>De)&&n>=o){var Ve=V+" as forwardBuffer >= bufferLowWaterLine ("+n+" >= "+o+")";return S&&(Ve+=" and next bandwidth > current bandwidth ("+ee+" > "+De+")"),x(Ve),!0}return x("not "+V+" as no switching criteria met"),!1}({currentPlaylist:o,nextPlaylist:n,forwardBuffer:h.length?h.end(h.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},a.setupSegmentLoaderListeners_=function(){var n=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var h=n.selectPlaylist();n.shouldSwitchToMedia_(h)&&n.switchMedia_(h,"bandwidthupdate"),n.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){n.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){n.error=n.mainSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){n.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),n.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){n.error=n.audioSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){n.logger_("main segment loader ended"),n.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){n.experimentalBufferBasedABR||(n.delegateLoaders_("all",["abort"]),n.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var o=function(){if(!n.sourceUpdater_.hasCreatedSourceBuffers())return n.tryToCreateSourceBuffers_();var y=n.getCodecsOrExclude_();y&&n.sourceUpdater_.addOrChangeSourceBuffers(y)};this.mainSegmentLoader_.on("trackinfo",o),this.audioSegmentLoader_.on("trackinfo",o),this.mainSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){n.logger_("audioSegmentLoader ended"),n.onEndOfStream()})},a.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},a.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},a.smoothQualityChange_=function(n){void 0===n&&(n=this.selectPlaylist()),this.fastQualityChange_(n)},a.fastQualityChange_=function(n){var o=this;void 0===n&&(n=this.selectPlaylist()),n!==this.masterPlaylistLoader_.media()?(this.switchMedia_(n,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){o.tech_.setCurrentTime(Z.browser.IE_VERSION||Z.browser.IS_EDGE?o.tech_.currentTime()+.04:o.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},a.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var n=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<n.start(0))return this.tech_.setCurrentTime(n.end(n.length-1))}},a.setupFirstPlay=function(){var n=this,o=this.masterPlaylistLoader_.media();if(!o||this.tech_.paused()||this.hasPlayed_)return!1;if(!o.endList){var h=this.seekable();if(!h.length)return!1;if(Z.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){n.trigger("firstplay"),n.tech_.setCurrentTime(h.end(0)),n.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},a.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var n=this.tech_.play();typeof n<"u"&&"function"==typeof n.then&&n.then(null,function(o){})}this.trigger("sourceopen")},a.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var n=this.inbandTextTracks_.metadataTrack_.cues;if(n&&n.length){var o=this.duration();n[n.length-1].endTime=isNaN(o)||Math.abs(o)===1/0?Number.MAX_VALUE:o}}},a.handleDurationChange_=function(){this.tech_.trigger("durationchange")},a.onEndOfStream=function(){var n=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var o=this.mainSegmentLoader_.getCurrentMediaInfo_();n=!o||o.hasVideo?n&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}n&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},a.stuckAtPlaylistEnd_=function(n){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(n,this.duration());if(null===h)return!1;var y=Wr.Playlist.playlistEnd(n,h),S=this.tech_.currentTime(),x=this.tech_.buffered();if(!x.length)return y-S<=Zi;var V=x.end(x.length-1);return V-S<=Zi&&y-V<=Zi},a.blacklistCurrentPlaylist=function(n,o){void 0===n&&(n={});var h=n.playlist||this.masterPlaylistLoader_.media();if(o=o||n.blacklistDuration||this.blacklistDuration,!h)return this.error=n,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var re,y=this.masterPlaylistLoader_.master.playlists,S=y.filter(ml),x=1===S.length&&S[0]===h;if(1===y.length&&o!==1/0)return Z.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(x);if(x){var V=!1;y.forEach(function(Wt){if(Wt!==h){var Lt=Wt.excludeUntil;typeof Lt<"u"&&Lt!==1/0&&(V=!0,delete Wt.excludeUntil)}}),V&&(Z.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}re=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*o,h.excludeUntil=re,n.reason&&(h.lastExcludeReason_=n.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var ee=this.selectPlaylist();if(!ee)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(n.internal?this.logger_:Z.log.warn)((n.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(n.message?" "+n.message:"")+" Switching to playlist "+ee.id+"."),ee.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),ee.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var Ve=ee.targetDuration/2*1e3||5e3,Be="number"==typeof ee.lastRequest&&Date.now()-ee.lastRequest<=Ve;return this.switchMedia_(ee,"exclude",x||Be)},a.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},a.delegateLoaders_=function(n,o){var h=this,y=[],S="all"===n;(S||"main"===n)&&y.push(this.masterPlaylistLoader_);var x=[];(S||"audio"===n)&&x.push("AUDIO"),(S||"subtitle"===n)&&(x.push("CLOSED-CAPTIONS"),x.push("SUBTITLES")),x.forEach(function(V){var re=h.mediaTypes_[V]&&h.mediaTypes_[V].activePlaylistLoader;re&&y.push(re)}),["main","audio","subtitle"].forEach(function(V){var re=h[V+"SegmentLoader_"];re&&(n===V||"all"===n)&&y.push(re)}),y.forEach(function(V){return o.forEach(function(re){"function"==typeof V[re]&&V[re]()})})},a.setCurrentTime=function(n){var o=Ul(this.tech_.buffered(),n);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?o&&o.length?n:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},a.duration=function(){if(!this.masterPlaylistLoader_)return 0;var n=this.masterPlaylistLoader_.media();return n?n.endList?this.mediaSource?this.mediaSource.duration:Wr.Playlist.duration(n):1/0:0},a.seekable=function(){return this.seekable_},a.onSyncInfoUpdate_=function(){var n;if(this.masterPlaylistLoader_){var o=this.masterPlaylistLoader_.media();if(o){var h=this.syncController_.getExpiredTime(o,this.duration());if(null!==h){var x,V,y=this.masterPlaylistLoader_.master,S=Wr.Playlist.seekable(o,h,Wr.Playlist.liveEdgeDelay(y,o));0===S.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(o=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(o,this.duration()))||0===(n=Wr.Playlist.seekable(o,h,Wr.Playlist.liveEdgeDelay(y,o))).length)||(this.seekable_&&this.seekable_.length&&(x=this.seekable_.end(0),V=this.seekable_.start(0)),this.seekable_=n?n.start(0)>S.end(0)||S.start(0)>n.end(0)?S:Z.createTimeRanges([[n.start(0)>S.start(0)?n.start(0):S.start(0),n.end(0)<S.end(0)?n.end(0):S.end(0)]]):S,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==x||this.seekable_.start(0)!==V)&&(this.logger_("seekable updated ["+Kc(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},a.updateDuration=function(n){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,n),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(n){var o=this.seekable();if(!o.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<o.end(o.length-1))&&this.sourceUpdater_.setDuration(o.end(o.length-1))}else{var h=this.tech_.buffered(),y=Wr.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(y=Math.max(y,h.end(h.length-1))),this.mediaSource.duration!==y&&this.sourceUpdater_.setDuration(y)}},a.dispose=function(){var n=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(o){var h=n.mediaTypes_[o].groups;for(var y in h)h[y].forEach(function(S){S.playlistLoader&&S.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},a.master=function(){return this.masterPlaylistLoader_.master},a.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},a.areMediaTypesKnown_=function(){var n=!!this.mediaTypes_.AUDIO.activePlaylistLoader,o=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!n||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!o||!h)},a.getCodecsOrExclude_=function(){var n=this,o={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};o.video=o.main;var h=qp(this.master(),this.media()),y={},S=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(o.main.hasVideo&&(y.video=h.video||o.main.videoCodec||"avc1.4d400d"),o.main.isMuxed&&(y.video+=","+(h.audio||o.main.audioCodec||Ui)),(o.main.hasAudio&&!o.main.isMuxed||o.audio.hasAudio||S)&&(y.audio=h.audio||o.main.audioCodec||o.audio.audioCodec||Ui,o.audio.isFmp4=o.main.hasAudio&&!o.main.isMuxed?o.main.isFmp4:o.audio.isFmp4),y.audio||y.video){var re,V={};if(["video","audio"].forEach(function(Ve){if(y.hasOwnProperty(Ve)&&!function(Be,Wt){return Be?Dr(Wt):ar(Wt)}(o[Ve].isFmp4,y[Ve])){var Be=o[Ve].isFmp4?"browser":"muxer";V[Be]=V[Be]||[],V[Be].push(y[Ve]),"audio"===Ve&&(re=Be)}}),S&&re&&this.media().attributes.AUDIO){var ee=this.media().attributes.AUDIO;this.master().playlists.forEach(function(Ve){(Ve.attributes&&Ve.attributes.AUDIO)===ee&&Ve!==n.media()&&(Ve.excludeUntil=1/0)}),this.logger_("excluding audio group "+ee+" as "+re+' does not support codec(s): "'+y.audio+'"')}if(!Object.keys(V).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var ze=[];if(["video","audio"].forEach(function(Ve){var Be=(Sr(n.sourceUpdater_.codecs[Ve]||"")[0]||{}).type,Wt=(Sr(y[Ve]||"")[0]||{}).type;Be&&Wt&&Be.toLowerCase()!==Wt.toLowerCase()&&ze.push('"'+n.sourceUpdater_.codecs[Ve]+'" -> "'+y[Ve]+'"')}),ze.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+ze.join(", ")+".",blacklistDuration:1/0,internal:!0})}return y}var De=Object.keys(V).reduce(function(Ve,Be){return Ve&&(Ve+=", "),Ve+(Be+' does not support codec(s): "')+V[Be].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:De,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},a.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var n=this.getCodecsOrExclude_();if(n){this.sourceUpdater_.createSourceBuffers(n);var o=[n.video,n.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(o)}}},a.excludeUnsupportedVariants_=function(){var n=this,o=this.master().playlists,h=[];Object.keys(o).forEach(function(y){var S=o[y];if(-1===h.indexOf(S.id)){h.push(S.id);var x=qp(n.master,S),V=[];x.audio&&!ar(x.audio)&&!Dr(x.audio)&&V.push("audio codec "+x.audio),x.video&&!ar(x.video)&&!Dr(x.video)&&V.push("video codec "+x.video),x.text&&"stpp.ttml.im1t"===x.text&&V.push("text codec "+x.text),V.length&&(S.excludeUntil=1/0,n.logger_("excluding "+S.id+" for unsupported: "+V.join(", ")))}})},a.excludeIncompatibleVariants_=function(n){var o=this,h=[],y=this.master().playlists,S=av(Sr(n)),x=Wp(S),V=S.video&&Sr(S.video)[0]||null,re=S.audio&&Sr(S.audio)[0]||null;Object.keys(y).forEach(function(ee){var De=y[ee];if(-1===h.indexOf(De.id)&&De.excludeUntil!==1/0){h.push(De.id);var ze=[],Ve=qp(o.masterPlaylistLoader_.master,De),Be=Wp(Ve);if(Ve.audio||Ve.video){if(Be!==x&&ze.push('codec count "'+Be+'" !== "'+x+'"'),!o.sourceUpdater_.canChangeType()){var Wt=Ve.video&&Sr(Ve.video)[0]||null,Lt=Ve.audio&&Sr(Ve.audio)[0]||null;Wt&&V&&Wt.type.toLowerCase()!==V.type.toLowerCase()&&ze.push('video codec "'+Wt.type+'" !== "'+V.type+'"'),Lt&&re&&Lt.type.toLowerCase()!==re.type.toLowerCase()&&ze.push('audio codec "'+Lt.type+'" !== "'+re.type+'"')}ze.length&&(De.excludeUntil=1/0,o.logger_("blacklisting "+De.id+": "+ze.join(" && ")))}}})},a.updateAdCues_=function(n){var o=0,h=this.seekable();h.length&&(o=h.start(0)),function(l,a,u){if(void 0===u&&(u=0),l.segments)for(var o,n=u,h=0;h<l.segments.length;h++){var y=l.segments[h];if(o||(o=np(a,n+y.duration/2)),o){if("cueIn"in y){o.endTime=n,o.adEndTime=n,n+=y.duration,o=null;continue}if(n<o.endTime){n+=y.duration;continue}o.endTime+=y.duration}else if("cueOut"in y&&((o=new(ge().VTTCue)(n,n+y.duration,y.cueOut)).adStartTime=n,o.adEndTime=n+parseFloat(y.cueOut),a.addCue(o)),"cueOutCont"in y){var S=y.cueOutCont.split("/").map(parseFloat),x=S[0],V=S[1];(o=new(ge().VTTCue)(n,n+y.duration,"")).adStartTime=n-x,o.adEndTime=o.adStartTime+V,a.addCue(o)}n+=y.duration}}(n,this.cueTagsTrack_,o)},a.goalBufferLength=function(){var n=this.tech_.currentTime(),o=ti.GOAL_BUFFER_LENGTH,h=ti.GOAL_BUFFER_LENGTH_RATE,y=Math.max(o,ti.MAX_GOAL_BUFFER_LENGTH);return Math.min(o+n*h,y)},a.bufferLowWaterLine=function(){var n=this.tech_.currentTime(),o=ti.BUFFER_LOW_WATER_LINE,h=ti.BUFFER_LOW_WATER_LINE_RATE,y=Math.max(o,ti.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(o,ti.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(o+n*h,this.experimentalBufferBasedABR?S:y)},a.bufferHighWaterLine=function(){return ti.BUFFER_HIGH_WATER_LINE},l}(Z.EventTarget),gv=function(l,a,u){var n=l.masterPlaylistController_,y=n[(l.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(a.attributes){var S=a.attributes.RESOLUTION;this.width=S&&S.width,this.height=S&&S.height,this.bandwidth=a.attributes.BANDWIDTH}this.codecs=qp(n.master(),a),this.playlist=a,this.id=u,this.enabled=function(l,a,u){return function(n){var o=l.master.playlists[a],h=tf(o),y=ml(o);return typeof n>"u"?y:(n?delete o.disabled:o.disabled=!0,n!==y&&!h&&(u(),l.trigger(n?"renditionenabled":"renditiondisabled")),n)}}(l.playlists,a.id,y)},Ch=["seeking","seeked","pause","playing","error"],Sy=function(){function m(a){var u=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=zn("PlaybackWatcher"),this.logger_("initialize");var n=function(){return u.monitorCurrentTime_()},o=function(){return u.monitorCurrentTime_()},h=function(){return u.techWaiting_()},y=function(){return u.cancelTimer_()},S=function(){return u.fixesBadSeeks_()},x=this.masterPlaylistController_,V=["main","subtitle","audio"],re={};V.forEach(function(ee){re[ee]={reset:function(){return u.resetSegmentDownloads_(ee)},updateend:function(){return u.checkSegmentDownloads_(ee)}},x[ee+"SegmentLoader_"].on("appendsdone",re[ee].updateend),x[ee+"SegmentLoader_"].on("playlistupdate",re[ee].reset),u.tech_.on(["seeked","seeking"],re[ee].reset)}),this.tech_.on("seekablechanged",S),this.tech_.on("waiting",h),this.tech_.on(Ch,y),this.tech_.on("canplay",o),this.tech_.one("play",n),this.dispose=function(){u.logger_("dispose"),u.tech_.off("seekablechanged",S),u.tech_.off("waiting",h),u.tech_.off(Ch,y),u.tech_.off("canplay",o),u.tech_.off("play",n),V.forEach(function(ee){x[ee+"SegmentLoader_"].off("appendsdone",re[ee].updateend),x[ee+"SegmentLoader_"].off("playlistupdate",re[ee].reset),u.tech_.off(["seeked","seeking"],re[ee].reset)}),u.checkCurrentTimeTimeout_&&ge().clearTimeout(u.checkCurrentTimeTimeout_),u.cancelTimer_()}}var l=m.prototype;return l.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ge().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ge().setTimeout(this.monitorCurrentTime_.bind(this),250)},l.resetSegmentDownloads_=function(u){var n=this.masterPlaylistController_[u+"SegmentLoader_"];this[u+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+u+" loader"),this[u+"StalledDownloads_"]=0,this[u+"Buffered_"]=n.buffered_()},l.checkSegmentDownloads_=function(u){var n=this.masterPlaylistController_,o=n[u+"SegmentLoader_"],h=o.buffered_(),y=function(l,a){if(l===a)return!1;if(!l&&a||!a&&l||l.length!==a.length)return!0;for(var u=0;u<l.length;u++)if(l.start(u)!==a.start(u)||l.end(u)!==a.end(u))return!0;return!1}(this[u+"Buffered_"],h);this[u+"Buffered_"]=h,y?this.resetSegmentDownloads_(u):(this[u+"StalledDownloads_"]++,this.logger_("found #"+this[u+"StalledDownloads_"]+" "+u+" appends that did not increase buffer (possible stalled download)",{playlistId:o.playlist_&&o.playlist_.id,buffered:Mu(h)}),!(this[u+"StalledDownloads_"]<10)&&(this.logger_(u+" loader stalled download exclusion"),this.resetSegmentDownloads_(u),this.tech_.trigger({type:"usage",name:"vhs-"+u+"-download-exclusion"}),"subtitle"!==u&&n.blacklistCurrentPlaylist({message:"Excessive "+u+" segment downloading detected."},1/0)))},l.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var u=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===u&&(!n.length||u+Zi>=n.end(n.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&u===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):u===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=u)}},l.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},l.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var y,n=this.seekable(),o=this.tech_.currentTime();if(this.afterSeekableWindow_(n,o,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(y=n.end(n.length-1)),this.beforeSeekableWindow_(n,o)){var x=n.start(0);y=x+(x===n.end(0)?0:Zi)}if(typeof y<"u")return this.logger_("Trying to seek outside of seekable at time "+o+" with seekable range "+Kc(n)+". Seeking to "+y+"."),this.tech_.setCurrentTime(y),!0;var V=this.tech_.buffered();return!!function(l){var a=l.buffered,u=l.targetDuration,n=l.currentTime;return!(!a.length||a.end(0)-a.start(0)<2*u||n>a.start(0))&&a.start(0)-n<u}({buffered:V,targetDuration:this.media().targetDuration,currentTime:o})&&(y=V.start(0)+Zi,this.logger_("Buffered region starts ("+V.start(0)+")  just beyond seek point ("+o+"). Seeking to "+y+"."),this.tech_.setCurrentTime(y),!0)},l.waiting_=function(){if(!this.techWaiting_()){var u=this.tech_.currentTime(),n=this.tech_.buffered(),o=Ul(n,u);if(o.length&&u+3<=o.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(u),this.logger_("Stopped at "+u+" while inside a buffered region ["+o.start(0)+" -> "+o.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},l.techWaiting_=function(){var u=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(u,n)){var o=u.end(u.length-1);return this.logger_("Fell out of live window at time "+n+". Seeking to live point (seekable end) "+o),this.cancelTimer_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,y=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:n}))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var x=bd(y,n);if(x.length>0){var V=x.start(0)-n;return this.logger_("Stopped at "+n+", setting timer for "+V+", seeking to "+x.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*V,n),!0}return!1},l.afterSeekableWindow_=function(u,n,o,h){if(void 0===h&&(h=!1),!u.length)return!1;var y=u.end(u.length-1)+Zi;return!o.endList&&h&&(y=u.end(u.length-1)+3*o.targetDuration),n>y},l.beforeSeekableWindow_=function(u,n){return!!(u.length&&u.start(0)>0&&n<u.start(0)-this.liveRangeSafeTimeDelta)},l.videoUnderflow_=function(u){var n=u.videoBuffered,o=u.audioBuffered,h=u.currentTime;if(n){var y;if(n.length&&o.length){var S=Ul(n,h-3),x=Ul(n,h),V=Ul(o,h);V.length&&!x.length&&S.length&&(y={start:S.end(0),end:V.end(0)})}else bd(n,h).length||(y=this.gapFromVideoUnderflow_(n,h));return!!y&&(this.logger_("Encountered a gap in video from "+y.start+" to "+y.end+". Seeking to current time "+h),!0)}},l.skipTheGap_=function(u){var n=this.tech_.buffered(),o=this.tech_.currentTime(),h=bd(n,o);this.cancelTimer_(),0!==h.length&&o===u&&(this.logger_("skipTheGap_:","currentTime:",o,"scheduled currentTime:",u,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+nr),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},l.gapFromVideoUnderflow_=function(u,n){for(var o=function(l){if(l.length<2)return Z.createTimeRanges();for(var a=[],u=1;u<l.length;u++){var n=l.end(u-1),o=l.start(u);a.push([n,o])}return Z.createTimeRanges(a)}(u),h=0;h<o.length;h++){var y=o.start(h),S=o.end(h);if(n-y<4&&n-y>2)return{start:y,end:S}}return null},m}(),$0={errorInterval:30,getSource:function(l){return l(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},wy=function m(l,a){var u=0,n=0,o=Z.mergeOptions($0,a);l.ready(function(){l.trigger({type:"usage",name:"vhs-error-reload-initialized"}),l.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){n&&l.currentTime(n)},y=function(ee){null!=ee&&(n=l.duration()!==1/0&&l.currentTime()||0,l.one("loadedmetadata",h),l.src(ee),l.trigger({type:"usage",name:"vhs-error-reload"}),l.trigger({type:"usage",name:"hls-error-reload"}),l.play())},S=function(){return Date.now()-u<1e3*o.errorInterval?(l.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void l.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"==typeof o.getSource?(u=Date.now(),o.getSource.call(l,y)):void Z.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},x=function re(){l.off("loadedmetadata",h),l.off("error",S),l.off("dispose",re)};l.on("error",S),l.on("dispose",x),l.reloadSourceOnError=function(ee){x(),m(l,ee)}},Dy=function(l){wy(this,l)},Ga={PlaylistLoader:Dd,Playlist:Va,utils:I0,STANDARD_PLAYLIST_SELECTOR:_h,INITIAL_PLAYLIST_SELECTOR:function(){var l=this,a=this.playlists.master.playlists.filter(Va.isEnabled);return Ec(a,function(n,o){return yh(n,o)}),a.filter(function(n){return!!qp(l.playlists.master,n).video})[0]||null},lastBandwidthSelector:_h,movingAverageBandwidthSelector:function(l){var a=-1,u=-1;if(l<0||l>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&ge().devicePixelRatio||1;return a<0&&(a=this.systemBandwidth,u=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==u&&(a=l*this.systemBandwidth+(1-l)*a,u=this.systemBandwidth),ep(this.playlists.master,a,parseInt(vh(this.tech_.el(),"width"),10)*n,parseInt(vh(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:yh,comparePlaylistResolution:function(l,a){var u,n;return l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width&&(u=l.attributes.RESOLUTION.width),u=u||ge().Number.MAX_VALUE,a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(n=a.attributes.RESOLUTION.width),u===(n=n||ge().Number.MAX_VALUE)&&l.attributes.BANDWIDTH&&a.attributes.BANDWIDTH?l.attributes.BANDWIDTH-a.attributes.BANDWIDTH:u-n},xhr:af()};Object.keys(ti).forEach(function(m){Object.defineProperty(Ga,m,{get:function(){return Z.log.warn("using Vhs."+m+" is UNSAFE be sure you know what you are doing"),ti[m]},set:function(a){Z.log.warn("using Vhs."+m+" is UNSAFE be sure you know what you are doing"),"number"!=typeof a||a<0?Z.log.warn("value of Vhs."+m+" must be greater than or equal to 0"):ti[m]=a}})});var ig="videojs-vhs",Rd=function(l,a){for(var u=a.media(),n=-1,o=0;o<l.length;o++)if(l[o].id===u.id){n=o;break}l.selectedIndex_=n,l.trigger({selectedIndex:n,type:"change"})};Ga.canPlaySource=function(){return Z.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var wc=function(){if(!ge().localStorage)return null;var l=ge().localStorage.getItem(ig);if(!l)return null;try{return JSON.parse(l)}catch{return null}};Ga.supportsNativeHls=function(){if(!Ze()||!Ze().createElement)return!1;var m=Ze().createElement("video");return!!Z.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(m.canPlayType(a))})}(),Ga.supportsNativeDash=!!(Ze()&&Ze().createElement&&Z.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ze().createElement("video").canPlayType("application/dash+xml")),Ga.supportsTypeNatively=function(m){return"hls"===m?Ga.supportsNativeHls:"dash"===m&&Ga.supportsNativeDash},Ga.isSupported=function(){return Z.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var pm=function(m){function l(u,n,o){var h;if(h=m.call(this,n,Z.mergeOptions(o.hls,o.vhs))||this,o.hls&&Object.keys(o.hls).length&&Z.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof o.initialBandwidth&&(h.options_.bandwidth=o.initialBandwidth),h.logger_=zn("VhsHandler"),n.options_&&n.options_.playerId){var y=Z(n.options_.playerId);y.hasOwnProperty("hls")||Object.defineProperty(y,"hls",{get:function(){return Z.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),et(h)},configurable:!0}),y.hasOwnProperty("vhs")||Object.defineProperty(y,"vhs",{get:function(){return Z.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),et(h)},configurable:!0}),y.hasOwnProperty("dash")||Object.defineProperty(y,"dash",{get:function(){return Z.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),et(h)},configurable:!0}),h.player_=y}if(h.tech_=n,h.source_=u,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(Ze(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(S){var x=Ze().fullscreenElement||Ze().webkitFullscreenElement||Ze().mozFullScreenElement||Ze().msFullscreenElement;x&&x.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}W(l,m);var a=l.prototype;return a.setOptions_=function(){var n=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var o=wc();o&&o.bandwidth&&(this.options_.bandwidth=o.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),o&&o.throughput&&(this.options_.throughput=o.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ti.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ti.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){typeof n.source_[h]<"u"&&(n.options_[h]=n.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},a.src=function(n,o){var h=this;if(n){this.setOptions_(),this.options_.src=function(l){return 0===l.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(l.substring(l.indexOf(",")+1)):l}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ga,this.options_.sourceType=Fr(o),this.options_.seekTo=function(x){h.tech_.setCurrentTime(x)},this.options_.smoothQualityChange&&Z.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new pv(this.options_);var y=Z.mergeOptions({liveRangeSafeTimeDelta:Zi},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Sy(y),this.masterPlaylistController_.on("error",function(){var x=Z.players[h.tech_.options_.playerId],V=h.masterPlaylistController_.error;"object"!=typeof V||V.code?"string"==typeof V&&(V={message:V,code:3}):V.code=3,x.error(V)});var S=this.options_.experimentalBufferBasedABR?Ga.movingAverageBandwidthSelector(.55):Ga.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ga.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(V){this.masterPlaylistController_.selectPlaylist=V.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(V){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=V,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(V){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=V,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){Z.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Mu(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Mu(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(l){if(!ge().localStorage)return!1;var a=wc();a=a?Z.mergeOptions(a,l):l;try{ge().localStorage.setItem(ig,JSON.stringify(a))}catch{return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(l){l.representations=function(){var a=l.masterPlaylistController_.master(),u=Hf(a)?l.masterPlaylistController_.getAudioTrackPlaylists_():a.playlists;return u?u.filter(function(n){return!tf(n)}).map(function(n,o){return new gv(l,n,n.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ge().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},a.setupEme_=function(){var n=this,o=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(l){var a=l.player,h=function(l,a,u){if(!l)return l;var n={};a&&a.attributes&&a.attributes.CODECS&&(n=av(Sr(a.attributes.CODECS))),u&&u.attributes&&u.attributes.CODECS&&(n.audio=u.attributes.CODECS);var o=Nn(n.video),h=Nn(n.audio),y={};for(var S in l)y[S]={},h&&(y[S].audioContentType=h),o&&(y[S].videoContentType=o),a.contentProtection&&a.contentProtection[S]&&a.contentProtection[S].pssh&&(y[S].pssh=a.contentProtection[S].pssh),"string"==typeof l[S]&&(y[S].url=l[S]);return Z.mergeOptions(l,y)}(l.sourceKeySystems,l.media,l.audioMedia);return!(!h||(a.currentSource().keySystems=h,h&&!a.eme&&(Z.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:o&&o.media()});this.player_.tech_.on("keystatuschange",function(y){"output-restricted"===y.status&&n.masterPlaylistController_.blacklistCurrentPlaylist({playlist:n.masterPlaylistController_.media(),message:"DRM keystatus changed to "+y.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==Z.browser.IE_VERSION&&h?(this.logger_("waiting for EME key session creation"),function(l){var a=l.player,u=l.sourceKeySystems,n=l.audioMedia,o=l.mainPlaylists;if(!a.eme.initializeMediaKeys)return Promise.resolve();var y=function(l,a){return l.reduce(function(u,n){if(!n.contentProtection)return u;var o=a.reduce(function(h,y){var S=n.contentProtection[y];return S&&S.pssh&&(h[y]={pssh:S.pssh}),h},{});return Object.keys(o).length&&u.push(o),u},[])}(n?o.concat([n]):o,Object.keys(u)),S=[],x=[];return y.forEach(function(V){x.push(new Promise(function(re,ee){a.tech_.one("keysessioncreated",re)})),S.push(new Promise(function(re,ee){a.eme.initializeMediaKeys({keySystems:V},function(De){De?ee(De):re()})}))}),Promise.race([Promise.all(S),Promise.race(x)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:o&&o.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){n.logger_("created EME key session"),n.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(y){n.logger_("error while creating EME key session",y),n.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},a.setupQualityLevels_=function(){var n=this,o=Z.players[this.tech_.options_.playerId];!o||!o.qualityLevels||this.qualityLevels_||(this.qualityLevels_=o.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(l,a){a.representations().forEach(function(u){l.addQualityLevel(u)}),Rd(l,a.playlists)}(n.qualityLevels_,n)}),this.playlists.on("mediachange",function(){Rd(n.qualityLevels_,n.playlists)}))},l.version=function(){return{"@videojs/http-streaming":"2.10.2","mux.js":"5.13.0","mpd-parser":"0.19.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},a.version=function(){return this.constructor.version()},a.canChangeType=function(){return $a.canChangeType()},a.play=function(){this.masterPlaylistController_.play()},a.setCurrentTime=function(n){this.masterPlaylistController_.setCurrentTime(n)},a.duration=function(){return this.masterPlaylistController_.duration()},a.seekable=function(){return this.masterPlaylistController_.seekable()},a.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&ge().URL.revokeObjectURL&&(ge().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),m.prototype.dispose.call(this)},a.convertToProgramTime=function(n,o){return function(l){var a=l.playlist,u=l.time,n=void 0===u?void 0:u,o=l.callback;if(!o)throw new Error("getProgramTime: callback must be provided");if(!a||void 0===n)return o({message:"getProgramTime: playlist and time must be provided"});var h=function(l,a){if(!a||!a.segments||0===a.segments.length)return null;for(var n,u=0,o=0;o<a.segments.length&&!(l<=(u=(n=a.segments[o]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:u+n.duration));o++);var h=a.segments[a.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<l)return null;if(l>u){if(l>u+.25*h.duration)return null;n=h}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:u-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(n,a);if(!h)return o({message:"valid programTime was not found"});if("estimate"===h.type)return o({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var y={mediaSeconds:n},S=function(l,a){if(!a.dateTimeObject)return null;var h=l-(a.videoTimingInfo.transmuxedPresentationStart+a.videoTimingInfo.transmuxerPrependedSeconds);return new Date(a.dateTimeObject.getTime()+1e3*h)}(n,h.segment);return S&&(y.programDateTime=S.toISOString()),o(null,y)}({playlist:this.masterPlaylistController_.media(),time:n,callback:o})},a.seekToProgramTime=function(n,o,h,y){return void 0===h&&(h=!0),void 0===y&&(y=2),A0({programTime:n,playlist:this.masterPlaylistController_.media(),retryCount:y,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:o})},l}(Z.getComponent("Component")),Nd={name:"videojs-http-streaming",VERSION:"2.10.2",canHandleSource:function(l,a){void 0===a&&(a={});var u=Z.mergeOptions(Z.options,a);return Nd.canPlayType(l.type,u)},handleSource:function(l,a,u){void 0===u&&(u={});var n=Z.mergeOptions(Z.options,u);return a.vhs=new pm(l,a,n),Z.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Z.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),a.vhs},configurable:!0}),a.vhs.xhr=af(),a.vhs.src(l.src,l.type),a.vhs},canPlayType:function(l,a){void 0===a&&(a={});var n=Z.mergeOptions(Z.options,a).vhs.overrideNative,o=void 0===n?!Z.browser.IS_ANY_SAFARI:n,h=Fr(l);return!h||Ga.supportsTypeNatively(h)&&!o?"":"maybe"}};Dr("avc1.4d400d,mp4a.40.2")&&Z.getTech("Html5").registerSourceHandler(Nd,0),Z.VhsHandler=pm,Object.defineProperty(Z,"HlsHandler",{get:function(){return Z.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),pm},configurable:!0}),Z.VhsSourceHandler=Nd,Object.defineProperty(Z,"HlsSourceHandler",{get:function(){return Z.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Nd},configurable:!0}),Z.Vhs=Ga,Object.defineProperty(Z,"Hls",{get:function(){return Z.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ga},configurable:!0}),Z.use||(Z.registerComponent("Hls",Ga),Z.registerComponent("Vhs",Ga)),Z.options.vhs=Z.options.vhs||{},Z.options.hls=Z.options.hls||{},Z.registerPlugin?Z.registerPlugin("reloadSourceOnError",Dy):Z.plugin("reloadSourceOnError",Dy);const G0=Z,yv=["videoPlayer"];let _v=(()=>{class m{constructor(a){this.route=a}ngOnInit(){this.player=G0(this.target?.nativeElement),this.route.data.subscribe(a=>{this.clip=a.clip,this.player?.src({src:this.clip.url,type:"video/mp4"})})}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(le.gz))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-clip"]],viewQuery:function(a,u){if(1&a&&B.Gf(yv,7),2&a){let n;B.iGM(n=B.CRH())&&(u.target=n.first)}},features:[B._Bn([Re.uU])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-w-16","aspect-h-9"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(a,u){1&a&&(B.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),B._uU(3),B.qZA(),B.TgZ(4,"div",3),B._uU(5),B.TgZ(6,"span"),B._uU(7),B.ALo(8,"fbTimestamp"),B.qZA()(),B.TgZ(9,"div",4),B._UZ(10,"video",5,6),B.qZA()()(),B.TgZ(12,"div",7)(13,"h2",8),B._uU(14,"More Clips"),B.qZA(),B._UZ(15,"app-clips-list",9),B.qZA()),2&a&&(B.xp6(3),B.hij(" ",null==u.clip?null:u.clip.title," "),B.xp6(2),B.hij(" Uploaded By ",null==u.clip?null:u.clip.displayName," "),B.xp6(2),B.Oqu(B.lcZ(8,4,null==u.clip?null:u.clip.timestamp)),B.xp6(8),B.Q6J("scrollable",!1))},dependencies:[xe,Qe],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-9-16{padding-top:177.7777777778%}.video-js.vjs-1-1{padding-top:100%}.video-js.vjs-fill{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control,.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-chapters-button,.video-js.vjs-layout-small .vjs-descriptions-button,.video-js.vjs-layout-small .vjs-captions-button,.video-js.vjs-layout-small .vjs-subtitles-button,.video-js.vjs-layout-small .vjs-audio-button,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-chapters-button,.video-js.vjs-layout-x-small .vjs-descriptions-button,.video-js.vjs-layout-x-small .vjs-captions-button,.video-js.vjs-layout-x-small .vjs-subtitles-button,.video-js.vjs-layout-x-small .vjs-audio-button,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-chapters-button,.video-js.vjs-layout-tiny .vjs-descriptions-button,.video-js.vjs-layout-tiny .vjs-captions-button,.video-js.vjs-layout-tiny .vjs-subtitles-button,.video-js.vjs-layout-tiny .vjs-audio-button,.video-js.vjs-layout-tiny .vjs-volume-control{display:none!important}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:auto;width:initial}.video-js.vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button,.video-js.vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button,.video-js.vjs-layout-tiny .vjs-subs-caps-button{display:none}.video-js.vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer,.video-js.vjs-layout-tiny .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer,.video-js.vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js.vjs-layout-x-small.vjs-liveui .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),m})(),Tv=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(a,u){1&a&&(B.TgZ(0,"div",0)(1,"span",1),B._uU(2,"404"),B.qZA(),B._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),B.qZA(),B.TgZ(15,"div",14)(16,"h2",15),B._uU(17,"Page not found"),B.qZA(),B.TgZ(18,"p"),B._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),B.qZA()())}}),m})();const gm=[{path:"",component:je},{path:"about",component:$e},{path:"clip/:id",component:_v,resolve:{clip:Ne.Y}},{path:"",loadChildren:function(){var m=(0,me.Z)(function*(){return(yield z.e(478).then(z.bind(z,4478))).VideoModule});return function(){return m.apply(this,arguments)}}()},{path:"**",component:Tv}];let Ay=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275mod=B.oAB({type:m}),m.\u0275inj=B.cJS({imports:[le.Bz.forRoot(gm),le.Bz]}),m})();var My=z(7398),mm=z(6321),Ou=z(5211),ky=z(8180),Py=z(9360),I_=z(8251),vm=z(2420),Oy=z(975),Ry=z(1631),z0=z(4829);function Ev(m,l){return l?a=>(0,Ou.z)(l.pipe((0,ky.q)(1),function bv(){return(0,Py.e)((m,l)=>{m.subscribe((0,I_.x)(l,vm.Z))})}()),a.pipe(Ev(m))):(0,Ry.z)((a,u)=>(0,z0.Xf)(m(a,u)).pipe((0,ky.q)(1),(0,Oy.h)(a)))}var W0=z(5592),q0=z(671);var K0=z(2181),wv=z(4664),Z0=z(2096),Ru=z(6796),ag=z(8330);let ug=(()=>{class m{constructor(a,u,n,o){this.auth=a,this.db=u,this.router=n,this.route=o,this.redirect=!1,this.userCollection=u.collection("users"),this.isAuthenticated$=a.user.pipe((0,My.U)(h=>!!h)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function Sv(m,l=mm.z){const a=function Cv(m=0,l,a=mm.P){let u=-1;return null!=l&&((0,q0.K)(l)?a=l:u=l),new W0.y(n=>{let o=function og(m){return m instanceof Date&&!isNaN(m)}(m)?+m-a.now():m;o<0&&(o=0);let h=0;return a.schedule(function(){n.closed||(n.next(h++),0<=u?this.schedule(void 0,u):n.complete())},o)})}(m,l);return Ev(()=>a)}(1e3)),this.router.events.pipe((0,K0.h)(h=>h instanceof le.m2),(0,My.U)(h=>this.route.firstChild),(0,wv.w)(h=>h?.data??(0,Z0.of)({}))).subscribe(h=>{this.redirect=h.authOnly??!1})}createUser(a){var u=this;return(0,me.Z)(function*(){if(!a.password)throw new Error("Password not provided");if(!a.email)throw new Error("Email not provided");const n=yield u.auth.createUserWithEmailAndPassword(a.email,a.password);if(!n.user)throw new Error("User can't be found");yield u.userCollection.doc(n.user.uid).set({name:a.name,email:a.email,age:a.age,phoneNumber:a.phoneNumber}),yield n.user.updateProfile({displayName:a.name})})()}logout(a){var u=this;return(0,me.Z)(function*(){a&&a.preventDefault(),yield u.auth.signOut(),u.redirect&&(yield u.router.navigateByUrl("/"))})()}}return m.\u0275fac=function(a){return new(a||m)(B.LFG(Ru.zQ),B.LFG(ag.ST),B.LFG(le.F0),B.LFG(le.gz))},m.\u0275prov=B.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var ym=z(4918),Y0=z(8105);const _m=["*"];let Dv=(()=>{class m{constructor(){this.tabTitle="",this.active=!1}}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:_m,decls:2,vars:2,template:function(a,u){1&a&&(B.F$t(),B.TgZ(0,"div"),B.Hsn(1),B.qZA()),2&a&&B.ekj("hidden",!u.active)}}),m})();const up=function(m,l){return{"hover: text-indigo-400":m,"hover: text-white text-white bg-indigo-400":l}};function Iv(m,l){if(1&m){const a=B.EpF();B.TgZ(0,"li",2)(1,"a",3),B.NdJ("click",function(){const o=B.CHM(a).$implicit,h=B.oxw();return B.KtG(h.selectTab(o))}),B._uU(2),B.qZA()()}if(2&m){const a=l.$implicit;B.xp6(1),B.Q6J("ngClass",B.WLB(2,up,!a.active,a.active)),B.xp6(1),B.Oqu(a.tabTitle)}}const Ny=["*"];let Ly=(()=>{class m{constructor(){this.tabs=new B.n_E}ngAfterContentInit(){const a=this.tabs?.filter(u=>u.active);(!a||0===a.length)&&this.selectTab(this.tabs.first)}selectTab(a){return this.tabs?.forEach(u=>{u.active=!1}),a.active=!0,!1}}return m.\u0275fac=function(a){return new(a||m)},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-tabs-container"]],contentQueries:function(a,u,n){if(1&a&&B.Suo(n,Dv,4),2&a){let o;B.iGM(o=B.CRH())&&(u.tabs=o)}},ngContentSelectors:Ny,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(a,u){1&a&&(B.F$t(),B.TgZ(0,"ul",0),B.YNc(1,Iv,3,5,"li",1),B.qZA(),B.Hsn(2)),2&a&&(B.xp6(1),B.Q6J("ngForOf",u.tabs))},dependencies:[Re.mk,Re.sg]}),m})();var lg=z(5193),rs=z(6223);function Tm(m,l){if(1&m&&(B.TgZ(0,"app-alert",11),B._uU(1),B.qZA()),2&m){const a=B.oxw();B.Q6J("color",a.alertColor),B.xp6(1),B.hij("\n",a.alertMessage,"\n")}}function xh(m,l){1&m&&(B.TgZ(0,"p",12),B._uU(1,"Email is invalid"),B.qZA())}function Jc(m,l){1&m&&(B.TgZ(0,"p",12),B._uU(1,"Password is incorrect"),B.qZA())}let xv=(()=>{class m{constructor(a){this.auth=a,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMessage="Please wait! We are login you in.",this.alertColor="blue",this.isSubmission=!1}login(){var a=this;return(0,me.Z)(function*(){a.showAlert=!0,a.alertMessage="Please wait! We are logging you in.",a.alertColor="blue",a.isSubmission=!0;try{yield a.auth.signInWithEmailAndPassword(a.credentials.email,a.credentials.password)}catch(u){return a.isSubmission=!1,a.alertMessage="An unexpected error occurred. Please try again later",a.alertColor="red",void console.log(u)}a.alertMessage="Success ! You are now logged in.",a.alertColor="green"})()}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(Ru.zQ))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(a,u){if(1&a&&(B.YNc(0,Tm,2,2,"app-alert",0),B.TgZ(1,"form",1,2),B.NdJ("ngSubmit",function(){return u.login()}),B.TgZ(3,"div",3)(4,"label",4),B._uU(5,"Email"),B.qZA(),B.TgZ(6,"input",5,6),B.NdJ("ngModelChange",function(o){return u.credentials.email=o}),B.qZA(),B.YNc(8,xh,2,0,"p",7),B.qZA(),B.TgZ(9,"div",3)(10,"label",4),B._uU(11,"Password"),B.qZA(),B.TgZ(12,"input",8,9),B.NdJ("ngModelChange",function(o){return u.credentials.password=o}),B.qZA(),B.YNc(14,Jc,2,0,"p",7),B.qZA(),B.TgZ(15,"button",10),B._uU(16," Submit "),B.qZA()()),2&a){const n=B.MAs(2),o=B.MAs(7),h=B.MAs(13);B.Q6J("ngIf",u.showAlert),B.xp6(6),B.Q6J("ngModel",u.credentials.email),B.xp6(2),B.Q6J("ngIf",o.errors&&o.touched&&o.dirty),B.xp6(4),B.Q6J("ngModel",u.credentials.password),B.xp6(2),B.Q6J("ngIf",h.errors&&h.touched&&h.dirty),B.xp6(1),B.Q6J("disabled",n.invalid||u.isSubmission)}},dependencies:[Re.O5,lg.w,rs._Y,rs.Fj,rs.JJ,rs.JL,rs.Q7,rs.c5,rs.On,rs.F]}),m})();class Q0{static match(l,a){return u=>{const n=u.get(l),o=u.get(a);if(!n||!o)return console.error("Form control can not be found in the form group"),{controlNotFound:!1};const h=n.value===o.value?null:{noMatch:!0};return o.setErrors(h),h}}}let cg=(()=>{class m{constructor(a){this.auth=a,this.validate=u=>this.auth.fetchSignInMethodsForEmail(u.value).then(n=>n.length?{emailTaken:!0}:null)}}return m.\u0275fac=function(a){return new(a||m)(B.LFG(Ru.zQ))},m.\u0275prov=B.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var Ld=z(1060);function Av(m,l){if(1&m&&(B.TgZ(0,"app-alert",11),B._uU(1),B.qZA()),2&m){const a=B.oxw();B.Q6J("color",a.alertColor),B.xp6(1),B.hij(" ",a.alertMsg,"\n")}}let X0=(()=>{class m{constructor(a,u){this.auth=a,this.emailTaken=u,this.inSubmission=!1,this.name=new rs.NI("",[rs.kI.required,rs.kI.minLength(3)]),this.email=new rs.NI("",[rs.kI.email,rs.kI.required],[this.emailTaken.validate]),this.age=new rs.NI("",[rs.kI.required,rs.kI.min(18),rs.kI.max(120)]),this.password=new rs.NI("",[rs.kI.required,rs.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new rs.NI("",[rs.kI.required]),this.phone=new rs.NI("",[rs.kI.required,rs.kI.min(13),rs.kI.max(13)]),this.alertColor="blue",this.showAlert=!1,this.alertMsg="Please wait your account is being created",this.registerForm=new rs.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phone},[Q0.match("password","confirm_password")])}register(){var a=this;return(0,me.Z)(function*(){a.showAlert=!0,a.alertMsg="Please wait! Your account is being created",a.alertColor="blue",a.inSubmission=!0;try{a.auth.createUser(a.registerForm.value)}catch(u){return console.error(u),a.alertMsg="An unexpected error occurred. Please try again later",a.alertColor="red",void(a.inSubmission=!1)}a.alertMsg="Success! Your account has been created.",a.alertColor="green"})()}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(ug),B.Y36(cg))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name","type","text",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["format","(000)000-0000","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(a,u){1&a&&(B.YNc(0,Av,2,2,"app-alert",0),B.TgZ(1,"form",1),B.NdJ("ngSubmit",function(){return u.register()}),B.TgZ(2,"div",2)(3,"label",3),B._uU(4,"Name"),B.qZA(),B._UZ(5,"app-input",4),B.qZA(),B.TgZ(6,"div",2)(7,"label",3),B._uU(8,"Email"),B.qZA(),B._UZ(9,"app-input",5),B.qZA(),B.TgZ(10,"div",2)(11,"label",3),B._uU(12,"Age"),B.qZA(),B._UZ(13,"app-input",6),B.qZA(),B.TgZ(14,"div",2)(15,"label",3),B._uU(16,"Password"),B.qZA(),B._UZ(17,"app-input",7),B.qZA(),B.TgZ(18,"div",2)(19,"label",3),B._uU(20,"Confirm Password"),B.qZA(),B._UZ(21,"app-input",8),B.qZA(),B.TgZ(22,"div",2)(23,"label",3),B._uU(24,"Phone Number"),B.qZA(),B._UZ(25,"app-input",9),B.qZA(),B.TgZ(26,"button",10),B._uU(27," Submit "),B.qZA()()),2&a&&(B.Q6J("ngIf",u.showAlert),B.xp6(1),B.Q6J("formGroup",u.registerForm),B.xp6(4),B.Q6J("control",u.name),B.xp6(4),B.Q6J("control",u.email),B.xp6(4),B.Q6J("control",u.age),B.xp6(4),B.Q6J("control",u.password),B.xp6(4),B.Q6J("control",u.confirm_password),B.xp6(4),B.Q6J("control",u.phone),B.xp6(1),B.Q6J("disabled",u.registerForm.invalid||u.inSubmission))},dependencies:[Re.O5,Ld.a,lg.w,rs._Y,rs.JL,rs.sg]}),m})(),Fy=(()=>{class m{constructor(a){this.modal=a}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(ym.Z))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(a,u){1&a&&(B.TgZ(0,"app-modal",0)(1,"p",1),B._uU(2,"Your Account"),B.qZA(),B.TgZ(3,"app-tabs-container")(4,"app-tab",2),B._UZ(5,"app-login"),B.qZA(),B.TgZ(6,"app-tab",3),B._UZ(7,"app-register"),B.qZA()()())},dependencies:[Y0.z,Ly,Dv,xv,X0]}),m})();function jy(m,l){if(1&m){const a=B.EpF();B.TgZ(0,"li")(1,"a",8),B.NdJ("click",function(n){B.CHM(a);const o=B.oxw();return B.KtG(o.openModal(n))}),B._uU(2,"Login / Register"),B.qZA()()}}const By=function(){return{exact:!0}},lp=function(){return{sort:"1"}};function dg(m,l){if(1&m){const a=B.EpF();B.TgZ(0,"li")(1,"a",9),B._uU(2,"Manage"),B.qZA()(),B.TgZ(3,"li")(4,"a",10),B._uU(5,"Upload"),B.qZA()(),B.TgZ(6,"li")(7,"a",11),B.NdJ("click",function(n){B.CHM(a);const o=B.oxw();return B.KtG(o.auth.logout(n))}),B._uU(8," Logout "),B.qZA()()}2&m&&(B.xp6(1),B.Q6J("routerLinkActiveOptions",B.DdM(3,By))("queryParams",B.DdM(4,lp)),B.xp6(3),B.Q6J("routerLinkActiveOptions",B.DdM(5,By)))}let cp=(()=>{class m{constructor(a,u){this.modal=a,this.auth=u}openModal(a){a.preventDefault(),this.modal.toggleModal("auth")}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(ym.Z),B.Y36(ug))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-nav"]],decls:13,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(a,u){if(1&a&&(B.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),B._uU(3,"Clips"),B.qZA(),B.TgZ(4,"div",3)(5,"ul",4),B.YNc(6,jy,3,0,"li",5),B.ALo(7,"async"),B.YNc(8,dg,9,6,"ng-template",null,6,B.W1O),B.TgZ(10,"li")(11,"a",7),B._uU(12,"About"),B.qZA()()()()()()),2&a){const n=B.MAs(9);B.xp6(6),B.Q6J("ngIf",!B.lcZ(7,2,u.auth.isAuthenticated$))("ngIfElse",n)}},dependencies:[Re.O5,le.rH,le.Od,Re.Ov]}),m})();function x_(m,l){1&m&&B._UZ(0,"app-auth-modal")}let Mv=(()=>{class m{constructor(a){this.auth=a}}return m.\u0275fac=function(a){return new(a||m)(B.Y36(ug))},m.\u0275cmp=B.Xpm({type:m,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(a,u){1&a&&(B._UZ(0,"app-nav")(1,"router-outlet"),B.YNc(2,x_,1,0,"app-auth-modal",0),B.ALo(3,"async")),2&a&&(B.xp6(2),B.Q6J("ngIf",!B.lcZ(3,1,u.auth.isAuthenticatedWithDelay$)))},dependencies:[Re.O5,Fy,le.lC,cp,Re.Ov]}),m})();var Uy=z(6208);let bm=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275mod=B.oAB({type:m}),m.\u0275inj=B.cJS({imports:[Re.ez,Uy.m,rs.UX,rs.u5]}),m})();var Vy=z(6304);const hg_firebase={apiKey:"AIzaSyCud1Y_-heS2hQkIJvK1rqyDsyF6oE5z8E",authDomain:"clips-angular-96f2b.firebaseapp.com",projectId:"clips-angular-96f2b",storageBucket:"clips-angular-96f2b.appspot.com",appId:"1:708968592139:web:a1e19a2f44eb9ee48ee80e"};var kv=z(6240);let Hy=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275mod=B.oAB({type:m,bootstrap:[Mv]}),m.\u0275inj=B.cJS({imports:[T.b2,bm,Vy.hO.initializeApp(hg_firebase),Ru.ww,ag.yb,Ay,kv.TE]}),m})();var dp=z(7142);z(5967),dp.Z.initializeApp(hg_firebase);let Pv=!1;dp.Z.auth().onAuthStateChanged(()=>{Pv||T.q6().bootstrapModule(Hy).catch(m=>console.error(m)),Pv=!0})},5060:(tn,ht,z)=>{"use strict";var T=z(6382);tn.exports=function(Re,Ne){return void 0===Ne&&(Ne=!1),function(Qe,at,ut){if(Qe)Re(Qe);else if(at.statusCode>=400&&at.statusCode<=599){var xe=ut;if(Ne)if(T.TextDecoder){var je=function le(B){return void 0===B&&(B=""),B.toLowerCase().split(";").reduce(function(Re,Ne){var Qe=Ne.split("="),ut=Qe[1];return"charset"===Qe[0].trim()?ut.trim():Re},"utf-8")}(at.headers&&at.headers["content-type"]);try{xe=new TextDecoder(je).decode(ut)}catch{}}else xe=String.fromCharCode.apply(null,new Uint8Array(ut));Re({cause:xe})}else Re(null,ut)}}},3817:(tn,ht,z)=>{"use strict";var T=z(6382),me=z(434),le=z(7794);at.httpHandler=z(5060);var B=function(kt){var ge={};return kt&&kt.trim().split("\n").forEach(function(St){var Ze=St.indexOf(":"),rt=St.slice(0,Ze).trim().toLowerCase(),et=St.slice(Ze+1).trim();typeof ge[rt]>"u"?ge[rt]=et:Array.isArray(ge[rt])?ge[rt].push(et):ge[rt]=[ge[rt],et]}),ge};function Qe($e,kt,ge){var St=$e;return le(kt)?(ge=kt,"string"==typeof $e&&(St={uri:$e})):St=me({},kt,{uri:$e}),St.callback=ge,St}function at($e,kt,ge){return ut(kt=Qe($e,kt,ge))}function ut($e){if(typeof $e.callback>"u")throw new Error("callback argument missing");var kt=!1,ge=function(Gt,Xt,pn){kt||(kt=!0,$e.callback(Gt,Xt,pn))};function Ze(){var Ht=void 0;if(Ht=Ke.response?Ke.response:Ke.responseText||function xe($e){try{if("document"===$e.responseType)return $e.responseXML;if(""===$e.responseType&&(!$e.responseXML||"parsererror"!==$e.responseXML.documentElement.nodeName))return $e.responseXML}catch{}return null}(Ke),oe)try{Ht=JSON.parse(Ht)}catch{}return Ht}function rt(Ht){return clearTimeout(Fe),Ht instanceof Error||(Ht=new Error(""+(Ht||"Unknown XMLHttpRequest Error"))),Ht.statusCode=0,ge(Ht,At)}function et(){if(!te){var Ht;clearTimeout(Fe);var Gt=At,Xt=null;return 0!==(Ht=$e.useXDR&&void 0===Ke.status?200:1223===Ke.status?204:Ke.status)?(Gt={body:Ze(),statusCode:Ht,method:Te,headers:{},url:Ee,rawRequest:Ke},Ke.getAllResponseHeaders&&(Gt.headers=B(Ke.getAllResponseHeaders()))):Xt=new Error("Internal XMLHttpRequest Error"),ge(Xt,Gt,Gt.body)}}var Ke=$e.xhr||null;Ke||(Ke=$e.cors||$e.useXDR?new at.XDomainRequest:new at.XMLHttpRequest);var W,te,Fe,Ee=Ke.url=$e.uri||$e.url,Te=Ke.method=$e.method||"GET",Ae=$e.body||$e.data,gt=Ke.headers=$e.headers||{},Y=!!$e.sync,oe=!1,At={body:void 0,headers:{},statusCode:0,method:Te,url:Ee,rawRequest:Ke};if("json"in $e&&!1!==$e.json&&(oe=!0,gt.accept||gt.Accept||(gt.Accept="application/json"),"GET"!==Te&&"HEAD"!==Te&&(gt["content-type"]||gt["Content-Type"]||(gt["Content-Type"]="application/json"),Ae=JSON.stringify(!0===$e.json?Ae:$e.json))),Ke.onreadystatechange=function St(){4===Ke.readyState&&setTimeout(et,0)},Ke.onload=et,Ke.onerror=rt,Ke.onprogress=function(){},Ke.onabort=function(){te=!0},Ke.ontimeout=rt,Ke.open(Te,Ee,!Y,$e.username,$e.password),Y||(Ke.withCredentials=!!$e.withCredentials),!Y&&$e.timeout>0&&(Fe=setTimeout(function(){if(!te){te=!0,Ke.abort("timeout");var Ht=new Error("XMLHttpRequest timeout");Ht.code="ETIMEDOUT",rt(Ht)}},$e.timeout)),Ke.setRequestHeader)for(W in gt)gt.hasOwnProperty(W)&&Ke.setRequestHeader(W,gt[W]);else if($e.headers&&!function Ne($e){for(var kt in $e)if($e.hasOwnProperty(kt))return!1;return!0}($e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in $e&&(Ke.responseType=$e.responseType),"beforeSend"in $e&&"function"==typeof $e.beforeSend&&$e.beforeSend(Ke),Ke.send(Ae||null),Ke}tn.exports=at,tn.exports.default=at,at.XMLHttpRequest=T.XMLHttpRequest||function je(){},at.XDomainRequest="withCredentials"in new at.XMLHttpRequest?at.XMLHttpRequest:T.XDomainRequest,function Re($e,kt){for(var ge=0;ge<$e.length;ge++)kt($e[ge])}(["get","put","post","patch","head","delete"],function($e){at["delete"===$e?"del":$e]=function(kt,ge,St){return(ge=Qe(kt,ge,St)).method=$e.toUpperCase(),ut(ge)}})},9451:(tn,ht)=>{"use strict";function T(B,Re){return void 0===Re&&(Re=Object),Re&&"function"==typeof Re.freeze?Re.freeze(B):B}var me=T({HTML:"text/html",isHTML:function(B){return B===me.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),le=T({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(B){return B===le.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ht.find=function z(B,Re,Ne){if(void 0===Ne&&(Ne=Array.prototype),B&&"function"==typeof Ne.find)return Ne.find.call(B,Re);for(var Qe=0;Qe<B.length;Qe++)if(Object.prototype.hasOwnProperty.call(B,Qe)){var at=B[Qe];if(Re.call(void 0,at,Qe,B))return at}},ht.freeze=T,ht.MIME_TYPE=me,ht.NAMESPACE=le},1020:(tn,ht,z)=>{var me=z(9451),le=z(6475),B=z(4562),Re=z(6989),Ne=le.DOMImplementation,Qe=me.NAMESPACE,at=Re.ParseError,ut=Re.XMLReader;function xe(rt){this.options=rt||{locator:{}}}function $e(){this.cdata=!1}function kt(rt,et){et.lineNumber=rt.lineNumber,et.columnNumber=rt.columnNumber}function ge(rt){if(rt)return"\n@"+(rt.systemId||"")+"#[line:"+rt.lineNumber+",col:"+rt.columnNumber+"]"}function St(rt,et,Ke){return"string"==typeof rt?rt.substr(et,Ke):rt.length>=et+Ke||et?new java.lang.String(rt,et,Ke)+"":rt}function Ze(rt,et){rt.currentElement?rt.currentElement.appendChild(et):rt.doc.appendChild(et)}xe.prototype.parseFromString=function(rt,et){var Ke=this.options,W=new ut,te=Ke.domBuilder||new $e,Ee=Ke.errorHandler,Te=Ke.locator,Ae=Ke.xmlns||{},gt=/\/x?html?$/.test(et),Y=gt?B.HTML_ENTITIES:B.XML_ENTITIES;return Te&&te.setDocumentLocator(Te),W.errorHandler=function je(rt,et,Ke){if(!rt){if(et instanceof $e)return et;rt=et}var W={},te=rt instanceof Function;function Ee(Te){var Ae=rt[Te];!Ae&&te&&(Ae=2==rt.length?function(gt){rt(Te,gt)}:rt),W[Te]=Ae&&function(gt){Ae("[xmldom "+Te+"]\t"+gt+ge(Ke))}||function(){}}return Ke=Ke||{},Ee("warning"),Ee("error"),Ee("fatalError"),W}(Ee,te,Te),W.domBuilder=Ke.domBuilder||te,gt&&(Ae[""]=Qe.HTML),Ae.xml=Ae.xml||Qe.XML,rt&&"string"==typeof rt?W.parse(rt,Ae,Y):W.errorHandler.error("invalid doc source"),te.doc},$e.prototype={startDocument:function(){this.doc=(new Ne).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(rt,et,Ke,W){var te=this.doc,Ee=te.createElementNS(rt,Ke||et),Te=W.length;Ze(this,Ee),this.currentElement=Ee,this.locator&&kt(this.locator,Ee);for(var Ae=0;Ae<Te;Ae++){rt=W.getURI(Ae);var gt=W.getValue(Ae),Y=(Ke=W.getQName(Ae),te.createAttributeNS(rt,Ke));this.locator&&kt(W.getLocator(Ae),Y),Y.value=Y.nodeValue=gt,Ee.setAttributeNode(Y)}},endElement:function(rt,et,Ke){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(rt,et){},endPrefixMapping:function(rt){},processingInstruction:function(rt,et){var Ke=this.doc.createProcessingInstruction(rt,et);this.locator&&kt(this.locator,Ke),Ze(this,Ke)},ignorableWhitespace:function(rt,et,Ke){},characters:function(rt,et,Ke){if(rt=St.apply(this,arguments)){if(this.cdata)var W=this.doc.createCDATASection(rt);else W=this.doc.createTextNode(rt);this.currentElement?this.currentElement.appendChild(W):/^\s*$/.test(rt)&&this.doc.appendChild(W),this.locator&&kt(this.locator,W)}},skippedEntity:function(rt){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(rt){(this.locator=rt)&&(rt.lineNumber=0)},comment:function(rt,et,Ke){rt=St.apply(this,arguments);var W=this.doc.createComment(rt);this.locator&&kt(this.locator,W),Ze(this,W)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(rt,et,Ke){var W=this.doc.implementation;if(W&&W.createDocumentType){var te=W.createDocumentType(rt,et,Ke);this.locator&&kt(this.locator,te),Ze(this,te),this.doc.doctype=te}},warning:function(rt){console.warn("[xmldom warning]\t"+rt,ge(this.locator))},error:function(rt){console.error("[xmldom error]\t"+rt,ge(this.locator))},fatalError:function(rt){throw new at(rt,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(rt){$e.prototype[rt]=function(){return null}}),ht.DOMParser=xe},6475:(tn,ht,z)=>{var T=z(9451),me=T.find,le=T.NAMESPACE;function B(ve){return""!==ve}function Ne(ve,ye){return ve.hasOwnProperty(ye)||(ve[ye]=!0),ve}function Qe(ve){if(!ve)return[];var ye=function Re(ve){return ve?ve.split(/[\t\n\f\r ]+/).filter(B):[]}(ve);return Object.keys(ye.reduce(Ne,{}))}function ut(ve,ye){for(var He in ve)Object.prototype.hasOwnProperty.call(ve,He)&&(ye[He]=ve[He])}function xe(ve,ye){var He=ve.prototype;if(!(He instanceof ye)){let ln=function(){};ln.prototype=ye.prototype,ln=new ln,ut(He,ln),ve.prototype=He=ln}He.constructor!=ve&&("function"!=typeof ve&&console.error("unknown Class:"+ve),He.constructor=ve)}var je={},$e=je.ELEMENT_NODE=1,kt=je.ATTRIBUTE_NODE=2,ge=je.TEXT_NODE=3,St=je.CDATA_SECTION_NODE=4,Ze=je.ENTITY_REFERENCE_NODE=5,rt=je.ENTITY_NODE=6,et=je.PROCESSING_INSTRUCTION_NODE=7,Ke=je.COMMENT_NODE=8,W=je.DOCUMENT_NODE=9,te=je.DOCUMENT_TYPE_NODE=10,Ee=je.DOCUMENT_FRAGMENT_NODE=11,Te=je.NOTATION_NODE=12,Ae={},gt={},Fe=(Ae.INDEX_SIZE_ERR=(gt[1]="Index size error",1),Ae.DOMSTRING_SIZE_ERR=(gt[2]="DOMString size error",2),Ae.HIERARCHY_REQUEST_ERR=(gt[3]="Hierarchy request error",3)),pn=(Ae.WRONG_DOCUMENT_ERR=(gt[4]="Wrong document",4),Ae.INVALID_CHARACTER_ERR=(gt[5]="Invalid character",5),Ae.NO_DATA_ALLOWED_ERR=(gt[6]="No data allowed",6),Ae.NO_MODIFICATION_ALLOWED_ERR=(gt[7]="No modification allowed",7),Ae.NOT_FOUND_ERR=(gt[8]="Not found",8)),Yt=(Ae.NOT_SUPPORTED_ERR=(gt[9]="Not supported",9),Ae.INUSE_ATTRIBUTE_ERR=(gt[10]="Attribute in use",10));function ft(ve,ye){if(ye instanceof Error)var He=ye;else He=this,Error.call(this,gt[ve]),this.message=gt[ve],Error.captureStackTrace&&Error.captureStackTrace(this,ft);return He.code=ve,ye&&(this.message=this.message+": "+ye),He}function jt(){}function zt(ve,ye){this._node=ve,this._refresh=ye,In(this)}function In(ve){var ye=ve._node._inc||ve._node.ownerDocument._inc;if(ve._inc!==ye){var He=ve._refresh(ve._node);if(Qt(ve,"length",He.length),!ve.$$length||He.length<ve.$$length)for(var Tt=He.length;Tt in ve;Tt++)Object.prototype.hasOwnProperty.call(ve,Tt)&&delete ve[Tt];ut(He,ve),ve._inc=ye}}function Tn(){}function xn(ve,ye){for(var He=ve.length;He--;)if(ve[He]===ye)return He}function $n(ve,ye,He,Tt){if(Tt?ye[xn(ye,Tt)]=He:ye[ye.length++]=He,ve){He.ownerElement=ve;var ln=ve.ownerDocument;ln&&(Tt&&Gr(ln,ve,Tt),function qr(ve,ye,He){ve&&ve._inc++,He.namespaceURI===le.XMLNS&&(ye._nsMap[He.prefix?He.localName:""]=He.value)}(ln,ve,He))}}function Gn(ve,ye,He){var Tt=xn(ye,He);if(!(Tt>=0))throw new ft(pn,new Error(ve.tagName+"@"+He));for(var ln=ye.length-1;Tt<ln;)ye[Tt]=ye[++Tt];if(ye.length=ln,ve){var Xn=ve.ownerDocument;Xn&&(Gr(Xn,ve,He),He.ownerElement=null)}}function ir(){}function Bn(){}function dr(ve){return("<"==ve?"&lt;":">"==ve&&"&gt;")||"&"==ve&&"&amp;"||'"'==ve&&"&quot;"||"&#"+ve.charCodeAt()+";"}function xr(ve,ye){if(ye(ve))return!0;if(ve=ve.firstChild)do{if(xr(ve,ye))return!0}while(ve=ve.nextSibling)}function hr(){this.ownerDocument=this}function Gr(ve,ye,He,Tt){ve&&ve._inc++,He.namespaceURI===le.XMLNS&&delete ye._nsMap[He.prefix?He.localName:""]}function Sr(ve,ye,He){if(ve&&ve._inc){ve._inc++;var Tt=ye.childNodes;if(He)Tt[Tt.length++]=He;else{for(var ln=ye.firstChild,Xn=0;ln;)Tt[Xn++]=ln,ln=ln.nextSibling;Tt.length=Xn,delete Tt[Tt.length]}}}function mi(ve,ye){var He=ye.previousSibling,Tt=ye.nextSibling;return He?He.nextSibling=Tt:ve.firstChild=Tt,Tt?Tt.previousSibling=He:ve.lastChild=He,ye.parentNode=null,ye.previousSibling=null,ye.nextSibling=null,Sr(ve.ownerDocument,ve),ye}function Un(ve){return ve&&ve.nodeType===Bn.DOCUMENT_TYPE_NODE}function Nn(ve){return ve&&ve.nodeType===Bn.ELEMENT_NODE}function Dr(ve){return ve&&ve.nodeType===Bn.TEXT_NODE}function ar(ve,ye){var He=ve.childNodes||[];if(me(He,Nn)||Un(ye))return!1;var Tt=me(He,Un);return!(ye&&Tt&&He.indexOf(Tt)>He.indexOf(ye))}function Ui(ve,ye){var He=ve.childNodes||[];if(me(He,function Tt(Xn){return Nn(Xn)&&Xn!==ye}))return!1;var ln=me(He,Un);return!(ye&&ln&&He.indexOf(ln)>He.indexOf(ye))}function fi(ve,ye,He){var Tt=ve.childNodes||[],ln=ye.childNodes||[];if(ye.nodeType===Bn.DOCUMENT_FRAGMENT_NODE){var Xn=ln.filter(Nn);if(Xn.length>1||me(ln,Dr))throw new ft(Fe,"More than one element or text in fragment");if(1===Xn.length&&!ar(ve,He))throw new ft(Fe,"Element in fragment can not be inserted before doctype")}if(Nn(ye)&&!ar(ve,He))throw new ft(Fe,"Only one element can be added and only after doctype");if(Un(ye)){if(me(Tt,Un))throw new ft(Fe,"Only one doctype is allowed");var Hr=me(Tt,Nn);if(He&&Tt.indexOf(Hr)<Tt.indexOf(He))throw new ft(Fe,"Doctype can only be inserted before an element");if(!He&&Hr)throw new ft(Fe,"Doctype can not be appended since element is present")}}function eo(ve,ye,He){var Tt=ve.childNodes||[],ln=ye.childNodes||[];if(ye.nodeType===Bn.DOCUMENT_FRAGMENT_NODE){var Xn=ln.filter(Nn);if(Xn.length>1||me(ln,Dr))throw new ft(Fe,"More than one element or text in fragment");if(1===Xn.length&&!Ui(ve,He))throw new ft(Fe,"Element in fragment can not be inserted before doctype")}if(Nn(ye)&&!Ui(ve,He))throw new ft(Fe,"Only one element can be added and only after doctype");if(Un(ye)){if(me(Tt,function(Pt){return Un(Pt)&&Pt!==He}))throw new ft(Fe,"Only one doctype is allowed");var Hr=me(Tt,Nn);if(He&&Tt.indexOf(Hr)<Tt.indexOf(He))throw new ft(Fe,"Doctype can only be inserted before an element")}}function Fr(ve,ye,He,Tt){(function Kr(ve,ye,He){if(!function Rr(ve){return ve&&(ve.nodeType===Bn.DOCUMENT_NODE||ve.nodeType===Bn.DOCUMENT_FRAGMENT_NODE||ve.nodeType===Bn.ELEMENT_NODE)}(ve))throw new ft(Fe,"Unexpected parent node type "+ve.nodeType);if(He&&He.parentNode!==ve)throw new ft(pn,"child not in parent");if(!function an(ve){return ve&&(Nn(ve)||Dr(ve)||Un(ve)||ve.nodeType===Bn.DOCUMENT_FRAGMENT_NODE||ve.nodeType===Bn.COMMENT_NODE||ve.nodeType===Bn.PROCESSING_INSTRUCTION_NODE)}(ye)||Un(ye)&&ve.nodeType!==Bn.DOCUMENT_NODE)throw new ft(Fe,"Unexpected node type "+ye.nodeType+" for parent node type "+ve.nodeType)})(ve,ye,He),ve.nodeType===Bn.DOCUMENT_NODE&&(Tt||fi)(ve,ye,He);var ln=ye.parentNode;if(ln&&ln.removeChild(ye),ye.nodeType===Ee){var Xn=ye.firstChild;if(null==Xn)return ye;var Hr=ye.lastChild}else Xn=Hr=ye;var ui=He?He.previousSibling:ve.lastChild;Xn.previousSibling=ui,Hr.nextSibling=He,ui?ui.nextSibling=Xn:ve.firstChild=Xn,null==He?ve.lastChild=Hr:He.previousSibling=Hr;do{Xn.parentNode=ve}while(Xn!==Hr&&(Xn=Xn.nextSibling));return Sr(ve.ownerDocument||ve,ve),ye.nodeType==Ee&&(ye.firstChild=ye.lastChild=null),ye}function Tr(){this._nsMap={}}function qi(){}function br(){}function is(){}function ci(){}function Ri(){}function li(){}function vi(){}function Nr(){}function Vi(){}function Ar(){}function ls(){}function mr(){}function lt(ve,ye){var He=[],Tt=9==this.nodeType&&this.documentElement||this,ln=Tt.prefix,Xn=Tt.namespaceURI;if(Xn&&null==ln&&null==(ln=Tt.lookupPrefix(Xn)))var Hr=[{namespace:Xn,prefix:null}];return be(this,He,ve,ye,Hr),He.join("")}function _e(ve,ye,He){var Tt=ve.prefix||"",ln=ve.namespaceURI;if(!ln||"xml"===Tt&&ln===le.XML||ln===le.XMLNS)return!1;for(var Xn=He.length;Xn--;){var Hr=He[Xn];if(Hr.prefix===Tt)return Hr.namespace!==ln}return!0}function Ce(ve,ye,He){ve.push(" ",ye,'="',He.replace(/[<&"]/g,dr),'"')}function be(ve,ye,He,Tt,ln){if(ln||(ln=[]),Tt){if(!(ve=Tt(ve)))return;if("string"==typeof ve)return void ye.push(ve)}switch(ve.nodeType){case $e:var Xn=ve.attributes,Hr=Xn.length,di=ve.firstChild,ui=ve.tagName,Ut=ui;if(!(He=le.isHTML(ve.namespaceURI)||He)&&!ve.prefix&&ve.namespaceURI){for(var Pt,nn=0;nn<Xn.length;nn++)if("xmlns"===Xn.item(nn).name){Pt=Xn.item(nn).value;break}if(!Pt)for(var On=ln.length-1;On>=0;On--)if(""===(Jn=ln[On]).prefix&&Jn.namespace===ve.namespaceURI){Pt=Jn.namespace;break}if(Pt!==ve.namespaceURI)for(On=ln.length-1;On>=0;On--){var Jn;if((Jn=ln[On]).namespace===ve.namespaceURI){Jn.prefix&&(Ut=Jn.prefix+":"+ui);break}}}ye.push("<",Ut);for(var fr=0;fr<Hr;fr++)"xmlns"==(Er=Xn.item(fr)).prefix?ln.push({prefix:Er.localName,namespace:Er.value}):"xmlns"==Er.nodeName&&ln.push({prefix:"",namespace:Er.value});for(fr=0;fr<Hr;fr++){var Er,ri,pi;_e(Er=Xn.item(fr),0,ln)&&(Ce(ye,(ri=Er.prefix||"")?"xmlns:"+ri:"xmlns",pi=Er.namespaceURI),ln.push({prefix:ri,namespace:pi})),be(Er,ye,He,Tt,ln)}if(ui===Ut&&_e(ve,0,ln)&&(Ce(ye,(ri=ve.prefix||"")?"xmlns:"+ri:"xmlns",pi=ve.namespaceURI),ln.push({prefix:ri,namespace:pi})),di||He&&!/^(?:meta|link|img|br|hr|input)$/i.test(ui)){if(ye.push(">"),He&&/^script$/i.test(ui))for(;di;)di.data?ye.push(di.data):be(di,ye,He,Tt,ln.slice()),di=di.nextSibling;else for(;di;)be(di,ye,He,Tt,ln.slice()),di=di.nextSibling;ye.push("</",Ut,">")}else ye.push("/>");return;case W:case Ee:for(di=ve.firstChild;di;)be(di,ye,He,Tt,ln.slice()),di=di.nextSibling;return;case kt:return Ce(ye,ve.name,ve.value);case ge:return ye.push(ve.data.replace(/[<&]/g,dr).replace(/]]>/g,"]]&gt;"));case St:return ye.push("<![CDATA[",ve.data,"]]>");case Ke:return ye.push("\x3c!--",ve.data,"--\x3e");case te:var gs=ve.publicId,qs=ve.systemId;if(ye.push("<!DOCTYPE ",ve.name),gs)ye.push(" PUBLIC ",gs),qs&&"."!=qs&&ye.push(" ",qs),ye.push(">");else if(qs&&"."!=qs)ye.push(" SYSTEM ",qs,">");else{var Lo=ve.internalSubset;Lo&&ye.push(" [",Lo,"]"),ye.push(">")}return;case et:return ye.push("<?",ve.target," ",ve.data,"?>");case Ze:return ye.push("&",ve.nodeName,";");default:ye.push("??",ve.nodeName)}}function Pe(ve,ye,He){var Tt;switch(ye.nodeType){case $e:(Tt=ye.cloneNode(!1)).ownerDocument=ve;case Ee:break;case kt:He=!0}if(Tt||(Tt=ye.cloneNode(!1)),Tt.ownerDocument=ve,Tt.parentNode=null,He)for(var ln=ye.firstChild;ln;)Tt.appendChild(Pe(ve,ln,He)),ln=ln.nextSibling;return Tt}function Et(ve,ye,He){var Tt=new ye.constructor;for(var ln in ye)if(Object.prototype.hasOwnProperty.call(ye,ln)){var Xn=ye[ln];"object"!=typeof Xn&&Xn!=Tt[ln]&&(Tt[ln]=Xn)}switch(ye.childNodes&&(Tt.childNodes=new jt),Tt.ownerDocument=ve,Tt.nodeType){case $e:var Hr=ye.attributes,ui=Tt.attributes=new Tn,Ut=Hr.length;ui._ownerElement=Tt;for(var Pt=0;Pt<Ut;Pt++)Tt.setAttributeNode(Et(ve,Hr.item(Pt),!0));break;case kt:He=!0}if(He)for(var nn=ye.firstChild;nn;)Tt.appendChild(Et(ve,nn,He)),nn=nn.nextSibling;return Tt}function Qt(ve,ye,He){ve[ye]=He}Ae.INVALID_STATE_ERR=(gt[11]="Invalid state",11),Ae.SYNTAX_ERR=(gt[12]="Syntax error",12),Ae.INVALID_MODIFICATION_ERR=(gt[13]="Invalid modification",13),Ae.NAMESPACE_ERR=(gt[14]="Invalid namespace",14),Ae.INVALID_ACCESS_ERR=(gt[15]="Invalid access",15),ft.prototype=Error.prototype,ut(Ae,ft),jt.prototype={length:0,item:function(ve){return ve>=0&&ve<this.length?this[ve]:null},toString:function(ve,ye){for(var He=[],Tt=0;Tt<this.length;Tt++)be(this[Tt],He,ve,ye);return He.join("")},filter:function(ve){return Array.prototype.filter.call(this,ve)},indexOf:function(ve){return Array.prototype.indexOf.call(this,ve)}},zt.prototype.item=function(ve){return In(this),this[ve]||null},xe(zt,jt),Tn.prototype={length:0,item:jt.prototype.item,getNamedItem:function(ve){for(var ye=this.length;ye--;){var He=this[ye];if(He.nodeName==ve)return He}},setNamedItem:function(ve){var ye=ve.ownerElement;if(ye&&ye!=this._ownerElement)throw new ft(Yt);var He=this.getNamedItem(ve.nodeName);return $n(this._ownerElement,this,ve,He),He},setNamedItemNS:function(ve){var He,ye=ve.ownerElement;if(ye&&ye!=this._ownerElement)throw new ft(Yt);return He=this.getNamedItemNS(ve.namespaceURI,ve.localName),$n(this._ownerElement,this,ve,He),He},removeNamedItem:function(ve){var ye=this.getNamedItem(ve);return Gn(this._ownerElement,this,ye),ye},removeNamedItemNS:function(ve,ye){var He=this.getNamedItemNS(ve,ye);return Gn(this._ownerElement,this,He),He},getNamedItemNS:function(ve,ye){for(var He=this.length;He--;){var Tt=this[He];if(Tt.localName==ye&&Tt.namespaceURI==ve)return Tt}return null}},ir.prototype={hasFeature:function(ve,ye){return!0},createDocument:function(ve,ye,He){var Tt=new hr;if(Tt.implementation=this,Tt.childNodes=new jt,Tt.doctype=He||null,He&&Tt.appendChild(He),ye){var ln=Tt.createElementNS(ve,ye);Tt.appendChild(ln)}return Tt},createDocumentType:function(ve,ye,He){var Tt=new li;return Tt.name=ve,Tt.nodeName=ve,Tt.publicId=ye||"",Tt.systemId=He||"",Tt}},Bn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ve,ye){return Fr(this,ve,ye)},replaceChild:function(ve,ye){Fr(this,ve,ye,eo),ye&&this.removeChild(ye)},removeChild:function(ve){return mi(this,ve)},appendChild:function(ve){return this.insertBefore(ve,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(ve){return Et(this.ownerDocument||this,this,ve)},normalize:function(){for(var ve=this.firstChild;ve;){var ye=ve.nextSibling;ye&&ye.nodeType==ge&&ve.nodeType==ge?(this.removeChild(ye),ve.appendData(ye.data)):(ve.normalize(),ve=ye)}},isSupported:function(ve,ye){return this.ownerDocument.implementation.hasFeature(ve,ye)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ve){for(var ye=this;ye;){var He=ye._nsMap;if(He)for(var Tt in He)if(Object.prototype.hasOwnProperty.call(He,Tt)&&He[Tt]===ve)return Tt;ye=ye.nodeType==kt?ye.ownerDocument:ye.parentNode}return null},lookupNamespaceURI:function(ve){for(var ye=this;ye;){var He=ye._nsMap;if(He&&ve in He&&Object.prototype.hasOwnProperty.call(He,ve))return He[ve];ye=ye.nodeType==kt?ye.ownerDocument:ye.parentNode}return null},isDefaultNamespace:function(ve){return null==this.lookupPrefix(ve)}},ut(je,Bn),ut(je,Bn.prototype),hr.prototype={nodeName:"#document",nodeType:W,doctype:null,documentElement:null,_inc:1,insertBefore:function(ve,ye){if(ve.nodeType==Ee){for(var He=ve.firstChild;He;){var Tt=He.nextSibling;this.insertBefore(He,ye),He=Tt}return ve}return Fr(this,ve,ye),ve.ownerDocument=this,null===this.documentElement&&ve.nodeType===$e&&(this.documentElement=ve),ve},removeChild:function(ve){return this.documentElement==ve&&(this.documentElement=null),mi(this,ve)},replaceChild:function(ve,ye){Fr(this,ve,ye,eo),ve.ownerDocument=this,ye&&this.removeChild(ye),Nn(ve)&&(this.documentElement=ve)},importNode:function(ve,ye){return Pe(this,ve,ye)},getElementById:function(ve){var ye=null;return xr(this.documentElement,function(He){if(He.nodeType==$e&&He.getAttribute("id")==ve)return ye=He,!0}),ye},getElementsByClassName:function(ve){var ye=Qe(ve);return new zt(this,function(He){var Tt=[];return ye.length>0&&xr(He.documentElement,function(ln){if(ln!==He&&ln.nodeType===$e){var Xn=ln.getAttribute("class");if(Xn){var Hr=ve===Xn;if(!Hr){var ui=Qe(Xn);Hr=ye.every(function at(ve){return function(ye){return ve&&-1!==ve.indexOf(ye)}}(ui))}Hr&&Tt.push(ln)}}}),Tt})},createElement:function(ve){var ye=new Tr;return ye.ownerDocument=this,ye.nodeName=ve,ye.tagName=ve,ye.localName=ve,ye.childNodes=new jt,(ye.attributes=new Tn)._ownerElement=ye,ye},createDocumentFragment:function(){var ve=new Ar;return ve.ownerDocument=this,ve.childNodes=new jt,ve},createTextNode:function(ve){var ye=new is;return ye.ownerDocument=this,ye.appendData(ve),ye},createComment:function(ve){var ye=new ci;return ye.ownerDocument=this,ye.appendData(ve),ye},createCDATASection:function(ve){var ye=new Ri;return ye.ownerDocument=this,ye.appendData(ve),ye},createProcessingInstruction:function(ve,ye){var He=new ls;return He.ownerDocument=this,He.tagName=He.nodeName=He.target=ve,He.nodeValue=He.data=ye,He},createAttribute:function(ve){var ye=new qi;return ye.ownerDocument=this,ye.name=ve,ye.nodeName=ve,ye.localName=ve,ye.specified=!0,ye},createEntityReference:function(ve){var ye=new Vi;return ye.ownerDocument=this,ye.nodeName=ve,ye},createElementNS:function(ve,ye){var He=new Tr,Tt=ye.split(":"),ln=He.attributes=new Tn;return He.childNodes=new jt,He.ownerDocument=this,He.nodeName=ye,He.tagName=ye,He.namespaceURI=ve,2==Tt.length?(He.prefix=Tt[0],He.localName=Tt[1]):He.localName=ye,ln._ownerElement=He,He},createAttributeNS:function(ve,ye){var He=new qi,Tt=ye.split(":");return He.ownerDocument=this,He.nodeName=ye,He.name=ye,He.namespaceURI=ve,He.specified=!0,2==Tt.length?(He.prefix=Tt[0],He.localName=Tt[1]):He.localName=ye,He}},xe(hr,Bn),hr.prototype.getElementsByTagName=(Tr.prototype={nodeType:$e,hasAttribute:function(ve){return null!=this.getAttributeNode(ve)},getAttribute:function(ve){var ye=this.getAttributeNode(ve);return ye&&ye.value||""},getAttributeNode:function(ve){return this.attributes.getNamedItem(ve)},setAttribute:function(ve,ye){var He=this.ownerDocument.createAttribute(ve);He.value=He.nodeValue=""+ye,this.setAttributeNode(He)},removeAttribute:function(ve){var ye=this.getAttributeNode(ve);ye&&this.removeAttributeNode(ye)},appendChild:function(ve){return ve.nodeType===Ee?this.insertBefore(ve,null):function Qi(ve,ye){return ye.parentNode&&ye.parentNode.removeChild(ye),ye.parentNode=ve,ye.previousSibling=ve.lastChild,ye.nextSibling=null,ye.previousSibling?ye.previousSibling.nextSibling=ye:ve.firstChild=ye,ve.lastChild=ye,Sr(ve.ownerDocument,ve,ye),ye}(this,ve)},setAttributeNode:function(ve){return this.attributes.setNamedItem(ve)},setAttributeNodeNS:function(ve){return this.attributes.setNamedItemNS(ve)},removeAttributeNode:function(ve){return this.attributes.removeNamedItem(ve.nodeName)},removeAttributeNS:function(ve,ye){var He=this.getAttributeNodeNS(ve,ye);He&&this.removeAttributeNode(He)},hasAttributeNS:function(ve,ye){return null!=this.getAttributeNodeNS(ve,ye)},getAttributeNS:function(ve,ye){var He=this.getAttributeNodeNS(ve,ye);return He&&He.value||""},setAttributeNS:function(ve,ye,He){var Tt=this.ownerDocument.createAttributeNS(ve,ye);Tt.value=Tt.nodeValue=""+He,this.setAttributeNode(Tt)},getAttributeNodeNS:function(ve,ye){return this.attributes.getNamedItemNS(ve,ye)},getElementsByTagName:function(ve){return new zt(this,function(ye){var He=[];return xr(ye,function(Tt){Tt!==ye&&Tt.nodeType==$e&&("*"===ve||Tt.tagName==ve)&&He.push(Tt)}),He})},getElementsByTagNameNS:function(ve,ye){return new zt(this,function(He){var Tt=[];return xr(He,function(ln){ln!==He&&ln.nodeType===$e&&("*"===ve||ln.namespaceURI===ve)&&("*"===ye||ln.localName==ye)&&Tt.push(ln)}),Tt})}}).getElementsByTagName,hr.prototype.getElementsByTagNameNS=Tr.prototype.getElementsByTagNameNS,xe(Tr,Bn),qi.prototype.nodeType=kt,xe(qi,Bn),br.prototype={data:"",substringData:function(ve,ye){return this.data.substring(ve,ve+ye)},appendData:function(ve){this.nodeValue=this.data=ve=this.data+ve,this.length=ve.length},insertData:function(ve,ye){this.replaceData(ve,0,ye)},appendChild:function(ve){throw new Error(gt[Fe])},deleteData:function(ve,ye){this.replaceData(ve,ye,"")},replaceData:function(ve,ye,He){var Tt=this.data.substring(0,ve),ln=this.data.substring(ve+ye);this.nodeValue=this.data=He=Tt+He+ln,this.length=He.length}},xe(br,Bn),is.prototype={nodeName:"#text",nodeType:ge,splitText:function(ve){var ye=this.data,He=ye.substring(ve);ye=ye.substring(0,ve),this.data=this.nodeValue=ye,this.length=ye.length;var Tt=this.ownerDocument.createTextNode(He);return this.parentNode&&this.parentNode.insertBefore(Tt,this.nextSibling),Tt}},xe(is,br),ci.prototype={nodeName:"#comment",nodeType:Ke},xe(ci,br),Ri.prototype={nodeName:"#cdata-section",nodeType:St},xe(Ri,br),li.prototype.nodeType=te,xe(li,Bn),vi.prototype.nodeType=Te,xe(vi,Bn),Nr.prototype.nodeType=rt,xe(Nr,Bn),Vi.prototype.nodeType=Ze,xe(Vi,Bn),Ar.prototype.nodeName="#document-fragment",Ar.prototype.nodeType=Ee,xe(Ar,Bn),ls.prototype.nodeType=et,xe(ls,Bn),mr.prototype.serializeToString=function(ve,ye,He){return lt.call(ve,ye,He)},Bn.prototype.toString=lt;try{if(Object.defineProperty){let ve=function(ye){switch(ye.nodeType){case $e:case Ee:var He=[];for(ye=ye.firstChild;ye;)7!==ye.nodeType&&8!==ye.nodeType&&He.push(ve(ye)),ye=ye.nextSibling;return He.join("");default:return ye.nodeValue}};Object.defineProperty(zt.prototype,"length",{get:function(){return In(this),this.$$length}}),Object.defineProperty(Bn.prototype,"textContent",{get:function(){return ve(this)},set:function(ye){switch(this.nodeType){case $e:case Ee:for(;this.firstChild;)this.removeChild(this.firstChild);(ye||String(ye))&&this.appendChild(this.ownerDocument.createTextNode(ye));break;default:this.data=ye,this.value=ye,this.nodeValue=ye}}}),Qt=function(ye,He,Tt){ye["$$"+He]=Tt}}}catch{}ht.DocumentType=li,ht.DOMException=ft,ht.DOMImplementation=ir,ht.Element=Tr,ht.Node=Bn,ht.NodeList=jt,ht.XMLSerializer=mr},4562:(tn,ht,z)=>{"use strict";var T=z(9451).freeze;ht.XML_ENTITIES=T({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),ht.HTML_ENTITIES=T({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),ht.entityMap=ht.HTML_ENTITIES},3862:(tn,ht,z)=>{z(6475);ht.DOMParser=z(1020).DOMParser},6989:(tn,ht,z)=>{var T=z(9451).NAMESPACE,me=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,le=new RegExp("[\\-\\.0-9"+me.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),B=new RegExp("^"+me.source+le.source+"*(?::"+me.source+le.source+"*)?$");function kt(Y,oe){this.message=Y,this.locator=oe,Error.captureStackTrace&&Error.captureStackTrace(this,kt)}function ge(){}function Ze(Y,oe){return oe.lineNumber=Y.lineNumber,oe.columnNumber=Y.columnNumber,oe}function rt(Y,oe,Fe,At,Ht,Gt){function Xt(dt,It,ft){Fe.attributeNames.hasOwnProperty(dt)&&Gt.fatalError("Attribute "+dt+" redefined"),Fe.addValue(dt,It,ft)}for(var pn,Yt=++oe,qe=0;;){var Xe=Y.charAt(Yt);switch(Xe){case"=":if(1===qe)pn=Y.slice(oe,Yt),qe=3;else{if(2!==qe)throw new Error("attribute equal must after attrName");qe=3}break;case"'":case'"':if(3===qe||1===qe){if(1===qe&&(Gt.warning('attribute value must after "="'),pn=Y.slice(oe,Yt)),!((Yt=Y.indexOf(Xe,oe=Yt+1))>0))throw new Error("attribute value no end '"+Xe+"' match");Xt(pn,Zt=Y.slice(oe,Yt).replace(/&#?\w+;/g,Ht),oe-1),qe=5}else{if(4!=qe)throw new Error('attribute value must after "="');Xt(pn,Zt=Y.slice(oe,Yt).replace(/&#?\w+;/g,Ht),oe),Gt.warning('attribute "'+pn+'" missed start quot('+Xe+")!!"),oe=Yt+1,qe=5}break;case"/":switch(qe){case 0:Fe.setTagName(Y.slice(oe,Yt));case 5:case 6:case 7:qe=7,Fe.closed=!0;case 4:case 1:break;case 2:Fe.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Gt.error("unexpected end of input"),0==qe&&Fe.setTagName(Y.slice(oe,Yt)),Yt;case">":switch(qe){case 0:Fe.setTagName(Y.slice(oe,Yt));case 5:case 6:case 7:break;case 4:case 1:"/"===(Zt=Y.slice(oe,Yt)).slice(-1)&&(Fe.closed=!0,Zt=Zt.slice(0,-1));case 2:2===qe&&(Zt=pn),4==qe?(Gt.warning('attribute "'+Zt+'" missed quot(")!'),Xt(pn,Zt.replace(/&#?\w+;/g,Ht),oe)):((!T.isHTML(At[""])||!Zt.match(/^(?:disabled|checked|selected)$/i))&&Gt.warning('attribute "'+Zt+'" missed value!! "'+Zt+'" instead!!'),Xt(Zt,Zt,oe));break;case 3:throw new Error("attribute value missed!!")}return Yt;case"\x80":Xe=" ";default:if(Xe<=" ")switch(qe){case 0:Fe.setTagName(Y.slice(oe,Yt)),qe=6;break;case 1:pn=Y.slice(oe,Yt),qe=2;break;case 4:var Zt=Y.slice(oe,Yt).replace(/&#?\w+;/g,Ht);Gt.warning('attribute "'+Zt+'" missed quot(")!!'),Xt(pn,Zt,oe);case 5:qe=6}else switch(qe){case 2:(!T.isHTML(At[""])||!pn.match(/^(?:disabled|checked|selected)$/i))&&Gt.warning('attribute "'+pn+'" missed value!! "'+pn+'" instead2!!'),Xt(pn,pn,oe),oe=Yt,qe=1;break;case 5:Gt.warning('attribute space is required"'+pn+'"!!');case 6:qe=1,oe=Yt;break;case 3:qe=4,oe=Yt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Yt++}}function et(Y,oe,Fe){for(var At=Y.tagName,Ht=null,Xe=Y.length;Xe--;){var Gt=Y[Xe],Xt=Gt.qName,pn=Gt.value;if((ot=Xt.indexOf(":"))>0)var Zt=Gt.prefix=Xt.slice(0,ot),Yt=Xt.slice(ot+1),qe="xmlns"===Zt&&Yt;else Yt=Xt,Zt=null,qe="xmlns"===Xt&&"";Gt.localName=Yt,!1!==qe&&(null==Ht&&(Ht={},te(Fe,Fe={})),Fe[qe]=Ht[qe]=pn,Gt.uri=T.XMLNS,oe.startPrefixMapping(qe,pn))}for(Xe=Y.length;Xe--;)(Zt=(Gt=Y[Xe]).prefix)&&("xml"===Zt&&(Gt.uri=T.XML),"xmlns"!==Zt&&(Gt.uri=Fe[Zt||""]));var ot;(ot=At.indexOf(":"))>0?(Zt=Y.prefix=At.slice(0,ot),Yt=Y.localName=At.slice(ot+1)):(Zt=null,Yt=Y.localName=At);var dt=Y.uri=Fe[Zt||""];if(oe.startElement(dt,Yt,At,Y),!Y.closed)return Y.currentNSMap=Fe,Y.localNSMap=Ht,!0;if(oe.endElement(dt,Yt,At),Ht)for(Zt in Ht)Object.prototype.hasOwnProperty.call(Ht,Zt)&&oe.endPrefixMapping(Zt)}function Ke(Y,oe,Fe,At,Ht){if(/^(?:script|textarea)$/i.test(Fe)){var Gt=Y.indexOf("</"+Fe+">",oe),Xt=Y.substring(oe+1,Gt);if(/[&<]/.test(Xt))return/^script$/i.test(Fe)?(Ht.characters(Xt,0,Xt.length),Gt):(Xt=Xt.replace(/&#?\w+;/g,At),Ht.characters(Xt,0,Xt.length),Gt)}return oe+1}function W(Y,oe,Fe,At){var Ht=At[Fe];return null==Ht&&((Ht=Y.lastIndexOf("</"+Fe+">"))<oe&&(Ht=Y.lastIndexOf("</"+Fe)),At[Fe]=Ht),Ht<oe}function te(Y,oe){for(var Fe in Y)Object.prototype.hasOwnProperty.call(Y,Fe)&&(oe[Fe]=Y[Fe])}function Ee(Y,oe,Fe,At){if("-"===Y.charAt(oe+2))return"-"===Y.charAt(oe+3)?(Gt=Y.indexOf("--\x3e",oe+4))>oe?(Fe.comment(Y,oe+4,Gt-oe-4),Gt+3):(At.error("Unclosed comment"),-1):-1;if("CDATA["==Y.substr(oe+3,6)){var Gt=Y.indexOf("]]>",oe+9);return Fe.startCDATA(),Fe.characters(Y,oe+9,Gt-oe-9),Fe.endCDATA(),Gt+3}var Xt=function gt(Y,oe){var Fe,At=[],Ht=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Ht.lastIndex=oe,Ht.exec(Y);Fe=Ht.exec(Y);)if(At.push(Fe),Fe[1])return At}(Y,oe),pn=Xt.length;if(pn>1&&/!doctype/i.test(Xt[0][0])){var Zt=Xt[1][0],Yt=!1,qe=!1;pn>3&&(/^public$/i.test(Xt[2][0])?(Yt=Xt[3][0],qe=pn>4&&Xt[4][0]):/^system$/i.test(Xt[2][0])&&(qe=Xt[3][0]));var Xe=Xt[pn-1];return Fe.startDTD(Zt,Yt,qe),Fe.endDTD(),Xe.index+Xe[0].length}return-1}function Te(Y,oe,Fe){var At=Y.indexOf("?>",oe);if(At){var Ht=Y.substring(oe,At).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Ht?(Fe.processingInstruction(Ht[1],Ht[2]),At+2):-1}return-1}function Ae(){this.attributeNames={}}(kt.prototype=new Error).name=kt.name,ge.prototype={parse:function(Y,oe,Fe){var At=this.domBuilder;At.startDocument(),te(oe,oe={}),function St(Y,oe,Fe,At,Ht){function Xt(Rr){var an=Rr.slice(1,-1);return an in Fe?Fe[an]:"#"===an.charAt(0)?function Gt(Rr){return Rr>65535?(Rr-=65536,String.fromCharCode(55296+(Rr>>10),56320+(1023&Rr))):String.fromCharCode(Rr)}(parseInt(an.substr(1).replace("x","0x"))):(Ht.error("entity not found:"+Rr),Rr)}function pn(Rr){if(Rr>ft){var an=Y.substring(ft,Rr).replace(/&#?\w+;/g,Xt);ot&&Zt(ft),At.characters(an,0,Rr-ft),ft=Rr}}function Zt(Rr,an){for(;Rr>=qe&&(an=Xe.exec(Y));)qe=(Yt=an.index)+an[0].length,ot.lineNumber++;ot.columnNumber=Rr-Yt+1}for(var Yt=0,qe=0,Xe=/.*(?:\r\n?|\n)|.*$/g,ot=At.locator,dt=[{currentNSMap:oe}],It={},ft=0;;){try{var jt=Y.indexOf("<",ft);if(jt<0){if(!Y.substr(ft).match(/^\s*$/)){var zt=At.doc,In=zt.createTextNode(Y.substr(ft));zt.appendChild(In),At.currentElement=In}return}switch(jt>ft&&pn(jt),Y.charAt(jt+1)){case"/":var hr=Y.indexOf(">",jt+3),Tn=Y.substring(jt+2,hr).replace(/[ \t\n\r]+$/g,""),xn=dt.pop();hr<0?(Tn=Y.substring(jt+2).replace(/[\s<].*/,""),Ht.error("end tag name: "+Tn+" is not complete:"+xn.tagName),hr=jt+1+Tn.length):Tn.match(/\s</)&&(Tn=Tn.replace(/[\s<].*/,""),Ht.error("end tag name: "+Tn+" maybe not complete"),hr=jt+1+Tn.length);var $n=xn.localNSMap,Gn=xn.tagName==Tn;if(Gn||xn.tagName&&xn.tagName.toLowerCase()==Tn.toLowerCase()){if(At.endElement(xn.uri,xn.localName,Tn),$n)for(var Bn in $n)Object.prototype.hasOwnProperty.call($n,Bn)&&At.endPrefixMapping(Bn);Gn||Ht.fatalError("end tag name: "+Tn+" is not match the current start tagName:"+xn.tagName)}else dt.push(xn);hr++;break;case"?":ot&&Zt(jt),hr=Te(Y,jt,At);break;case"!":ot&&Zt(jt),hr=Ee(Y,jt,At,Ht);break;default:ot&&Zt(jt);var dr=new Ae,xr=dt[dt.length-1].currentNSMap,qr=(hr=rt(Y,jt,dr,xr,Xt,Ht),dr.length);if(!dr.closed&&W(Y,hr,dr.tagName,It)&&(dr.closed=!0,Fe.nbsp||Ht.warning("unclosed xml attribute")),ot&&qr){for(var Gr=Ze(ot,{}),Sr=0;Sr<qr;Sr++){var mi=dr[Sr];Zt(mi.offset),mi.locator=Ze(ot,{})}At.locator=Gr,et(dr,At,xr)&&dt.push(dr),At.locator=ot}else et(dr,At,xr)&&dt.push(dr);T.isHTML(dr.uri)&&!dr.closed?hr=Ke(Y,hr,dr.tagName,Xt,At):hr++}}catch(Rr){if(Rr instanceof kt)throw Rr;Ht.error("element parse error: "+Rr),hr=-1}hr>ft?ft=hr:pn(Math.max(jt,ft)+1)}}(Y,oe,Fe,At,this.errorHandler),At.endDocument()}},Ae.prototype={setTagName:function(Y){if(!B.test(Y))throw new Error("invalid tagName:"+Y);this.tagName=Y},addValue:function(Y,oe,Fe){if(!B.test(Y))throw new Error("invalid attribute:"+Y);this.attributeNames[Y]=this.length,this[this.length++]={qName:Y,value:oe,offset:Fe}},length:0,getLocalName:function(Y){return this[Y].localName},getLocator:function(Y){return this[Y].locator},getQName:function(Y){return this[Y].qName},getURI:function(Y){return this[Y].uri},getValue:function(Y){return this[Y].value}},ht.XMLReader=ge,ht.ParseError=kt},7598:(tn,ht,z)=>{var le,T=typeof global<"u"?global:typeof window<"u"?window:{},me=z(5893);typeof document<"u"?le=document:(le=T["__GLOBAL_DOCUMENT_CACHE@4"])||(le=T["__GLOBAL_DOCUMENT_CACHE@4"]=me),tn.exports=le},6382:tn=>{var ht;ht=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tn.exports=ht},7794:tn=>{tn.exports=function z(T){if(!T)return!1;var me=ht.call(T);return"[object Function]"===me||"function"==typeof T&&"[object RegExp]"!==me||typeof window<"u"&&(T===window.setTimeout||T===window.alert||T===window.confirm||T===window.prompt)};var ht=Object.prototype.toString},8317:(tn,ht)=>{function z(Ne){if(Ne&&"object"==typeof Ne){var Qe=Ne.which||Ne.keyCode||Ne.charCode;Qe&&(Ne=Qe)}if("number"==typeof Ne)return B[Ne];var ut,at=String(Ne);return(ut=T[at.toLowerCase()])?ut:(ut=me[at.toLowerCase()])||(1===at.length?at.charCodeAt(0):void 0)}z.isEventKey=function(Qe,at){if(Qe&&"object"==typeof Qe){var ut=Qe.which||Qe.keyCode||Qe.charCode;if(null==ut)return!1;if("string"==typeof at){var xe;if(xe=T[at.toLowerCase()])return xe===ut;if(xe=me[at.toLowerCase()])return xe===ut}else if("number"==typeof at)return at===ut;return!1}};var T=(ht=tn.exports=z).code=ht.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},me=ht.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(le=97;le<123;le++)T[String.fromCharCode(le)]=le-32;for(var le=48;le<58;le++)T[le-48]=le;for(le=1;le<13;le++)T["f"+le]=le+111;for(le=0;le<10;le++)T["numpad "+le]=le+96;var B=ht.names=ht.title={};for(le in T)B[T[le]]=le;for(var Re in me)T[Re]=me[Re]},5035:tn=>{var ht=Math.pow(2,32);tn.exports=function(T){var me=new DataView(T.buffer,T.byteOffset,T.byteLength),le={version:T[0],flags:new Uint8Array(T.subarray(1,4)),references:[],referenceId:me.getUint32(4),timescale:me.getUint32(8)},B=12;0===le.version?(le.earliestPresentationTime=me.getUint32(B),le.firstOffset=me.getUint32(B+4),B+=8):(le.earliestPresentationTime=me.getUint32(B)*ht+me.getUint32(B+4),le.firstOffset=me.getUint32(B+8)*ht+me.getUint32(B+12),B+=16);var Re=me.getUint16(B+=2);for(B+=2;Re>0;B+=12,Re--)le.references.push({referenceType:(128&T[B])>>>7,referencedSize:2147483647&me.getUint32(B),subsegmentDuration:me.getUint32(B+4),startsWithSap:!!(128&T[B+8]),sapType:(112&T[B+8])>>>4,sapDeltaTime:268435455&me.getUint32(B+8)});return le}},5562:tn=>{var z,T,me,le,B,Re,Ne;B=function(Qe,at){return z(le(Qe,at))},Re=function(Qe,at){return T(me(Qe),at)},Ne=function(Qe,at,ut){return me(ut?Qe:Qe-at)},tn.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:z=function(Qe){return 9e4*Qe},secondsToAudioTs:T=function(Qe,at){return Qe*at},videoTsToSeconds:me=function(Qe){return Qe/9e4},audioTsToSeconds:le=function(Qe,at){return Qe/at},audioTsToVideoTs:B,videoTsToAudioTs:Re,metadataTsToSeconds:Ne}},5619:(tn,ht,z)=>{"use strict";z.d(ht,{X:()=>me});var T=z(8645);class me extends T.x{constructor(B){super(),this._value=B}get value(){return this.getValue()}_subscribe(B){const Re=super._subscribe(B);return!Re.closed&&B.next(this._value),Re}getValue(){const{hasError:B,thrownError:Re,_value:Ne}=this;if(B)throw Re;return this._throwIfClosed(),Ne}next(B){super.next(this._value=B)}}},5592:(tn,ht,z)=>{"use strict";z.d(ht,{y:()=>at});var T=z(305),me=z(7394),le=z(4850),B=z(8407),Re=z(2653),Ne=z(4674),Qe=z(1441);let at=(()=>{class $e{constructor(ge){ge&&(this._subscribe=ge)}lift(ge){const St=new $e;return St.source=this,St.operator=ge,St}subscribe(ge,St,Ze){const rt=function je($e){return $e&&$e instanceof T.Lv||function xe($e){return $e&&(0,Ne.m)($e.next)&&(0,Ne.m)($e.error)&&(0,Ne.m)($e.complete)}($e)&&(0,me.Nn)($e)}(ge)?ge:new T.Hp(ge,St,Ze);return(0,Qe.x)(()=>{const{operator:et,source:Ke}=this;rt.add(et?et.call(rt,Ke):Ke?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(ge){try{return this._subscribe(ge)}catch(St){ge.error(St)}}forEach(ge,St){return new(St=ut(St))((Ze,rt)=>{const et=new T.Hp({next:Ke=>{try{ge(Ke)}catch(W){rt(W),et.unsubscribe()}},error:rt,complete:Ze});this.subscribe(et)})}_subscribe(ge){var St;return null===(St=this.source)||void 0===St?void 0:St.subscribe(ge)}[le.L](){return this}pipe(...ge){return(0,B.U)(ge)(this)}toPromise(ge){return new(ge=ut(ge))((St,Ze)=>{let rt;this.subscribe(et=>rt=et,et=>Ze(et),()=>St(rt))})}}return $e.create=kt=>new $e(kt),$e})();function ut($e){var kt;return null!==(kt=$e??Re.config.Promise)&&void 0!==kt?kt:Promise}},8645:(tn,ht,z)=>{"use strict";z.d(ht,{x:()=>Qe});var T=z(5592),me=z(7394);const B=(0,z(2306).d)(ut=>function(){ut(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=z(9039),Ne=z(1441);let Qe=(()=>{class ut extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(je){const $e=new at(this,this);return $e.operator=je,$e}_throwIfClosed(){if(this.closed)throw new B}next(je){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const $e of this.currentObservers)$e.next(je)}})}error(je){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=je;const{observers:$e}=this;for(;$e.length;)$e.shift().error(je)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:je}=this;for(;je.length;)je.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var je;return(null===(je=this.observers)||void 0===je?void 0:je.length)>0}_trySubscribe(je){return this._throwIfClosed(),super._trySubscribe(je)}_subscribe(je){return this._throwIfClosed(),this._checkFinalizedStatuses(je),this._innerSubscribe(je)}_innerSubscribe(je){const{hasError:$e,isStopped:kt,observers:ge}=this;return $e||kt?me.Lc:(this.currentObservers=null,ge.push(je),new me.w0(()=>{this.currentObservers=null,(0,Re.P)(ge,je)}))}_checkFinalizedStatuses(je){const{hasError:$e,thrownError:kt,isStopped:ge}=this;$e?je.error(kt):ge&&je.complete()}asObservable(){const je=new T.y;return je.source=this,je}}return ut.create=(xe,je)=>new at(xe,je),ut})();class at extends Qe{constructor(xe,je){super(),this.destination=xe,this.source=je}next(xe){var je,$e;null===($e=null===(je=this.destination)||void 0===je?void 0:je.next)||void 0===$e||$e.call(je,xe)}error(xe){var je,$e;null===($e=null===(je=this.destination)||void 0===je?void 0:je.error)||void 0===$e||$e.call(je,xe)}complete(){var xe,je;null===(je=null===(xe=this.destination)||void 0===xe?void 0:xe.complete)||void 0===je||je.call(xe)}_subscribe(xe){var je,$e;return null!==($e=null===(je=this.source)||void 0===je?void 0:je.subscribe(xe))&&void 0!==$e?$e:me.Lc}}},305:(tn,ht,z)=>{"use strict";z.d(ht,{Hp:()=>Ze,Lv:()=>$e});var T=z(4674),me=z(7394),le=z(2653),B=z(3894),Re=z(2420);const Ne=ut("C",void 0,void 0);function ut(te,Ee,Te){return{kind:te,value:Ee,error:Te}}var xe=z(7599),je=z(1441);class $e extends me.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,me.Nn)(Ee)&&Ee.add(this)):this.destination=W}static create(Ee,Te,Ae){return new Ze(Ee,Te,Ae)}next(Ee){this.isStopped?Ke(function at(te){return ut("N",te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ke(function Qe(te){return ut("E",void 0,te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ke(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kt=Function.prototype.bind;function ge(te,Ee){return kt.call(te,Ee)}class St{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ee)}catch(Ae){rt(Ae)}}error(Ee){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ee)}catch(Ae){rt(Ae)}else rt(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Te){rt(Te)}}}class Ze extends $e{constructor(Ee,Te,Ae){let gt;if(super(),(0,T.m)(Ee)||!Ee)gt={next:Ee??void 0,error:Te??void 0,complete:Ae??void 0};else{let Y;this&&le.config.useDeprecatedNextContext?(Y=Object.create(Ee),Y.unsubscribe=()=>this.unsubscribe(),gt={next:Ee.next&&ge(Ee.next,Y),error:Ee.error&&ge(Ee.error,Y),complete:Ee.complete&&ge(Ee.complete,Y)}):gt=Ee}this.destination=new St(gt)}}function rt(te){le.config.useDeprecatedSynchronousErrorHandling?(0,je.O)(te):(0,B.h)(te)}function Ke(te,Ee){const{onStoppedNotification:Te}=le.config;Te&&xe.z.setTimeout(()=>Te(te,Ee))}const W={closed:!0,next:Re.Z,error:function et(te){throw te},complete:Re.Z}},7394:(tn,ht,z)=>{"use strict";z.d(ht,{Lc:()=>Ne,w0:()=>Re,Nn:()=>Qe});var T=z(4674);const le=(0,z(2306).d)(ut=>function(je){ut(this),this.message=je?`${je.length} errors occurred during unsubscription:\n${je.map(($e,kt)=>`${kt+1}) ${$e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=je});var B=z(9039);class Re{constructor(xe){this.initialTeardown=xe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let xe;if(!this.closed){this.closed=!0;const{_parentage:je}=this;if(je)if(this._parentage=null,Array.isArray(je))for(const ge of je)ge.remove(this);else je.remove(this);const{initialTeardown:$e}=this;if((0,T.m)($e))try{$e()}catch(ge){xe=ge instanceof le?ge.errors:[ge]}const{_finalizers:kt}=this;if(kt){this._finalizers=null;for(const ge of kt)try{at(ge)}catch(St){xe=xe??[],St instanceof le?xe=[...xe,...St.errors]:xe.push(St)}}if(xe)throw new le(xe)}}add(xe){var je;if(xe&&xe!==this)if(this.closed)at(xe);else{if(xe instanceof Re){if(xe.closed||xe._hasParent(this))return;xe._addParent(this)}(this._finalizers=null!==(je=this._finalizers)&&void 0!==je?je:[]).push(xe)}}_hasParent(xe){const{_parentage:je}=this;return je===xe||Array.isArray(je)&&je.includes(xe)}_addParent(xe){const{_parentage:je}=this;this._parentage=Array.isArray(je)?(je.push(xe),je):je?[je,xe]:xe}_removeParent(xe){const{_parentage:je}=this;je===xe?this._parentage=null:Array.isArray(je)&&(0,B.P)(je,xe)}remove(xe){const{_finalizers:je}=this;je&&(0,B.P)(je,xe),xe instanceof Re&&xe._removeParent(this)}}Re.EMPTY=(()=>{const ut=new Re;return ut.closed=!0,ut})();const Ne=Re.EMPTY;function Qe(ut){return ut instanceof Re||ut&&"closed"in ut&&(0,T.m)(ut.remove)&&(0,T.m)(ut.add)&&(0,T.m)(ut.unsubscribe)}function at(ut){(0,T.m)(ut)?ut():ut.unsubscribe()}},2653:(tn,ht,z)=>{"use strict";z.d(ht,{config:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(tn,ht,z)=>{"use strict";z.d(ht,{a:()=>xe});var T=z(5592),me=z(7453),le=z(2459),B=z(2737),Re=z(7400),Ne=z(9940),Qe=z(2714),at=z(8251),ut=z(7103);function xe(...kt){const ge=(0,Ne.yG)(kt),St=(0,Ne.jO)(kt),{args:Ze,keys:rt}=(0,me.D)(kt);if(0===Ze.length)return(0,le.D)([],ge);const et=new T.y(function je(kt,ge,St=B.y){return Ze=>{$e(ge,()=>{const{length:rt}=kt,et=new Array(rt);let Ke=rt,W=rt;for(let te=0;te<rt;te++)$e(ge,()=>{const Ee=(0,le.D)(kt[te],ge);let Te=!1;Ee.subscribe((0,at.x)(Ze,Ae=>{et[te]=Ae,Te||(Te=!0,W--),W||Ze.next(St(et.slice()))},()=>{--Ke||Ze.complete()}))},Ze)},Ze)}}(Ze,ge,rt?Ke=>(0,Qe.n)(rt,Ke):B.y));return St?et.pipe((0,Re.Z)(St)):et}function $e(kt,ge,St){kt?(0,ut.f)(St,kt,ge):ge()}},5211:(tn,ht,z)=>{"use strict";z.d(ht,{z:()=>Re});var T=z(7537),le=z(9940),B=z(2459);function Re(...Ne){return function me(){return(0,T.J)(1)}()((0,B.D)(Ne,(0,le.yG)(Ne)))}},6232:(tn,ht,z)=>{"use strict";z.d(ht,{E:()=>me});const me=new(z(5592).y)(Re=>Re.complete())},9315:(tn,ht,z)=>{"use strict";z.d(ht,{D:()=>at});var T=z(5592),me=z(7453),le=z(4829),B=z(9940),Re=z(8251),Ne=z(7400),Qe=z(2714);function at(...ut){const xe=(0,B.jO)(ut),{args:je,keys:$e}=(0,me.D)(ut),kt=new T.y(ge=>{const{length:St}=je;if(!St)return void ge.complete();const Ze=new Array(St);let rt=St,et=St;for(let Ke=0;Ke<St;Ke++){let W=!1;(0,le.Xf)(je[Ke]).subscribe((0,Re.x)(ge,te=>{W||(W=!0,et--),Ze[Ke]=te},()=>rt--,void 0,()=>{(!rt||!W)&&(et||ge.next($e?(0,Qe.n)($e,Ze):Ze),ge.complete())}))}});return xe?kt.pipe((0,Ne.Z)(xe)):kt}},2459:(tn,ht,z)=>{"use strict";z.d(ht,{D:()=>Ee});var T=z(4829),me=z(3093),le=z(5137),Ne=z(5592),at=z(4971),ut=z(4674),xe=z(7103);function $e(Te,Ae){if(!Te)throw new Error("Iterable cannot be null");return new Ne.y(gt=>{(0,xe.f)(gt,Ae,()=>{const Y=Te[Symbol.asyncIterator]();(0,xe.f)(gt,Ae,()=>{Y.next().then(oe=>{oe.done?gt.complete():gt.next(oe.value)})},0,!0)})})}var kt=z(8382),ge=z(4026),St=z(4266),Ze=z(3664),rt=z(5726),et=z(9853),Ke=z(541);function Ee(Te,Ae){return Ae?function te(Te,Ae){if(null!=Te){if((0,kt.c)(Te))return function B(Te,Ae){return(0,T.Xf)(Te).pipe((0,le.R)(Ae),(0,me.Q)(Ae))}(Te,Ae);if((0,St.z)(Te))return function Qe(Te,Ae){return new Ne.y(gt=>{let Y=0;return Ae.schedule(function(){Y===Te.length?gt.complete():(gt.next(Te[Y++]),gt.closed||this.schedule())})})}(Te,Ae);if((0,ge.t)(Te))return function Re(Te,Ae){return(0,T.Xf)(Te).pipe((0,le.R)(Ae),(0,me.Q)(Ae))}(Te,Ae);if((0,rt.D)(Te))return $e(Te,Ae);if((0,Ze.T)(Te))return function je(Te,Ae){return new Ne.y(gt=>{let Y;return(0,xe.f)(gt,Ae,()=>{Y=Te[at.h](),(0,xe.f)(gt,Ae,()=>{let oe,Fe;try{({value:oe,done:Fe}=Y.next())}catch(At){return void gt.error(At)}Fe?gt.complete():gt.next(oe)},0,!0)}),()=>(0,ut.m)(Y?.return)&&Y.return()})}(Te,Ae);if((0,Ke.L)(Te))return function W(Te,Ae){return $e((0,Ke.Q)(Te),Ae)}(Te,Ae)}throw(0,et.z)(Te)}(Te,Ae):(0,T.Xf)(Te)}},4829:(tn,ht,z)=>{"use strict";z.d(ht,{Xf:()=>kt});var T=z(7582),me=z(4266),le=z(4026),B=z(5592),Re=z(8382),Ne=z(5726),Qe=z(9853),at=z(3664),ut=z(541),xe=z(4674),je=z(3894),$e=z(4850);function kt(te){if(te instanceof B.y)return te;if(null!=te){if((0,Re.c)(te))return function ge(te){return new B.y(Ee=>{const Te=te[$e.L]();if((0,xe.m)(Te.subscribe))return Te.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(te);if((0,me.z)(te))return function St(te){return new B.y(Ee=>{for(let Te=0;Te<te.length&&!Ee.closed;Te++)Ee.next(te[Te]);Ee.complete()})}(te);if((0,le.t)(te))return function Ze(te){return new B.y(Ee=>{te.then(Te=>{Ee.closed||(Ee.next(Te),Ee.complete())},Te=>Ee.error(Te)).then(null,je.h)})}(te);if((0,Ne.D)(te))return et(te);if((0,at.T)(te))return function rt(te){return new B.y(Ee=>{for(const Te of te)if(Ee.next(Te),Ee.closed)return;Ee.complete()})}(te);if((0,ut.L)(te))return function Ke(te){return et((0,ut.Q)(te))}(te)}throw(0,Qe.z)(te)}function et(te){return new B.y(Ee=>{(function W(te,Ee){var Te,Ae,gt,Y;return(0,T.mG)(this,void 0,void 0,function*(){try{for(Te=(0,T.KL)(te);!(Ae=yield Te.next()).done;)if(Ee.next(Ae.value),Ee.closed)return}catch(oe){gt={error:oe}}finally{try{Ae&&!Ae.done&&(Y=Te.return)&&(yield Y.call(Te))}finally{if(gt)throw gt.error}}Ee.complete()})})(te,Ee).catch(Te=>Ee.error(Te))})}},3019:(tn,ht,z)=>{"use strict";z.d(ht,{T:()=>Ne});var T=z(7537),me=z(4829),le=z(6232),B=z(9940),Re=z(2459);function Ne(...Qe){const at=(0,B.yG)(Qe),ut=(0,B._6)(Qe,1/0),xe=Qe;return xe.length?1===xe.length?(0,me.Xf)(xe[0]):(0,T.J)(ut)((0,Re.D)(xe,at)):le.E}},2096:(tn,ht,z)=>{"use strict";z.d(ht,{of:()=>le});var T=z(9940),me=z(2459);function le(...B){const Re=(0,T.yG)(B);return(0,me.D)(B,Re)}},8251:(tn,ht,z)=>{"use strict";z.d(ht,{x:()=>me});var T=z(305);function me(B,Re,Ne,Qe,at){return new le(B,Re,Ne,Qe,at)}class le extends T.Lv{constructor(Re,Ne,Qe,at,ut,xe){super(Re),this.onFinalize=ut,this.shouldUnsubscribe=xe,this._next=Ne?function(je){try{Ne(je)}catch($e){Re.error($e)}}:super._next,this._error=at?function(je){try{at(je)}catch($e){Re.error($e)}finally{this.unsubscribe()}}:super._error,this._complete=Qe?function(){try{Qe()}catch(je){Re.error(je)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(Re=this.onFinalize)||void 0===Re||Re.call(this))}}}},3572:(tn,ht,z)=>{"use strict";z.d(ht,{d:()=>le});var T=z(9360),me=z(8251);function le(B){return(0,T.e)((Re,Ne)=>{let Qe=!1;Re.subscribe((0,me.x)(Ne,at=>{Qe=!0,Ne.next(at)},()=>{Qe||Ne.next(B),Ne.complete()}))})}},3997:(tn,ht,z)=>{"use strict";z.d(ht,{x:()=>B});var T=z(2737),me=z(9360),le=z(8251);function B(Ne,Qe=T.y){return Ne=Ne??Re,(0,me.e)((at,ut)=>{let xe,je=!0;at.subscribe((0,le.x)(ut,$e=>{const kt=Qe($e);(je||!Ne(xe,kt))&&(je=!1,xe=kt,ut.next($e))}))})}function Re(Ne,Qe){return Ne===Qe}},2181:(tn,ht,z)=>{"use strict";z.d(ht,{h:()=>le});var T=z(9360),me=z(8251);function le(B,Re){return(0,T.e)((Ne,Qe)=>{let at=0;Ne.subscribe((0,me.x)(Qe,ut=>B.call(Re,ut,at++)&&Qe.next(ut)))})}},1374:(tn,ht,z)=>{"use strict";z.d(ht,{P:()=>Qe});var T=z(6973),me=z(2181),le=z(8180),B=z(3572),Re=z(3026),Ne=z(2737);function Qe(at,ut){const xe=arguments.length>=2;return je=>je.pipe(at?(0,me.h)(($e,kt)=>at($e,kt,je)):Ne.y,(0,le.q)(1),xe?(0,B.d)(ut):(0,Re.T)(()=>new T.K))}},7398:(tn,ht,z)=>{"use strict";z.d(ht,{U:()=>le});var T=z(9360),me=z(8251);function le(B,Re){return(0,T.e)((Ne,Qe)=>{let at=0;Ne.subscribe((0,me.x)(Qe,ut=>{Qe.next(B.call(Re,ut,at++))}))})}},975:(tn,ht,z)=>{"use strict";z.d(ht,{h:()=>me});var T=z(7398);function me(le){return(0,T.U)(()=>le)}},7537:(tn,ht,z)=>{"use strict";z.d(ht,{J:()=>le});var T=z(1631),me=z(2737);function le(B=1/0){return(0,T.z)(me.y,B)}},1631:(tn,ht,z)=>{"use strict";z.d(ht,{z:()=>at});var T=z(7398),me=z(4829),le=z(9360),B=z(7103),Re=z(8251),Qe=z(4674);function at(ut,xe,je=1/0){return(0,Qe.m)(xe)?at(($e,kt)=>(0,T.U)((ge,St)=>xe($e,ge,kt,St))((0,me.Xf)(ut($e,kt))),je):("number"==typeof xe&&(je=xe),(0,le.e)(($e,kt)=>function Ne(ut,xe,je,$e,kt,ge,St,Ze){const rt=[];let et=0,Ke=0,W=!1;const te=()=>{W&&!rt.length&&!et&&xe.complete()},Ee=Ae=>et<$e?Te(Ae):rt.push(Ae),Te=Ae=>{ge&&xe.next(Ae),et++;let gt=!1;(0,me.Xf)(je(Ae,Ke++)).subscribe((0,Re.x)(xe,Y=>{kt?.(Y),ge?Ee(Y):xe.next(Y)},()=>{gt=!0},void 0,()=>{if(gt)try{for(et--;rt.length&&et<$e;){const Y=rt.shift();St?(0,B.f)(xe,St,()=>Te(Y)):Te(Y)}te()}catch(Y){xe.error(Y)}}))};return ut.subscribe((0,Re.x)(xe,Ee,()=>{W=!0,te()})),()=>{Ze?.()}}($e,kt,ut,je)))}},3093:(tn,ht,z)=>{"use strict";z.d(ht,{Q:()=>B});var T=z(7103),me=z(9360),le=z(8251);function B(Re,Ne=0){return(0,me.e)((Qe,at)=>{Qe.subscribe((0,le.x)(at,ut=>(0,T.f)(at,Re,()=>at.next(ut),Ne),()=>(0,T.f)(at,Re,()=>at.complete(),Ne),ut=>(0,T.f)(at,Re,()=>at.error(ut),Ne)))})}},6699:(tn,ht,z)=>{"use strict";z.d(ht,{R:()=>B});var T=z(9360),me=z(8251);function B(Re,Ne){return(0,T.e)(function le(Re,Ne,Qe,at,ut){return(xe,je)=>{let $e=Qe,kt=Ne,ge=0;xe.subscribe((0,me.x)(je,St=>{const Ze=ge++;kt=$e?Re(kt,St,Ze):($e=!0,St),at&&je.next(kt)},ut&&(()=>{$e&&je.next(kt),je.complete()})))}}(Re,Ne,arguments.length>=2,!0))}},3020:(tn,ht,z)=>{"use strict";z.d(ht,{B:()=>Re});var T=z(4829),me=z(8645),le=z(305),B=z(9360);function Re(Qe={}){const{connector:at=(()=>new me.x),resetOnError:ut=!0,resetOnComplete:xe=!0,resetOnRefCountZero:je=!0}=Qe;return $e=>{let kt,ge,St,Ze=0,rt=!1,et=!1;const Ke=()=>{ge?.unsubscribe(),ge=void 0},W=()=>{Ke(),kt=St=void 0,rt=et=!1},te=()=>{const Ee=kt;W(),Ee?.unsubscribe()};return(0,B.e)((Ee,Te)=>{Ze++,!et&&!rt&&Ke();const Ae=St=St??at();Te.add(()=>{Ze--,0===Ze&&!et&&!rt&&(ge=Ne(te,je))}),Ae.subscribe(Te),!kt&&Ze>0&&(kt=new le.Hp({next:gt=>Ae.next(gt),error:gt=>{et=!0,Ke(),ge=Ne(W,ut,gt),Ae.error(gt)},complete:()=>{rt=!0,Ke(),ge=Ne(W,xe),Ae.complete()}}),(0,T.Xf)(Ee).subscribe(kt))})($e)}}function Ne(Qe,at,...ut){if(!0===at)return void Qe();if(!1===at)return;const xe=new le.Hp({next:()=>{xe.unsubscribe(),Qe()}});return(0,T.Xf)(at(...ut)).subscribe(xe)}},7921:(tn,ht,z)=>{"use strict";z.d(ht,{O:()=>B});var T=z(5211),me=z(9940),le=z(9360);function B(...Re){const Ne=(0,me.yG)(Re);return(0,le.e)((Qe,at)=>{(Ne?(0,T.z)(Re,Qe,Ne):(0,T.z)(Re,Qe)).subscribe(at)})}},5137:(tn,ht,z)=>{"use strict";z.d(ht,{R:()=>me});var T=z(9360);function me(le,B=0){return(0,T.e)((Re,Ne)=>{Ne.add(le.schedule(()=>Re.subscribe(Ne),B))})}},4664:(tn,ht,z)=>{"use strict";z.d(ht,{w:()=>B});var T=z(4829),me=z(9360),le=z(8251);function B(Re,Ne){return(0,me.e)((Qe,at)=>{let ut=null,xe=0,je=!1;const $e=()=>je&&!ut&&at.complete();Qe.subscribe((0,le.x)(at,kt=>{ut?.unsubscribe();let ge=0;const St=xe++;(0,T.Xf)(Re(kt,St)).subscribe(ut=(0,le.x)(at,Ze=>at.next(Ne?Ne(kt,Ze,St,ge++):Ze),()=>{ut=null,$e()}))},()=>{je=!0,$e()}))})}},8180:(tn,ht,z)=>{"use strict";z.d(ht,{q:()=>B});var T=z(6232),me=z(9360),le=z(8251);function B(Re){return Re<=0?()=>T.E:(0,me.e)((Ne,Qe)=>{let at=0;Ne.subscribe((0,le.x)(Qe,ut=>{++at<=Re&&(Qe.next(ut),Re<=at&&Qe.complete())}))})}},9397:(tn,ht,z)=>{"use strict";z.d(ht,{b:()=>Re});var T=z(4674),me=z(9360),le=z(8251),B=z(2737);function Re(Ne,Qe,at){const ut=(0,T.m)(Ne)||Qe||at?{next:Ne,error:Qe,complete:at}:Ne;return ut?(0,me.e)((xe,je)=>{var $e;null===($e=ut.subscribe)||void 0===$e||$e.call(ut);let kt=!0;xe.subscribe((0,le.x)(je,ge=>{var St;null===(St=ut.next)||void 0===St||St.call(ut,ge),je.next(ge)},()=>{var ge;kt=!1,null===(ge=ut.complete)||void 0===ge||ge.call(ut),je.complete()},ge=>{var St;kt=!1,null===(St=ut.error)||void 0===St||St.call(ut,ge),je.error(ge)},()=>{var ge,St;kt&&(null===(ge=ut.unsubscribe)||void 0===ge||ge.call(ut)),null===(St=ut.finalize)||void 0===St||St.call(ut)}))}):B.y}},3026:(tn,ht,z)=>{"use strict";z.d(ht,{T:()=>B});var T=z(6973),me=z(9360),le=z(8251);function B(Ne=Re){return(0,me.e)((Qe,at)=>{let ut=!1;Qe.subscribe((0,le.x)(at,xe=>{ut=!0,at.next(xe)},()=>ut?at.complete():at.error(Ne())))})}function Re(){return new T.K}},1954:(tn,ht,z)=>{"use strict";z.d(ht,{o:()=>Re});var T=z(7394);class me extends T.w0{constructor(Qe,at){super()}schedule(Qe,at=0){return this}}const le={setInterval(Ne,Qe,...at){const{delegate:ut}=le;return ut?.setInterval?ut.setInterval(Ne,Qe,...at):setInterval(Ne,Qe,...at)},clearInterval(Ne){const{delegate:Qe}=le;return(Qe?.clearInterval||clearInterval)(Ne)},delegate:void 0};var B=z(9039);class Re extends me{constructor(Qe,at){super(Qe,at),this.scheduler=Qe,this.work=at,this.pending=!1}schedule(Qe,at=0){var ut;if(this.closed)return this;this.state=Qe;const xe=this.id,je=this.scheduler;return null!=xe&&(this.id=this.recycleAsyncId(je,xe,at)),this.pending=!0,this.delay=at,this.id=null!==(ut=this.id)&&void 0!==ut?ut:this.requestAsyncId(je,this.id,at),this}requestAsyncId(Qe,at,ut=0){return le.setInterval(Qe.flush.bind(Qe,this),ut)}recycleAsyncId(Qe,at,ut=0){if(null!=ut&&this.delay===ut&&!1===this.pending)return at;null!=at&&le.clearInterval(at)}execute(Qe,at){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ut=this._execute(Qe,at);if(ut)return ut;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Qe,at){let xe,ut=!1;try{this.work(Qe)}catch(je){ut=!0,xe=je||new Error("Scheduled action threw falsy error")}if(ut)return this.unsubscribe(),xe}unsubscribe(){if(!this.closed){const{id:Qe,scheduler:at}=this,{actions:ut}=at;this.work=this.state=this.scheduler=null,this.pending=!1,(0,B.P)(ut,this),null!=Qe&&(this.id=this.recycleAsyncId(at,Qe,null)),this.delay=null,super.unsubscribe()}}}},2631:(tn,ht,z)=>{"use strict";z.d(ht,{v:()=>le});var T=z(4552);class me{constructor(Re,Ne=me.now){this.schedulerActionCtor=Re,this.now=Ne}schedule(Re,Ne=0,Qe){return new this.schedulerActionCtor(this,Re).schedule(Qe,Ne)}}me.now=T.l.now;class le extends me{constructor(Re,Ne=me.now){super(Re,Ne),this.actions=[],this._active=!1}flush(Re){const{actions:Ne}=this;if(this._active)return void Ne.push(Re);let Qe;this._active=!0;do{if(Qe=Re.execute(Re.state,Re.delay))break}while(Re=Ne.shift());if(this._active=!1,Qe){for(;Re=Ne.shift();)Re.unsubscribe();throw Qe}}}},6321:(tn,ht,z)=>{"use strict";z.d(ht,{P:()=>B,z:()=>le});var T=z(1954);const le=new(z(2631).v)(T.o),B=le},4552:(tn,ht,z)=>{"use strict";z.d(ht,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},7599:(tn,ht,z)=>{"use strict";z.d(ht,{z:()=>T});const T={setTimeout(me,le,...B){const{delegate:Re}=T;return Re?.setTimeout?Re.setTimeout(me,le,...B):setTimeout(me,le,...B)},clearTimeout(me){const{delegate:le}=T;return(le?.clearTimeout||clearTimeout)(me)},delegate:void 0}},4971:(tn,ht,z)=>{"use strict";z.d(ht,{h:()=>me});const me=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(tn,ht,z)=>{"use strict";z.d(ht,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(tn,ht,z)=>{"use strict";z.d(ht,{K:()=>me});const me=(0,z(2306).d)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(tn,ht,z)=>{"use strict";z.d(ht,{_6:()=>Ne,jO:()=>B,yG:()=>Re});var T=z(4674),me=z(671);function le(Qe){return Qe[Qe.length-1]}function B(Qe){return(0,T.m)(le(Qe))?Qe.pop():void 0}function Re(Qe){return(0,me.K)(le(Qe))?Qe.pop():void 0}function Ne(Qe,at){return"number"==typeof le(Qe)?Qe.pop():at}},7453:(tn,ht,z)=>{"use strict";z.d(ht,{D:()=>Re});const{isArray:T}=Array,{getPrototypeOf:me,prototype:le,keys:B}=Object;function Re(Qe){if(1===Qe.length){const at=Qe[0];if(T(at))return{args:at,keys:null};if(function Ne(Qe){return Qe&&"object"==typeof Qe&&me(Qe)===le}(at)){const ut=B(at);return{args:ut.map(xe=>at[xe]),keys:ut}}}return{args:Qe,keys:null}}},9039:(tn,ht,z)=>{"use strict";function T(me,le){if(me){const B=me.indexOf(le);0<=B&&me.splice(B,1)}}z.d(ht,{P:()=>T})},2306:(tn,ht,z)=>{"use strict";function T(me){const B=me(Re=>{Error.call(Re),Re.stack=(new Error).stack});return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}z.d(ht,{d:()=>T})},2714:(tn,ht,z)=>{"use strict";function T(me,le){return me.reduce((B,Re,Ne)=>(B[Re]=le[Ne],B),{})}z.d(ht,{n:()=>T})},1441:(tn,ht,z)=>{"use strict";z.d(ht,{O:()=>B,x:()=>le});var T=z(2653);let me=null;function le(Re){if(T.config.useDeprecatedSynchronousErrorHandling){const Ne=!me;if(Ne&&(me={errorThrown:!1,error:null}),Re(),Ne){const{errorThrown:Qe,error:at}=me;if(me=null,Qe)throw at}}else Re()}function B(Re){T.config.useDeprecatedSynchronousErrorHandling&&me&&(me.errorThrown=!0,me.error=Re)}},7103:(tn,ht,z)=>{"use strict";function T(me,le,B,Re=0,Ne=!1){const Qe=le.schedule(function(){B(),Ne?me.add(this.schedule(null,Re)):this.unsubscribe()},Re);if(me.add(Qe),!Ne)return Qe}z.d(ht,{f:()=>T})},2737:(tn,ht,z)=>{"use strict";function T(me){return me}z.d(ht,{y:()=>T})},4266:(tn,ht,z)=>{"use strict";z.d(ht,{z:()=>T});const T=me=>me&&"number"==typeof me.length&&"function"!=typeof me},5726:(tn,ht,z)=>{"use strict";z.d(ht,{D:()=>me});var T=z(4674);function me(le){return Symbol.asyncIterator&&(0,T.m)(le?.[Symbol.asyncIterator])}},4674:(tn,ht,z)=>{"use strict";function T(me){return"function"==typeof me}z.d(ht,{m:()=>T})},8382:(tn,ht,z)=>{"use strict";z.d(ht,{c:()=>le});var T=z(4850),me=z(4674);function le(B){return(0,me.m)(B[T.L])}},3664:(tn,ht,z)=>{"use strict";z.d(ht,{T:()=>le});var T=z(4971),me=z(4674);function le(B){return(0,me.m)(B?.[T.h])}},4026:(tn,ht,z)=>{"use strict";z.d(ht,{t:()=>me});var T=z(4674);function me(le){return(0,T.m)(le?.then)}},541:(tn,ht,z)=>{"use strict";z.d(ht,{L:()=>B,Q:()=>le});var T=z(7582),me=z(4674);function le(Re){return(0,T.FC)(this,arguments,function*(){const Qe=Re.getReader();try{for(;;){const{value:at,done:ut}=yield(0,T.qq)(Qe.read());if(ut)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(at)}}finally{Qe.releaseLock()}})}function B(Re){return(0,me.m)(Re?.getReader)}},671:(tn,ht,z)=>{"use strict";z.d(ht,{K:()=>me});var T=z(4674);function me(le){return le&&(0,T.m)(le.schedule)}},9360:(tn,ht,z)=>{"use strict";z.d(ht,{A:()=>me,e:()=>le});var T=z(4674);function me(B){return(0,T.m)(B?.lift)}function le(B){return Re=>{if(me(Re))return Re.lift(function(Ne){try{return B(Ne,this)}catch(Qe){this.error(Qe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(tn,ht,z)=>{"use strict";z.d(ht,{Z:()=>B});var T=z(7398);const{isArray:me}=Array;function B(Re){return(0,T.U)(Ne=>function le(Re,Ne){return me(Ne)?Re(...Ne):Re(Ne)}(Re,Ne))}},2420:(tn,ht,z)=>{"use strict";function T(){}z.d(ht,{Z:()=>T})},8407:(tn,ht,z)=>{"use strict";z.d(ht,{U:()=>le,z:()=>me});var T=z(2737);function me(...B){return le(B)}function le(B){return 0===B.length?T.y:1===B.length?B[0]:function(Ne){return B.reduce((Qe,at)=>at(Qe),Ne)}}},3894:(tn,ht,z)=>{"use strict";z.d(ht,{h:()=>le});var T=z(2653),me=z(7599);function le(B){me.z.setTimeout(()=>{const{onUnhandledError:Re}=T.config;if(!Re)throw B;Re(B)})}},9853:(tn,ht,z)=>{"use strict";function T(me){return new TypeError(`You provided ${null!==me&&"object"==typeof me?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(ht,{z:()=>T})},4135:tn=>{tn.exports=function ht(z,T){var me,le=null;try{me=JSON.parse(z,T)}catch(B){le=B}return[le,me]}},6367:function(tn){var z,T,me,le,B;z=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,T=/^(?=([^\/?#]*))\1([^]*)$/,me=/(?:\/|^)\.(?=\/)/g,le=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,tn.exports=B={buildAbsoluteURL:function(Re,Ne,Qe){if(Qe=Qe||{},Re=Re.trim(),!(Ne=Ne.trim())){if(!Qe.alwaysNormalize)return Re;var at=B.parseURL(Re);if(!at)throw new Error("Error trying to parse base URL.");return at.path=B.normalizePath(at.path),B.buildURLFromParts(at)}var ut=B.parseURL(Ne);if(!ut)throw new Error("Error trying to parse relative URL.");if(ut.scheme)return Qe.alwaysNormalize?(ut.path=B.normalizePath(ut.path),B.buildURLFromParts(ut)):Ne;var xe=B.parseURL(Re);if(!xe)throw new Error("Error trying to parse base URL.");if(!xe.netLoc&&xe.path&&"/"!==xe.path[0]){var je=T.exec(xe.path);xe.netLoc=je[1],xe.path=je[2]}xe.netLoc&&!xe.path&&(xe.path="/");var $e={scheme:xe.scheme,netLoc:ut.netLoc,path:null,params:ut.params,query:ut.query,fragment:ut.fragment};if(!ut.netLoc&&($e.netLoc=xe.netLoc,"/"!==ut.path[0]))if(ut.path){var kt=xe.path,ge=kt.substring(0,kt.lastIndexOf("/")+1)+ut.path;$e.path=B.normalizePath(ge)}else $e.path=xe.path,ut.params||($e.params=xe.params,ut.query||($e.query=xe.query));return null===$e.path&&($e.path=Qe.alwaysNormalize?B.normalizePath(ut.path):ut.path),B.buildURLFromParts($e)},parseURL:function(Re){var Ne=z.exec(Re);return Ne?{scheme:Ne[1]||"",netLoc:Ne[2]||"",path:Ne[3]||"",params:Ne[4]||"",query:Ne[5]||"",fragment:Ne[6]||""}:null},normalizePath:function(Re){for(Re=Re.split("").reverse().join("").replace(me,"");Re.length!==(Re=Re.replace(le,"")).length;);return Re.split("").reverse().join("")},buildURLFromParts:function(Re){return Re.scheme+Re.netLoc+Re.path+Re.params+Re.query+Re.fragment}}},5506:(tn,ht,z)=>{var T=z(6382),me=tn.exports={WebVTT:z(4149),VTTCue:z(4472),VTTRegion:z(9880)};T.vttjs=me,T.WebVTT=me.WebVTT;var le=me.VTTCue,B=me.VTTRegion,Re=T.VTTCue,Ne=T.VTTRegion;me.shim=function(){T.VTTCue=le,T.VTTRegion=B},me.restore=function(){T.VTTCue=Re,T.VTTRegion=Ne},T.VTTCue||me.shim()},4149:(tn,ht,z)=>{var T=z(7598),me=Object.create||function(){function Y(){}return function(oe){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Y.prototype=oe,new Y}}();function le(Y,oe){this.name="ParsingError",this.code=Y.code,this.message=oe||Y.message}function B(Y){function oe(At,Ht,Gt,Xt){return 3600*(0|At)+60*(0|Ht)+(0|Gt)+(0|Xt)/1e3}var Fe=Y.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Fe?Fe[3]?oe(Fe[1],Fe[2],Fe[3].replace(":",""),Fe[4]):Fe[1]>59?oe(Fe[1],Fe[2],0,Fe[4]):oe(0,Fe[1],Fe[2],Fe[4]):null}function Re(){this.values=me(null)}function Ne(Y,oe,Fe,At){var Ht=At?Y.split(At):[Y];for(var Gt in Ht)if("string"==typeof Ht[Gt]){var Xt=Ht[Gt].split(Fe);2===Xt.length&&oe(Xt[0].trim(),Xt[1].trim())}}function Qe(Y,oe,Fe){var At=Y;function Ht(){var pn=B(Y);if(null===pn)throw new le(le.Errors.BadTimeStamp,"Malformed timestamp: "+At);return Y=Y.replace(/^[^\sa-zA-Z-]+/,""),pn}function Xt(){Y=Y.replace(/^\s+/,"")}if(Xt(),oe.startTime=Ht(),Xt(),"--\x3e"!==Y.substr(0,3))throw new le(le.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+At);Y=Y.substr(3),Xt(),oe.endTime=Ht(),Xt(),function Gt(pn,Zt){var Yt=new Re;Ne(pn,function(qe,Xe){switch(qe){case"region":for(var ot=Fe.length-1;ot>=0;ot--)if(Fe[ot].id===Xe){Yt.set(qe,Fe[ot].region);break}break;case"vertical":Yt.alt(qe,Xe,["rl","lr"]);break;case"line":var dt=Xe.split(","),It=dt[0];Yt.integer(qe,It),Yt.percent(qe,It)&&Yt.set("snapToLines",!1),Yt.alt(qe,It,["auto"]),2===dt.length&&Yt.alt("lineAlign",dt[1],["start","center","end"]);break;case"position":dt=Xe.split(","),Yt.percent(qe,dt[0]),2===dt.length&&Yt.alt("positionAlign",dt[1],["start","center","end"]);break;case"size":Yt.percent(qe,Xe);break;case"align":Yt.alt(qe,Xe,["start","center","end","left","right"])}},/:/,/\s/),Zt.region=Yt.get("region",null),Zt.vertical=Yt.get("vertical","");try{Zt.line=Yt.get("line","auto")}catch{}Zt.lineAlign=Yt.get("lineAlign","start"),Zt.snapToLines=Yt.get("snapToLines",!0),Zt.size=Yt.get("size",100);try{Zt.align=Yt.get("align","center")}catch{Zt.align=Yt.get("align","middle")}try{Zt.position=Yt.get("position","auto")}catch{Zt.position=Yt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Zt.align)}Zt.positionAlign=Yt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Zt.align)}(Y,oe)}(le.prototype=me(Error.prototype)).constructor=le,le.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Re.prototype={set:function(Y,oe){!this.get(Y)&&""!==oe&&(this.values[Y]=oe)},get:function(Y,oe,Fe){return Fe?this.has(Y)?this.values[Y]:oe[Fe]:this.has(Y)?this.values[Y]:oe},has:function(Y){return Y in this.values},alt:function(Y,oe,Fe){for(var At=0;At<Fe.length;++At)if(oe===Fe[At]){this.set(Y,oe);break}},integer:function(Y,oe){/^-?\d+$/.test(oe)&&this.set(Y,parseInt(oe,10))},percent:function(Y,oe){return!!(oe.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(oe=parseFloat(oe),oe>=0&&oe<=100))&&(this.set(Y,oe),!0)}};var at=T.createElement&&T.createElement("textarea"),ut={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},xe={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},je={v:"title",lang:"lang"},$e={rt:"ruby"};function kt(Y,oe){function Fe(){if(!oe)return null;var ft=oe.match(/^([^<]*)(<[^>]*>?)?/);return function It(jt){return oe=oe.substr(jt.length),jt}(ft[1]?ft[1]:ft[2])}function At(It){return at.innerHTML=It,It=at.textContent,at.textContent="",It}function Gt(It,ft){var jt=ut[It];if(!jt)return null;var zt=Y.document.createElement(jt),In=je[It];return In&&ft&&(zt[In]=ft.trim()),zt}for(var Zt,Xt=Y.document.createElement("div"),pn=Xt,Yt=[];null!==(Zt=Fe());)if("<"!==Zt[0])pn.appendChild(Y.document.createTextNode(At(Zt)));else{if("/"===Zt[1]){Yt.length&&Yt[Yt.length-1]===Zt.substr(2).replace(">","")&&(Yt.pop(),pn=pn.parentNode);continue}var Xe,qe=B(Zt.substr(1,Zt.length-2));if(qe){Xe=Y.document.createProcessingInstruction("timestamp",qe),pn.appendChild(Xe);continue}var ot=Zt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ot||!(Xe=Gt(ot[1],ot[3]))||$e[(ft=Xe).localName]&&$e[ft.localName]!==pn.localName)continue;if(ot[2]){var dt=ot[2].split(".");dt.forEach(function(It){var ft=/^bg_/.test(It),jt=ft?It.slice(3):It;xe.hasOwnProperty(jt)&&(Xe.style[ft?"background-color":"color"]=xe[jt])}),Xe.className=dt.join(" ")}Yt.push(ot[1]),pn.appendChild(Xe),pn=Xe}var ft;return Xt}var ge=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function St(Y){for(var oe=0;oe<ge.length;oe++){var Fe=ge[oe];if(Y>=Fe[0]&&Y<=Fe[1])return!0}return!1}function Ze(Y){var oe=[],Fe="";if(!Y||!Y.childNodes)return"ltr";function Ht(pn,Zt){for(var Yt=Zt.childNodes.length-1;Yt>=0;Yt--)pn.push(Zt.childNodes[Yt])}function Gt(pn){if(!pn||!pn.length)return null;var Zt=pn.pop(),Yt=Zt.textContent||Zt.innerText;if(Yt){var qe=Yt.match(/^.*(\n|\r)/);return qe?(pn.length=0,qe[0]):Yt}return"ruby"===Zt.tagName?Gt(pn):Zt.childNodes?(Ht(pn,Zt),Gt(pn)):void 0}for(Ht(oe,Y);Fe=Gt(oe);)for(var Xt=0;Xt<Fe.length;Xt++)if(St(Fe.charCodeAt(Xt)))return"rtl";return"ltr"}function et(){}function Ke(Y,oe,Fe){et.call(this),this.cue=oe,this.cueDiv=kt(Y,oe.text);var At={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===oe.vertical?"horizontal-tb":"lr"===oe.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(At,this.cueDiv),this.div=Y.document.createElement("div"),At={direction:Ze(this.cueDiv),writingMode:""===oe.vertical?"horizontal-tb":"lr"===oe.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===oe.align?"center":oe.align,font:Fe.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(At),this.div.appendChild(this.cueDiv);var Ht=0;switch(oe.positionAlign){case"start":case"line-left":Ht=oe.position;break;case"center":Ht=oe.position-oe.size/2;break;case"end":case"line-right":Ht=oe.position-oe.size}this.applyStyles(""===oe.vertical?{left:this.formatStyle(Ht,"%"),width:this.formatStyle(oe.size,"%")}:{top:this.formatStyle(Ht,"%"),height:this.formatStyle(oe.size,"%")}),this.move=function(Gt){this.applyStyles({top:this.formatStyle(Gt.top,"px"),bottom:this.formatStyle(Gt.bottom,"px"),left:this.formatStyle(Gt.left,"px"),right:this.formatStyle(Gt.right,"px"),height:this.formatStyle(Gt.height,"px"),width:this.formatStyle(Gt.width,"px")})}}function W(Y){var oe,Fe,At,Ht;if(Y.div){Fe=Y.div.offsetHeight,At=Y.div.offsetWidth,Ht=Y.div.offsetTop;var Gt=(Gt=Y.div.childNodes)&&(Gt=Gt[0])&&Gt.getClientRects&&Gt.getClientRects();Y=Y.div.getBoundingClientRect(),oe=Gt?Math.max(Gt[0]&&Gt[0].height||0,Y.height/Gt.length):0}this.left=Y.left,this.right=Y.right,this.top=Y.top||Ht,this.height=Y.height||Fe,this.bottom=Y.bottom||Ht+(Y.height||Fe),this.width=Y.width||At,this.lineHeight=void 0!==oe?oe:Y.lineHeight}function te(Y,oe,Fe,At){var Gt=new W(oe),Xt=oe.cue,pn=function rt(Y){if("number"==typeof Y.line&&(Y.snapToLines||Y.line>=0&&Y.line<=100))return Y.line;if(!Y.track||!Y.track.textTrackList||!Y.track.textTrackList.mediaElement)return-1;for(var oe=Y.track,Fe=oe.textTrackList,At=0,Ht=0;Ht<Fe.length&&Fe[Ht]!==oe;Ht++)"showing"===Fe[Ht].mode&&At++;return-1*++At}(Xt),Zt=[];if(Xt.snapToLines){var Yt;switch(Xt.vertical){case"":Zt=["+y","-y"],Yt="height";break;case"rl":Zt=["+x","-x"],Yt="width";break;case"lr":Zt=["-x","+x"],Yt="width"}var qe=Gt.lineHeight,Xe=qe*Math.round(pn),ot=Fe[Yt]+qe,dt=Zt[0];Math.abs(Xe)>ot&&(Xe=Xe<0?-1:1,Xe*=Math.ceil(ot/qe)*qe),pn<0&&(Xe+=""===Xt.vertical?Fe.height:Fe.width,Zt=Zt.reverse()),Gt.move(dt,Xe)}else{var It=Gt.lineHeight/Fe.height*100;switch(Xt.lineAlign){case"center":pn-=It/2;break;case"end":pn-=It}switch(Xt.vertical){case"":oe.applyStyles({top:oe.formatStyle(pn,"%")});break;case"rl":oe.applyStyles({left:oe.formatStyle(pn,"%")});break;case"lr":oe.applyStyles({right:oe.formatStyle(pn,"%")})}Zt=["+y","-x","+x","-y"],Gt=new W(oe)}var ft=function Ht(jt,zt){for(var In,Tn=new W(jt),xn=1,$n=0;$n<zt.length;$n++){for(;jt.overlapsOppositeAxis(Fe,zt[$n])||jt.within(Fe)&&jt.overlapsAny(At);)jt.move(zt[$n]);if(jt.within(Fe))return jt;var Gn=jt.intersectPercentage(Fe);xn>Gn&&(In=new W(jt),xn=Gn),jt=new W(Tn)}return In||Tn}(Gt,Zt);oe.move(ft.toCSSCompatValues(Fe))}function Ee(){}et.prototype.applyStyles=function(Y,oe){for(var Fe in oe=oe||this.div,Y)Y.hasOwnProperty(Fe)&&(oe.style[Fe]=Y[Fe])},et.prototype.formatStyle=function(Y,oe){return 0===Y?0:Y+oe},(Ke.prototype=me(et.prototype)).constructor=Ke,W.prototype.move=function(Y,oe){switch(oe=void 0!==oe?oe:this.lineHeight,Y){case"+x":this.left+=oe,this.right+=oe;break;case"-x":this.left-=oe,this.right-=oe;break;case"+y":this.top+=oe,this.bottom+=oe;break;case"-y":this.top-=oe,this.bottom-=oe}},W.prototype.overlaps=function(Y){return this.left<Y.right&&this.right>Y.left&&this.top<Y.bottom&&this.bottom>Y.top},W.prototype.overlapsAny=function(Y){for(var oe=0;oe<Y.length;oe++)if(this.overlaps(Y[oe]))return!0;return!1},W.prototype.within=function(Y){return this.top>=Y.top&&this.bottom<=Y.bottom&&this.left>=Y.left&&this.right<=Y.right},W.prototype.overlapsOppositeAxis=function(Y,oe){switch(oe){case"+x":return this.left<Y.left;case"-x":return this.right>Y.right;case"+y":return this.top<Y.top;case"-y":return this.bottom>Y.bottom}},W.prototype.intersectPercentage=function(Y){return Math.max(0,Math.min(this.right,Y.right)-Math.max(this.left,Y.left))*Math.max(0,Math.min(this.bottom,Y.bottom)-Math.max(this.top,Y.top))/(this.height*this.width)},W.prototype.toCSSCompatValues=function(Y){return{top:this.top-Y.top,bottom:Y.bottom-this.bottom,left:this.left-Y.left,right:Y.right-this.right,height:this.height,width:this.width}},W.getSimpleBoxPosition=function(Y){var oe=Y.div?Y.div.offsetHeight:Y.tagName?Y.offsetHeight:0,Fe=Y.div?Y.div.offsetWidth:Y.tagName?Y.offsetWidth:0,At=Y.div?Y.div.offsetTop:Y.tagName?Y.offsetTop:0;return{left:(Y=Y.div?Y.div.getBoundingClientRect():Y.tagName?Y.getBoundingClientRect():Y).left,right:Y.right,top:Y.top||At,height:Y.height||oe,bottom:Y.bottom||At+(Y.height||oe),width:Y.width||Fe}},Ee.StringDecoder=function(){return{decode:function(Y){if(!Y)return"";if("string"!=typeof Y)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Y))}}},Ee.convertCueToDOMTree=function(Y,oe){return Y&&oe?kt(Y,oe):null},Ee.processCues=function(Y,oe,Fe){if(!Y||!oe||!Fe)return null;for(;Fe.firstChild;)Fe.removeChild(Fe.firstChild);var At=Y.document.createElement("div");if(At.style.position="absolute",At.style.left="0",At.style.right="0",At.style.top="0",At.style.bottom="0",At.style.margin="1.5%",Fe.appendChild(At),function Ht(qe){for(var Xe=0;Xe<qe.length;Xe++)if(qe[Xe].hasBeenReset||!qe[Xe].displayState)return!0;return!1}(oe)){var Xt=[],pn=W.getSimpleBoxPosition(At),Yt={font:Math.round(.05*pn.height*100)/100+"px sans-serif"};!function(){for(var qe,Xe,ot=0;ot<oe.length;ot++)qe=new Ke(Y,Xe=oe[ot],Yt),At.appendChild(qe.div),te(0,qe,pn,Xt),Xe.displayState=qe.div,Xt.push(W.getSimpleBoxPosition(qe))}()}else for(var Gt=0;Gt<oe.length;Gt++)At.appendChild(oe[Gt].displayState)},(Ee.Parser=function(Y,oe,Fe){Fe||(Fe=oe,oe={}),oe||(oe={}),this.window=Y,this.vttjs=oe,this.state="INITIAL",this.buffer="",this.decoder=Fe||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(Y){if(!(Y instanceof le))throw Y;this.onparsingerror&&this.onparsingerror(Y)},parse:function(Y){var qe,oe=this;function Fe(){for(var qe=oe.buffer,Xe=0;Xe<qe.length&&"\r"!==qe[Xe]&&"\n"!==qe[Xe];)++Xe;var ot=qe.substr(0,Xe);return"\r"===qe[Xe]&&++Xe,"\n"===qe[Xe]&&++Xe,oe.buffer=qe.substr(Xe),ot}Y&&(oe.buffer+=oe.decoder.decode(Y,{stream:!0}));try{var Xt;if("INITIAL"===oe.state){if(!/\r\n|\n/.test(oe.buffer))return this;var pn=(Xt=Fe()).match(/^WEBVTT([ \t].*)?$/);if(!pn||!pn[0])throw new le(le.Errors.BadSignature);oe.state="HEADER"}for(var Zt=!1;oe.buffer;){if(!/\r\n|\n/.test(oe.buffer))return this;switch(Zt?Zt=!1:Xt=Fe(),oe.state){case"HEADER":/:/.test(Xt)?(qe=Xt).match(/X-TIMESTAMP-MAP/)?Ne(qe,function(Xe,ot){"X-TIMESTAMP-MAP"===Xe&&function Ht(qe){var Xe=new Re;Ne(qe,function(ot,dt){switch(ot){case"MPEGT":Xe.integer(ot+"S",dt);break;case"LOCA":Xe.set(ot+"L",B(dt))}},/[^\d]:/,/,/),oe.ontimestampmap&&oe.ontimestampmap({MPEGTS:Xe.get("MPEGTS"),LOCAL:Xe.get("LOCAL")})}(ot)},/=/):Ne(qe,function(Xe,ot){"Region"===Xe&&function At(qe){var Xe=new Re;if(Ne(qe,function(dt,It){switch(dt){case"id":Xe.set(dt,It);break;case"width":Xe.percent(dt,It);break;case"lines":Xe.integer(dt,It);break;case"regionanchor":case"viewportanchor":var ft=It.split(",");if(2!==ft.length)break;var jt=new Re;if(jt.percent("x",ft[0]),jt.percent("y",ft[1]),!jt.has("x")||!jt.has("y"))break;Xe.set(dt+"X",jt.get("x")),Xe.set(dt+"Y",jt.get("y"));break;case"scroll":Xe.alt(dt,It,["up"])}},/=/,/\s/),Xe.has("id")){var ot=new(oe.vttjs.VTTRegion||oe.window.VTTRegion);ot.width=Xe.get("width",100),ot.lines=Xe.get("lines",3),ot.regionAnchorX=Xe.get("regionanchorX",0),ot.regionAnchorY=Xe.get("regionanchorY",100),ot.viewportAnchorX=Xe.get("viewportanchorX",0),ot.viewportAnchorY=Xe.get("viewportanchorY",100),ot.scroll=Xe.get("scroll",""),oe.onregion&&oe.onregion(ot),oe.regionList.push({id:Xe.get("id"),region:ot})}}(ot)},/:/):Xt||(oe.state="ID");continue;case"NOTE":Xt||(oe.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Xt)){oe.state="NOTE";break}if(!Xt)continue;oe.cue=new(oe.vttjs.VTTCue||oe.window.VTTCue)(0,0,"");try{oe.cue.align="center"}catch{oe.cue.align="middle"}if(oe.state="CUE",-1===Xt.indexOf("--\x3e")){oe.cue.id=Xt;continue}case"CUE":try{Qe(Xt,oe.cue,oe.regionList)}catch(qe){oe.reportOrThrowError(qe),oe.cue=null,oe.state="BADCUE";continue}oe.state="CUETEXT";continue;case"CUETEXT":var Yt=-1!==Xt.indexOf("--\x3e");if(!Xt||Yt&&(Zt=!0)){oe.oncue&&oe.oncue(oe.cue),oe.cue=null,oe.state="ID";continue}oe.cue.text&&(oe.cue.text+="\n"),oe.cue.text+=Xt.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Xt||(oe.state="ID");continue}}}catch(qe){oe.reportOrThrowError(qe),"CUETEXT"===oe.state&&oe.cue&&oe.oncue&&oe.oncue(oe.cue),oe.cue=null,oe.state="INITIAL"===oe.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var Y=this;try{if(Y.buffer+=Y.decoder.decode(),(Y.cue||"HEADER"===Y.state)&&(Y.buffer+="\n\n",Y.parse()),"INITIAL"===Y.state)throw new le(le.Errors.BadSignature)}catch(oe){Y.reportOrThrowError(oe)}return Y.onflush&&Y.onflush(),this}},tn.exports=Ee},4472:tn=>{var z={"":1,lr:1,rl:1},T={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function le(Re){return"string"==typeof Re&&!!T[Re.toLowerCase()]&&Re.toLowerCase()}function B(Re,Ne,Qe){this.hasBeenReset=!1;var at="",ut=!1,xe=Re,je=Ne,$e=Qe,kt=null,ge="",St=!0,Ze="auto",rt="start",et="auto",Ke="auto",W=100,te="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return at},set:function(Ee){at=""+Ee}},pauseOnExit:{enumerable:!0,get:function(){return ut},set:function(Ee){ut=!!Ee}},startTime:{enumerable:!0,get:function(){return xe},set:function(Ee){if("number"!=typeof Ee)throw new TypeError("Start time must be set to a number.");xe=Ee,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return je},set:function(Ee){if("number"!=typeof Ee)throw new TypeError("End time must be set to a number.");je=Ee,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return $e},set:function(Ee){$e=""+Ee,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return kt},set:function(Ee){kt=Ee,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return ge},set:function(Ee){var Te=function me(Re){return"string"==typeof Re&&!!z[Re.toLowerCase()]&&Re.toLowerCase()}(Ee);if(!1===Te)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");ge=Te,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return St},set:function(Ee){St=!!Ee,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Ze},set:function(Ee){if("number"!=typeof Ee&&"auto"!==Ee)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Ze=Ee,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return rt},set:function(Ee){var Te=le(Ee);Te?(rt=Te,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return et},set:function(Ee){if(Ee<0||Ee>100)throw new Error("Position must be between 0 and 100.");et=Ee,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Ke},set:function(Ee){var Te=le(Ee);Te?(Ke=Te,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return W},set:function(Ee){if(Ee<0||Ee>100)throw new Error("Size must be between 0 and 100.");W=Ee,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return te},set:function(Ee){var Te=le(Ee);if(!Te)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");te=Te,this.hasBeenReset=!0}}}),this.displayState=void 0}B.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},tn.exports=B},9880:tn=>{var ht={"":!0,up:!0};function T(le){return"number"==typeof le&&le>=0&&le<=100}tn.exports=function me(){var le=100,B=3,Re=0,Ne=100,Qe=0,at=100,ut="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return le},set:function(xe){if(!T(xe))throw new Error("Width must be between 0 and 100.");le=xe}},lines:{enumerable:!0,get:function(){return B},set:function(xe){if("number"!=typeof xe)throw new TypeError("Lines must be set to a number.");B=xe}},regionAnchorY:{enumerable:!0,get:function(){return Ne},set:function(xe){if(!T(xe))throw new Error("RegionAnchorX must be between 0 and 100.");Ne=xe}},regionAnchorX:{enumerable:!0,get:function(){return Re},set:function(xe){if(!T(xe))throw new Error("RegionAnchorY must be between 0 and 100.");Re=xe}},viewportAnchorY:{enumerable:!0,get:function(){return at},set:function(xe){if(!T(xe))throw new Error("ViewportAnchorY must be between 0 and 100.");at=xe}},viewportAnchorX:{enumerable:!0,get:function(){return Qe},set:function(xe){if(!T(xe))throw new Error("ViewportAnchorX must be between 0 and 100.");Qe=xe}},scroll:{enumerable:!0,get:function(){return ut},set:function(xe){var je=function z(le){return"string"==typeof le&&!!ht[le.toLowerCase()]&&le.toLowerCase()}(xe);!1===je?console.warn("Scroll: an invalid or illegal string was specified."):ut=je}}})}},5893:()=>{},434:tn=>{function ht(){return tn.exports=ht=Object.assign?Object.assign.bind():function(z){for(var T=1;T<arguments.length;T++){var me=arguments[T];for(var le in me)Object.prototype.hasOwnProperty.call(me,le)&&(z[le]=me[le])}return z},tn.exports.__esModule=!0,tn.exports.default=tn.exports,ht.apply(this,arguments)}tn.exports=ht,tn.exports.__esModule=!0,tn.exports.default=tn.exports},6814:(tn,ht,z)=>{"use strict";z.d(ht,{Do:()=>Ze,EM:()=>ji,HT:()=>B,JF:()=>Cs,K0:()=>Ne,Mx:()=>gs,O5:()=>to,Ov:()=>Zs,PC:()=>Xi,PM:()=>jo,S$:()=>kt,V_:()=>at,Ye:()=>rt,Zx:()=>jr,b0:()=>St,bD:()=>ca,ez:()=>go,mk:()=>si,q:()=>le,sg:()=>ms,uU:()=>Kn,w_:()=>Re});var T=z(5879);let me=null;function le(){return me}function B(L){me||(me=L)}class Re{}const Ne=new T.OlP("DocumentToken");let Qe=(()=>{class L{historyGo(K){throw new Error("Not implemented")}}return L.\u0275fac=function(K){return new(K||L)},L.\u0275prov=T.Yz7({token:L,factory:function(){return(0,T.f3M)(ut)},providedIn:"platform"}),L})();const at=new T.OlP("Location Initialized");let ut=(()=>{class L extends Qe{constructor(){super(),this._doc=(0,T.f3M)(Ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(K){const Se=le().getGlobalEventTarget(this._doc,"window");return Se.addEventListener("popstate",K,!1),()=>Se.removeEventListener("popstate",K)}onHashChange(K){const Se=le().getGlobalEventTarget(this._doc,"window");return Se.addEventListener("hashchange",K,!1),()=>Se.removeEventListener("hashchange",K)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(K){this._location.pathname=K}pushState(K,Se,it){this._history.pushState(K,Se,it)}replaceState(K,Se,it){this._history.replaceState(K,Se,it)}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return L.\u0275fac=function(K){return new(K||L)},L.\u0275prov=T.Yz7({token:L,factory:function(){return new L},providedIn:"platform"}),L})();function xe(L,ce){if(0==L.length)return ce;if(0==ce.length)return L;let K=0;return L.endsWith("/")&&K++,ce.startsWith("/")&&K++,2==K?L+ce.substring(1):1==K?L+ce:L+"/"+ce}function je(L){const ce=L.match(/#|\?|$/),K=ce&&ce.index||L.length;return L.slice(0,K-("/"===L[K-1]?1:0))+L.slice(K)}function $e(L){return L&&"?"!==L[0]?"?"+L:L}let kt=(()=>{class L{historyGo(K){throw new Error("Not implemented")}}return L.\u0275fac=function(K){return new(K||L)},L.\u0275prov=T.Yz7({token:L,factory:function(){return(0,T.f3M)(St)},providedIn:"root"}),L})();const ge=new T.OlP("appBaseHref");let St=(()=>{class L extends kt{constructor(K,Se){super(),this._platformLocation=K,this._removeListenerFns=[],this._baseHref=Se??this._platformLocation.getBaseHrefFromDOM()??(0,T.f3M)(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return xe(this._baseHref,K)}path(K=!1){const Se=this._platformLocation.pathname+$e(this._platformLocation.search),it=this._platformLocation.hash;return it&&K?`${Se}${it}`:Se}pushState(K,Se,it,wt){const en=this.prepareExternalUrl(it+$e(wt));this._platformLocation.pushState(K,Se,en)}replaceState(K,Se,it,wt){const en=this.prepareExternalUrl(it+$e(wt));this._platformLocation.replaceState(K,Se,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(K=0){this._platformLocation.historyGo?.(K)}}return L.\u0275fac=function(K){return new(K||L)(T.LFG(Qe),T.LFG(ge,8))},L.\u0275prov=T.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),Ze=(()=>{class L extends kt{constructor(K,Se){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=Se&&(this._baseHref=Se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let Se=this._platformLocation.hash;return null==Se&&(Se="#"),Se.length>0?Se.substring(1):Se}prepareExternalUrl(K){const Se=xe(this._baseHref,K);return Se.length>0?"#"+Se:Se}pushState(K,Se,it,wt){let en=this.prepareExternalUrl(it+$e(wt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.pushState(K,Se,en)}replaceState(K,Se,it,wt){let en=this.prepareExternalUrl(it+$e(wt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.replaceState(K,Se,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(K=0){this._platformLocation.historyGo?.(K)}}return L.\u0275fac=function(K){return new(K||L)(T.LFG(Qe),T.LFG(ge,8))},L.\u0275prov=T.Yz7({token:L,factory:L.\u0275fac}),L})(),rt=(()=>{class L{constructor(K){this._subject=new T.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=K;const Se=this._locationStrategy.getBaseHref();this._basePath=function te(L){if(new RegExp("^(https?:)?//").test(L)){const[,K]=L.split(/\/\/[^\/]+/);return K}return L}(je(W(Se))),this._locationStrategy.onPopState(it=>{this._subject.emit({url:this.path(!0),pop:!0,state:it.state,type:it.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(K=!1){return this.normalize(this._locationStrategy.path(K))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(K,Se=""){return this.path()==this.normalize(K+$e(Se))}normalize(K){return L.stripTrailingSlash(function Ke(L,ce){if(!L||!ce.startsWith(L))return ce;const K=ce.substring(L.length);return""===K||["/",";","?","#"].includes(K[0])?K:ce}(this._basePath,W(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._locationStrategy.prepareExternalUrl(K)}go(K,Se="",it=null){this._locationStrategy.pushState(it,"",K,Se),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+$e(Se)),it)}replaceState(K,Se="",it=null){this._locationStrategy.replaceState(it,"",K,Se),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+$e(Se)),it)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(K=0){this._locationStrategy.historyGo?.(K)}onUrlChange(K){return this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Se=>{this._notifyUrlChangeListeners(Se.url,Se.state)})),()=>{const Se=this._urlChangeListeners.indexOf(K);this._urlChangeListeners.splice(Se,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(K="",Se){this._urlChangeListeners.forEach(it=>it(K,Se))}subscribe(K,Se,it){return this._subject.subscribe({next:K,error:Se,complete:it})}}return L.normalizeQueryParams=$e,L.joinWithSlash=xe,L.stripTrailingSlash=je,L.\u0275fac=function(K){return new(K||L)(T.LFG(kt))},L.\u0275prov=T.Yz7({token:L,factory:function(){return function et(){return new rt((0,T.LFG)(kt))}()},providedIn:"root"}),L})();function W(L){return L.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Percent=1]="Percent",Te[Te.Currency=2]="Currency",Te[Te.Scientific=3]="Scientific",Te))(),gt=(()=>((gt=gt||{})[gt.Format=0]="Format",gt[gt.Standalone=1]="Standalone",gt))(),Y=(()=>((Y=Y||{})[Y.Narrow=0]="Narrow",Y[Y.Abbreviated=1]="Abbreviated",Y[Y.Wide=2]="Wide",Y[Y.Short=3]="Short",Y))(),oe=(()=>((oe=oe||{})[oe.Short=0]="Short",oe[oe.Medium=1]="Medium",oe[oe.Long=2]="Long",oe[oe.Full=3]="Full",oe))(),Fe=(()=>((Fe=Fe||{})[Fe.Decimal=0]="Decimal",Fe[Fe.Group=1]="Group",Fe[Fe.List=2]="List",Fe[Fe.PercentSign=3]="PercentSign",Fe[Fe.PlusSign=4]="PlusSign",Fe[Fe.MinusSign=5]="MinusSign",Fe[Fe.Exponential=6]="Exponential",Fe[Fe.SuperscriptingExponent=7]="SuperscriptingExponent",Fe[Fe.PerMille=8]="PerMille",Fe[Fe.Infinity=9]="Infinity",Fe[Fe.NaN=10]="NaN",Fe[Fe.TimeSeparator=11]="TimeSeparator",Fe[Fe.CurrencyDecimal=12]="CurrencyDecimal",Fe[Fe.CurrencyGroup=13]="CurrencyGroup",Fe))();function Xe(L,ce){return dr((0,T.cg1)(L)[T.wAp.DateFormat],ce)}function ot(L,ce){return dr((0,T.cg1)(L)[T.wAp.TimeFormat],ce)}function dt(L,ce){return dr((0,T.cg1)(L)[T.wAp.DateTimeFormat],ce)}function It(L,ce){const K=(0,T.cg1)(L),Se=K[T.wAp.NumberSymbols][ce];if(typeof Se>"u"){if(ce===Fe.CurrencyDecimal)return K[T.wAp.NumberSymbols][Fe.Decimal];if(ce===Fe.CurrencyGroup)return K[T.wAp.NumberSymbols][Fe.Group]}return Se}function $n(L){if(!L[T.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${L[T.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function dr(L,ce){for(let K=ce;K>-1;K--)if(typeof L[K]<"u")return L[K];throw new Error("Locale data API: locale data undefined")}function xr(L){const[ce,K]=L.split(":");return{hours:+ce,minutes:+K}}const Sr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,mi={},Rr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var an=(()=>((an=an||{})[an.Short=0]="Short",an[an.ShortGMT=1]="ShortGMT",an[an.Long=2]="Long",an[an.Extended=3]="Extended",an))(),Un=(()=>((Un=Un||{})[Un.FullYear=0]="FullYear",Un[Un.Month=1]="Month",Un[Un.Date=2]="Date",Un[Un.Hours=3]="Hours",Un[Un.Minutes=4]="Minutes",Un[Un.Seconds=5]="Seconds",Un[Un.FractionalSeconds=6]="FractionalSeconds",Un[Un.Day=7]="Day",Un))(),Nn=(()=>((Nn=Nn||{})[Nn.DayPeriods=0]="DayPeriods",Nn[Nn.Days=1]="Days",Nn[Nn.Months=2]="Months",Nn[Nn.Eras=3]="Eras",Nn))();function Dr(L,ce,K,Se){let it=function _e(L){if(be(L))return L;if("number"==typeof L&&!isNaN(L))return new Date(L);if("string"==typeof L){if(L=L.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(L)){const[it,wt=1,en=1]=L.split("-").map(sr=>+sr);return ar(it,wt-1,en)}const K=parseFloat(L);if(!isNaN(L-K))return new Date(K);let Se;if(Se=L.match(Sr))return function Ce(L){const ce=new Date(0);let K=0,Se=0;const it=L[8]?ce.setUTCFullYear:ce.setFullYear,wt=L[8]?ce.setUTCHours:ce.setHours;L[9]&&(K=Number(L[9]+L[10]),Se=Number(L[9]+L[11])),it.call(ce,Number(L[1]),Number(L[2])-1,Number(L[3]));const en=Number(L[4]||0)-K,sr=Number(L[5]||0)-Se,Ci=Number(L[6]||0),Pr=Math.floor(1e3*parseFloat("0."+(L[7]||0)));return wt.call(ce,en,sr,Ci,Pr),ce}(Se)}const ce=new Date(L);if(!be(ce))throw new Error(`Unable to convert "${L}" into a date`);return ce}(L);ce=Ui(K,ce)||ce;let sr,en=[];for(;ce;){if(sr=Rr.exec(ce),!sr){en.push(ce);break}{en=en.concat(sr.slice(1));const Vr=en.pop();if(!Vr)break;ce=Vr}}let Ci=it.getTimezoneOffset();Se&&(Ci=ls(Se,Ci),it=function lt(L,ce,K){const Se=K?-1:1,it=L.getTimezoneOffset();return function mr(L,ce){return(L=new Date(L.getTime())).setMinutes(L.getMinutes()+ce),L}(L,Se*(ls(ce,it)-it))}(it,Se,!0));let Pr="";return en.forEach(Vr=>{const wr=function Ar(L){if(Vi[L])return Vi[L];let ce;switch(L){case"G":case"GG":case"GGG":ce=Tr(Nn.Eras,Y.Abbreviated);break;case"GGGG":ce=Tr(Nn.Eras,Y.Wide);break;case"GGGGG":ce=Tr(Nn.Eras,Y.Narrow);break;case"y":ce=Fr(Un.FullYear,1,0,!1,!0);break;case"yy":ce=Fr(Un.FullYear,2,0,!0,!0);break;case"yyy":ce=Fr(Un.FullYear,3,0,!1,!0);break;case"yyyy":ce=Fr(Un.FullYear,4,0,!1,!0);break;case"Y":ce=Nr(1);break;case"YY":ce=Nr(2,!0);break;case"YYY":ce=Nr(3);break;case"YYYY":ce=Nr(4);break;case"M":case"L":ce=Fr(Un.Month,1,1);break;case"MM":case"LL":ce=Fr(Un.Month,2,1);break;case"MMM":ce=Tr(Nn.Months,Y.Abbreviated);break;case"MMMM":ce=Tr(Nn.Months,Y.Wide);break;case"MMMMM":ce=Tr(Nn.Months,Y.Narrow);break;case"LLL":ce=Tr(Nn.Months,Y.Abbreviated,gt.Standalone);break;case"LLLL":ce=Tr(Nn.Months,Y.Wide,gt.Standalone);break;case"LLLLL":ce=Tr(Nn.Months,Y.Narrow,gt.Standalone);break;case"w":ce=vi(1);break;case"ww":ce=vi(2);break;case"W":ce=vi(1,!0);break;case"d":ce=Fr(Un.Date,1);break;case"dd":ce=Fr(Un.Date,2);break;case"c":case"cc":ce=Fr(Un.Day,1);break;case"ccc":ce=Tr(Nn.Days,Y.Abbreviated,gt.Standalone);break;case"cccc":ce=Tr(Nn.Days,Y.Wide,gt.Standalone);break;case"ccccc":ce=Tr(Nn.Days,Y.Narrow,gt.Standalone);break;case"cccccc":ce=Tr(Nn.Days,Y.Short,gt.Standalone);break;case"E":case"EE":case"EEE":ce=Tr(Nn.Days,Y.Abbreviated);break;case"EEEE":ce=Tr(Nn.Days,Y.Wide);break;case"EEEEE":ce=Tr(Nn.Days,Y.Narrow);break;case"EEEEEE":ce=Tr(Nn.Days,Y.Short);break;case"a":case"aa":case"aaa":ce=Tr(Nn.DayPeriods,Y.Abbreviated);break;case"aaaa":ce=Tr(Nn.DayPeriods,Y.Wide);break;case"aaaaa":ce=Tr(Nn.DayPeriods,Y.Narrow);break;case"b":case"bb":case"bbb":ce=Tr(Nn.DayPeriods,Y.Abbreviated,gt.Standalone,!0);break;case"bbbb":ce=Tr(Nn.DayPeriods,Y.Wide,gt.Standalone,!0);break;case"bbbbb":ce=Tr(Nn.DayPeriods,Y.Narrow,gt.Standalone,!0);break;case"B":case"BB":case"BBB":ce=Tr(Nn.DayPeriods,Y.Abbreviated,gt.Format,!0);break;case"BBBB":ce=Tr(Nn.DayPeriods,Y.Wide,gt.Format,!0);break;case"BBBBB":ce=Tr(Nn.DayPeriods,Y.Narrow,gt.Format,!0);break;case"h":ce=Fr(Un.Hours,1,-12);break;case"hh":ce=Fr(Un.Hours,2,-12);break;case"H":ce=Fr(Un.Hours,1);break;case"HH":ce=Fr(Un.Hours,2);break;case"m":ce=Fr(Un.Minutes,1);break;case"mm":ce=Fr(Un.Minutes,2);break;case"s":ce=Fr(Un.Seconds,1);break;case"ss":ce=Fr(Un.Seconds,2);break;case"S":ce=Fr(Un.FractionalSeconds,1);break;case"SS":ce=Fr(Un.FractionalSeconds,2);break;case"SSS":ce=Fr(Un.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ce=br(an.Short);break;case"ZZZZZ":ce=br(an.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ce=br(an.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ce=br(an.Long);break;default:return null}return Vi[L]=ce,ce}(Vr);Pr+=wr?wr(it,K,Ci):"''"===Vr?"'":Vr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Pr}function ar(L,ce,K){const Se=new Date(0);return Se.setFullYear(L,ce,K),Se.setHours(0,0,0),Se}function Ui(L,ce){const K=function Ht(L){return(0,T.cg1)(L)[T.wAp.LocaleId]}(L);if(mi[K]=mi[K]||{},mi[K][ce])return mi[K][ce];let Se="";switch(ce){case"shortDate":Se=Xe(L,oe.Short);break;case"mediumDate":Se=Xe(L,oe.Medium);break;case"longDate":Se=Xe(L,oe.Long);break;case"fullDate":Se=Xe(L,oe.Full);break;case"shortTime":Se=ot(L,oe.Short);break;case"mediumTime":Se=ot(L,oe.Medium);break;case"longTime":Se=ot(L,oe.Long);break;case"fullTime":Se=ot(L,oe.Full);break;case"short":const it=Ui(L,"shortTime"),wt=Ui(L,"shortDate");Se=Kr(dt(L,oe.Short),[it,wt]);break;case"medium":const en=Ui(L,"mediumTime"),sr=Ui(L,"mediumDate");Se=Kr(dt(L,oe.Medium),[en,sr]);break;case"long":const Ci=Ui(L,"longTime"),Pr=Ui(L,"longDate");Se=Kr(dt(L,oe.Long),[Ci,Pr]);break;case"full":const Vr=Ui(L,"fullTime"),wr=Ui(L,"fullDate");Se=Kr(dt(L,oe.Full),[Vr,wr])}return Se&&(mi[K][ce]=Se),Se}function Kr(L,ce){return ce&&(L=L.replace(/\{([^}]+)}/g,function(K,Se){return null!=ce&&Se in ce?ce[Se]:K})),L}function fi(L,ce,K="-",Se,it){let wt="";(L<0||it&&L<=0)&&(it?L=1-L:(L=-L,wt=K));let en=String(L);for(;en.length<ce;)en="0"+en;return Se&&(en=en.slice(en.length-ce)),wt+en}function Fr(L,ce,K=0,Se=!1,it=!1){return function(wt,en){let sr=function Qi(L,ce){switch(L){case Un.FullYear:return ce.getFullYear();case Un.Month:return ce.getMonth();case Un.Date:return ce.getDate();case Un.Hours:return ce.getHours();case Un.Minutes:return ce.getMinutes();case Un.Seconds:return ce.getSeconds();case Un.FractionalSeconds:return ce.getMilliseconds();case Un.Day:return ce.getDay();default:throw new Error(`Unknown DateType value "${L}".`)}}(L,wt);if((K>0||sr>-K)&&(sr+=K),L===Un.Hours)0===sr&&-12===K&&(sr=12);else if(L===Un.FractionalSeconds)return function eo(L,ce){return fi(L,3).substring(0,ce)}(sr,ce);const Ci=It(en,Fe.MinusSign);return fi(sr,ce,Ci,Se,it)}}function Tr(L,ce,K=gt.Format,Se=!1){return function(it,wt){return function qi(L,ce,K,Se,it,wt){switch(K){case Nn.Months:return function pn(L,ce,K){const Se=(0,T.cg1)(L),wt=dr([Se[T.wAp.MonthsFormat],Se[T.wAp.MonthsStandalone]],ce);return dr(wt,K)}(ce,it,Se)[L.getMonth()];case Nn.Days:return function Xt(L,ce,K){const Se=(0,T.cg1)(L),wt=dr([Se[T.wAp.DaysFormat],Se[T.wAp.DaysStandalone]],ce);return dr(wt,K)}(ce,it,Se)[L.getDay()];case Nn.DayPeriods:const en=L.getHours(),sr=L.getMinutes();if(wt){const Pr=function Gn(L){const ce=(0,T.cg1)(L);return $n(ce),(ce[T.wAp.ExtraData][2]||[]).map(Se=>"string"==typeof Se?xr(Se):[xr(Se[0]),xr(Se[1])])}(ce),Vr=function ir(L,ce,K){const Se=(0,T.cg1)(L);$n(Se);const wt=dr([Se[T.wAp.ExtraData][0],Se[T.wAp.ExtraData][1]],ce)||[];return dr(wt,K)||[]}(ce,it,Se),wr=Pr.findIndex(os=>{if(Array.isArray(os)){const[Br,Ki]=os,Ws=en>=Br.hours&&sr>=Br.minutes,ur=en<Ki.hours||en===Ki.hours&&sr<Ki.minutes;if(Br.hours<Ki.hours){if(Ws&&ur)return!0}else if(Ws||ur)return!0}else if(os.hours===en&&os.minutes===sr)return!0;return!1});if(-1!==wr)return Vr[wr]}return function Gt(L,ce,K){const Se=(0,T.cg1)(L),wt=dr([Se[T.wAp.DayPeriodsFormat],Se[T.wAp.DayPeriodsStandalone]],ce);return dr(wt,K)}(ce,it,Se)[en<12?0:1];case Nn.Eras:return function Zt(L,ce){return dr((0,T.cg1)(L)[T.wAp.Eras],ce)}(ce,Se)[L.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${K}`)}}(it,wt,L,ce,K,Se)}}function br(L){return function(ce,K,Se){const it=-1*Se,wt=It(K,Fe.MinusSign),en=it>0?Math.floor(it/60):Math.ceil(it/60);switch(L){case an.Short:return(it>=0?"+":"")+fi(en,2,wt)+fi(Math.abs(it%60),2,wt);case an.ShortGMT:return"GMT"+(it>=0?"+":"")+fi(en,1,wt);case an.Long:return"GMT"+(it>=0?"+":"")+fi(en,2,wt)+":"+fi(Math.abs(it%60),2,wt);case an.Extended:return 0===Se?"Z":(it>=0?"+":"")+fi(en,2,wt)+":"+fi(Math.abs(it%60),2,wt);default:throw new Error(`Unknown zone width "${L}"`)}}}const is=0,ci=4;function li(L){return ar(L.getFullYear(),L.getMonth(),L.getDate()+(ci-L.getDay()))}function vi(L,ce=!1){return function(K,Se){let it;if(ce){const wt=new Date(K.getFullYear(),K.getMonth(),1).getDay()-1,en=K.getDate();it=1+Math.floor((en+wt)/7)}else{const wt=li(K),en=function Ri(L){const ce=ar(L,is,1).getDay();return ar(L,0,1+(ce<=ci?ci:ci+7)-ce)}(wt.getFullYear()),sr=wt.getTime()-en.getTime();it=1+Math.round(sr/6048e5)}return fi(it,L,It(Se,Fe.MinusSign))}}function Nr(L,ce=!1){return function(K,Se){return fi(li(K).getFullYear(),L,It(Se,Fe.MinusSign),ce)}}const Vi={};function ls(L,ce){L=L.replace(/:/g,"");const K=Date.parse("Jan 01, 1970 00:00:00 "+L)/6e4;return isNaN(K)?ce:K}function be(L){return L instanceof Date&&!isNaN(L.valueOf())}const Pe=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function fr(L){const ce=parseInt(L);if(isNaN(ce))throw new Error("Invalid integer literal when parsing "+L);return ce}function gs(L,ce){ce=encodeURIComponent(ce);for(const K of L.split(";")){const Se=K.indexOf("="),[it,wt]=-1==Se?[K,""]:[K.slice(0,Se),K.slice(Se+1)];if(it.trim()===ce)return decodeURIComponent(wt)}return null}const qs=/\s+/,Lo=[];let si=(()=>{class L{constructor(K,Se,it,wt){this._iterableDiffers=K,this._keyValueDiffers=Se,this._ngEl=it,this._renderer=wt,this.initialClasses=Lo,this.stateMap=new Map}set klass(K){this.initialClasses=null!=K?K.trim().split(qs):Lo}set ngClass(K){this.rawClass="string"==typeof K?K.trim().split(qs):K}ngDoCheck(){for(const Se of this.initialClasses)this._updateState(Se,!0);const K=this.rawClass;if(Array.isArray(K)||K instanceof Set)for(const Se of K)this._updateState(Se,!0);else if(null!=K)for(const Se of Object.keys(K))this._updateState(Se,!!K[Se]);this._applyStateDiff()}_updateState(K,Se){const it=this.stateMap.get(K);void 0!==it?(it.enabled!==Se&&(it.changed=!0,it.enabled=Se),it.touched=!0):this.stateMap.set(K,{enabled:Se,changed:!0,touched:!0})}_applyStateDiff(){for(const K of this.stateMap){const Se=K[0],it=K[1];it.changed?(this._toggleClass(Se,it.enabled),it.changed=!1):it.touched||(it.enabled&&this._toggleClass(Se,!1),this.stateMap.delete(Se)),it.touched=!1}}_toggleClass(K,Se){(K=K.trim()).length>0&&K.split(qs).forEach(it=>{Se?this._renderer.addClass(this._ngEl.nativeElement,it):this._renderer.removeClass(this._ngEl.nativeElement,it)})}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),L})();class Go{constructor(ce,K,Se,it){this.$implicit=ce,this.ngForOf=K,this.index=Se,this.count=it}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ms=(()=>{class L{set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}constructor(K,Se,it){this._viewContainer=K,this._template=Se,this._differs=it,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;!this._differ&&K&&(this._differ=this._differs.find(K).create(this.ngForTrackBy))}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const Se=this._viewContainer;K.forEachOperation((it,wt,en)=>{if(null==it.previousIndex)Se.createEmbeddedView(this._template,new Go(it.item,this._ngForOf,-1,-1),null===en?void 0:en);else if(null==en)Se.remove(null===wt?void 0:wt);else if(null!==wt){const sr=Se.get(wt);Se.move(sr,en),_i(sr,it)}});for(let it=0,wt=Se.length;it<wt;it++){const sr=Se.get(it).context;sr.index=it,sr.count=wt,sr.ngForOf=this._ngForOf}K.forEachIdentityChange(it=>{_i(Se.get(it.currentIndex),it)})}static ngTemplateContextGuard(K,Se){return!0}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function _i(L,ce){L.context.$implicit=ce.item}let to=(()=>{class L{constructor(K,Se){this._viewContainer=K,this._context=new Ks,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Se}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){wa("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){wa("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,Se){return!0}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.s_b),T.Y36(T.Rgc))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class Ks{constructor(){this.$implicit=null,this.ngIf=null}}function wa(L,ce){if(ce&&!ce.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,T.AaK)(ce)}'.`)}let Xi=(()=>{class L{constructor(K,Se,it){this._ngEl=K,this._differs=Se,this._renderer=it,this._ngStyle=null,this._differ=null}set ngStyle(K){this._ngStyle=K,!this._differ&&K&&(this._differ=this._differs.find(K).create())}ngDoCheck(){if(this._differ){const K=this._differ.diff(this._ngStyle);K&&this._applyChanges(K)}}_setStyle(K,Se){const[it,wt]=K.split("."),en=-1===it.indexOf("-")?void 0:T.JOm.DashCase;null!=Se?this._renderer.setStyle(this._ngEl.nativeElement,it,wt?`${Se}${wt}`:Se,en):this._renderer.removeStyle(this._ngEl.nativeElement,it,en)}_applyChanges(K){K.forEachRemovedItem(Se=>this._setStyle(Se.key,null)),K.forEachAddedItem(Se=>this._setStyle(Se.key,Se.currentValue)),K.forEachChangedItem(Se=>this._setStyle(Se.key,Se.currentValue))}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.SBq),T.Y36(T.aQg),T.Y36(T.Qsj))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),L})();function Ir(L,ce){return new T.vHH(2100,!1)}class ds{createSubscription(ce,K){return(0,T.rg0)(()=>ce.subscribe({next:K,error:Se=>{throw Se}}))}dispose(ce){(0,T.rg0)(()=>ce.unsubscribe())}}class yi{createSubscription(ce,K){return ce.then(K,Se=>{throw Se})}dispose(ce){}}const Fo=new yi,ss=new ds;let Zs=(()=>{class L{constructor(K){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=K}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(K){return this._obj?K!==this._obj?(this._dispose(),this.transform(K)):this._latestValue:(K&&this._subscribe(K),this._latestValue)}_subscribe(K){this._obj=K,this._strategy=this._selectStrategy(K),this._subscription=this._strategy.createSubscription(K,Se=>this._updateLatestValue(K,Se))}_selectStrategy(K){if((0,T.QGY)(K))return Fo;if((0,T.F4k)(K))return ss;throw Ir()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(K,Se){K===this._obj&&(this._latestValue=Se,this._ref.markForCheck())}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.sBO,16))},L.\u0275pipe=T.Yjl({name:"async",type:L,pure:!1,standalone:!0}),L})();const Jt=new T.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Dn=new T.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Kn=(()=>{class L{constructor(K,Se,it){this.locale=K,this.defaultTimezone=Se,this.defaultOptions=it}transform(K,Se,it,wt){if(null==K||""===K||K!=K)return null;try{return Dr(K,Se??this.defaultOptions?.dateFormat??"mediumDate",wt||this.locale,it??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(en){throw Ir()}}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.soG,16),T.Y36(Jt,24),T.Y36(Dn,24))},L.\u0275pipe=T.Yjl({name:"date",type:L,pure:!0,standalone:!0}),L})(),jr=(()=>{class L{constructor(K){this._locale=K}transform(K,Se,it){if(!function Es(L){return!(null==L||""===L||L!=L)}(K))return null;it=it||this._locale;try{return function ui(L,ce,K){return function Xn(L,ce,K,Se,it,wt,en=!1){let sr="",Ci=!1;if(isFinite(L)){let Pr=function On(L){let Se,it,wt,en,sr,ce=Math.abs(L)+"",K=0;for((it=ce.indexOf("."))>-1&&(ce=ce.replace(".","")),(wt=ce.search(/e/i))>0?(it<0&&(it=wt),it+=+ce.slice(wt+1),ce=ce.substring(0,wt)):it<0&&(it=ce.length),wt=0;"0"===ce.charAt(wt);wt++);if(wt===(sr=ce.length))Se=[0],it=1;else{for(sr--;"0"===ce.charAt(sr);)sr--;for(it-=wt,Se=[],en=0;wt<=sr;wt++,en++)Se[en]=Number(ce.charAt(wt))}return it>22&&(Se=Se.splice(0,21),K=it-1,it=1),{digits:Se,exponent:K,integerLen:it}}(L);en&&(Pr=function nn(L){if(0===L.digits[0])return L;const ce=L.digits.length-L.integerLen;return L.exponent?L.exponent+=2:(0===ce?L.digits.push(0,0):1===ce&&L.digits.push(0),L.integerLen+=2),L}(Pr));let Vr=ce.minInt,wr=ce.minFrac,os=ce.maxFrac;if(wt){const na=wt.match(Pe);if(null===na)throw new Error(`${wt} is not a valid digit info`);const Ds=na[1],Ko=na[3],va=na[5];null!=Ds&&(Vr=fr(Ds)),null!=Ko&&(wr=fr(Ko)),null!=va?os=fr(va):null!=Ko&&wr>os&&(os=wr)}!function Jn(L,ce,K){if(ce>K)throw new Error(`The minimum number of digits after fraction (${ce}) is higher than the maximum (${K}).`);let Se=L.digits,it=Se.length-L.integerLen;const wt=Math.min(Math.max(ce,it),K);let en=wt+L.integerLen,sr=Se[en];if(en>0){Se.splice(Math.max(L.integerLen,en));for(let wr=en;wr<Se.length;wr++)Se[wr]=0}else{it=Math.max(0,it),L.integerLen=1,Se.length=Math.max(1,en=wt+1),Se[0]=0;for(let wr=1;wr<en;wr++)Se[wr]=0}if(sr>=5)if(en-1<0){for(let wr=0;wr>en;wr--)Se.unshift(0),L.integerLen++;Se.unshift(1),L.integerLen++}else Se[en-1]++;for(;it<Math.max(0,wt);it++)Se.push(0);let Ci=0!==wt;const Pr=ce+L.integerLen,Vr=Se.reduceRight(function(wr,os,Br,Ki){return Ki[Br]=(os+=wr)<10?os:os-10,Ci&&(0===Ki[Br]&&Br>=Pr?Ki.pop():Ci=!1),os>=10?1:0},0);Vr&&(Se.unshift(Vr),L.integerLen++)}(Pr,wr,os);let Br=Pr.digits,Ki=Pr.integerLen;const Ws=Pr.exponent;let ur=[];for(Ci=Br.every(na=>!na);Ki<Vr;Ki++)Br.unshift(0);for(;Ki<0;Ki++)Br.unshift(0);Ki>0?ur=Br.splice(Ki,Br.length):(ur=Br,Br=[0]);const qo=[];for(Br.length>=ce.lgSize&&qo.unshift(Br.splice(-ce.lgSize,Br.length).join(""));Br.length>ce.gSize;)qo.unshift(Br.splice(-ce.gSize,Br.length).join(""));Br.length&&qo.unshift(Br.join("")),sr=qo.join(It(K,Se)),ur.length&&(sr+=It(K,it)+ur.join("")),Ws&&(sr+=It(K,Fe.Exponential)+"+"+Ws)}else sr=It(K,Fe.Infinity);return sr=L<0&&!Ci?ce.negPre+sr+ce.negSuf:ce.posPre+sr+ce.posSuf,sr}(L,function Pt(L,ce="-"){const K={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Se=L.split(";"),it=Se[0],wt=Se[1],en=-1!==it.indexOf(".")?it.split("."):[it.substring(0,it.lastIndexOf("0")+1),it.substring(it.lastIndexOf("0")+1)],sr=en[0],Ci=en[1]||"";K.posPre=sr.substring(0,sr.indexOf("#"));for(let Vr=0;Vr<Ci.length;Vr++){const wr=Ci.charAt(Vr);"0"===wr?K.minFrac=K.maxFrac=Vr+1:"#"===wr?K.maxFrac=Vr+1:K.posSuf+=wr}const Pr=sr.split(",");if(K.gSize=Pr[1]?Pr[1].length:0,K.lgSize=Pr[2]||Pr[1]?(Pr[2]||Pr[1]).length:0,wt){const Vr=it.length-K.posPre.length-K.posSuf.length,wr=wt.indexOf("#");K.negPre=wt.substring(0,wr).replace(/'/g,""),K.negSuf=wt.slice(wr+Vr).replace(/'/g,"")}else K.negPre=ce+K.posPre,K.negSuf=K.posSuf;return K}(function ft(L,ce){return(0,T.cg1)(L)[T.wAp.NumberFormats][ce]}(ce,Te.Percent),It(ce,Fe.MinusSign)),ce,Fe.Group,Fe.Decimal,K,!0).replace(new RegExp("%","g"),It(ce,Fe.PercentSign))}(function Hi(L){if("string"==typeof L&&!isNaN(Number(L)-parseFloat(L)))return Number(L);if("number"!=typeof L)throw new Error(`${L} is not a number`);return L}(K),it,Se)}catch(wt){throw Ir()}}}return L.\u0275fac=function(K){return new(K||L)(T.Y36(T.soG,16))},L.\u0275pipe=T.Yjl({name:"percent",type:L,pure:!0,standalone:!0}),L})();let go=(()=>{class L{}return L.\u0275fac=function(K){return new(K||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({}),L})();const ca="browser",Uu="server";function jo(L){return L===Uu}let ji=(()=>{class L{}return L.\u0275prov=(0,T.Yz7)({token:L,providedIn:"root",factory:()=>new fs((0,T.LFG)(Ne),window)}),L})();class fs{constructor(ce,K){this.document=ce,this.window=K,this.offset=()=>[0,0]}setOffset(ce){this.offset=Array.isArray(ce)?()=>ce:ce}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ce){this.supportsScrolling()&&this.window.scrollTo(ce[0],ce[1])}scrollToAnchor(ce){if(!this.supportsScrolling())return;const K=function ha(L,ce){const K=L.getElementById(ce)||L.getElementsByName(ce)[0];if(K)return K;if("function"==typeof L.createTreeWalker&&L.body&&"function"==typeof L.body.attachShadow){const Se=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let it=Se.currentNode;for(;it;){const wt=it.shadowRoot;if(wt){const en=wt.getElementById(ce)||wt.querySelector(`[name="${ce}"]`);if(en)return en}it=Se.nextNode()}}return null}(this.document,ce);K&&(this.scrollToElement(K),K.focus())}setHistoryScrollRestoration(ce){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=ce)}}scrollToElement(ce){const K=ce.getBoundingClientRect(),Se=K.left+this.window.pageXOffset,it=K.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(Se-wt[0],it-wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ce=Hs(this.window.history)||Hs(Object.getPrototypeOf(this.window.history));return!(!ce||!ce.writable&&!ce.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Hs(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Cs{}},5879:(tn,ht,z)=>{"use strict";z.d(ht,{$8M:()=>ia,$WT:()=>Fo,$Z:()=>Iy,AFp:()=>Qf,ALo:()=>vb,AaK:()=>$e,AsE:()=>Wl,BQk:()=>Hd,CHM:()=>zu,CRH:()=>Pb,DdM:()=>lb,EJc:()=>jS,EiD:()=>Wf,EpF:()=>$d,F$t:()=>yp,F4k:()=>Nv,FYo:()=>Jp,FiY:()=>Bi,G48:()=>aw,Gf:()=>Mb,GfV:()=>rm,Gpc:()=>St,HDt:()=>tE,Hsn:()=>e0,JOm:()=>tl,JVY:()=>ph,JZr:()=>W,KtG:()=>Ns,L6k:()=>$f,LAX:()=>S0,LFG:()=>Ar,LSH:()=>qm,Lbi:()=>ov,Lck:()=>DC,MAs:()=>_g,MMx:()=>tb,NdJ:()=>Gd,O4$:()=>R,Ojb:()=>O0,OlP:()=>ti,Oqu:()=>Lm,P3R:()=>Qm,PXZ:()=>XS,Q6J:()=>Tg,QGY:()=>nd,Qsj:()=>cv,R0b:()=>Pc,RDi:()=>ty,Rgc:()=>E_,SBq:()=>Cc,Sil:()=>US,Suo:()=>kb,TTD:()=>Oa,TgZ:()=>Ph,VKq:()=>cb,VuI:()=>Ow,W1O:()=>Lb,WLB:()=>db,X6Q:()=>ow,XFs:()=>an,Xpm:()=>no,Xq5:()=>ks,Xts:()=>$p,Y36:()=>wh,YKP:()=>JT,YNc:()=>Wa,Yjl:()=>As,Yz7:()=>$n,Z0I:()=>dr,ZZ4:()=>kT,_Bn:()=>XT,_UZ:()=>td,_c5:()=>Cw,_uU:()=>Wv,aQg:()=>PT,c2e:()=>eE,cJS:()=>ir,cg1:()=>Ag,dDg:()=>KS,dqk:()=>Kr,eBb:()=>iy,eFA:()=>gE,eJc:()=>gT,ekj:()=>Rm,eoX:()=>dE,f3M:()=>mr,g9A:()=>sv,h0i:()=>y0,hGG:()=>Sw,hij:()=>Dg,iGM:()=>Ab,ifc:()=>ve,ip1:()=>Jb,jDz:()=>nb,kL8:()=>L_,kcU:()=>$,lG2:()=>du,lcZ:()=>yb,lqb:()=>Qc,lri:()=>lE,mCW:()=>Zc,n5z:()=>Bh,n_E:()=>B_,oAB:()=>Rs,oxw:()=>Jy,pB0:()=>Hm,q3G:()=>Yo,q4F:()=>im,qFp:()=>Nw,qLn:()=>mf,qOj:()=>ze,qZA:()=>Ef,qzn:()=>sf,rWj:()=>cE,rg0:()=>ga,sBO:()=>uw,s_b:()=>V_,soG:()=>$_,tb:()=>wT,tp0:()=>oa,uIk:()=>Em,vHH:()=>te,vpe:()=>wp,wAp:()=>ni,xp6:()=>Ey,ynx:()=>Ac,z2F:()=>b0,z3N:()=>wd,zSh:()=>Ad,zs3:()=>Sh});var T=z(8645),me=z(7394),le=z(5619),B=z(5592),Re=z(3019),Ne=z(2096),Qe=z(3020),at=z(4664),ut=z(3997);function xe(r){for(let i in r)if(r[i]===xe)return i;throw Error("Could not find renamed property on target object.")}function je(r,i){for(const d in i)i.hasOwnProperty(d)&&!r.hasOwnProperty(d)&&(r[d]=i[d])}function $e(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map($e).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const d=i.indexOf("\n");return-1===d?i:i.substring(0,d)}function kt(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const ge=xe({__forward_ref__:xe});function St(r){return r.__forward_ref__=St,r.toString=function(){return $e(this())},r}function Ze(r){return rt(r)?r():r}function rt(r){return"function"==typeof r&&r.hasOwnProperty(ge)&&r.__forward_ref__===St}function et(r){return r&&!!r.\u0275providers}const W="https://g.co/ng/security#xss";class te extends Error{constructor(i,d){super(function Ee(r,i){return`NG0${Math.abs(r)}${i?": "+i:""}`}(i,d)),this.code=i}}function Te(r){return"string"==typeof r?r:null==r?"":String(r)}function Fe(r,i){throw new te(-201,!1)}function jt(r,i){null==r&&function zt(r,i,d,p){throw new Error(`ASSERTION ERROR: ${r}`+(null==p?"":` [Expected=> ${d} ${p} ${i} <=Actual]`))}(i,r,null,"!=")}function $n(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ir(r){return{providers:r.providers||[],imports:r.imports||[]}}function Bn(r){return xr(r,Gr)||xr(r,mi)}function dr(r){return null!==Bn(r)}function xr(r,i){return r.hasOwnProperty(i)?r[i]:null}function qr(r){return r&&(r.hasOwnProperty(Sr)||r.hasOwnProperty(Rr))?r[Sr]:null}const Gr=xe({\u0275prov:xe}),Sr=xe({\u0275inj:xe}),mi=xe({ngInjectableDef:xe}),Rr=xe({ngInjectorDef:xe});var an=(()=>((an=an||{})[an.Default=0]="Default",an[an.Host=1]="Host",an[an.Self=2]="Self",an[an.SkipSelf=4]="SkipSelf",an[an.Optional=8]="Optional",an))();let Un;function Dr(r){const i=Un;return Un=r,i}function ar(r,i,d){const p=Bn(r);return p&&"root"==p.providedIn?void 0===p.value?p.value=p.factory():p.value:d&an.Optional?null:void 0!==i?i:void Fe($e(r))}const Kr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qi={},Tr="__NG_DI_FLAG__",qi="ngTempTokenPath",is=/\n/gm,Ri="__source";let li;function Nr(r){const i=li;return li=r,i}function Vi(r,i=an.Default){if(void 0===li)throw new te(-203,!1);return null===li?ar(r,void 0,i):li.get(r,i&an.Optional?null:void 0,i)}function Ar(r,i=an.Default){return(function Nn(){return Un}()||Vi)(Ze(r),i)}function mr(r,i=an.Default){return Ar(r,lt(i))}function lt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function _e(r){const i=[];for(let d=0;d<r.length;d++){const p=Ze(r[d]);if(Array.isArray(p)){if(0===p.length)throw new te(900,!1);let g,b=an.Default;for(let w=0;w<p.length;w++){const P=p[w],U=be(P);"number"==typeof U?-1===U?g=P.token:b|=U:g=P}i.push(Ar(g,b))}else i.push(Ar(p))}return i}function Ce(r,i){return r[Tr]=i,r.prototype[Tr]=i,r}function be(r){return r[Tr]}function Qt(r){return{toString:r}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),ve=(()=>{return(r=ve||(ve={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",ve;var r})();const ye={},He=[],Tt=xe({\u0275cmp:xe}),ln=xe({\u0275dir:xe}),Xn=xe({\u0275pipe:xe}),Hr=xe({\u0275mod:xe}),ui=xe({\u0275fac:xe}),Ut=xe({__NG_ELEMENT_ID__:xe}),Pt=xe({__NG_ENV_ID__:xe});function nn(r,i,d){let p=r.length;for(;;){const g=r.indexOf(i,d);if(-1===g)return g;if(0===g||r.charCodeAt(g-1)<=32){const b=i.length;if(g+b===p||r.charCodeAt(g+b)<=32)return g}d=g+1}}function On(r,i,d){let p=0;for(;p<d.length;){const g=d[p];if("number"==typeof g){if(0!==g)break;p++;const b=d[p++],w=d[p++],P=d[p++];r.setAttribute(i,w,P,b)}else{const b=g,w=d[++p];fr(b)?r.setProperty(i,b,w):r.setAttribute(i,b,w),p++}}return p}function Jn(r){return 3===r||4===r||6===r}function fr(r){return 64===r.charCodeAt(0)}function Er(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let d=-1;for(let p=0;p<i.length;p++){const g=i[p];"number"==typeof g?d=g:0===d||ri(r,d,g,null,-1===d||2===d?i[++p]:null)}}return r}function ri(r,i,d,p,g){let b=0,w=r.length;if(-1===i)w=-1;else for(;b<r.length;){const P=r[b++];if("number"==typeof P){if(P===i){w=-1;break}if(P>i){w=b-1;break}}}for(;b<r.length;){const P=r[b];if("number"==typeof P)break;if(P===d){if(null===p)return void(null!==g&&(r[b+1]=g));if(p===r[b+1])return void(r[b+2]=g)}b++,null!==p&&b++,null!==g&&b++}-1!==w&&(r.splice(w,0,i),b=w+1),r.splice(b++,0,d),null!==p&&r.splice(b++,0,p),null!==g&&r.splice(b++,0,g)}const pi="ng-template";function di(r,i,d){let p=0,g=!0;for(;p<r.length;){let b=r[p++];if("string"==typeof b&&g){const w=r[p++];if(d&&"class"===b&&-1!==nn(w.toLowerCase(),i,0))return!0}else{if(1===b){for(;p<r.length&&"string"==typeof(b=r[p++]);)if(b.toLowerCase()===i)return!0;return!1}"number"==typeof b&&(g=!1)}}return!1}function gs(r){return 4===r.type&&r.value!==pi}function qs(r,i,d){return i===(4!==r.type||d?r.value:pi)}function Lo(r,i,d){let p=4;const g=r.attrs||[],b=function ms(r){for(let i=0;i<r.length;i++)if(Jn(r[i]))return i;return r.length}(g);let w=!1;for(let P=0;P<i.length;P++){const U=i[P];if("number"!=typeof U){if(!w)if(4&p){if(p=2|1&p,""!==U&&!qs(r,U,d)||""===U&&1===i.length){if(si(p))return!1;w=!0}}else{const ue=8&p?U:i[++P];if(8&p&&null!==r.attrs){if(!di(r.attrs,ue,d)){if(si(p))return!1;w=!0}continue}const Ye=$o(8&p?"class":U,g,gs(r),d);if(-1===Ye){if(si(p))return!1;w=!0;continue}if(""!==ue){let Dt;Dt=Ye>b?"":g[Ye+1].toLowerCase();const Ft=8&p?Dt:null;if(Ft&&-1!==nn(Ft,ue,0)||2&p&&ue!==Dt){if(si(p))return!1;w=!0}}}}else{if(!w&&!si(p)&&!si(U))return!1;if(w&&si(U))continue;w=!1,p=U|1&p}}return si(p)||w}function si(r){return 0==(1&r)}function $o(r,i,d,p){if(null===i)return-1;let g=0;if(p||!d){let b=!1;for(;g<i.length;){const w=i[g];if(w===r)return g;if(3===w||6===w)b=!0;else{if(1===w||2===w){let P=i[++g];for(;"string"==typeof P;)P=i[++g];continue}if(4===w)break;if(0===w){g+=4;continue}}g+=b?1:2}return-1}return function _i(r,i){let d=r.indexOf(4);if(d>-1)for(d++;d<r.length;){const p=r[d];if("number"==typeof p)return-1;if(p===i)return d;d++}return-1}(i,r)}function cs(r,i,d=!1){for(let p=0;p<i.length;p++)if(Lo(r,i[p],d))return!0;return!1}function hi(r,i){e:for(let d=0;d<i.length;d++){const p=i[d];if(r.length===p.length){for(let g=0;g<r.length;g++)if(r[g]!==p[g])continue e;return!0}}return!1}function to(r,i){return r?":not("+i.trim()+")":i}function Ks(r){let i=r[0],d=1,p=2,g="",b=!1;for(;d<r.length;){let w=r[d];if("string"==typeof w)if(2&p){const P=r[++d];g+="["+w+(P.length>0?'="'+P+'"':"")+"]"}else 8&p?g+="."+w:4&p&&(g+=" "+w);else""!==g&&!si(w)&&(i+=to(b,g),g=""),p=w,b=b||!si(p);d++}return""!==g&&(i+=to(b,g)),i}function no(r){return Qt(()=>{const i=Zs(r),d={...i,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||ve.Emulated,styles:r.styles||He,_:null,schemas:r.schemas||null,tView:null,id:""};bt(d);const p=r.dependencies;return d.directiveDefs=vt(p,!1),d.pipeDefs=vt(p,!0),d.id=function xt(r){let i=0;const d=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const g of d)i=Math.imul(31,i)+g.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(d),d})}function Ia(r){return Ir(r)||ds(r)}function Bu(r){return null!==r}function Rs(r){return Qt(()=>({type:r.type,bootstrap:r.bootstrap||He,declarations:r.declarations||He,imports:r.imports||He,exports:r.exports||He,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Xi(r,i){if(null==r)return ye;const d={};for(const p in r)if(r.hasOwnProperty(p)){let g=r[p],b=g;Array.isArray(g)&&(b=g[1],g=g[0]),d[g]=p,i&&(i[g]=b)}return d}function du(r){return Qt(()=>{const i=Zs(r);return bt(i),i})}function As(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ir(r){return r[Tt]||null}function ds(r){return r[ln]||null}function yi(r){return r[Xn]||null}function Fo(r){const i=Ir(r)||ds(r)||yi(r);return null!==i&&i.standalone}function ss(r,i){const d=r[Hr]||null;if(!d&&!0===i)throw new Error(`Type ${$e(r)} does not have '\u0275mod' property.`);return d}function Zs(r){const i={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:r.inputs||ye,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||He,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xi(r.inputs,i),outputs:Xi(r.outputs)}}function bt(r){r.features?.forEach(i=>i(r))}function vt(r,i){if(!r)return null;const d=i?yi:Ia;return()=>("function"==typeof r?r():r).map(p=>d(p)).filter(Bu)}const un=0,Jt=1,Dn=2,Kn=3,Mr=4,Ys=5,vs=6,hs=7,Fi=8,ys=9,Us=10,kr=11,jr=12,eu=13,Es=14,Hi=15,zo=16,ro=17,go=18,ca=19,Uu=20,Vs=21,Ti=22,Aa=23,jo=24,$r=25,da=1,ji=2,fs=7,ha=9,Cs=11;function Lr(r){return Array.isArray(r)&&"object"==typeof r[da]}function Ei(r){return Array.isArray(r)&&!0===r[da]}function mo(r){return 0!=(4&r.flags)}function Ji(r){return r.componentOffset>-1}function Bo(r){return 1==(1&r.flags)}function Ss(r){return!!r.template}function xi(r){return 0!=(512&r[Dn])}function Me(r,i){return r.hasOwnProperty(ui)?r[ui]:null}let Wn=Kr.WeakRef??class Yn{constructor(i){this.ref=i}deref(){return this.ref}},ii=0,zr=null,Mi=!1;function Ln(r){const i=zr;return zr=r,i}class $i{constructor(){this.id=ii++,this.ref=function pr(r){return new Wn(r)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[i,d]of this.producers){const p=d.producerNode.deref();if(null!=p&&d.atTrackingVersion===this.trackingVersion){if(p.producerPollStatus(d.seenValueVersion))return!0}else this.producers.delete(i),p?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const i=Mi;Mi=!0;try{for(const[d,p]of this.consumers){const g=p.consumerNode.deref();null!=g&&g.trackingVersion===p.atTrackingVersion?g.onConsumerDependencyMayHaveChanged():(this.consumers.delete(d),g?.producers.delete(this.id))}}finally{Mi=i}}producerAccessed(){if(Mi)throw new Error("");if(null===zr)return;let i=zr.producers.get(this.id);void 0===i?(i={consumerNode:zr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:zr.trackingVersion},zr.producers.set(this.id,i),this.consumers.set(zr.id,i)):(i.seenValueVersion=this.valueVersion,i.atTrackingVersion=zr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==zr?.consumerAllowSignalWrites}producerPollStatus(i){return this.valueVersion!==i||(this.onProducerUpdateValueVersion(),this.valueVersion!==i)}}let vo=null;function ga(r){const i=Ln(null);try{return r()}finally{Ln(i)}}const $u=()=>{};class Eu extends $i{constructor(i,d,p){super(),this.watch=i,this.schedule=d,this.dirty=!1,this.cleanupFn=$u,this.registerOnCleanup=g=>{this.cleanupFn=g},this.consumerAllowSignalWrites=p}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const i=Ln(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=$u,this.watch(this.registerOnCleanup)}finally{Ln(i)}}cleanup(){this.cleanupFn()}}class ll{constructor(i,d,p){this.previousValue=i,this.currentValue=d,this.firstChange=p}isFirstChange(){return this.firstChange}}function Oa(){return io}function io(r){return r.type.prototype.ngOnChanges&&(r.setInput=Cu),Gu}function Gu(){const r=Xl(this),i=r?.current;if(i){const d=r.previous;if(d===ye)r.previous=i;else for(let p in i)d[p]=i[p];r.current=null,this.ngOnChanges(i)}}function Cu(r,i,d,p){const g=this.declaredInputs[d],b=Xl(r)||function ma(r,i){return r[Su]=i}(r,{previous:ye,current:null}),w=b.current||(b.current={}),P=b.previous,U=P[g];w[g]=new ll(U&&U.currentValue,i,P===ye),r[p]=i}Oa.ngInherit=!0;const Su="__ngSimpleChanges__";function Xl(r){return r[Su]||null}const ws=function(r,i,d){},ea="svg";function Qr(r){for(;Array.isArray(r);)r=r[un];return r}function L(r,i){return Qr(i[r])}function ce(r,i){return Qr(i[r.index])}function Se(r,i){return r.data[i]}function it(r,i){return r[i]}function wt(r,i){const d=i[r];return Lr(d)?d:d[un]}function Pr(r,i){return null==i?null:r[i]}function Vr(r){r[ro]=0}function wr(r){1024&r[Dn]||(r[Dn]|=1024,Br(r,1))}function os(r){1024&r[Dn]&&(r[Dn]&=-1025,Br(r,-1))}function Br(r,i){let d=r[Kn];if(null===d)return;d[Ys]+=i;let p=d;for(d=d[Kn];null!==d&&(1===i&&1===p[Ys]||-1===i&&0===p[Ys]);)d[Ys]+=i,p=d,d=d[Kn]}const ur={lFrame:oo(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Oc(){return ur.bindingsEnabled}function Ra(){return null!==ur.skipHydrationRootTNode}function vn(){return ur.lFrame.lView}function Or(){return ur.lFrame.tView}function zu(r){return ur.lFrame.contextLView=r,r[Fi]}function Ns(r){return ur.lFrame.contextLView=null,r}function wo(){let r=wu();for(;null!==r&&64===r.type;)r=r.parent;return r}function wu(){return ur.lFrame.currentTNode}function zi(r,i){const d=ur.lFrame;d.currentTNode=r,d.isParent=i}function To(){return ur.lFrame.isParent}function ec(){ur.lFrame.isParent=!1}function Sn(){const r=ur.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function oi(){return ur.lFrame.bindingIndex++}function Na(r){const i=ur.lFrame,d=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,d}function _a(r,i){const d=ur.lFrame;d.bindingIndex=d.bindingRootIndex=r,ru(i)}function ru(r){ur.lFrame.currentDirectiveIndex=r}function rc(){return ur.lFrame.currentQueryIndex}function ic(r){ur.lFrame.currentQueryIndex=r}function La(r){const i=r[Jt];return 2===i.type?i.declTNode:1===i.type?r[vs]:null}function ts(r,i,d){if(d&an.SkipSelf){let g=i,b=r;for(;!(g=g.parent,null!==g||d&an.Host||(g=La(b),null===g||(b=b[Es],10&g.type))););if(null===g)return!1;i=g,r=b}const p=ur.lFrame=Wu();return p.currentTNode=i,p.lView=r,!0}function Cr(r){const i=Wu(),d=r[Jt];ur.lFrame=i,i.currentTNode=d.firstChild,i.lView=r,i.tView=d,i.contextLView=r,i.bindingIndex=d.bindingStartIndex,i.inI18n=!1}function Wu(){const r=ur.lFrame,i=null===r?null:r.child;return null===i?oo(r):i}function oo(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function as(){const r=ur.lFrame;return ur.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const vr=as;function bo(){const r=as();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function gi(){return ur.lFrame.selectedIndex}function Fn(r){ur.lFrame.selectedIndex=r}function k(){const r=ur.lFrame;return Se(r.tView,r.selectedIndex)}function R(){ur.lFrame.currentNamespace=ea}function $(){!function de(){ur.lFrame.currentNamespace=null}()}let Ue=!0;function Mt(){return Ue}function sn(r){Ue=r}function jn(r,i){for(let d=i.directiveStart,p=i.directiveEnd;d<p;d++){const b=r.data[d].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:P,ngAfterViewInit:U,ngAfterViewChecked:ue,ngOnDestroy:Ie}=b;w&&(r.contentHooks??=[]).push(-d,w),P&&((r.contentHooks??=[]).push(d,P),(r.contentCheckHooks??=[]).push(d,P)),U&&(r.viewHooks??=[]).push(-d,U),ue&&((r.viewHooks??=[]).push(d,ue),(r.viewCheckHooks??=[]).push(d,ue)),null!=Ie&&(r.destroyHooks??=[]).push(d,Ie)}}function Li(r,i,d){gu(r,i,3,d)}function Vo(r,i,d,p){(3&r[Dn])===d&&gu(r,i,d,p)}function Ta(r,i){let d=r[Dn];(3&d)===i&&(d&=8191,d+=1,r[Dn]=d)}function gu(r,i,d,p){const b=p??-1,w=i.length-1;let P=0;for(let U=void 0!==p?65535&r[ro]:0;U<w;U++)if("number"==typeof i[U+1]){if(P=i[U],null!=p&&P>=p)break}else i[U]<0&&(r[ro]+=65536),(P<b||-1==b)&&(Al(r,d,i,U),r[ro]=(4294901760&r[ro])+U+2),U++}function Je(r,i){ws(4,r,i);const d=Ln(null);try{i.call(r)}finally{Ln(d),ws(5,r,i)}}function Al(r,i,d,p){const g=d[p]<0,b=d[p+1],P=r[g?-d[p]:d[p]];g?r[Dn]>>13<r[ro]>>16&&(3&r[Dn])===i&&(r[Dn]+=8192,Je(P,b)):Je(P,b)}const Ls=-1;class sc{constructor(i,d,p){this.factory=i,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=p}}function Io(r){return r!==Ls}function xo(r){return 32767&r}function Du(r,i){let d=function kl(r){return r>>16}(r),p=i;for(;d>0;)p=p[Es],d--;return p}let Fs=!0;function oc(r){const i=Fs;return Fs=r,i}const Ao=255,ac=5;let ad=0;const mu={};function Zd(r,i){const d=Yd(r,i);if(-1!==d)return d;const p=i[Jt];p.firstCreatePass&&(r.injectorIndex=i.length,ud(p.data,r),ud(i,null),ud(p.blueprint,null));const g=ld(r,i),b=r.injectorIndex;if(Io(g)){const w=xo(g),P=Du(g,i),U=P[Jt].data;for(let ue=0;ue<8;ue++)i[b+ue]=P[w+ue]|U[w+ue]}return i[b+8]=g,b}function ud(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Yd(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function ld(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let d=0,p=null,g=i;for(;null!==g;){if(p=iu(g),null===p)return Ls;if(d++,g=g[Es],-1!==p.injectorIndex)return p.injectorIndex|d<<16}return Ls}function uc(r,i,d){!function Fh(r,i,d){let p;"string"==typeof d?p=d.charCodeAt(0)||0:d.hasOwnProperty(Ut)&&(p=d[Ut]),null==p&&(p=d[Ut]=ad++);const g=p&Ao;i.data[r+(g>>ac)]|=1<<g}(r,i,d)}function Lc(r,i,d){if(d&an.Optional||void 0!==r)return r;Fe()}function Qd(r,i,d,p){if(d&an.Optional&&void 0===p&&(p=null),!(d&(an.Self|an.Host))){const g=r[ys],b=Dr(void 0);try{return g?g.get(i,p,d&an.Optional):ar(i,p,d&an.Optional)}finally{Dr(b)}}return Lc(p,0,d)}function cd(r,i,d,p=an.Default,g){if(null!==r){if(2048&i[Dn]&&!(p&an.Self)){const w=function ao(r,i,d,p,g){let b=r,w=i;for(;null!==b&&null!==w&&2048&w[Dn]&&!(512&w[Dn]);){const P=Fc(b,w,d,p|an.Self,mu);if(P!==mu)return P;let U=b.parent;if(!U){const ue=w[Uu];if(ue){const Ie=ue.get(d,mu,p);if(Ie!==mu)return Ie}U=iu(w),w=w[Es]}b=U}return g}(r,i,d,p,mu);if(w!==mu)return w}const b=Fc(r,i,d,p,mu);if(b!==mu)return b}return Qd(i,d,p,g)}function Fc(r,i,d,p,g){const b=function cc(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Ut)?r[Ut]:void 0;return"number"==typeof i?i>=0?i&Ao:Lf:i}(d);if("function"==typeof b){if(!ts(i,r,p))return p&an.Host?Lc(g,0,p):Qd(i,d,p,g);try{const w=b(p);if(null!=w||p&an.Optional)return w;Fe()}finally{vr()}}else if("number"==typeof b){let w=null,P=Yd(r,i),U=Ls,ue=p&an.Host?i[Hi][vs]:null;for((-1===P||p&an.SkipSelf)&&(U=-1===P?ld(r,i):i[P+8],U!==Ls&&jh(p,!1)?(w=i[Jt],P=xo(U),i=Du(U,i)):P=-1);-1!==P;){const Ie=i[Jt];if(dd(b,P,Ie.data)){const Ye=Mg(P,i,d,w,p,ue);if(Ye!==mu)return Ye}U=i[P+8],U!==Ls&&jh(p,i[Jt].data[P+8]===ue)&&dd(b,P,i)?(w=Ie,P=xo(U),i=Du(U,i)):P=-1}}return g}function Mg(r,i,d,p,g,b){const w=i[Jt],P=w.data[r+8],Ie=lc(P,w,d,null==p?Ji(P)&&Fs:p!=w&&0!=(3&P.type),g&an.Host&&b===P);return null!==Ie?Pl(i,w,Ie,P):mu}function lc(r,i,d,p,g){const b=r.providerIndexes,w=i.data,P=1048575&b,U=r.directiveStart,Ie=b>>20,Dt=g?P+Ie:r.directiveEnd;for(let Ft=p?P:P+Ie;Ft<Dt;Ft++){const yn=w[Ft];if(Ft<U&&d===yn||Ft>=U&&yn.type===d)return Ft}if(g){const Ft=w[U];if(Ft&&Ss(Ft)&&Ft.type===d)return U}return null}function Pl(r,i,d,p){let g=r[d];const b=i.data;if(function Fa(r){return r instanceof sc}(g)){const w=g;w.resolving&&function gt(r,i){const d=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new te(-200,`Circular dependency in DI detected for ${r}${d}`)}(function Ae(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Te(r)}(b[d]));const P=oc(w.canSeeViewProviders);w.resolving=!0;const U=w.injectImpl?Dr(w.injectImpl):null;ts(r,p,an.Default);try{g=r[d]=w.factory(void 0,b,r,p),i.firstCreatePass&&d>=p.directiveStart&&function er(r,i,d){const{ngOnChanges:p,ngOnInit:g,ngDoCheck:b}=i.type.prototype;if(p){const w=io(i);(d.preOrderHooks??=[]).push(r,w),(d.preOrderCheckHooks??=[]).push(r,w)}g&&(d.preOrderHooks??=[]).push(0-r,g),b&&((d.preOrderHooks??=[]).push(r,b),(d.preOrderCheckHooks??=[]).push(r,b))}(d,b[d],i)}finally{null!==U&&Dr(U),oc(P),w.resolving=!1,vr()}}return g}function dd(r,i,d){return!!(d[i+(r>>ac)]&1<<r)}function jh(r,i){return!(r&an.Self||r&an.Host&&i)}class Ku{constructor(i,d){this._tNode=i,this._lView=d}get(i,d,p){return cd(this._tNode,this._lView,i,lt(p),d)}}function Lf(){return new Ku(wo(),vn())}function Bh(r){return Qt(()=>{const i=r.prototype.constructor,d=i[ui]||dc(i),p=Object.prototype;let g=Object.getPrototypeOf(r.prototype).constructor;for(;g&&g!==p;){const b=g[ui]||dc(g);if(b&&b!==d)return b;g=Object.getPrototypeOf(g)}return b=>new b})}function dc(r){return rt(r)?()=>{const i=dc(Ze(r));return i&&i()}:Me(r)}function iu(r){const i=r[Jt],d=i.type;return 2===d?i.declTNode:1===d?r[vs]:null}function ia(r){return function Nf(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const d=r.attrs;if(d){const p=d.length;let g=0;for(;g<p;){const b=d[g];if(Jn(b))break;if(0===b)g+=2;else if("number"==typeof b)for(g++;g<p&&"string"==typeof d[g];)g++;else{if(b===i)return d[g+1];g+=2}}}return null}(wo(),r)}const Wi="__parameters__";function Qa(r,i,d){return Qt(()=>{const p=function ns(r){return function(...d){if(r){const p=r(...d);for(const g in p)this[g]=p[g]}}}(i);function g(...b){if(this instanceof g)return p.apply(this,b),this;const w=new g(...b);return P.annotation=w,P;function P(U,ue,Ie){const Ye=U.hasOwnProperty(Wi)?U[Wi]:Object.defineProperty(U,Wi,{value:[]})[Wi];for(;Ye.length<=Ie;)Ye.push(null);return(Ye[Ie]=Ye[Ie]||[]).push(w),U}}return d&&(g.prototype=Object.create(d.prototype)),g.prototype.ngMetadataName=r,g.annotationCls=g,g})}function Zo(r,i){r.forEach(d=>Array.isArray(d)?Zo(d,i):i(d))}function Iu(r,i,d){i>=r.length?r.push(d):r.splice(i,0,d)}function Rl(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function su(r,i){const d=[];for(let p=0;p<r;p++)d.push(i);return d}function H(r,i,d){let p=We(r,i);return p>=0?r[1|p]=d:(p=~p,function ou(r,i,d,p){let g=r.length;if(g==i)r.push(d,p);else if(1===g)r.push(p,r[0]),r[0]=d;else{for(g--,r.push(r[g-1],r[g]);g>i;)r[g]=r[g-2],g--;r[i]=d,r[i+1]=p}}(r,p,i,d)),p}function fe(r,i){const d=We(r,i);if(d>=0)return r[1|d]}function We(r,i){return function Rt(r,i,d){let p=0,g=r.length>>d;for(;g!==p;){const b=p+(g-p>>1),w=r[b<<d];if(i===w)return b<<d;w>i?g=b:p=b+1}return~(g<<d)}(r,i,1)}const Bi=Ce(Qa("Optional"),8),oa=Ce(Qa("SkipSelf"),4);function Ll(r){return 128==(128&r.flags)}var tl=(()=>((tl=tl||{})[tl.Important=1]="Important",tl[tl.DashCase=2]="DashCase",tl))();const Rg=/^>|^->|<!--|-->|--!>|<!-$/g,nl=/(<|>)/,Ng="\u200b$1\u200b";const Wh=new Map;let Fl=0;const Gc="__ngContext__";function co(r,i){Lr(i)?(r[Gc]=i[ca],function rl(r){Wh.set(r[ca],r)}(i)):r[Gc]=i}let gc;function pl(r,i){return gc(r,i)}function mc(r){const i=r[Kn];return Ei(i)?i[Kn]:i}function Ms(r){return vc(r[jr])}function aa(r){return vc(r[Mr])}function vc(r){for(;null!==r&&!Ei(r);)r=r[Mr];return r}function gl(r,i,d,p,g){if(null!=p){let b,w=!1;Ei(p)?b=p:Lr(p)&&(w=!0,p=p[un]);const P=Qr(p);0===r&&null!==d?null==g?mn(i,d,P):Nt(i,d,P,g||null,!0):1===r&&null!==d?Nt(i,d,P,g||null,!0):2===r?function lh(r,i,d){const p=Zi(r,i);p&&function zn(r,i,d,p){r.removeChild(i,d,p)}(r,p,i,d)}(i,P,w):3===r&&i.destroyNode(P),null!=b&&function E0(r,i,d,p,g){const b=d[fs];b!==Qr(d)&&gl(i,r,p,b,g);for(let P=Cs;P<d.length;P++){const U=d[P];ch(U[Jt],U,r,i,p,b)}}(i,r,b,d,g)}}function Xs(r,i){return r.createComment(function Ua(r){return r.replace(Rg,i=>i.replace(nl,Ng))}(i))}function jl(r,i,d){return r.createElement(i,d)}function Td(r,i){const d=r[ha],p=d.indexOf(i);os(i),d.splice(p,1)}function D(r,i){if(r.length<=Cs)return;const d=Cs+i,p=r[d];if(p){const g=p[zo];null!==g&&g!==r&&Td(g,p),i>0&&(r[d-1][Mr]=p[Mr]);const b=Rl(r,Cs+i);!function Bl(r,i){ch(r,i,i[kr],2,null,null),i[un]=null,i[vs]=null}(p[Jt],p);const w=b[go];null!==w&&w.detachView(b[Jt]),p[Kn]=null,p[Mr]=null,p[Dn]&=-129}return p}function _(r,i){if(!(256&i[Dn])){const d=i[kr];i[Aa]?.destroy(),i[jo]?.destroy(),d.destroyNode&&ch(r,i,d,3,null,null),function Yh(r){let i=r[jr];if(!i)return E(r[Jt],r);for(;i;){let d=null;if(Lr(i))d=i[jr];else{const p=i[Cs];p&&(d=p)}if(!d){for(;i&&!i[Mr]&&i!==r;)Lr(i)&&E(i[Jt],i),i=i[Kn];null===i&&(i=r),Lr(i)&&E(i[Jt],i),d=i&&i[Mr]}i=d}}(i)}}function E(r,i){if(!(256&i[Dn])){i[Dn]&=-129,i[Dn]|=256,function se(r,i){let d;if(null!=r&&null!=(d=r.destroyHooks))for(let p=0;p<d.length;p+=2){const g=i[d[p]];if(!(g instanceof sc)){const b=d[p+1];if(Array.isArray(b))for(let w=0;w<b.length;w+=2){const P=g[b[w]],U=b[w+1];ws(4,P,U);try{U.call(P)}finally{ws(5,P,U)}}else{ws(4,g,b);try{b.call(g)}finally{ws(5,g,b)}}}}}(r,i),function M(r,i){const d=r.cleanup,p=i[hs];if(null!==d)for(let b=0;b<d.length-1;b+=2)if("string"==typeof d[b]){const w=d[b+3];w>=0?p[w]():p[-w].unsubscribe(),b+=2}else d[b].call(p[d[b+1]]);null!==p&&(i[hs]=null);const g=i[Vs];if(null!==g){i[Vs]=null;for(let b=0;b<g.length;b++)(0,g[b])()}}(r,i),1===i[Jt].type&&i[kr].destroy();const d=i[zo];if(null!==d&&Ei(i[Kn])){d!==i[Kn]&&Td(d,i);const p=i[go];null!==p&&p.detachView(r)}!function oh(r){Wh.delete(r[ca])}(i)}}function Z(r,i,d){return function st(r,i,d){let p=i;for(;null!==p&&40&p.type;)p=(i=p).parent;if(null===p)return d[un];{const{componentOffset:g}=p;if(g>-1){const{encapsulation:b}=r.data[p.directiveStart+g];if(b===ve.None||b===ve.Emulated)return null}return ce(p,d)}}(r,i.parent,d)}function Nt(r,i,d,p,g){r.insertBefore(i,d,p,g)}function mn(r,i,d){r.appendChild(i,d)}function Pn(r,i,d,p,g){null!==p?Nt(r,i,d,p,g):mn(r,i,d)}function Zi(r,i){return r.parentNode(i)}function Ul(r,i,d){return Wc(r,i,d)}let qc,Po,hh,nf,Wc=function bd(r,i,d){return 40&r.type?ce(r,d):null};function _c(r,i,d,p){const g=Z(r,p,i),b=i[kr],P=Ul(p.parent||i[vs],p,i);if(null!=g)if(Array.isArray(d))for(let U=0;U<d.length;U++)Pn(b,g,d[U],P,!1);else Pn(b,g,d,P,!1);void 0!==qc&&qc(b,p,i,d,g)}function Mu(r,i){if(null!==i){const d=i.type;if(3&d)return ce(i,r);if(4&d)return Ed(-1,r[i.index]);if(8&d){const p=i.child;if(null!==p)return Mu(r,p);{const g=r[i.index];return Ei(g)?Ed(-1,g):Qr(g)}}if(32&d)return pl(i,r)()||Qr(r[i.index]);{const p=Vf(r,i);return null!==p?Array.isArray(p)?p[0]:Mu(mc(r[Hi]),p):Mu(r,i.next)}}return null}function Vf(r,i){return null!==i?r[Hi][vs].projection[i.projection]:null}function Ed(r,i){const d=Cs+r+1;if(d<i.length){const p=i[d],g=p[Jt].firstChild;if(null!==g)return Mu(p,g)}return i[fs]}function Cd(r,i,d,p,g,b,w){for(;null!=d;){const P=p[d.index],U=d.type;if(w&&0===i&&(P&&co(Qr(P),p),d.flags|=2),32!=(32&d.flags))if(8&U)Cd(r,i,d.child,p,g,b,!1),gl(i,r,g,P,b);else if(32&U){const ue=pl(d,p);let Ie;for(;Ie=ue();)gl(i,r,g,Ie,b);gl(i,r,g,P,b)}else 16&U?Xv(r,i,p,d,g,b):gl(i,r,g,P,b);d=w?d.projectionNext:d.next}}function ch(r,i,d,p,g,b){Cd(d,p,r.firstChild,i,g,b,!1)}function Xv(r,i,d,p,g,b){const w=d[Hi],U=w[vs].projection[p.projection];if(Array.isArray(U))for(let ue=0;ue<U.length;ue++)gl(i,r,g,U[ue],b);else{let ue=U;const Ie=w[Kn];Ll(p)&&(ue.flags|=128),Cd(r,i,ue,Ie,g,b,!0)}}function ef(r,i,d){""===d?r.removeAttribute(i,"class"):r.setAttribute(i,"class",d)}function Um(r,i,d){const{mergedAttrs:p,classes:g,styles:b}=d;null!==p&&On(r,i,p),null!==g&&ef(r,i,g),null!==b&&function Jh(r,i,d){r.setAttribute(i,"style",d)}(r,i,b)}function dh(r){return function Vp(){if(void 0===Po&&(Po=null,Kr.trustedTypes))try{Po=Kr.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Po}()?.createHTML(r)||r}function ty(r){hh=r}function Hp(r){return function jg(){if(void 0===nf&&(nf=null,Kr.trustedTypes))try{nf=Kr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return nf}()?.createScriptURL(r)||r}class Sd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${W})`}}class ny extends Sd{getTypeName(){return"HTML"}}class rf extends Sd{getTypeName(){return"Style"}}class Vm extends Sd{getTypeName(){return"Script"}}class C0 extends Sd{getTypeName(){return"URL"}}class ry extends Sd{getTypeName(){return"ResourceURL"}}function wd(r){return r instanceof Sd?r.changingThisBreaksApplicationSecurity:r}function sf(r,i){const d=function Bg(r){return r instanceof Sd&&r.getTypeName()||null}(r);if(null!=d&&d!==i){if("ResourceURL"===d&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${d} (see ${W})`)}return d===i}function ph(r){return new ny(r)}function $f(r){return new rf(r)}function iy(r){return new Vm(r)}function S0(r){return new C0(r)}function Hm(r){return new ry(r)}class $m{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const d=(new window.DOMParser).parseFromString(dh(i),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(i):(d.removeChild(d.firstChild),d)}catch{return null}}}class Gm{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const d=this.inertDocument.createElement("template");return d.innerHTML=dh(i),d}}const Dd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zc(r){return(r=String(r)).match(Dd)?r:"unsafe:"+r}function ku(r){const i={};for(const d of r.split(","))i[d]=!0;return i}function vl(...r){const i={};for(const d of r)for(const p in d)d.hasOwnProperty(p)&&(i[p]=!0);return i}const af=ku("area,br,col,hr,img,wbr"),zm=ku("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gf=ku("rp,rt"),Vg=vl(af,vl(zm,ku("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(Gf,ku("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(Gf,zm)),uf=ku("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zf=vl(uf,ku("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ku("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lf=ku("script,style,template");class I0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let d=i.firstChild,p=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?p=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,p&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let g=this.checkClobberedElement(d,d.nextSibling);if(g){d=g;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(i){const d=i.nodeName.toLowerCase();if(!Vg.hasOwnProperty(d))return this.sanitizedSomething=!0,!lf.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const p=i.attributes;for(let g=0;g<p.length;g++){const b=p.item(g),w=b.name,P=w.toLowerCase();if(!zf.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let U=b.value;uf[P]&&(U=Zc(U)),this.buf.push(" ",w,'="',ay(U),'"')}return this.buf.push(">"),!0}endElement(i){const d=i.nodeName.toLowerCase();Vg.hasOwnProperty(d)&&!af.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(i){this.buf.push(ay(i))}checkClobberedElement(i,d){if(d&&(i.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return d}}const Wm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x0=/([^\#-~ |!])/g;function ay(r){return r.replace(/&/g,"&amp;").replace(Wm,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(x0,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $g;function Wf(r,i){let d=null;try{$g=$g||function Tc(r){const i=new Gm(r);return function Ug(){try{return!!(new window.DOMParser).parseFromString(dh(""),"text/html")}catch{return!1}}()?new $m(i):i}(r);let p=i?String(i):"";d=$g.getInertBodyElement(p);let g=5,b=p;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,p=b,b=d.innerHTML,d=$g.getInertBodyElement(p)}while(p!==b);return dh((new I0).sanitizeChildren(Id(d)||d))}finally{if(d){const p=Id(d)||d;for(;p.firstChild;)p.removeChild(p.firstChild)}}}function Id(r){return"content"in r&&function gh(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Yo=(()=>((Yo=Yo||{})[Yo.NONE=0]="NONE",Yo[Yo.HTML=1]="HTML",Yo[Yo.STYLE=2]="STYLE",Yo[Yo.SCRIPT=3]="SCRIPT",Yo[Yo.URL=4]="URL",Yo[Yo.RESOURCE_URL=5]="RESOURCE_URL",Yo))();function qm(r){const i=xd();return i?i.sanitize(Yo.URL,r)||"":sf(r,"URL")?wd(r):Zc(Te(r))}function zg(r){const i=xd();if(i)return Hp(i.sanitize(Yo.RESOURCE_URL,r)||"");if(sf(r,"ResourceURL"))return Hp(wd(r));throw new te(904,!1)}function Qm(r,i,d){return function Ym(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?zg:qm}(i,d)(r)}function xd(){const r=vn();return r&&r[Us].sanitizer}class ti{constructor(i,d){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=$n({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $p=new ti("ENVIRONMENT_INITIALIZER"),Kg=new ti("INJECTOR",-1),qf=new ti("INJECTOR_DEF_TYPES");class Kf{get(i,d=Qi){if(d===Qi){const p=new Error(`NullInjectorError: No provider for ${$e(i)}!`);throw p.name="NullInjectorError",p}return d}}function Xm(...r){return{\u0275providers:Jm(0,r),\u0275fromNgModule:!0}}function Jm(r,...i){const d=[],p=new Set;let g;return Zo(i,b=>{const w=b;Zg(w,d,[],p)&&(g||=[],g.push(w))}),void 0!==g&&uu(g,d),d}function uu(r,i){for(let d=0;d<r.length;d++){const{providers:g}=r[d];Zf(g,b=>{i.push(b)})}}function Zg(r,i,d,p){if(!(r=Ze(r)))return!1;let g=null,b=qr(r);const w=!b&&Ir(r);if(b||w){if(w&&!w.standalone)return!1;g=r}else{const U=r.ngModule;if(b=qr(U),!b)return!1;g=U}const P=p.has(g);if(w){if(P)return!1;if(p.add(g),w.dependencies){const U="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const ue of U)Zg(ue,i,d,p)}}else{if(!b)return!1;{if(null!=b.imports&&!P){let ue;p.add(g);try{Zo(b.imports,Ie=>{Zg(Ie,i,d,p)&&(ue||=[],ue.push(Ie))})}finally{}void 0!==ue&&uu(ue,i)}if(!P){const ue=Me(g)||(()=>new g);i.push({provide:g,useFactory:ue,deps:He},{provide:qf,useValue:g,multi:!0},{provide:$p,useValue:()=>Ar(g),multi:!0})}const U=b.providers;null==U||P||Zf(U,Ie=>{i.push(Ie)})}}return g!==r&&void 0!==r.providers}function Zf(r,i){for(let d of r)et(d)&&(d=d.\u0275providers),Array.isArray(d)?Zf(d,i):i(d)}const tv=xe({provide:String,useValue:xe});function bc(r){return null!==r&&"object"==typeof r&&tv in r}function yl(r){return"function"==typeof r}const Ad=new ti("Set Injector scope."),Gp={},Yc={};let df;function _l(){return void 0===df&&(df=new Kf),df}class Qc{}class nv extends Qc{get destroyed(){return this._destroyed}constructor(i,d,p,g){super(),this.parent=d,this.source=p,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xc(i,w=>this.processProvider(w)),this.records.set(Kg,Yf(void 0,this)),g.has("environment")&&this.records.set(Qc,Yf(void 0,this));const b=this.records.get(Ad);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(qf.multi,He,an.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const d of i)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const d=Nr(this),p=Dr(void 0);try{return i()}finally{Nr(d),Dr(p)}}get(i,d=Qi,p=an.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Pt))return i[Pt](this);p=lt(p);const g=Nr(this),b=Dr(void 0);try{if(!(p&an.SkipSelf)){let P=this.records.get(i);if(void 0===P){const U=function iv(r){return"function"==typeof r||"object"==typeof r&&r instanceof ti}(i)&&Bn(i);P=U&&this.injectableDefInScope(U)?Yf(Qg(i),Gp):null,this.records.set(i,P)}if(null!=P)return this.hydrate(i,P)}return(p&an.Self?_l():this.parent).get(i,d=p&an.Optional&&d===Qi?null:d)}catch(w){if("NullInjectorError"===w.name){if((w[qi]=w[qi]||[]).unshift($e(i)),g)throw w;return function Pe(r,i,d,p){const g=r[qi];throw i[Ri]&&g.unshift(i[Ri]),r.message=function Et(r,i,d,p=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let g=$e(i);if(Array.isArray(i))g=i.map($e).join(" -> ");else if("object"==typeof i){let b=[];for(let w in i)if(i.hasOwnProperty(w)){let P=i[w];b.push(w+":"+("string"==typeof P?JSON.stringify(P):$e(P)))}g=`{${b.join(", ")}}`}return`${d}${p?"("+p+")":""}[${g}]: ${r.replace(is,"\n  ")}`}("\n"+r.message,g,d,p),r.ngTokenPath=g,r[qi]=null,r}(w,i,"R3InjectorError",this.source)}throw w}finally{Dr(b),Nr(g)}}resolveInjectorInitializers(){const i=Nr(this),d=Dr(void 0);try{const p=this.get($p.multi,He,an.Self);for(const g of p)g()}finally{Nr(i),Dr(d)}}toString(){const i=[],d=this.records;for(const p of d.keys())i.push($e(p));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(i){let d=yl(i=Ze(i))?i:Ze(i&&i.provide);const p=function zp(r){return bc(r)?Yf(void 0,r.useValue):Yf(Xg(r),Gp)}(i);if(yl(i)||!0!==i.multi)this.records.get(d);else{let g=this.records.get(d);g||(g=Yf(void 0,Gp,!0),g.factory=()=>_e(g.multi),this.records.set(d,g)),d=i,g.multi.push(i)}this.records.set(d,p)}hydrate(i,d){return d.value===Gp&&(d.value=Yc,d.value=d.factory()),"object"==typeof d.value&&d.value&&function k0(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(i){if(!i.providedIn)return!1;const d=Ze(i.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}removeOnDestroy(i){const d=this._onDestroyHooks.indexOf(i);-1!==d&&this._onDestroyHooks.splice(d,1)}}function Qg(r){const i=Bn(r),d=null!==i?i.factory:Me(r);if(null!==d)return d;if(r instanceof ti)throw new te(204,!1);if(r instanceof Function)return function rv(r){const i=r.length;if(i>0)throw su(i,"?"),new te(204,!1);const d=function hr(r){return r&&(r[Gr]||r[mi])||null}(r);return null!==d?()=>d.factory(r):()=>new r}(r);throw new te(204,!1)}function Xg(r,i,d){let p;if(yl(r)){const g=Ze(r);return Me(g)||Qg(g)}if(bc(r))p=()=>Ze(r.useValue);else if(function Yg(r){return!(!r||!r.useFactory)}(r))p=()=>r.useFactory(..._e(r.deps||[]));else if(function mh(r){return!(!r||!r.useExisting)}(r))p=()=>Ar(Ze(r.useExisting));else{const g=Ze(r&&(r.useClass||r.provide));if(!function uy(r){return!!r.deps}(r))return Me(g)||Qg(g);p=()=>new g(..._e(r.deps))}return p}function Yf(r,i,d=!1){return{factory:r,value:i,multi:d?[]:void 0}}function Xc(r,i){for(const d of r)Array.isArray(d)?Xc(d,i):d&&et(d)?Xc(d.\u0275providers,i):i(d)}const Qf=new ti("AppId",{providedIn:"root",factory:()=>ly}),ly="ng",sv=new ti("Platform Initializer"),ov=new ti("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),O0=new ti("CSP nonce",{providedIn:"root",factory:()=>function fh(){if(void 0!==hh)return hh;if(typeof document<"u")return document;throw new te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let dy=(r,i)=>null;function Th(r,i){return dy(r,i)}class my{}class vy{}class lv{resolveComponentFactory(i){throw function gf(r){const i=Error(`No component factory found for ${$e(r)}.`);return i.ngComponent=r,i}(i)}}let Xp=(()=>{class r{}return r.NULL=new lv,r})();function nm(){return kd(wo(),vn())}function kd(r,i){return new Cc(ce(r,i))}let Cc=(()=>{class r{constructor(d){this.nativeElement=d}}return r.__NG_ELEMENT_ID__=nm,r})();function Vl(r){return r instanceof Cc?r.nativeElement:r}class Jp{}let cv=(()=>{class r{constructor(){this.destroyNode=null}}return r.__NG_ELEMENT_ID__=()=>function eg(){const r=vn(),d=wt(wo().index,r);return(Lr(d)?d:r)[kr]}(),r})(),_y=(()=>{class r{}return r.\u0275prov=$n({token:r,providedIn:"root",factory:()=>null}),r})();class rm{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const im=new rm("16.1.5"),Pu={};function Ha(r){for(;r;){r[Dn]|=64;const i=mc(r);if(xi(r)&&!i)return r;r=i}return null}function $a(r){return r.ngOriginalError}class mf{constructor(){this._console=console}handleError(i){const d=this._findOriginalError(i);this._console.error("ERROR",i),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(i){let d=i&&$a(i);for(;d&&$a(d);)d=$a(d);return d||null}}const np=new ti("",{providedIn:"root",factory:()=>!1});function Sc(r){return r instanceof Function?r():r}class um extends $i{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(i){this._lView=i}onConsumerDependencyMayHaveChanged(){Ha(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(i,d,p){const g=Ln(this);this.trackingVersion++;try{i(d,p)}finally{Ln(g)}}destroy(){this.trackingVersion++}}let op=null;function Od(){return op??=new um,op}function fv(r,i){return r[i]??Od()}function by(r,i){const d=Od();d.hasReadASignal&&(r[i]=op,d.lView=r,op=new um)}const Wr={};function Ey(r){lm(Or(),vn(),gi()+r,!1)}function lm(r,i,d,p){if(!p)if(3==(3&i[Dn])){const b=r.preOrderCheckHooks;null!==b&&Li(i,b,d)}else{const b=r.preOrderHooks;null!==b&&Vo(i,b,0,d)}Fn(d)}function vv(r,i=null,d=null,p){const g=cm(r,i,d,p);return g.resolveInjectorInitializers(),g}function cm(r,i=null,d=null,p,g=new Set){const b=[d||He,Xm(r)];return p=p||("object"==typeof r?void 0:$e(r)),new nv(b,i||_l(),p||null,g)}let Sh=(()=>{class r{static create(d,p){if(Array.isArray(d))return vv({name:""},p,d,"");{const g=d.name??"";return vv({name:g},d.parent,d.providers,g)}}}return r.THROW_IF_NOT_FOUND=Qi,r.NULL=new Kf,r.\u0275prov=$n({token:r,providedIn:"any",factory:()=>Ar(Kg)}),r.__NG_ELEMENT_ID__=-1,r})();function wh(r,i=an.Default){const d=vn();return null===d?Ar(r,i):cd(wo(),d,Ze(r),i)}function Iy(){throw new Error("invalid")}function ig(r,i,d,p,g,b,w,P,U,ue,Ie){const Ye=i.blueprint.slice();return Ye[un]=g,Ye[Dn]=140|p,(null!==ue||r&&2048&r[Dn])&&(Ye[Dn]|=2048),Vr(Ye),Ye[Kn]=Ye[Es]=r,Ye[Fi]=d,Ye[Us]=w||r&&r[Us],Ye[kr]=P||r&&r[kr],Ye[ys]=U||r&&r[ys]||null,Ye[vs]=b,Ye[ca]=function Lp(){return Fl++}(),Ye[Ti]=Ie,Ye[Uu]=ue,Ye[Hi]=2==i.type?r[Hi]:Ye,Ye}function Rd(r,i,d,p,g){let b=r.data[i];if(null===b)b=function dm(r,i,d,p,g){const b=wu(),w=To(),U=r.data[i]=function Tv(r,i,d,p,g,b){let w=i?i.injectorIndex:-1,P=0;return Ra()&&(P|=128),{type:d,index:p,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:P,providerIndexes:0,value:g,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?b:b&&b.parent,d,i,p,g);return null===r.firstChild&&(r.firstChild=U),null!==b&&(w?null==b.child&&null!==U.parent&&(b.child=U):null===b.next&&(b.next=U,U.prev=b)),U}(r,i,d,p,g),function ya(){return ur.lFrame.inI18n}()&&(b.flags|=32);else if(64&b.type){b.type=d,b.value=p,b.attrs=g;const w=function Cn(){const r=ur.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();b.injectorIndex=null===w?-1:w.injectorIndex}return zi(b,!0),b}function vf(r,i,d,p){if(0===d)return-1;const g=i.length;for(let b=0;b<d;b++)i.push(p),r.blueprint.push(p),r.data.push(null);return g}function hm(r,i,d,p,g){const b=fv(i,Aa),w=gi(),P=2&p;try{if(Fn(-1),P&&i.length>$r&&lm(r,i,$r,!1),ws(P?2:0,g),P)b.runInContext(d,p,g);else{const ue=Ln(null);try{d(p,g)}finally{Ln(ue)}}}finally{P&&null===i[Aa]&&by(i,Aa),Fn(w),ws(P?3:1,g)}}function sg(r,i,d){if(mo(i)){const p=Ln(null);try{const b=i.directiveEnd;for(let w=i.directiveStart;w<b;w++){const P=r.data[w];P.contentQueries&&P.contentQueries(1,d[w],w)}}finally{Ln(p)}}}function Dh(r,i,d){Oc()&&(function z0(r,i,d,p){const g=d.directiveStart,b=d.directiveEnd;Ji(d)&&function Z0(r,i,d){const p=ce(i,r),g=fm(d);let w=16;d.signals?w=4096:d.onPush&&(w=64);const P=up(r,ig(r,g,null,w,p,i,null,r[Us].rendererFactory.createRenderer(p,d),null,null,null));r[i.index]=P}(i,d,r.data[g+d.componentOffset]),r.firstCreatePass||Zd(d,i),co(p,i);const w=d.initialInputs;for(let P=g;P<b;P++){const U=r.data[P],ue=Pl(i,r,P,d);co(ue,i),null!==w&&ug(0,P-g,ue,U,0,w),Ss(U)&&(wt(d.index,i)[Fi]=Pl(i,r,P,d))}}(r,i,d,ce(d,i)),64==(64&d.flags)&&Ev(r,i,d))}function wc(r,i,d=ce){const p=i.localNames;if(null!==p){let g=i.index+1;for(let b=0;b<p.length;b+=2){const w=p[b+1],P=-1===w?d(i,r):r[w];r[g++]=P}}}function fm(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Ih(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):i}function Ih(r,i,d,p,g,b,w,P,U,ue,Ie){const Ye=$r+p,Dt=Ye+g,Ft=function ap(r,i){const d=[];for(let p=0;p<i;p++)d.push(p<r?null:Wr);return d}(Ye,Dt),yn="function"==typeof ue?ue():ue;return Ft[Jt]={type:r,blueprint:Ft,template:d,queries:null,viewQuery:P,declTNode:i,data:Ft.slice().fill(null,Ye),bindingStartIndex:Ye,expandoStartIndex:Dt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:U,consts:yn,incompleteFirstPass:!1,ssrId:Ie}}let xy=r=>null;function gm(r,i,d,p){for(let g in r)if(r.hasOwnProperty(g)){d=null===d?{}:d;const b=r[g];null===p?Ay(d,i,g,b):p.hasOwnProperty(g)&&Ay(d,i,p[g],b)}return d}function Ay(r,i,d,p){r.hasOwnProperty(d)?r[d].push(i,p):r[d]=[i,p]}function vm(r,i,d,p){if(Oc()){const g=null===p?null:{"":-1},b=function q0(r,i){const d=r.directiveRegistry;let p=null,g=null;if(d)for(let b=0;b<d.length;b++){const w=d[b];if(cs(i,w.selectors,!1))if(p||(p=[]),Ss(w))if(null!==w.findHostDirectiveDefs){const P=[];g=g||new Map,w.findHostDirectiveDefs(w,P,g),p.unshift(...P,w),og(r,i,P.length)}else p.unshift(w),og(r,i,0);else g=g||new Map,w.findHostDirectiveDefs?.(w,p,g),p.push(w)}return null===p?null:[p,g]}(r,d);let w,P;null===b?w=P=null:[w,P]=b,null!==w&&bv(r,i,d,w,g,P),g&&function Cv(r,i,d){if(i){const p=r.localNames=[];for(let g=0;g<i.length;g+=2){const b=d[i[g+1]];if(null==b)throw new te(-301,!1);p.push(i[g],b)}}}(d,p,g)}d.mergedAttrs=Er(d.mergedAttrs,d.attrs)}function bv(r,i,d,p,g,b){for(let ue=0;ue<p.length;ue++)uc(Zd(d,i),r,p[ue].type);!function K0(r,i,d){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+d,r.providerIndexes=i}(d,r.data.length,p.length);for(let ue=0;ue<p.length;ue++){const Ie=p[ue];Ie.providersResolver&&Ie.providersResolver(Ie)}let w=!1,P=!1,U=vf(r,i,p.length,null);for(let ue=0;ue<p.length;ue++){const Ie=p[ue];d.mergedAttrs=Er(d.mergedAttrs,Ie.hostAttrs),wv(r,d,i,U,Ie),Sv(U,Ie,g),null!==Ie.contentQueries&&(d.flags|=4),(null!==Ie.hostBindings||null!==Ie.hostAttrs||0!==Ie.hostVars)&&(d.flags|=64);const Ye=Ie.type.prototype;!w&&(Ye.ngOnChanges||Ye.ngOnInit||Ye.ngDoCheck)&&((r.preOrderHooks??=[]).push(d.index),w=!0),!P&&(Ye.ngOnChanges||Ye.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(d.index),P=!0),U++}!function My(r,i,d){const g=i.directiveEnd,b=r.data,w=i.attrs,P=[];let U=null,ue=null;for(let Ie=i.directiveStart;Ie<g;Ie++){const Ye=b[Ie],Dt=d?d.get(Ye):null,yn=Dt?Dt.outputs:null;U=gm(Ye.inputs,Ie,U,Dt?Dt.inputs:null),ue=gm(Ye.outputs,Ie,ue,yn);const kn=null===U||null===w||gs(i)?null:Y0(U,Ie,w);P.push(kn)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=P,i.inputs=U,i.outputs=ue}(r,d,b)}function Ev(r,i,d){const p=d.directiveStart,g=d.directiveEnd,b=d.index,w=function so(){return ur.lFrame.currentDirectiveIndex}();try{Fn(b);for(let P=p;P<g;P++){const U=r.data[P],ue=i[P];ru(P),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&W0(U,ue)}}finally{Fn(-1),ru(w)}}function W0(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function og(r,i,d){i.componentOffset=d,(r.components??=[]).push(i.index)}function Sv(r,i,d){if(d){if(i.exportAs)for(let p=0;p<i.exportAs.length;p++)d[i.exportAs[p]]=r;Ss(i)&&(d[""]=r)}}function wv(r,i,d,p,g){r.data[p]=g;const b=g.factory||(g.factory=Me(g.type)),w=new sc(b,Ss(g),wh);r.blueprint[p]=w,d[p]=w,function Oy(r,i,d,p,g){const b=g.hostBindings;if(b){let w=r.hostBindingOpCodes;null===w&&(w=r.hostBindingOpCodes=[]);const P=~i.index;(function Ry(r){let i=r.length;for(;i>0;){const d=r[--i];if("number"==typeof d&&d<0)return d}return 0})(w)!=P&&w.push(P),w.push(d,p,b)}}(r,i,p,vf(r,d,g.hostVars,Wr),g)}function Ru(r,i,d,p,g,b){const w=ce(r,i);!function ag(r,i,d,p,g,b,w){if(null==b)r.removeAttribute(i,g,d);else{const P=null==w?Te(b):w(b,p||"",g);r.setAttribute(i,g,P,d)}}(i[kr],w,b,r.value,d,p,g)}function ug(r,i,d,p,g,b){const w=b[i];if(null!==w)for(let P=0;P<w.length;)ym(p,d,w[P++],w[P++],w[P++])}function ym(r,i,d,p,g){const b=Ln(null);try{const w=r.inputTransforms;null!==w&&w.hasOwnProperty(p)&&(g=w[p].call(i,g)),null!==r.setInput?r.setInput(i,g,d,p):i[p]=g}finally{Ln(b)}}function Y0(r,i,d){let p=null,g=0;for(;g<d.length;){const b=d[g];if(0!==b)if(5!==b){if("number"==typeof b)break;if(r.hasOwnProperty(b)){null===p&&(p=[]);const w=r[b];for(let P=0;P<w.length;P+=2)if(w[P]===i){p.push(b,w[P+1],d[g+1]);break}}g+=2}else g+=2;else g+=4}return p}function _m(r,i,d,p){return[r,!0,!1,i,null,0,p,d,null,null,null]}function Dv(r,i){const d=r.contentQueries;if(null!==d)for(let p=0;p<d.length;p+=2){const b=d[p+1];if(-1!==b){const w=r.data[b];ic(d[p]),w.contentQueries(2,i[b],b)}}}function up(r,i){return r[jr]?r[eu][Mr]=i:r[jr]=i,r[eu]=i,i}function Iv(r,i,d){ic(0);const p=Ln(null);try{i(r,d)}finally{Ln(p)}}function Ly(r){return r[hs]||(r[hs]=[])}function lg(r){return r.cleanup||(r.cleanup=[])}function Tm(r,i){const d=r[ys],p=d?d.get(mf,null):null;p&&p.handleError(i)}function xh(r,i,d,p,g){for(let b=0;b<d.length;){const w=d[b++],P=d[b++];ym(r.data[w],i[w],p,P,g)}}function Jc(r,i,d){const p=L(i,r);!function yu(r,i,d){r.setValue(i,d)}(r[kr],p,d)}function xv(r,i){const d=wt(i,r),p=d[Jt];!function Q0(r,i){for(let d=i.length;d<r.blueprint.length;d++)i.push(r.blueprint[d])}(p,d);const g=d[un];null!==g&&null===d[Ti]&&(d[Ti]=Th(g,d[ys])),cg(p,d,d[Fi])}function cg(r,i,d){Cr(i);try{const p=r.viewQuery;null!==p&&Iv(1,p,d);const g=r.template;null!==g&&hm(r,i,g,1,d),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Dv(r,i),r.staticViewQueries&&Iv(2,r.viewQuery,d);const b=r.components;null!==b&&function Ld(r,i){for(let d=0;d<i.length;d++)xv(r,i[d])}(i,b)}catch(p){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),p}finally{i[Dn]&=-5,bo()}}let jy=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(d,p,g){const b=typeof Zone>"u"?null:Zone.current,w=new Eu(d,ue=>{this.all.has(ue)&&this.queue.set(ue,b)},g);let P;this.all.add(w),w.notify();const U=()=>{w.cleanup(),P?.(),this.all.delete(w),this.queue.delete(w)};return P=p?.onDestroy(U),{destroy:U}}flush(){if(0!==this.queue.size)for(const[d,p]of this.queue)this.queue.delete(d),p?p.run(()=>d.run()):d.run()}get isQueueEmpty(){return 0===this.queue.size}}return r.\u0275prov=$n({token:r,providedIn:"root",factory:()=>new r}),r})();function lp(r,i,d){let p=d?r.styles:null,g=d?r.classes:null,b=0;if(null!==i)for(let w=0;w<i.length;w++){const P=i[w];"number"==typeof P?b=P:1==b?g=kt(g,P):2==b&&(p=kt(p,P+": "+i[++w]+";"))}d?r.styles=p:r.stylesWithoutHost=p,d?r.classes=g:r.classesWithoutHost=g}function dg(r,i,d,p,g=!1){for(;null!==d;){const b=i[d.index];if(null!==b&&p.push(Qr(b)),Ei(b)){for(let P=Cs;P<b.length;P++){const U=b[P],ue=U[Jt].firstChild;null!==ue&&dg(U[Jt],U,ue,p)}b[fs]!==b[un]&&p.push(b[fs])}const w=d.type;if(8&w)dg(r,i,d.child,p);else if(32&w){const P=pl(d,i);let U;for(;U=P();)p.push(U)}else if(16&w){const P=Vf(i,d);if(Array.isArray(P))p.push(...P);else{const U=mc(i[Hi]);dg(U[Jt],U,P,p,!0)}}d=g?d.projectionNext:d.next}return p}function cp(r,i,d,p=!0){const g=i[Us].rendererFactory;g.begin&&g.begin();try{Uy(r,i,r.template,d)}catch(w){throw p&&Tm(i,w),w}finally{g.end&&g.end(),i[Us].effectManager?.flush()}}function Uy(r,i,d,p){const g=i[Dn];if(256!=(256&g)){i[Us].effectManager?.flush(),Cr(i);try{Vr(i),function dn(r){return ur.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==d&&hm(r,i,d,2,p);const w=3==(3&g);if(w){const ue=r.preOrderCheckHooks;null!==ue&&Li(i,ue,null)}else{const ue=r.preOrderHooks;null!==ue&&Vo(i,ue,0,null),Ta(i,0)}if(function Vy(r){for(let i=Ms(r);null!==i;i=aa(i)){if(!i[ji])continue;const d=i[ha];for(let p=0;p<d.length;p++){wr(d[p])}}}(i),bm(i,2),null!==r.contentQueries&&Dv(r,i),w){const ue=r.contentCheckHooks;null!==ue&&Li(i,ue)}else{const ue=r.contentHooks;null!==ue&&Vo(i,ue,1),Ta(i,1)}!function Ga(r,i){const d=r.hostBindingOpCodes;if(null===d)return;const p=fv(i,jo);try{for(let g=0;g<d.length;g++){const b=d[g];if(b<0)Fn(~b);else{const w=b,P=d[++g],U=d[++g];_a(P,w),p.runInContext(U,2,i[w])}}}finally{null===i[jo]&&by(i,jo),Fn(-1)}}(r,i);const P=r.components;null!==P&&Hy(i,P,0);const U=r.viewQuery;if(null!==U&&Iv(2,U,p),w){const ue=r.viewCheckHooks;null!==ue&&Li(i,ue)}else{const ue=r.viewHooks;null!==ue&&Vo(i,ue,2),Ta(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[Dn]&=-73,os(i)}finally{bo()}}}function bm(r,i){for(let d=Ms(r);null!==d;d=aa(d))for(let p=Cs;p<d.length;p++)kv(d[p],i)}function hg(r,i,d){kv(wt(i,r),d)}function kv(r,i){if(!function sr(r){return 128==(128&r[Dn])}(r))return;const d=r[Jt];if(80&r[Dn]&&0===i||1024&r[Dn]||2===i)Uy(d,r,d.template,r[Fi]);else if(r[Ys]>0){bm(r,1);const g=r[Jt].components;null!==g&&Hy(r,g,1)}}function Hy(r,i,d){for(let p=0;p<i.length;p++)hg(r,i[p],d)}class dp{get rootNodes(){const i=this._lView,d=i[Jt];return dg(d,i,d.firstChild,[])}constructor(i,d){this._lView=i,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fi]}set context(i){this._lView[Fi]=i}get destroyed(){return 256==(256&this._lView[Dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Kn];if(Ei(i)){const d=i[8],p=d?d.indexOf(this):-1;p>-1&&(D(i,p),Rl(d,p))}this._attachedToViewContainer=!1}_(this._lView[Jt],this._lView)}onDestroy(i){!function Ki(r,i){if(256==(256&r[Dn]))throw new te(911,!1);null===r[Vs]&&(r[Vs]=[]),r[Vs].push(i)}(this._lView,i)}markForCheck(){Ha(this._cdRefInjectingView||this._lView)}detach(){this._lView[Dn]&=-129}reattach(){this._lView[Dn]|=128}detectChanges(){cp(this._lView[Jt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yc(r,i){ch(r,i,i[kr],2,null,null)}(this._lView[Jt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=i}}class $y extends dp{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;cp(i[Jt],i,i[Fi],!1)}checkNoChanges(){}get context(){return null}}class Pv extends Xp{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const d=Ir(i);return new u(d,this.ngModule)}}function m(r){const i=[];for(let d in r)r.hasOwnProperty(d)&&i.push({propName:r[d],templateName:d});return i}class a{constructor(i,d){this.injector=i,this.parentInjector=d}get(i,d,p){p=lt(p);const g=this.injector.get(i,Pu,p);return g!==Pu||d===Pu?g:this.parentInjector.get(i,d,p)}}class u extends vy{get inputs(){const i=this.componentDef,d=i.inputTransforms,p=m(i.inputs);if(null!==d)for(const g of p)d.hasOwnProperty(g.propName)&&(g.transform=d[g.propName]);return p}get outputs(){return m(this.componentDef.outputs)}constructor(i,d){super(),this.componentDef=i,this.ngModule=d,this.componentType=i.type,this.selector=function wa(r){return r.map(Ks).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!d}create(i,d,p,g){let b=(g=g||this.ngModule)instanceof Qc?g:g?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const w=b?new a(i,b):i,P=w.get(Jp,null);if(null===P)throw new te(407,!1);const Ie={rendererFactory:P,sanitizer:w.get(_y,null),effectManager:w.get(jy,null)},Ye=P.createRenderer(null,this.componentDef),Dt=this.componentDef.selectors[0][0]||"div",Ft=p?function pm(r,i,d,p){const b=p.get(np,!1)||d===ve.ShadowDom,w=r.selectRootElement(i,b);return function Nd(r){xy(r)}(w),w}(Ye,p,this.componentDef.encapsulation,w):jl(Ye,Dt,function l(r){const i=r.toLowerCase();return"svg"===i?ea:"math"===i?"math":null}(Dt)),or=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Ur=Ih(0,null,null,1,0,null,null,null,null,null,null),bn=ig(null,Ur,null,or,null,null,Ie,Ye,w,null,null);let Ii,Ts;Cr(bn);try{const Os=this.componentDef;let Zl,K_=null;Os.findHostDirectiveDefs?(Zl=[],K_=new Map,Os.findHostDirectiveDefs(Os,Zl,K_),Zl.push(Os)):Zl=[Os];const Lw=function h(r,i){const d=r[Jt],p=$r;return r[p]=i,Rd(d,p,2,"#host",null)}(bn,Ft),Fw=function y(r,i,d,p,g,b,w){const P=g[Jt];!function S(r,i,d,p){for(const g of r)i.mergedAttrs=Er(i.mergedAttrs,g.hostAttrs);null!==i.mergedAttrs&&(lp(i,i.mergedAttrs,!0),null!==d&&Um(p,d,i))}(p,r,i,w);let U=null;null!==i&&(U=Th(i,g[ys]));const ue=b.rendererFactory.createRenderer(i,d);let Ie=16;d.signals?Ie=4096:d.onPush&&(Ie=64);const Ye=ig(g,fm(d),null,Ie,g[r.index],r,b,ue,null,null,U);return P.firstCreatePass&&og(P,r,p.length-1),up(g,Ye),g[r.index]=Ye}(Lw,Ft,Os,Zl,bn,Ie,Ye);Ts=Se(Ur,$r),Ft&&function V(r,i,d,p){if(p)On(r,d,["ng-version",im.full]);else{const{attrs:g,classes:b}=function Da(r){const i=[],d=[];let p=1,g=2;for(;p<r.length;){let b=r[p];if("string"==typeof b)2===g?""!==b&&i.push(b,r[++p]):8===g&&d.push(b);else{if(!si(g))break;g=b}p++}return{attrs:i,classes:d}}(i.selectors[0]);g&&On(r,d,g),b&&b.length>0&&ef(r,d,b.join(" "))}}(Ye,Os,Ft,p),void 0!==d&&function re(r,i,d){const p=r.projection=[];for(let g=0;g<i.length;g++){const b=d[g];p.push(null!=b?Array.from(b):null)}}(Ts,this.ngContentSelectors,d),Ii=function x(r,i,d,p,g,b){const w=wo(),P=g[Jt],U=ce(w,g);bv(P,g,w,d,null,p);for(let Ie=0;Ie<d.length;Ie++)co(Pl(g,P,w.directiveStart+Ie,w),g);Ev(P,g,w),U&&co(U,g);const ue=Pl(g,P,w.directiveStart+w.componentOffset,w);if(r[Fi]=g[Fi]=ue,null!==b)for(const Ie of b)Ie(ue,i);return sg(P,w,r),ue}(Fw,Os,Zl,K_,bn,[ee]),cg(Ur,bn,null)}finally{bo()}return new n(this.componentType,Ii,kd(Ts,bn),bn,Ts)}}class n extends my{constructor(i,d,p,g,b){super(),this.location=p,this._rootLView=g,this._tNode=b,this.previousInputValues=null,this.instance=d,this.hostView=this.changeDetectorRef=new $y(g),this.componentType=i}setInput(i,d){const p=this._tNode.inputs;let g;if(null!==p&&(g=p[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),d))return;const b=this._rootLView;xh(b[Jt],b,g,i,d),this.previousInputValues.set(i,d),Ha(wt(this._tNode.index,b))}}get injector(){return new Ku(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ee(){const r=wo();jn(vn()[Jt],r)}function ze(r){let i=function De(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),d=!0;const p=[r];for(;i;){let g;if(Ss(r))g=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new te(903,!1);g=i.\u0275dir}if(g){if(d){p.push(g);const w=r;w.inputs=Be(r.inputs),w.inputTransforms=Be(r.inputTransforms),w.declaredInputs=Be(r.declaredInputs),w.outputs=Be(r.outputs);const P=g.hostBindings;P&&cn(r,P);const U=g.viewQuery,ue=g.contentQueries;if(U&&Wt(r,U),ue&&Lt(r,ue),je(r.inputs,g.inputs),je(r.declaredInputs,g.declaredInputs),je(r.outputs,g.outputs),null!==g.inputTransforms&&(null===w.inputTransforms&&(w.inputTransforms={}),je(w.inputTransforms,g.inputTransforms)),Ss(g)&&g.data.animation){const Ie=r.data;Ie.animation=(Ie.animation||[]).concat(g.data.animation)}}const b=g.features;if(b)for(let w=0;w<b.length;w++){const P=b[w];P&&P.ngInherit&&P(r),P===ze&&(d=!1)}}i=Object.getPrototypeOf(i)}!function Ve(r){let i=0,d=null;for(let p=r.length-1;p>=0;p--){const g=r[p];g.hostVars=i+=g.hostVars,g.hostAttrs=Er(g.hostAttrs,d=Er(d,g.hostAttrs))}}(p)}function Be(r){return r===ye?{}:r===He?[]:r}function Wt(r,i){const d=r.viewQuery;r.viewQuery=d?(p,g)=>{i(p,g),d(p,g)}:i}function Lt(r,i){const d=r.contentQueries;r.contentQueries=d?(p,g,b)=>{i(p,g,b),d(p,g,b)}:i}function cn(r,i){const d=r.hostBindings;r.hostBindings=d?(p,g)=>{i(p,g),d(p,g)}:i}function ks(r){const i=r.inputConfig,d={};for(const p in i)if(i.hasOwnProperty(p)){const g=i[p];Array.isArray(g)&&g[2]&&(d[p]=g[2])}r.inputTransforms=d}function Is(r){return!!Nu(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function Nu(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function za(r,i,d){return r[i]=d}function Qo(r,i,d){return!Object.is(r[i],d)&&(r[i]=d,!0)}function Tu(r,i,d,p){const g=Qo(r,i,d);return Qo(r,i+1,p)||g}function Em(r,i,d,p){const g=vn();return Qo(g,oi(),i)&&(Or(),Ru(k(),g,r,i,d,p)),Em}function _f(r,i,d,p,g,b){const P=Tu(r,function $t(){return ur.lFrame.bindingIndex}(),d,g);return Na(2),P?i+Te(d)+p+Te(g)+b:Wr}function Wa(r,i,d,p,g,b,w,P){const U=vn(),ue=Or(),Ie=r+$r,Ye=ue.firstCreatePass?function kh(r,i,d,p,g,b,w,P,U){const ue=i.consts,Ie=Rd(i,r,4,w||null,Pr(ue,P));vm(i,d,Ie,Pr(ue,U)),jn(i,Ie);const Ye=Ie.tView=Ih(2,Ie,p,g,b,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ue,null);return null!==i.queries&&(i.queries.template(i,Ie),Ye.queries=i.queries.embeddedTView(Ie)),Ie}(Ie,ue,U,i,d,p,g,b,w):ue.data[Ie];zi(Ye,!1);const Dt=Im(ue,U,Ye,r);Mt()&&_c(ue,U,Dt,Ye),co(Dt,U),up(U,U[Ie]=_m(Dt,U,Dt,Ye)),Bo(Ye)&&Dh(ue,U,Ye),null!=w&&wc(U,Ye,P)}let Im=function Ky(r,i,d,p){return sn(!0),i[kr].createComment("")};function _g(r){return it(function An(){return ur.lFrame.contextLView}(),$r+r)}function Tg(r,i,d){const p=vn();return Qo(p,oi(),i)&&function Ou(r,i,d,p,g,b,w,P){const U=ce(i,d);let Ie,ue=i.inputs;!P&&null!=ue&&(Ie=ue[p])?(xh(r,d,Ie,p,g),Ji(i)&&function ky(r,i){const d=wt(i,r);16&d[Dn]||(d[Dn]|=64)}(d,i.index)):3&i.type&&(p=function mm(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(p),g=null!=w?w(g,i.value||"",p):g,b.setProperty(U,p,g))}(Or(),k(),p,r,i,p[kr],d,!1),Tg}function zl(r,i,d,p,g){const w=g?"class":"style";xh(r,d,i.inputs[w],w,p)}function Ph(r,i,d,p){const g=vn(),b=Or(),w=$r+r,P=g[kr],U=b.firstCreatePass?function Yy(r,i,d,p,g,b){const w=i.consts,U=Rd(i,r,2,p,Pr(w,g));return vm(i,d,U,Pr(w,b)),null!==U.attrs&&lp(U,U.attrs,!1),null!==U.mergedAttrs&&lp(U,U.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,U),U}(w,b,g,i,d,p):b.data[w],ue=Qy(b,g,U,P,i,r);g[w]=ue;const Ie=Bo(U);return zi(U,!0),Um(P,ue,U),32!=(32&U.flags)&&Mt()&&_c(b,g,ue,U),0===function Ds(){return ur.lFrame.elementDepthCount}()&&co(ue,g),function Ko(){ur.lFrame.elementDepthCount++}(),Ie&&(Dh(b,g,U),sg(b,U,g)),null!==p&&wc(g,U),Ph}function Ef(){let r=wo();To()?ec():(r=r.parent,zi(r,!1));const i=r;(function Dl(r){return ur.skipHydrationRootTNode===r})(i)&&function ra(){ur.skipHydrationRootTNode=null}(),function va(){ur.lFrame.elementDepthCount--}();const d=Or();return d.firstCreatePass&&(jn(d,r),mo(r)&&d.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Ml(r){return 0!=(8&r.flags)}(i)&&zl(d,i,vn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Ya(r){return 0!=(16&r.flags)}(i)&&zl(d,i,vn(),i.stylesWithoutHost,!1),Ef}function td(r,i,d,p){return Ph(r,i,d,p),Ef(),td}let Qy=(r,i,d,p,g,b)=>(sn(!0),jl(p,g,function Le(){return ur.lFrame.currentNamespace}()));function Ac(r,i,d){const p=vn(),g=Or(),b=r+$r,w=g.firstCreatePass?function gp(r,i,d,p,g){const b=i.consts,w=Pr(b,p),P=Rd(i,r,8,"ng-container",w);return null!==w&&lp(P,w,!0),vm(i,d,P,Pr(b,g)),null!==i.queries&&i.queries.elementStart(i,P),P}(b,g,p,i,d):g.data[b];zi(w,!0);const P=Mm(g,p,w,r);return p[b]=P,Mt()&&_c(g,p,P,w),co(P,p),Bo(w)&&(Dh(g,p,w),sg(g,w,p)),null!=d&&wc(p,w),Ac}function Hd(){let r=wo();const i=Or();return To()?ec():(r=r.parent,zi(r,!1)),i.firstCreatePass&&(jn(i,r),mo(r)&&i.queries.elementEnd(r)),Hd}let Mm=(r,i,d,p)=>(sn(!0),Xs(i[kr],""));function $d(){return vn()}function nd(r){return!!r&&"function"==typeof r.then}function Nv(r){return!!r&&"function"==typeof r.subscribe}function Gd(r,i,d,p){const g=vn(),b=Or(),w=wo();return function wf(r,i,d,p,g,b,w){const P=Bo(p),ue=r.firstCreatePass&&lg(r),Ie=i[Fi],Ye=Ly(i);let Dt=!0;if(3&p.type||w){const kn=ce(p,i),or=w?w(kn):kn,Ur=Ye.length,bn=w?Ts=>w(Qr(Ts[p.index])):p.index;let Ii=null;if(!w&&P&&(Ii=function k_(r,i,d,p){const g=r.cleanup;if(null!=g)for(let b=0;b<g.length-1;b+=2){const w=g[b];if(w===d&&g[b+1]===p){const P=i[hs],U=g[b+2];return P.length>U?P[U]:null}"string"==typeof w&&(b+=2)}return null}(r,i,g,p.index)),null!==Ii)(Ii.__ngLastListenerFn__||Ii).__ngNextListenerFn__=b,Ii.__ngLastListenerFn__=b,Dt=!1;else{b=vp(p,i,Ie,b,!1);const Ts=d.listen(or,g,b);Ye.push(b,Ts),ue&&ue.push(g,bn,Ur,Ur+1)}}else b=vp(p,i,Ie,b,!1);const Ft=p.outputs;let yn;if(Dt&&null!==Ft&&(yn=Ft[g])){const kn=yn.length;if(kn)for(let or=0;or<kn;or+=2){const Os=i[yn[or]][yn[or+1]].subscribe(b),Zl=Ye.length;Ye.push(b,Os),ue&&ue.push(g,p.index,Zl,-(Zl+1))}}}(b,g,g[kr],w,r,i,p),Gd}function mp(r,i,d,p){try{return ws(6,i,d),!1!==d(p)}catch(g){return Tm(r,g),!1}finally{ws(7,i,d)}}function vp(r,i,d,p,g){return function b(w){if(w===Function)return p;Ha(r.componentOffset>-1?wt(r.index,i):i);let U=mp(i,d,p,w),ue=b.__ngNextListenerFn__;for(;ue;)U=mp(i,d,ue,w)&&U,ue=ue.__ngNextListenerFn__;return g&&!1===U&&w.preventDefault(),U}}function Jy(r=1){return function Ni(r){return(ur.lFrame.contextLView=function qd(r,i){for(;r>0;)i=i[Es],r--;return i}(r,ur.lFrame.contextLView))[Fi]}(r)}function i_(r,i){let d=null;const p=function Go(r){const i=r.attrs;if(null!=i){const d=i.indexOf(5);if(!(1&d))return i[d+1]}return null}(r);for(let g=0;g<i.length;g++){const b=i[g];if("*"!==b){if(null===p?cs(r,b,!0):hi(p,b))return g}else d=g}return d}function yp(r){const i=vn()[Hi][vs];if(!i.projection){const p=i.projection=su(r?r.length:1,null),g=p.slice();let b=i.child;for(;null!==b;){const w=r?i_(b,r):0;null!==w&&(g[w]?g[w].projectionNext=b:p[w]=b,g[w]=b),b=b.next}}}function e0(r,i=0,d){const p=vn(),g=Or(),b=Rd(g,$r+r,16,null,d||null);null===b.projection&&(b.projection=i),ec(),(!p[Ti]||Ra())&&32!=(32&b.flags)&&function Qv(r,i,d){Xv(i[kr],0,i,d,Z(r,d,i),Ul(d.parent||i[vs],d,i))}(g,p,b)}function bp(r,i){return r<<17|i<<2}function Mc(r){return r>>17&32767}function km(r){return 2|r}function If(r){return(131068&r)>>2}function s0(r,i){return-131069&r|i<<2}function Cl(r){return 1|r}function Eg(r,i,d,p,g){const b=r[d+1],w=null===i;let P=p?Mc(b):If(b),U=!1;for(;0!==P&&(!1===U||w);){const Ie=r[P+1];s_(r[P],i)&&(U=!0,r[P+1]=p?Cl(Ie):km(Ie)),P=p?Mc(Ie):If(Ie)}U&&(r[d+1]=p?km(b):Cl(b))}function s_(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&We(r,i)>=0}function Rm(r,i){return function id(r,i,d,p){const g=vn(),b=Or(),w=Na(2);b.firstUpdatePass&&function c0(r,i,d,p){const g=r.data;if(null===g[d+1]){const b=g[gi()],w=function d_(r,i){return i>=r.expandoStartIndex}(r,d);(function f_(r,i){return 0!=(r.flags&(i?8:16))})(b,p)&&null===i&&!w&&(i=!1),i=function h_(r,i,d,p){const g=function dl(r){const i=ur.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let b=p?i.residualClasses:i.residualStyles;if(null===g)0===(p?i.classBindings:i.styleBindings)&&(d=wl(d=Cg(null,r,i,d,p),i.attrs,p),b=null);else{const w=i.directiveStylingLast;if(-1===w||r[w]!==g)if(d=Cg(g,r,i,d,p),null===b){let U=function Ep(r,i,d){const p=d?i.classBindings:i.styleBindings;if(0!==If(p))return r[Mc(p)]}(r,i,p);void 0!==U&&Array.isArray(U)&&(U=Cg(null,r,i,U[1],p),U=wl(U,i.attrs,p),function Nm(r,i,d,p){r[Mc(d?i.classBindings:i.styleBindings)]=p}(r,i,p,U))}else b=function d0(r,i,d){let p;const g=i.directiveEnd;for(let b=1+i.directiveStylingLast;b<g;b++)p=wl(p,r[b].hostAttrs,d);return wl(p,i.attrs,d)}(r,i,p)}return void 0!==b&&(p?i.residualClasses=b:i.residualStyles=b),d}(g,b,i,p),function al(r,i,d,p,g,b){let w=b?i.classBindings:i.styleBindings,P=Mc(w),U=If(w);r[p]=d;let Ie,ue=!1;if(Array.isArray(d)?(Ie=d[1],(null===Ie||We(d,Ie)>0)&&(ue=!0)):Ie=d,g)if(0!==U){const Dt=Mc(r[P+1]);r[p+1]=bp(Dt,P),0!==Dt&&(r[Dt+1]=s0(r[Dt+1],p)),r[P+1]=function P_(r,i){return 131071&r|i<<17}(r[P+1],p)}else r[p+1]=bp(P,0),0!==P&&(r[P+1]=s0(r[P+1],p)),P=p;else r[p+1]=bp(U,0),0===P?P=p:r[U+1]=s0(r[U+1],p),U=p;ue&&(r[p+1]=km(r[p+1])),Eg(r,Ie,p,!0),Eg(r,Ie,p,!1),function o0(r,i,d,p,g){const b=g?r.residualClasses:r.residualStyles;null!=b&&"string"==typeof i&&We(b,i)>=0&&(d[p+1]=Cl(d[p+1]))}(i,Ie,r,p,b),w=bp(P,U),b?i.classBindings=w:i.styleBindings=w}(g,b,i,d,w,p)}}(b,r,w,p),i!==Wr&&Qo(g,w,i)&&function zv(r,i,d,p,g,b,w,P){if(!(3&i.type))return;const U=r.data,ue=U[P+1],Ie=function O_(r){return 1==(1&r)}(ue)?Sg(U,i,d,g,If(ue),w):void 0;kf(Ie)||(kf(b)||function Uv(r){return 2==(2&r)}(ue)&&(b=Sg(U,null,d,g,P,w)),function Fg(r,i,d,p,g){if(i)g?r.addClass(d,p):r.removeClass(d,p);else{let b=-1===p.indexOf("-")?void 0:tl.DashCase;null==g?r.removeStyle(d,p,b):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),b|=tl.Important),r.setStyle(d,p,g,b))}}(p,w,L(gi(),d),g,b))}(b,b.data[gi()],g,g[kr],r,g[w+1]=function N_(r,i){return null==r||""===r||("string"==typeof i?r+=i:"object"==typeof r&&(r=$e(wd(r)))),r}(i,d),p,w)}(r,i,null,!0),Rm}function Cg(r,i,d,p,g){let b=null;const w=d.directiveEnd;let P=d.directiveStylingLast;for(-1===P?P=d.directiveStart:P++;P<w&&(b=i[P],p=wl(p,b.hostAttrs,g),b!==r);)P++;return null!==r&&(d.directiveStylingLast=P),p}function wl(r,i,d){const p=d?1:2;let g=-1;if(null!==i)for(let b=0;b<i.length;b++){const w=i[b];"number"==typeof w?g=w:g===p&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),H(r,w,!!d||i[++b]))}return void 0===r?null:r}function Sg(r,i,d,p,g,b){const w=null===i;let P;for(;g>0;){const U=r[g],ue=Array.isArray(U),Ie=ue?U[1]:U,Ye=null===Ie;let Dt=d[g+1];Dt===Wr&&(Dt=Ye?He:void 0);let Ft=Ye?fe(Dt,p):Ie===p?Dt:void 0;if(ue&&!kf(Ft)&&(Ft=fe(U,p)),kf(Ft)&&(P=Ft,w))return P;const yn=r[g+1];g=w?Mc(yn):If(yn)}if(null!==i){let U=b?i.residualClasses:i.residualStyles;null!=U&&(P=fe(U,p))}return P}function kf(r){return void 0!==r}function Wv(r,i=""){const d=vn(),p=Or(),g=r+$r,b=p.firstCreatePass?Rd(p,g,1,i,null):p.data[g],w=p0(p,d,b,i,r);d[g]=w,Mt()&&_c(p,d,w,b),zi(b,!1)}let p0=(r,i,d,p,g)=>(sn(!0),function yd(r,i){return r.createText(i)}(i[kr],p));function Lm(r){return Dg("",r,""),Lm}function Dg(r,i,d){const p=vn(),g=function Mh(r,i,d,p){return Qo(r,oi(),d)?i+Te(d)+p:Wr}(p,r,i,d);return g!==Wr&&Jc(p,gi(),g),Dg}function Wl(r,i,d,p,g){const b=vn(),w=_f(b,r,i,d,p,g);return w!==Wr&&Jc(b,gi(),w),Wl}const Nh=void 0;var jm=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zv(r){const d=Math.floor(Math.abs(r)),p=r.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===p?1:5}];let Lh={};function Ag(r){const i=function Q_(r){return r.toLowerCase().replace(/_/g,"-")}(r);let d=F_(i);if(d)return d;const p=i.split("-")[0];if(d=F_(p),d)return d;if("en"===p)return jm;throw new te(701,!1)}function L_(r){return Ag(r)[ni.PluralCase]}function F_(r){return r in Lh||(Lh[r]=Kr.ng&&Kr.ng.common&&Kr.ng.common.locales&&Kr.ng.common.locales[r]),Lh[r]}var ni=(()=>((ni=ni||{})[ni.LocaleId=0]="LocaleId",ni[ni.DayPeriodsFormat=1]="DayPeriodsFormat",ni[ni.DayPeriodsStandalone=2]="DayPeriodsStandalone",ni[ni.DaysFormat=3]="DaysFormat",ni[ni.DaysStandalone=4]="DaysStandalone",ni[ni.MonthsFormat=5]="MonthsFormat",ni[ni.MonthsStandalone=6]="MonthsStandalone",ni[ni.Eras=7]="Eras",ni[ni.FirstDayOfWeek=8]="FirstDayOfWeek",ni[ni.WeekendRange=9]="WeekendRange",ni[ni.DateFormat=10]="DateFormat",ni[ni.TimeFormat=11]="TimeFormat",ni[ni.DateTimeFormat=12]="DateTimeFormat",ni[ni.NumberSymbols=13]="NumberSymbols",ni[ni.NumberFormats=14]="NumberFormats",ni[ni.CurrencyCode=15]="CurrencyCode",ni[ni.CurrencySymbol=16]="CurrencySymbol",ni[ni.CurrencyName=17]="CurrencyName",ni[ni.Currencies=18]="Currencies",ni[ni.Directionality=19]="Directionality",ni[ni.PluralCase=20]="PluralCase",ni[ni.ExtraData=21]="ExtraData",ni))();const t="en-US";let X=t;function eT(r,i,d,p,g){if(r=Ze(r),Array.isArray(r))for(let b=0;b<r.length;b++)eT(r[b],i,d,p,g);else{const b=Or(),w=vn();let P=yl(r)?r:Ze(r.provide),U=Xg(r);const ue=wo(),Ie=1048575&ue.providerIndexes,Ye=ue.directiveStart,Dt=ue.providerIndexes>>20;if(yl(r)||!r.multi){const Ft=new sc(U,g,wh),yn=nT(P,i,g?Ie:Ie+Dt,Ye);-1===yn?(uc(Zd(ue,w),b,P),tT(b,r,i.length),i.push(P),ue.directiveStart++,ue.directiveEnd++,g&&(ue.providerIndexes+=1048576),d.push(Ft),w.push(Ft)):(d[yn]=Ft,w[yn]=Ft)}else{const Ft=nT(P,i,Ie+Dt,Ye),yn=nT(P,i,Ie,Ie+Dt),or=yn>=0&&d[yn];if(g&&!or||!g&&!(Ft>=0&&d[Ft])){uc(Zd(ue,w),b,P);const Ur=function wC(r,i,d,p,g){const b=new sc(r,d,wh);return b.multi=[],b.index=i,b.componentProviders=0,QT(b,g,p&&!d),b}(g?SC:CC,d.length,g,p,U);!g&&or&&(d[yn].providerFactory=Ur),tT(b,r,i.length,0),i.push(P),ue.directiveStart++,ue.directiveEnd++,g&&(ue.providerIndexes+=1048576),d.push(Ur),w.push(Ur)}else tT(b,r,Ft>-1?Ft:yn,QT(d[g?yn:Ft],U,!g&&p));!g&&p&&or&&d[yn].componentProviders++}}}function tT(r,i,d,p){const g=yl(i),b=function M0(r){return!!r.useClass}(i);if(g||b){const U=(b?Ze(i.useClass):i).prototype.ngOnDestroy;if(U){const ue=r.destroyHooks||(r.destroyHooks=[]);if(!g&&i.multi){const Ie=ue.indexOf(d);-1===Ie?ue.push(d,[p,U]):ue[Ie+1].push(p,U)}else ue.push(d,U)}}}function QT(r,i,d){return d&&r.componentProviders++,r.multi.push(i)-1}function nT(r,i,d,p){for(let g=d;g<p;g++)if(i[g]===r)return g;return-1}function CC(r,i,d,p){return rT(this.multi,[])}function SC(r,i,d,p){const g=this.multi;let b;if(this.providerFactory){const w=this.providerFactory.componentProviders,P=Pl(d,d[Jt],this.providerFactory.index,p);b=P.slice(0,w),rT(g,b);for(let U=w;U<P.length;U++)b.push(P[U])}else b=[],rT(g,b);return b}function rT(r,i){for(let d=0;d<r.length;d++)i.push((0,r[d])());return i}function XT(r,i=[]){return d=>{d.providersResolver=(p,g)=>function EC(r,i,d){const p=Or();if(p.firstCreatePass){const g=Ss(r);eT(d,p.data,p.blueprint,g,!0),eT(i,p.data,p.blueprint,g,!1)}}(p,g?g(r):r,i)}}class y0{}class JT{}function DC(r,i){return new iT(r,i??null,[])}class iT extends y0{constructor(i,d,p){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pv(this);const g=ss(i);this._bootstrapComponents=Sc(g.bootstrap),this._r3Injector=cm(i,d,[{provide:y0,useValue:this},{provide:Xp,useValue:this.componentFactoryResolver},...p],$e(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class sT extends JT{constructor(i){super(),this.moduleType=i}create(i){return new iT(this.moduleType,i,[])}}class eb extends y0{constructor(i){super(),this.componentFactoryResolver=new Pv(this),this.instance=null;const d=new nv([...i.providers,{provide:y0,useValue:this},{provide:Xp,useValue:this.componentFactoryResolver}],i.parent||_l(),i.debugName,new Set(["environment"]));this.injector=d,i.runEnvironmentInitializers&&d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function tb(r,i,d=null){return new eb({providers:r,parent:i,debugName:d,runEnvironmentInitializers:!0}).injector}let xC=(()=>{class r{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d)){const p=Jm(0,d.type),g=p.length>0?tb([p],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d,g)}return this.cachedInjectors.get(d)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=$n({token:r,providedIn:"environment",factory:()=>new r(Ar(Qc))}),r})();function nb(r){r.getStandaloneInjector=i=>i.get(xC).getOrCreateStandaloneInjector(r)}function lb(r,i,d){const p=Sn()+r,g=vn();return g[p]===Wr?za(g,p,d?i.call(d):i()):function Dc(r,i){return r[i]}(g,p)}function cb(r,i,d,p){return hb(vn(),Sn(),r,i,d,p)}function db(r,i,d,p,g){return function fb(r,i,d,p,g,b,w){const P=i+d;return Tu(r,P,g,b)?za(r,P+2,w?p.call(w,g,b):p(g,b)):T_(r,P+2)}(vn(),Sn(),r,i,d,p,g)}function T_(r,i){const d=r[i];return d===Wr?void 0:d}function hb(r,i,d,p,g,b){const w=i+d;return Qo(r,w,g)?za(r,w+1,b?p.call(b,g):p(g)):T_(r,w+1)}function vb(r,i){const d=Or();let p;const g=r+$r;d.firstCreatePass?(p=function GC(r,i){if(i)for(let d=i.length-1;d>=0;d--){const p=i[d];if(r===p.name)return p}}(i,d.pipeRegistry),d.data[g]=p,p.onDestroy&&(d.destroyHooks??=[]).push(g,p.onDestroy)):p=d.data[g];const b=p.factory||(p.factory=Me(p.type)),w=Dr(wh);try{const P=oc(!1),U=b();return oc(P),function xm(r,i,d,p){d>=r.data.length&&(r.data[d]=null,r.blueprint[d]=null),i[d]=p}(d,vn(),g,U),U}finally{Dr(w)}}function yb(r,i,d){const p=r+$r,g=vn(),b=it(g,p);return function b_(r,i){return r[Jt].data[i].pure}(g,p)?hb(g,Sn(),i,b.transform,d,b):b.transform(d)}function aT(r){return i=>{setTimeout(r,void 0,i)}}const wp=class ZC extends T.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,d,p){let g=i,b=d||(()=>null),w=p;if(i&&"object"==typeof i){const U=i;g=U.next?.bind(U),b=U.error?.bind(U),w=U.complete?.bind(U)}this.__isAsync&&(b=aT(b),g&&(g=aT(g)),w&&(w=aT(w)));const P=super.subscribe({next:g,error:b,complete:w});return i instanceof me.w0&&i.add(P),P}};function YC(){return this._results[Symbol.iterator]()}class B_{get changes(){return this._changes||(this._changes=new wp)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=B_.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=YC)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,d){return this._results.reduce(i,d)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,d){const p=this;p.dirty=!1;const g=function Co(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ja(r,i,d){if(r.length!==i.length)return!1;for(let p=0;p<r.length;p++){let g=r[p],b=i[p];if(d&&(g=d(g),b=d(b)),b!==g)return!1}return!0}(p._results,g,d))&&(p._results=g,p.length=g.length,p.last=g[this.length-1],p.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let E_=(()=>{class r{}return r.__NG_ELEMENT_ID__=JC,r})();const QC=E_,XC=class extends QC{constructor(i,d,p){super(),this._declarationLView=i,this._declarationTContainer=d,this.elementRef=p}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,d){return this.createEmbeddedViewImpl(i,d,null)}createEmbeddedViewImpl(i,d,p){const w=this._declarationTContainer.tView,P=ig(this._declarationLView,w,i,4096&this._declarationLView[Dn]?4096:16,null,w.declTNode,null,null,null,d||null,p||null);P[zo]=this._declarationLView[this._declarationTContainer.index];const ue=this._declarationLView[go];return null!==ue&&(P[go]=ue.createEmbeddedView(w)),cg(w,P,i),new dp(P)}};function JC(){return U_(wo(),vn())}function U_(r,i){return 4&r.type?new XC(i,r,kd(r,i)):null}let V_=(()=>{class r{}return r.__NG_ELEMENT_ID__=oS,r})();function oS(){return Sb(wo(),vn())}const aS=V_,Eb=class extends aS{constructor(i,d,p){super(),this._lContainer=i,this._hostTNode=d,this._hostLView=p}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new Ku(this._hostTNode,this._hostLView)}get parentInjector(){const i=ld(this._hostTNode,this._hostLView);if(Io(i)){const d=Du(i,this._hostLView),p=xo(i);return new Ku(d[Jt].data[p+8],d)}return new Ku(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const d=Cb(this._lContainer);return null!==d&&d[i]||null}get length(){return this._lContainer.length-Cs}createEmbeddedView(i,d,p){let g,b;"number"==typeof p?g=p:null!=p&&(g=p.index,b=p.injector);const P=i.createEmbeddedViewImpl(d||{},b,null);return this.insertImpl(P,g,false),P}createComponent(i,d,p,g,b){const w=i&&!function Ho(r){return"function"==typeof r}(i);let P;if(w)P=d;else{const kn=d||{};P=kn.index,p=kn.injector,g=kn.projectableNodes,b=kn.environmentInjector||kn.ngModuleRef}const U=w?i:new u(Ir(i)),ue=p||this.parentInjector;if(!b&&null==U.ngModule){const or=(w?ue:this.parentInjector).get(Qc,null);or&&(b=or)}Ir(U.componentType??{});const Ft=U.create(ue,g,null,b);return this.insertImpl(Ft.hostView,P,false),Ft}insert(i,d){return this.insertImpl(i,d,!1)}insertImpl(i,d,p){const g=i._lView,b=g[Jt];if(function Ci(r){return Ei(r[Kn])}(g)){const U=this.indexOf(i);if(-1!==U)this.detach(U);else{const ue=g[Kn],Ie=new Eb(ue,ue[vs],ue[Kn]);Ie.detach(Ie.indexOf(i))}}const w=this._adjustIndex(d),P=this._lContainer;if(function Qh(r,i,d,p){const g=Cs+p,b=d.length;p>0&&(d[g-1][Mr]=i),p<b-Cs?(i[Mr]=d[g],Iu(d,Cs+p,i)):(d.push(i),i[Mr]=null),i[Kn]=d;const w=i[zo];null!==w&&d!==w&&function _d(r,i){const d=r[ha];i[Hi]!==i[Kn][Kn][Hi]&&(r[ji]=!0),null===d?r[ha]=[i]:d.push(i)}(w,i);const P=i[go];null!==P&&P.insertView(r),i[Dn]|=128}(b,g,P,w),!p){const U=Ed(w,P),ue=g[kr],Ie=Zi(ue,P[fs]);null!==Ie&&function _u(r,i,d,p,g,b){p[un]=g,p[vs]=i,ch(r,p,d,1,g,b)}(b,P[vs],ue,g,Ie,U)}return i.attachToViewContainerRef(),Iu(lT(P),w,i),i}move(i,d){return this.insert(i,d)}indexOf(i){const d=Cb(this._lContainer);return null!==d?d.indexOf(i):-1}remove(i){const d=this._adjustIndex(i,-1),p=D(this._lContainer,d);p&&(Rl(lT(this._lContainer),d),_(p[Jt],p))}detach(i){const d=this._adjustIndex(i,-1),p=D(this._lContainer,d);return p&&null!=Rl(lT(this._lContainer),d)?new dp(p):null}_adjustIndex(i,d=0){return i??this.length+d}};function Cb(r){return r[8]}function lT(r){return r[8]||(r[8]=[])}function Sb(r,i){let d;const p=i[r.index];return Ei(p)?d=p:(d=_m(p,i,null,r),i[r.index]=d,up(i,d)),wb(d,i,r,p),new Eb(d,r,i)}let wb=function Db(r,i,d,p){if(r[fs])return;let g;g=8&d.type?Qr(p):function uS(r,i){const d=r[kr],p=d.createComment(""),g=ce(i,r);return Nt(d,Zi(d,g),p,function Au(r,i){return r.nextSibling(i)}(d,g),!1),p}(i,d),r[fs]=g};class cT{constructor(i){this.queryList=i,this.matches=null}clone(){return new cT(this.queryList)}setDirty(){this.queryList.setDirty()}}class dT{constructor(i=[]){this.queries=i}createEmbeddedView(i){const d=i.queries;if(null!==d){const p=null!==i.contentQueries?i.contentQueries[0]:d.length,g=[];for(let b=0;b<p;b++){const w=d.getByIndex(b);g.push(this.queries[w.indexInDeclarationView].clone())}return new dT(g)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let d=0;d<this.queries.length;d++)null!==Nb(i,d).matches&&this.queries[d].setDirty()}}class Ib{constructor(i,d,p=null){this.predicate=i,this.flags=d,this.read=p}}class hT{constructor(i=[]){this.queries=i}elementStart(i,d){for(let p=0;p<this.queries.length;p++)this.queries[p].elementStart(i,d)}elementEnd(i){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(i)}embeddedTView(i){let d=null;for(let p=0;p<this.length;p++){const g=null!==d?d.length:0,b=this.getByIndex(p).embeddedTView(i,g);b&&(b.indexInDeclarationView=p,null!==d?d.push(b):d=[b])}return null!==d?new hT(d):null}template(i,d){for(let p=0;p<this.queries.length;p++)this.queries[p].template(i,d)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class fT{constructor(i,d=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(i,d){this.isApplyingToNode(d)&&this.matchTNode(i,d)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,d){this.elementStart(i,d)}embeddedTView(i,d){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,d),new fT(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let p=i.parent;for(;null!==p&&8&p.type&&p.index!==d;)p=p.parent;return d===(null!==p?p.index:-1)}return this._appliesToNextNode}matchTNode(i,d){const p=this.metadata.predicate;if(Array.isArray(p))for(let g=0;g<p.length;g++){const b=p[g];this.matchTNodeWithReadOption(i,d,dS(d,b)),this.matchTNodeWithReadOption(i,d,lc(d,i,b,!1,!1))}else p===E_?4&d.type&&this.matchTNodeWithReadOption(i,d,-1):this.matchTNodeWithReadOption(i,d,lc(d,i,p,!1,!1))}matchTNodeWithReadOption(i,d,p){if(null!==p){const g=this.metadata.read;if(null!==g)if(g===Cc||g===V_||g===E_&&4&d.type)this.addMatch(d.index,-2);else{const b=lc(d,i,g,!1,!1);null!==b&&this.addMatch(d.index,b)}else this.addMatch(d.index,p)}}addMatch(i,d){null===this.matches?this.matches=[i,d]:this.matches.push(i,d)}}function dS(r,i){const d=r.localNames;if(null!==d)for(let p=0;p<d.length;p+=2)if(d[p]===i)return d[p+1];return null}function fS(r,i,d,p){return-1===d?function hS(r,i){return 11&r.type?kd(r,i):4&r.type?U_(r,i):null}(i,r):-2===d?function pS(r,i,d){return d===Cc?kd(i,r):d===E_?U_(i,r):d===V_?Sb(i,r):void 0}(r,i,p):Pl(r,r[Jt],d,i)}function xb(r,i,d,p){const g=i[go].queries[p];if(null===g.matches){const b=r.data,w=d.matches,P=[];for(let U=0;U<w.length;U+=2){const ue=w[U];P.push(ue<0?null:fS(i,b[ue],w[U+1],d.metadata.read))}g.matches=P}return g.matches}function pT(r,i,d,p){const g=r.queries.getByIndex(d),b=g.matches;if(null!==b){const w=xb(r,i,g,d);for(let P=0;P<b.length;P+=2){const U=b[P];if(U>0)p.push(w[P/2]);else{const ue=b[P+1],Ie=i[-U];for(let Ye=Cs;Ye<Ie.length;Ye++){const Dt=Ie[Ye];Dt[zo]===Dt[Kn]&&pT(Dt[Jt],Dt,ue,p)}if(null!==Ie[ha]){const Ye=Ie[ha];for(let Dt=0;Dt<Ye.length;Dt++){const Ft=Ye[Dt];pT(Ft[Jt],Ft,ue,p)}}}}}return p}function Ab(r){const i=vn(),d=Or(),p=rc();ic(p+1);const g=Nb(d,p);if(r.dirty&&function en(r){return 4==(4&r[Dn])}(i)===(2==(2&g.metadata.flags))){if(null===g.matches)r.reset([]);else{const b=g.crossesNgTemplate?pT(d,i,p,[]):xb(d,i,g,p);r.reset(b,Vl),r.notifyOnChanges()}return!0}return!1}function Mb(r,i,d){const p=Or();p.firstCreatePass&&(Rb(p,new Ib(r,i,d),-1),2==(2&i)&&(p.staticViewQueries=!0)),Ob(p,vn(),i)}function kb(r,i,d,p){const g=Or();if(g.firstCreatePass){const b=wo();Rb(g,new Ib(i,d,p),b.index),function mS(r,i){const d=r.contentQueries||(r.contentQueries=[]);i!==(d.length?d[d.length-1]:-1)&&d.push(r.queries.length-1,i)}(g,r),2==(2&d)&&(g.staticContentQueries=!0)}Ob(g,vn(),d)}function Pb(){return function gS(r,i){return r[go].queries[i].queryList}(vn(),rc())}function Ob(r,i,d){const p=new B_(4==(4&d));(function _v(r,i,d,p){const g=Ly(i);g.push(d),r.firstCreatePass&&lg(r).push(p,g.length-1)})(r,i,p,p.destroy),null===i[go]&&(i[go]=new dT),i[go].queries.push(new cT(p))}function Rb(r,i,d){null===r.queries&&(r.queries=new hT),r.queries.track(new fT(i,d))}function Nb(r,i){return r.queries.getByIndex(i)}function Lb(r,i){return U_(r,i)}function gT(r){return!!ss(r)}const Jb=new ti("Application Initializer");let TT=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p}),this.appInits=mr(Jb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const d=[];for(const g of this.appInits){const b=g();if(nd(b))d.push(b);else if(Nv(b)){const w=new Promise((P,U)=>{b.subscribe({complete:P,error:U})});d.push(w)}}const p=()=>{this.done=!0,this.resolve()};Promise.all(d).then(()=>{p()}).catch(g=>{this.reject(g)}),0===d.length&&p(),this.initialized=!0}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),eE=(()=>{class r{log(d){console.log(d)}warn(d){console.warn(d)}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const $_=new ti("LocaleId",{providedIn:"root",factory:()=>mr($_,an.Optional|an.SkipSelf)||function FS(){return typeof $localize<"u"&&$localize.locale||t}()}),jS=new ti("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let tE=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le.X(!1)}add(){this.hasPendingTasks.next(!0);const d=this.taskId++;return this.pendingTasks.add(d),d}remove(d){this.pendingTasks.delete(d),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class BS{constructor(i,d){this.ngModuleFactory=i,this.componentFactories=d}}let US=(()=>{class r{compileModuleSync(d){return new sT(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const p=this.compileModuleSync(d),b=Sc(ss(d).declarations).reduce((w,P)=>{const U=Ir(P);return U&&w.push(new u(U)),w},[]);return new BS(p,b)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function iE(...r){}class Pc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:p=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wp(!1),this.onMicrotaskEmpty=new wp(!1),this.onStable=new wp(!1),this.onError=new wp(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!p&&d,g.shouldCoalesceRunChangeDetection=p,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function $S(){const r="function"==typeof Kr.requestAnimationFrame;let i=Kr[r?"requestAnimationFrame":"setTimeout"],d=Kr[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&d){const p=i[Zone.__symbol__("OriginalDelegate")];p&&(i=p);const g=d[Zone.__symbol__("OriginalDelegate")];g&&(d=g)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function WS(r){const i=()=>{!function zS(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Kr,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,ET(r),r.isCheckStableRunning=!0,bT(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),ET(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,p,g,b,w,P)=>{try{return sE(r),d.invokeTask(g,b,w,P)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||r.shouldCoalesceRunChangeDetection)&&i(),oE(r)}},onInvoke:(d,p,g,b,w,P,U)=>{try{return sE(r),d.invoke(g,b,w,P,U)}finally{r.shouldCoalesceRunChangeDetection&&i(),oE(r)}},onHasTask:(d,p,g,b)=>{d.hasTask(g,b),p===g&&("microTask"==b.change?(r._hasPendingMicrotasks=b.microTask,ET(r),bT(r)):"macroTask"==b.change&&(r.hasPendingMacrotasks=b.macroTask))},onHandleError:(d,p,g,b)=>(d.handleError(g,b),r.runOutsideAngular(()=>r.onError.emit(b)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pc.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(Pc.isInAngularZone())throw new te(909,!1)}run(i,d,p){return this._inner.run(i,d,p)}runTask(i,d,p,g){const b=this._inner,w=b.scheduleEventTask("NgZoneEvent: "+g,i,GS,iE,iE);try{return b.runTask(w,d,p)}finally{b.cancelTask(w)}}runGuarded(i,d,p){return this._inner.runGuarded(i,d,p)}runOutsideAngular(i){return this._outer.run(i)}}const GS={};function bT(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function ET(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function sE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function oE(r){r._nesting--,bT(r)}class qS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wp,this.onMicrotaskEmpty=new wp,this.onStable=new wp,this.onError=new wp}run(i,d,p){return i.apply(d,p)}runGuarded(i,d,p){return i.apply(d,p)}runOutsideAngular(i){return i()}runTask(i,d,p,g){return i.apply(d,p)}}const aE=new ti("",{providedIn:"root",factory:uE});function uE(){const r=mr(Pc);let i=!0;const d=new B.y(g=>{i=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{g.next(i),g.complete()})}),p=new B.y(g=>{let b;r.runOutsideAngular(()=>{b=r.onStable.subscribe(()=>{Pc.assertNotInAngularZone(),queueMicrotask(()=>{!i&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(i=!0,g.next(!0))})})});const w=r.onUnstable.subscribe(()=>{Pc.assertInAngularZone(),i&&(i=!1,r.runOutsideAngular(()=>{g.next(!1)}))});return()=>{b.unsubscribe(),w.unsubscribe()}});return(0,Re.T)(d,p.pipe((0,Qe.B)()))}const lE=new ti(""),cE=new ti("");let CT,KS=(()=>{class r{constructor(d,p,g){this._ngZone=d,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CT||(function ZS(r){CT=r}(g),g.addToWindow(p)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pc.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(d)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,p,g){let b=-1;p&&p>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==b),d(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:d,timeoutId:b,updateCb:g})}whenStable(d,p,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,p,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,p,g){return[]}}return r.\u0275fac=function(d){return new(d||r)(Ar(Pc),Ar(dE),Ar(cE))},r.\u0275prov=$n({token:r,factory:r.\u0275fac}),r})(),dE=(()=>{class r{constructor(){this._applications=new Map}registerApplication(d,p){this._applications.set(d,p)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,p=!0){return CT?.findTestabilityInTree(this,d,p)??null}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Bm=null;const hE=new ti("AllowMultipleToken"),ST=new ti("PlatformDestroyListeners"),wT=new ti("appBootstrapListener");class XS{constructor(i,d){this.name=i,this.token=d}}function gE(r,i,d=[]){const p=`Platform: ${i}`,g=new ti(p);return(b=[])=>{let w=DT();if(!w||w.injector.get(hE,!1)){const P=[...d,...b,{provide:g,useValue:!0}];r?r(P):function JS(r){if(Bm&&!Bm.get(hE,!1))throw new te(400,!1);(function fE(){!function es(r){vo=r}(()=>{throw new te(600,!1)})})(),Bm=r;const i=r.get(vE);(function pE(r){r.get(sv,null)?.forEach(d=>d())})(r)}(function mE(r=[],i){return Sh.create({name:i,providers:[{provide:Ad,useValue:"platform"},{provide:ST,useValue:new Set([()=>Bm=null])},...r]})}(P,p))}return function tw(r){const i=DT();if(!i)throw new te(401,!1);return i}()}}function DT(){return Bm?.get(vE)??null}let vE=(()=>{class r{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,p){const g=function nw(r="zone.js",i){return"noop"===r?new qS:"zone.js"===r?new Pc(i):r}(p?.ngZone,function yE(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:p?.ngZoneEventCoalescing,runCoalescing:p?.ngZoneRunCoalescing}));return g.run(()=>{const b=function IC(r,i,d){return new iT(r,i,d)}(d.moduleType,this.injector,function CE(r){return[{provide:Pc,useFactory:r},{provide:$p,multi:!0,useFactory:()=>{const i=mr(iw,{optional:!0});return()=>i.initialize()}},{provide:EE,useFactory:rw},{provide:aE,useFactory:uE}]}(()=>g)),w=b.injector.get(mf,null);return g.runOutsideAngular(()=>{const P=g.onError.subscribe({next:U=>{w.handleError(U)}});b.onDestroy(()=>{G_(this._modules,b),P.unsubscribe()})}),function _E(r,i,d){try{const p=d();return nd(p)?p.catch(g=>{throw i.runOutsideAngular(()=>r.handleError(g)),g}):p}catch(p){throw i.runOutsideAngular(()=>r.handleError(p)),p}}(w,g,()=>{const P=b.injector.get(TT);return P.runInitializers(),P.donePromise.then(()=>(function he(r){jt(r,"Expected localeId to be defined"),"string"==typeof r&&(X=r.toLowerCase().replace(/_/g,"-"))}(b.injector.get($_,t)||t),this._moduleDoBootstrap(b),b))})})}bootstrapModule(d,p=[]){const g=TE({},p);return function YS(r,i,d){const p=new sT(d);return Promise.resolve(p)}(0,0,d).then(b=>this.bootstrapModuleFactory(b,g))}_moduleDoBootstrap(d){const p=d.injector.get(b0);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(g=>p.bootstrap(g));else{if(!d.instance.ngDoBootstrap)throw new te(-403,!1);d.instance.ngDoBootstrap(p)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p());const d=this._injector.get(ST,null);d&&(d.forEach(p=>p()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(d){return new(d||r)(Ar(Sh))},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function TE(r,i){return Array.isArray(i)?i.reduce(TE,r):{...r,...i}}let b0=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=mr(EE),this.zoneIsStable=mr(aE),this.componentTypes=[],this.components=[],this.isStable=mr(tE).hasPendingTasks.pipe((0,at.w)(d=>d?(0,Ne.of)(!1):this.zoneIsStable),(0,ut.x)(),(0,Qe.B)()),this._injector=mr(Qc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,p){const g=d instanceof vy;if(!this._injector.get(TT).done)throw!g&&Fo(d),new te(405,!1);let w;w=g?d:this._injector.get(Xp).resolveComponentFactory(d),this.componentTypes.push(w.componentType);const P=function QS(r){return r.isBoundToModule}(w)?void 0:this._injector.get(y0),ue=w.create(Sh.NULL,[],p||w.selector,P),Ie=ue.location.nativeElement,Ye=ue.injector.get(lE,null);return Ye?.registerApplication(Ie),ue.onDestroy(()=>{this.detachView(ue.hostView),G_(this.components,ue),Ye?.unregisterApplication(Ie)}),this._loadComponent(ue),ue}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this.internalErrorHandler(d)}finally{this._runningTick=!1}}attachView(d){const p=d;this._views.push(p),p.attachToAppRef(this)}detachView(d){const p=d;G_(this._views,p),p.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const p=this._injector.get(wT,[]);p.push(...this._bootstrapListeners),p.forEach(g=>g(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>G_(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new te(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function G_(r,i){const d=r.indexOf(i);d>-1&&r.splice(d,1)}const EE=new ti("",{providedIn:"root",factory:()=>mr(mf).handleError.bind(void 0)});function rw(){const r=mr(Pc),i=mr(mf);return d=>r.runOutsideAngular(()=>i.handleError(d))}let iw=(()=>{class r{constructor(){this.zone=mr(Pc),this.applicationRef=mr(b0)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=$n({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ow(){return!1}function aw(){}let uw=(()=>{class r{}return r.__NG_ELEMENT_ID__=lw,r})();function lw(r){return function cw(r,i,d){if(Ji(r)&&!d){const p=wt(r.index,i);return new dp(p,p)}return 47&r.type?new dp(i[Hi],i):null}(wo(),vn(),16==(16&r))}class IE{constructor(){}supports(i){return Is(i)}create(i){return new mw(i)}}const gw=(r,i)=>i;class mw{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||gw}forEachItem(i){let d;for(d=this._itHead;null!==d;d=d._next)i(d)}forEachOperation(i){let d=this._itHead,p=this._removalsHead,g=0,b=null;for(;d||p;){const w=!p||d&&d.currentIndex<AE(p,g,b)?d:p,P=AE(w,g,b),U=w.currentIndex;if(w===p)g--,p=p._nextRemoved;else if(d=d._next,null==w.previousIndex)g++;else{b||(b=[]);const ue=P-g,Ie=U-g;if(ue!=Ie){for(let Dt=0;Dt<ue;Dt++){const Ft=Dt<b.length?b[Dt]:b[Dt]=0,yn=Ft+Dt;Ie<=yn&&yn<ue&&(b[Dt]=Ft+1)}b[w.previousIndex]=Ie-ue}}P!==U&&i(w,P,U)}}forEachPreviousItem(i){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)i(d)}forEachAddedItem(i){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)i(d)}forEachMovedItem(i){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)i(d)}forEachRemovedItem(i){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)i(d)}forEachIdentityChange(i){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)i(d)}diff(i){if(null==i&&(i=[]),!Is(i))throw new te(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let g,b,w,d=this._itHead,p=!1;if(Array.isArray(i)){this.length=i.length;for(let P=0;P<this.length;P++)b=i[P],w=this._trackByFn(P,b),null!==d&&Object.is(d.trackById,w)?(p&&(d=this._verifyReinsertion(d,b,w,P)),Object.is(d.item,b)||this._addIdentityChange(d,b)):(d=this._mismatch(d,b,w,P),p=!0),d=d._next}else g=0,function Hl(r,i){if(Array.isArray(r))for(let d=0;d<r.length;d++)i(r[d]);else{const d=r[Symbol.iterator]();let p;for(;!(p=d.next()).done;)i(p.value)}}(i,P=>{w=this._trackByFn(g,P),null!==d&&Object.is(d.trackById,w)?(p&&(d=this._verifyReinsertion(d,P,w,g)),Object.is(d.item,P)||this._addIdentityChange(d,P)):(d=this._mismatch(d,P,w,g),p=!0),d=d._next,g++}),this.length=g;return this._truncate(d),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,d,p,g){let b;return null===i?b=this._itTail:(b=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null))?(Object.is(i.item,d)||this._addIdentityChange(i,d),this._reinsertAfter(i,b,g)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(p,g))?(Object.is(i.item,d)||this._addIdentityChange(i,d),this._moveAfter(i,b,g)):i=this._addAfter(new vw(d,p),b,g),i}_verifyReinsertion(i,d,p,g){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null);return null!==b?i=this._reinsertAfter(b,i._prev,g):i.currentIndex!=g&&(i.currentIndex=g,this._addToMoves(i,g)),i}_truncate(i){for(;null!==i;){const d=i._next;this._addToRemovals(this._unlink(i)),i=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,d,p){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const g=i._prevRemoved,b=i._nextRemoved;return null===g?this._removalsHead=b:g._nextRemoved=b,null===b?this._removalsTail=g:b._prevRemoved=g,this._insertAfter(i,d,p),this._addToMoves(i,p),i}_moveAfter(i,d,p){return this._unlink(i),this._insertAfter(i,d,p),this._addToMoves(i,p),i}_addAfter(i,d,p){return this._insertAfter(i,d,p),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,d,p){const g=null===d?this._itHead:d._next;return i._next=g,i._prev=d,null===g?this._itTail=i:g._prev=i,null===d?this._itHead=i:d._next=i,null===this._linkedRecords&&(this._linkedRecords=new xE),this._linkedRecords.put(i),i.currentIndex=p,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const d=i._prev,p=i._next;return null===d?this._itHead=p:d._next=p,null===p?this._itTail=d:p._prev=d,i}_addToMoves(i,d){return i.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xE),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,d){return i.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class vw{constructor(i,d){this.item=i,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,d){let p;for(p=this._head;null!==p;p=p._nextDup)if((null===d||d<=p.currentIndex)&&Object.is(p.trackById,i))return p;return null}remove(i){const d=i._prevDup,p=i._nextDup;return null===d?this._head=p:d._nextDup=p,null===p?this._tail=d:p._prevDup=d,null===this._head}}class xE{constructor(){this.map=new Map}put(i){const d=i.trackById;let p=this.map.get(d);p||(p=new yw,this.map.set(d,p)),p.add(i)}get(i,d){const g=this.map.get(i);return g?g.get(i,d):null}remove(i){const d=i.trackById;return this.map.get(d).remove(i)&&this.map.delete(d),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AE(r,i,d){const p=r.previousIndex;if(null===p)return p;let g=0;return d&&p<d.length&&(g=d[p]),p+i+g}class ME{constructor(){}supports(i){return i instanceof Map||Nu(i)}create(){return new _w}}class _w{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let d;for(d=this._mapHead;null!==d;d=d._next)i(d)}forEachPreviousItem(i){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)i(d)}forEachChangedItem(i){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)i(d)}forEachAddedItem(i){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)i(d)}forEachRemovedItem(i){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)i(d)}diff(i){if(i){if(!(i instanceof Map||Nu(i)))throw new te(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(i,(p,g)=>{if(d&&d.key===g)this._maybeAddToChanges(d,p),this._appendAfter=d,d=d._next;else{const b=this._getOrCreateRecordForKey(g,p);d=this._insertBeforeOrAppend(d,b)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let p=d;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,d){if(i){const p=i._prev;return d._next=i,d._prev=p,i._prev=d,p&&(p._next=d),i===this._mapHead&&(this._mapHead=d),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(i,d){if(this._records.has(i)){const g=this._records.get(i);this._maybeAddToChanges(g,d);const b=g._prev,w=g._next;return b&&(b._next=w),w&&(w._prev=b),g._next=null,g._prev=null,g}const p=new Tw(i);return this._records.set(i,p),p.currentValue=d,this._addToAdditions(p),p}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,d){Object.is(d,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=d,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,d){i instanceof Map?i.forEach(d):Object.keys(i).forEach(p=>d(i[p],p))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kE(){return new kT([new IE])}let kT=(()=>{class r{constructor(d){this.factories=d}static create(d,p){if(null!=p){const g=p.factories.slice();d=d.concat(g)}return new r(d)}static extend(d){return{provide:r,useFactory:p=>r.create(d,p||kE()),deps:[[r,new oa,new Bi]]}}find(d){const p=this.factories.find(g=>g.supports(d));if(null!=p)return p;throw new te(901,!1)}}return r.\u0275prov=$n({token:r,providedIn:"root",factory:kE}),r})();function PE(){return new PT([new ME])}let PT=(()=>{class r{constructor(d){this.factories=d}static create(d,p){if(p){const g=p.factories.slice();d=d.concat(g)}return new r(d)}static extend(d){return{provide:r,useFactory:p=>r.create(d,p||PE()),deps:[[r,new oa,new Bi]]}}find(d){const p=this.factories.find(g=>g.supports(d));if(p)return p;throw new te(901,!1)}}return r.\u0275prov=$n({token:r,providedIn:"root",factory:PE}),r})();const Cw=gE(null,"core",[]);let Sw=(()=>{class r{constructor(d){}}return r.\u0275fac=function(d){return new(d||r)(Ar(b0))},r.\u0275mod=Rs({type:r}),r.\u0275inj=ir({}),r})();function Ow(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function Nw(r){const i=Ir(r);if(!i)return null;const d=new u(i);return{get selector(){return d.selector},get type(){return d.componentType},get inputs(){return d.inputs},get outputs(){return d.outputs},get ngContentSelectors(){return d.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},6223:(tn,ht,z)=>{"use strict";z.d(ht,{Cf:()=>rt,F:()=>_i,Fj:()=>ge,JJ:()=>hr,JL:()=>qr,JU:()=>at,Kr:()=>Aa,NI:()=>Ks,On:()=>Ir,Q7:()=>Cs,UX:()=>Za,YN:()=>ro,_Y:()=>ds,c5:()=>Ai,cw:()=>_e,kI:()=>W,oH:()=>Kn,sg:()=>Ys,u5:()=>fa});var T=z(5879),me=z(6814),le=z(2459),B=z(9315),Re=z(7398);let Ne=(()=>{class ie{constructor(q,Oe){this._renderer=q,this._elementRef=Oe,this.onChange=qt=>{},this.onTouched=()=>{}}setProperty(q,Oe){this._renderer.setProperty(this._elementRef.nativeElement,q,Oe)}registerOnTouched(q){this.onTouched=q}registerOnChange(q){this.onChange=q}setDisabledState(q){this.setProperty("disabled",q)}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(T.Qsj),T.Y36(T.SBq))},ie.\u0275dir=T.lG2({type:ie}),ie})(),Qe=(()=>{class ie extends Ne{}return ie.\u0275fac=function(){let Q;return function(Oe){return(Q||(Q=T.n5z(ie)))(Oe||ie)}}(),ie.\u0275dir=T.lG2({type:ie,features:[T.qOj]}),ie})();const at=new T.OlP("NgValueAccessor"),je={provide:at,useExisting:(0,T.Gpc)(()=>ge),multi:!0},kt=new T.OlP("CompositionEventMode");let ge=(()=>{class ie extends Ne{constructor(q,Oe,qt){super(q,Oe),this._compositionMode=qt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $e(){const ie=(0,me.q)()?(0,me.q)().getUserAgent():"";return/android (\d+)/.test(ie.toLowerCase())}())}writeValue(q){this.setProperty("value",q??"")}_handleInput(q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(q)}_compositionStart(){this._composing=!0}_compositionEnd(q){this._composing=!1,this._compositionMode&&this.onChange(q)}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(kt,8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,Oe){1&q&&T.NdJ("input",function(J){return Oe._handleInput(J.target.value)})("blur",function(){return Oe.onTouched()})("compositionstart",function(){return Oe._compositionStart()})("compositionend",function(J){return Oe._compositionEnd(J.target.value)})},features:[T._Bn([je]),T.qOj]}),ie})();function St(ie){return null==ie||("string"==typeof ie||Array.isArray(ie))&&0===ie.length}function Ze(ie){return null!=ie&&"number"==typeof ie.length}const rt=new T.OlP("NgValidators"),et=new T.OlP("NgAsyncValidators"),Ke=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class W{static min(Q){return function te(ie){return Q=>{if(St(Q.value)||St(ie))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q<ie?{min:{min:ie,actual:Q.value}}:null}}(Q)}static max(Q){return function Ee(ie){return Q=>{if(St(Q.value)||St(ie))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q>ie?{max:{max:ie,actual:Q.value}}:null}}(Q)}static required(Q){return Te(Q)}static requiredTrue(Q){return function Ae(ie){return!0===ie.value?null:{required:!0}}(Q)}static email(Q){return function gt(ie){return St(ie.value)||Ke.test(ie.value)?null:{email:!0}}(Q)}static minLength(Q){return function Y(ie){return Q=>St(Q.value)||!Ze(Q.value)?null:Q.value.length<ie?{minlength:{requiredLength:ie,actualLength:Q.value.length}}:null}(Q)}static maxLength(Q){return function oe(ie){return Q=>Ze(Q.value)&&Q.value.length>ie?{maxlength:{requiredLength:ie,actualLength:Q.value.length}}:null}(Q)}static pattern(Q){return Fe(Q)}static nullValidator(Q){return null}static compose(Q){return qe(Q)}static composeAsync(Q){return ot(Q)}}function Te(ie){return St(ie.value)?{required:!0}:null}function Fe(ie){if(!ie)return At;let Q,q;return"string"==typeof ie?(q="","^"!==ie.charAt(0)&&(q+="^"),q+=ie,"$"!==ie.charAt(ie.length-1)&&(q+="$"),Q=new RegExp(q)):(q=ie.toString(),Q=ie),Oe=>{if(St(Oe.value))return null;const qt=Oe.value;return Q.test(qt)?null:{pattern:{requiredPattern:q,actualValue:qt}}}}function At(ie){return null}function Ht(ie){return null!=ie}function Gt(ie){return(0,T.QGY)(ie)?(0,le.D)(ie):ie}function Xt(ie){let Q={};return ie.forEach(q=>{Q=null!=q?{...Q,...q}:Q}),0===Object.keys(Q).length?null:Q}function pn(ie,Q){return Q.map(q=>q(ie))}function Yt(ie){return ie.map(Q=>function Zt(ie){return!ie.validate}(Q)?Q:q=>Q.validate(q))}function qe(ie){if(!ie)return null;const Q=ie.filter(Ht);return 0==Q.length?null:function(q){return Xt(pn(q,Q))}}function Xe(ie){return null!=ie?qe(Yt(ie)):null}function ot(ie){if(!ie)return null;const Q=ie.filter(Ht);return 0==Q.length?null:function(q){const Oe=pn(q,Q).map(Gt);return(0,B.D)(Oe).pipe((0,Re.U)(Xt))}}function dt(ie){return null!=ie?ot(Yt(ie)):null}function It(ie,Q){return null===ie?[Q]:Array.isArray(ie)?[...ie,Q]:[ie,Q]}function ft(ie){return ie._rawValidators}function jt(ie){return ie._rawAsyncValidators}function zt(ie){return ie?Array.isArray(ie)?ie:[ie]:[]}function In(ie,Q){return Array.isArray(ie)?ie.includes(Q):ie===Q}function Tn(ie,Q){const q=zt(Q);return zt(ie).forEach(qt=>{In(q,qt)||q.push(qt)}),q}function xn(ie,Q){return zt(Q).filter(q=>!In(ie,q))}class $n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Q){this._rawValidators=Q||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(Q){this._rawAsyncValidators=Q||[],this._composedAsyncValidatorFn=dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Q){this._onDestroyCallbacks.push(Q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Q=>Q()),this._onDestroyCallbacks=[]}reset(Q=void 0){this.control&&this.control.reset(Q)}hasError(Q,q){return!!this.control&&this.control.hasError(Q,q)}getError(Q,q){return this.control?this.control.getError(Q,q):null}}class Gn extends $n{get formDirective(){return null}get path(){return null}}class ir extends $n{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bn{constructor(Q){this._cd=Q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hr=(()=>{class ie extends Bn{constructor(q){super(q)}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(ir,2))},ie.\u0275dir=T.lG2({type:ie,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,Oe){2&q&&T.ekj("ng-untouched",Oe.isUntouched)("ng-touched",Oe.isTouched)("ng-pristine",Oe.isPristine)("ng-dirty",Oe.isDirty)("ng-valid",Oe.isValid)("ng-invalid",Oe.isInvalid)("ng-pending",Oe.isPending)},features:[T.qOj]}),ie})(),qr=(()=>{class ie extends Bn{constructor(q){super(q)}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(Gn,10))},ie.\u0275dir=T.lG2({type:ie,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(q,Oe){2&q&&T.ekj("ng-untouched",Oe.isUntouched)("ng-touched",Oe.isTouched)("ng-pristine",Oe.isPristine)("ng-dirty",Oe.isDirty)("ng-valid",Oe.isValid)("ng-invalid",Oe.isInvalid)("ng-pending",Oe.isPending)("ng-submitted",Oe.isSubmitted)},features:[T.qOj]}),ie})();const br="VALID",is="INVALID",ci="PENDING",Ri="DISABLED";function li(ie){return(Ar(ie)?ie.validators:ie)||null}function Nr(ie,Q){return(Ar(Q)?Q.asyncValidators:ie)||null}function Ar(ie){return null!=ie&&!Array.isArray(ie)&&"object"==typeof ie}class lt{constructor(Q,q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Q),this._assignAsyncValidators(q)}get validator(){return this._composedValidatorFn}set validator(Q){this._rawValidators=this._composedValidatorFn=Q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Q){this._rawAsyncValidators=this._composedAsyncValidatorFn=Q}get parent(){return this._parent}get valid(){return this.status===br}get invalid(){return this.status===is}get pending(){return this.status==ci}get disabled(){return this.status===Ri}get enabled(){return this.status!==Ri}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Q){this._assignValidators(Q)}setAsyncValidators(Q){this._assignAsyncValidators(Q)}addValidators(Q){this.setValidators(Tn(Q,this._rawValidators))}addAsyncValidators(Q){this.setAsyncValidators(Tn(Q,this._rawAsyncValidators))}removeValidators(Q){this.setValidators(xn(Q,this._rawValidators))}removeAsyncValidators(Q){this.setAsyncValidators(xn(Q,this._rawAsyncValidators))}hasValidator(Q){return In(this._rawValidators,Q)}hasAsyncValidator(Q){return In(this._rawAsyncValidators,Q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Q={}){this.touched=!0,this._parent&&!Q.onlySelf&&this._parent.markAsTouched(Q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Q=>Q.markAllAsTouched())}markAsUntouched(Q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(q=>{q.markAsUntouched({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}markAsDirty(Q={}){this.pristine=!1,this._parent&&!Q.onlySelf&&this._parent.markAsDirty(Q)}markAsPristine(Q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(q=>{q.markAsPristine({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}markAsPending(Q={}){this.status=ci,!1!==Q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Q.onlySelf&&this._parent.markAsPending(Q)}disable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=Ri,this.errors=null,this._forEachChild(Oe=>{Oe.disable({...Q,onlySelf:!0})}),this._updateValue(),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(Oe=>Oe(!0))}enable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=br,this._forEachChild(Oe=>{Oe.enable({...Q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent}),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(Oe=>Oe(!1))}_updateAncestors(Q){this._parent&&!Q.onlySelf&&(this._parent.updateValueAndValidity(Q),Q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Q){this._parent=Q}getRawValue(){return this.value}updateValueAndValidity(Q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===br||this.status===ci)&&this._runAsyncValidator(Q.emitEvent)),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.updateValueAndValidity(Q)}_updateTreeValidity(Q={emitEvent:!0}){this._forEachChild(q=>q._updateTreeValidity(Q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ri:br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Q){if(this.asyncValidator){this.status=ci,this._hasOwnPendingAsyncValidator=!0;const q=Gt(this.asyncValidator(this));this._asyncValidationSubscription=q.subscribe(Oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Oe,{emitEvent:Q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Q,q={}){this.errors=Q,this._updateControlsErrors(!1!==q.emitEvent)}get(Q){let q=Q;return null==q||(Array.isArray(q)||(q=q.split(".")),0===q.length)?null:q.reduce((Oe,qt)=>Oe&&Oe._find(qt),this)}getError(Q,q){const Oe=q?this.get(q):this;return Oe&&Oe.errors?Oe.errors[Q]:null}hasError(Q,q){return!!this.getError(Q,q)}get root(){let Q=this;for(;Q._parent;)Q=Q._parent;return Q}_updateControlsErrors(Q){this.status=this._calculateStatus(),Q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Q)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?Ri:this.errors?is:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ci)?ci:this._anyControlsHaveStatus(is)?is:br}_anyControlsHaveStatus(Q){return this._anyControls(q=>q.status===Q)}_anyControlsDirty(){return this._anyControls(Q=>Q.dirty)}_anyControlsTouched(){return this._anyControls(Q=>Q.touched)}_updatePristine(Q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}_updateTouched(Q={}){this.touched=this._anyControlsTouched(),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}_registerOnCollectionChange(Q){this._onCollectionChange=Q}_setUpdateStrategy(Q){Ar(Q)&&null!=Q.updateOn&&(this._updateOn=Q.updateOn)}_parentMarkedDirty(Q){return!Q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Q){return null}_assignValidators(Q){this._rawValidators=Array.isArray(Q)?Q.slice():Q,this._composedValidatorFn=function vi(ie){return Array.isArray(ie)?Xe(ie):ie||null}(this._rawValidators)}_assignAsyncValidators(Q){this._rawAsyncValidators=Array.isArray(Q)?Q.slice():Q,this._composedAsyncValidatorFn=function Vi(ie){return Array.isArray(ie)?dt(ie):ie||null}(this._rawAsyncValidators)}}class _e extends lt{constructor(Q,q,Oe){super(li(q),Nr(Oe,q)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Q,q){return this.controls[Q]?this.controls[Q]:(this.controls[Q]=q,q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange),q)}addControl(Q,q,Oe={}){this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:Oe.emitEvent}),this._onCollectionChange()}removeControl(Q,q={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}setControl(Q,q,Oe={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],q&&this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:Oe.emitEvent}),this._onCollectionChange()}contains(Q){return this.controls.hasOwnProperty(Q)&&this.controls[Q].enabled}setValue(Q,q={}){(function mr(ie,Q,q){ie._forEachChild((Oe,qt)=>{if(void 0===q[qt])throw new T.vHH(1002,"")})})(this,0,Q),Object.keys(Q).forEach(Oe=>{(function ls(ie,Q,q){const Oe=ie.controls;if(!(Q?Object.keys(Oe):Oe).length)throw new T.vHH(1e3,"");if(!Oe[q])throw new T.vHH(1001,"")})(this,!0,Oe),this.controls[Oe].setValue(Q[Oe],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(Q,q={}){null!=Q&&(Object.keys(Q).forEach(Oe=>{const qt=this.controls[Oe];qt&&qt.patchValue(Q[Oe],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(Q={},q={}){this._forEachChild((Oe,qt)=>{Oe.reset(Q[qt],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this._reduceChildren({},(Q,q,Oe)=>(Q[Oe]=q.getRawValue(),Q))}_syncPendingControls(){let Q=this._reduceChildren(!1,(q,Oe)=>!!Oe._syncPendingControls()||q);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){Object.keys(this.controls).forEach(q=>{const Oe=this.controls[q];Oe&&Q(Oe,q)})}_setUpControls(){this._forEachChild(Q=>{Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Q){for(const[q,Oe]of Object.entries(this.controls))if(this.contains(q)&&Q(Oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(q,Oe,qt)=>((Oe.enabled||this.disabled)&&(q[qt]=Oe.value),q))}_reduceChildren(Q,q){let Oe=Q;return this._forEachChild((qt,J)=>{Oe=q(Oe,qt,J)}),Oe}_allControlsDisabled(){for(const Q of Object.keys(this.controls))if(this.controls[Q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Q){return this.controls.hasOwnProperty(Q)?this.controls[Q]:null}}const Qt=new T.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>En}),En="always";function ye(ie,Q,q=En){Xn(ie,Q),Q.valueAccessor.writeValue(ie.value),(ie.disabled||"always"===q)&&Q.valueAccessor.setDisabledState?.(ie.disabled),function ui(ie,Q){Q.valueAccessor.registerOnChange(q=>{ie._pendingValue=q,ie._pendingChange=!0,ie._pendingDirty=!0,"change"===ie.updateOn&&Pt(ie,Q)})}(ie,Q),function nn(ie,Q){const q=(Oe,qt)=>{Q.valueAccessor.writeValue(Oe),qt&&Q.viewToModelUpdate(Oe)};ie.registerOnChange(q),Q._registerOnDestroy(()=>{ie._unregisterOnChange(q)})}(ie,Q),function Ut(ie,Q){Q.valueAccessor.registerOnTouched(()=>{ie._pendingTouched=!0,"blur"===ie.updateOn&&ie._pendingChange&&Pt(ie,Q),"submit"!==ie.updateOn&&ie.markAsTouched()})}(ie,Q),function ln(ie,Q){if(Q.valueAccessor.setDisabledState){const q=Oe=>{Q.valueAccessor.setDisabledState(Oe)};ie.registerOnDisabledChange(q),Q._registerOnDestroy(()=>{ie._unregisterOnDisabledChange(q)})}}(ie,Q)}function He(ie,Q,q=!0){const Oe=()=>{};Q.valueAccessor&&(Q.valueAccessor.registerOnChange(Oe),Q.valueAccessor.registerOnTouched(Oe)),Hr(ie,Q),ie&&(Q._invokeOnDestroyCallbacks(),ie._registerOnCollectionChange(()=>{}))}function Tt(ie,Q){ie.forEach(q=>{q.registerOnValidatorChange&&q.registerOnValidatorChange(Q)})}function Xn(ie,Q){const q=ft(ie);null!==Q.validator?ie.setValidators(It(q,Q.validator)):"function"==typeof q&&ie.setValidators([q]);const Oe=jt(ie);null!==Q.asyncValidator?ie.setAsyncValidators(It(Oe,Q.asyncValidator)):"function"==typeof Oe&&ie.setAsyncValidators([Oe]);const qt=()=>ie.updateValueAndValidity();Tt(Q._rawValidators,qt),Tt(Q._rawAsyncValidators,qt)}function Hr(ie,Q){let q=!1;if(null!==ie){if(null!==Q.validator){const qt=ft(ie);if(Array.isArray(qt)&&qt.length>0){const J=qt.filter(ne=>ne!==Q.validator);J.length!==qt.length&&(q=!0,ie.setValidators(J))}}if(null!==Q.asyncValidator){const qt=jt(ie);if(Array.isArray(qt)&&qt.length>0){const J=qt.filter(ne=>ne!==Q.asyncValidator);J.length!==qt.length&&(q=!0,ie.setAsyncValidators(J))}}}const Oe=()=>{};return Tt(Q._rawValidators,Oe),Tt(Q._rawAsyncValidators,Oe),q}function Pt(ie,Q){ie._pendingDirty&&ie.markAsDirty(),ie.setValue(ie._pendingValue,{emitModelToViewChange:!1}),Q.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1}function On(ie,Q){Xn(ie,Q)}function gs(ie,Q){if(!ie.hasOwnProperty("model"))return!1;const q=ie.model;return!!q.isFirstChange()||!Object.is(Q,q.currentValue)}function Lo(ie,Q){ie._syncPendingControls(),Q.forEach(q=>{const Oe=q.control;"submit"===Oe.updateOn&&Oe._pendingChange&&(q.viewToModelUpdate(Oe._pendingValue),Oe._pendingChange=!1)})}function si(ie,Q){if(!Q)return null;let q,Oe,qt;return Array.isArray(Q),Q.forEach(J=>{J.constructor===ge?q=J:function qs(ie){return Object.getPrototypeOf(ie.constructor)===Qe}(J)?Oe=J:qt=J}),qt||Oe||q||null}const Go={provide:Gn,useExisting:(0,T.Gpc)(()=>_i)},ms=(()=>Promise.resolve())();let _i=(()=>{class ie extends Gn{constructor(q,Oe,qt){super(),this.callSetDisabledState=qt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new T.vpe,this.form=new _e({},Xe(q),dt(Oe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(q){ms.then(()=>{const Oe=this._findContainer(q.path);q.control=Oe.registerControl(q.name,q.control),ye(q.control,q,this.callSetDisabledState),q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(q)})}getControl(q){return this.form.get(q.path)}removeControl(q){ms.then(()=>{const Oe=this._findContainer(q.path);Oe&&Oe.removeControl(q.name),this._directives.delete(q)})}addFormGroup(q){ms.then(()=>{const Oe=this._findContainer(q.path),qt=new _e({});On(qt,q),Oe.registerControl(q.name,qt),qt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(q){ms.then(()=>{const Oe=this._findContainer(q.path);Oe&&Oe.removeControl(q.name)})}getFormGroup(q){return this.form.get(q.path)}updateModel(q,Oe){ms.then(()=>{this.form.get(q.path).setValue(Oe)})}setValue(q){this.control.setValue(q)}onSubmit(q){return this.submitted=!0,Lo(this.form,this._directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q=void 0){this.form.reset(q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(q){return q.pop(),q.length?this.form.get(q):this.form}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(rt,10),T.Y36(et,10),T.Y36(Qt,8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,Oe){1&q&&T.NdJ("submit",function(J){return Oe.onSubmit(J)})("reset",function(){return Oe.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Go]),T.qOj]}),ie})();function hi(ie,Q){const q=ie.indexOf(Q);q>-1&&ie.splice(q,1)}function to(ie){return"object"==typeof ie&&null!==ie&&2===Object.keys(ie).length&&"value"in ie&&"disabled"in ie}const Ks=class extends lt{constructor(Q=null,q,Oe){super(li(q),Nr(Oe,q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Q),this._setUpdateStrategy(q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ar(q)&&(q.nonNullable||q.initialValueIsDefault)&&(this.defaultValue=to(Q)?Q.value:Q)}setValue(Q,q={}){this.value=this._pendingValue=Q,this._onChange.length&&!1!==q.emitModelToViewChange&&this._onChange.forEach(Oe=>Oe(this.value,!1!==q.emitViewToModelChange)),this.updateValueAndValidity(q)}patchValue(Q,q={}){this.setValue(Q,q)}reset(Q=this.defaultValue,q={}){this._applyFormState(Q),this.markAsPristine(q),this.markAsUntouched(q),this.setValue(this.value,q),this._pendingChange=!1}_updateValue(){}_anyControls(Q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Q){this._onChange.push(Q)}_unregisterOnChange(Q){hi(this._onChange,Q)}registerOnDisabledChange(Q){this._onDisabledChange.push(Q)}_unregisterOnDisabledChange(Q){hi(this._onDisabledChange,Q)}_forEachChild(Q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Q){to(Q)?(this.value=this._pendingValue=Q.value,Q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Q}},du={provide:ir,useExisting:(0,T.Gpc)(()=>Ir)},As=(()=>Promise.resolve())();let Ir=(()=>{class ie extends ir{constructor(q,Oe,qt,J,ne,Me){super(),this._changeDetectorRef=ne,this.callSetDisabledState=Me,this.control=new Ks,this._registered=!1,this.name="",this.update=new T.vpe,this._parent=q,this._setValidators(Oe),this._setAsyncValidators(qt),this.valueAccessor=si(0,J)}ngOnChanges(q){if(this._checkForErrors(),!this._registered||"name"in q){if(this._registered&&(this._checkName(),this.formDirective)){const Oe=q.name.previousValue;this.formDirective.removeControl({name:Oe,path:this._getPath(Oe)})}this._setUpControl()}"isDisabled"in q&&this._updateDisabled(q),gs(q,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ye(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(q){As.then(()=>{this.control.setValue(q,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(q){const Oe=q.isDisabled.currentValue,qt=0!==Oe&&(0,T.VuI)(Oe);As.then(()=>{qt&&!this.control.disabled?this.control.disable():!qt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(q){return this._parent?function ve(ie,Q){return[...Q.path,ie]}(q,this._parent):[q]}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(Gn,9),T.Y36(rt,10),T.Y36(et,10),T.Y36(at,10),T.Y36(T.sBO,8),T.Y36(Qt,8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([du]),T.qOj,T.TTD]}),ie})(),ds=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275dir=T.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ie})(),bt=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({}),ie})();const Jt=new T.OlP("NgModelWithFormControlWarning"),Dn={provide:ir,useExisting:(0,T.Gpc)(()=>Kn)};let Kn=(()=>{class ie extends ir{set isDisabled(q){}constructor(q,Oe,qt,J,ne){super(),this._ngModelWarningConfig=J,this.callSetDisabledState=ne,this.update=new T.vpe,this._ngModelWarningSent=!1,this._setValidators(q),this._setAsyncValidators(Oe),this.valueAccessor=si(0,qt)}ngOnChanges(q){if(this._isControlChanged(q)){const Oe=q.form.previousValue;Oe&&He(Oe,this,!1),ye(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}gs(q,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&He(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_isControlChanged(q){return q.hasOwnProperty("form")}}return ie._ngModelWarningSentOnce=!1,ie.\u0275fac=function(q){return new(q||ie)(T.Y36(rt,10),T.Y36(et,10),T.Y36(at,10),T.Y36(Jt,8),T.Y36(Qt,8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[T._Bn([Dn]),T.qOj,T.TTD]}),ie})();const Mr={provide:Gn,useExisting:(0,T.Gpc)(()=>Ys)};let Ys=(()=>{class ie extends Gn{constructor(q,Oe,qt){super(),this.callSetDisabledState=qt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(q),this._setAsyncValidators(Oe)}ngOnChanges(q){this._checkFormPresent(),q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(q){const Oe=this.form.get(q.path);return ye(Oe,q,this.callSetDisabledState),Oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(q),Oe}getControl(q){return this.form.get(q.path)}removeControl(q){He(q.control||null,q,!1),function $o(ie,Q){const q=ie.indexOf(Q);q>-1&&ie.splice(q,1)}(this.directives,q)}addFormGroup(q){this._setUpFormContainer(q)}removeFormGroup(q){this._cleanUpFormContainer(q)}getFormGroup(q){return this.form.get(q.path)}addFormArray(q){this._setUpFormContainer(q)}removeFormArray(q){this._cleanUpFormContainer(q)}getFormArray(q){return this.form.get(q.path)}updateModel(q,Oe){this.form.get(q.path).setValue(Oe)}onSubmit(q){return this.submitted=!0,Lo(this.form,this.directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q=void 0){this.form.reset(q),this.submitted=!1}_updateDomValue(){this.directives.forEach(q=>{const Oe=q.control,qt=this.form.get(q.path);Oe!==qt&&(He(Oe||null,q),(ie=>ie instanceof Ks)(qt)&&(ye(qt,q,this.callSetDisabledState),q.control=qt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(q){const Oe=this.form.get(q.path);On(Oe,q),Oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(q){if(this.form){const Oe=this.form.get(q.path);Oe&&function Jn(ie,Q){return Hr(ie,Q)}(Oe,q)&&Oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xn(this.form,this),this._oldForm&&Hr(this._oldForm,this)}_checkFormPresent(){}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(rt,10),T.Y36(et,10),T.Y36(Qt,8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["","formGroup",""]],hostBindings:function(q,Oe){1&q&&T.NdJ("submit",function(J){return Oe.onSubmit(J)})("reset",function(){return Oe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Mr]),T.qOj,T.TTD]}),ie})();const eu={provide:at,useExisting:(0,T.Gpc)(()=>zo),multi:!0};function Es(ie,Q){return null==ie?`${Q}`:(Q&&"object"==typeof Q&&(Q="Object"),`${ie}: ${Q}`.slice(0,50))}let zo=(()=>{class ie extends Qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){this.value=q;const qt=Es(this._getOptionId(q),q);this.setProperty("value",qt)}registerOnChange(q){this.onChange=Oe=>{this.value=this._getOptionValue(Oe),q(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(q){for(const Oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Oe),q))return Oe;return null}_getOptionValue(q){const Oe=function Hi(ie){return ie.split(":")[0]}(q);return this._optionMap.has(Oe)?this._optionMap.get(Oe):q}}return ie.\u0275fac=function(){let Q;return function(Oe){return(Q||(Q=T.n5z(ie)))(Oe||ie)}}(),ie.\u0275dir=T.lG2({type:ie,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(q,Oe){1&q&&T.NdJ("change",function(J){return Oe.onChange(J.target.value)})("blur",function(){return Oe.onTouched()})},inputs:{compareWith:"compareWith"},features:[T._Bn([eu]),T.qOj]}),ie})(),ro=(()=>{class ie{constructor(q,Oe,qt){this._element=q,this._renderer=Oe,this._select=qt,this._select&&(this.id=this._select._registerOption())}set ngValue(q){null!=this._select&&(this._select._optionMap.set(this.id,q),this._setElementValue(Es(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._setElementValue(q),this._select&&this._select.writeValue(this._select.value)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(zo,9))},ie.\u0275dir=T.lG2({type:ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ie})();const go={provide:at,useExisting:(0,T.Gpc)(()=>Ti),multi:!0};function ca(ie,Q){return null==ie?`${Q}`:("string"==typeof Q&&(Q=`'${Q}'`),Q&&"object"==typeof Q&&(Q="Object"),`${ie}: ${Q}`.slice(0,50))}let Ti=(()=>{class ie extends Qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){let Oe;if(this.value=q,Array.isArray(q)){const qt=q.map(J=>this._getOptionId(J));Oe=(J,ne)=>{J._setSelected(qt.indexOf(ne.toString())>-1)}}else Oe=(qt,J)=>{qt._setSelected(!1)};this._optionMap.forEach(Oe)}registerOnChange(q){this.onChange=Oe=>{const qt=[],J=Oe.selectedOptions;if(void 0!==J){const ne=J;for(let Me=0;Me<ne.length;Me++){const mt=this._getOptionValue(ne[Me].value);qt.push(mt)}}else{const ne=Oe.options;for(let Me=0;Me<ne.length;Me++){const tt=ne[Me];if(tt.selected){const mt=this._getOptionValue(tt.value);qt.push(mt)}}}this.value=qt,q(qt)}}_registerOption(q){const Oe=(this._idCounter++).toString();return this._optionMap.set(Oe,q),Oe}_getOptionId(q){for(const Oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Oe)._value,q))return Oe;return null}_getOptionValue(q){const Oe=function Uu(ie){return ie.split(":")[0]}(q);return this._optionMap.has(Oe)?this._optionMap.get(Oe)._value:q}}return ie.\u0275fac=function(){let Q;return function(Oe){return(Q||(Q=T.n5z(ie)))(Oe||ie)}}(),ie.\u0275dir=T.lG2({type:ie,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(q,Oe){1&q&&T.NdJ("change",function(J){return Oe.onChange(J.target)})("blur",function(){return Oe.onTouched()})},inputs:{compareWith:"compareWith"},features:[T._Bn([go]),T.qOj]}),ie})(),Aa=(()=>{class ie{constructor(q,Oe,qt){this._element=q,this._renderer=Oe,this._select=qt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(q){null!=this._select&&(this._value=q,this._setElementValue(ca(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._select?(this._value=q,this._setElementValue(ca(this.id,q)),this._select.writeValue(this._select.value)):this._setElementValue(q)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}_setSelected(q){this._renderer.setProperty(this._element.nativeElement,"selected",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ie.\u0275fac=function(q){return new(q||ie)(T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(Ti,9))},ie.\u0275dir=T.lG2({type:ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ie})(),bi=(()=>{class ie{constructor(){this._validator=At}ngOnChanges(q){if(this.inputName in q){const Oe=this.normalizeInput(q[this.inputName].currentValue);this._enabled=this.enabled(Oe),this._validator=this._enabled?this.createValidator(Oe):At,this._onChange&&this._onChange()}}validate(q){return this._validator(q)}registerOnValidatorChange(q){this._onChange=q}enabled(q){return null!=q}}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275dir=T.lG2({type:ie,features:[T.TTD]}),ie})();const ha={provide:rt,useExisting:(0,T.Gpc)(()=>Cs),multi:!0};let Cs=(()=>{class ie extends bi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=T.VuI,this.createValidator=q=>Te}enabled(q){return q}}return ie.\u0275fac=function(){let Q;return function(Oe){return(Q||(Q=T.n5z(ie)))(Oe||ie)}}(),ie.\u0275dir=T.lG2({type:ie,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(q,Oe){2&q&&T.uIk("required",Oe._enabled?"":null)},inputs:{required:"required"},features:[T._Bn([ha]),T.qOj]}),ie})();const xi={provide:rt,useExisting:(0,T.Gpc)(()=>Ai),multi:!0};let Ai=(()=>{class ie extends bi{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=q=>q,this.createValidator=q=>Fe(q)}}return ie.\u0275fac=function(){let Q;return function(Oe){return(Q||(Q=T.n5z(ie)))(Oe||ie)}}(),ie.\u0275dir=T.lG2({type:ie,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(q,Oe){2&q&&T.uIk("pattern",Oe._enabled?Oe.pattern:null)},inputs:{pattern:"pattern"},features:[T._Bn([xi]),T.qOj]}),ie})(),Ma=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({imports:[bt]}),ie})(),fa=(()=>{class ie{static withConfig(q){return{ngModule:ie,providers:[{provide:Qt,useValue:q.callSetDisabledState??En}]}}}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({imports:[Ma]}),ie})(),Za=(()=>{class ie{static withConfig(q){return{ngModule:ie,providers:[{provide:Jt,useValue:q.warnOnNgModelWithFormControl??"always"},{provide:Qt,useValue:q.callSetDisabledState??En}]}}}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({imports:[Ma]}),ie})()},6593:(tn,ht,z)=>{"use strict";z.d(ht,{Dx:()=>Sr,H7:()=>is,b2:()=>dr,q6:()=>$n});var T=z(5879),me=z(6814);class le extends me.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class B extends le{static makeCurrent(){(0,me.HT)(new B)}onAndCancel(Ce,be,Pe){return Ce.addEventListener(be,Pe),()=>{Ce.removeEventListener(be,Pe)}}dispatchEvent(Ce,be){Ce.dispatchEvent(be)}remove(Ce){Ce.parentNode&&Ce.parentNode.removeChild(Ce)}createElement(Ce,be){return(be=be||this.getDefaultDocument()).createElement(Ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ce){return Ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ce){return Ce instanceof DocumentFragment}getGlobalEventTarget(Ce,be){return"window"===be?window:"document"===be?Ce:"body"===be?Ce.body:null}getBaseHref(Ce){const be=function Ne(){return Re=Re||document.querySelector("base"),Re?Re.getAttribute("href"):null}();return null==be?null:function at(_e){Qe=Qe||document.createElement("a"),Qe.setAttribute("href",_e);const Ce=Qe.pathname;return"/"===Ce.charAt(0)?Ce:`/${Ce}`}(be)}resetBaseElement(){Re=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ce){return(0,me.Mx)(document.cookie,Ce)}}let Qe,Re=null,xe=(()=>{class _e{build(){return new XMLHttpRequest}}return _e.\u0275fac=function(be){return new(be||_e)},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const je=new T.OlP("EventManagerPlugins");let $e=(()=>{class _e{constructor(be,Pe){this._zone=Pe,this._eventNameToPlugin=new Map,be.forEach(Et=>{Et.manager=this}),this._plugins=be.slice().reverse()}addEventListener(be,Pe,Et){return this._findPluginFor(Pe).addEventListener(be,Pe,Et)}getZone(){return this._zone}_findPluginFor(be){let Pe=this._eventNameToPlugin.get(be);if(Pe)return Pe;if(Pe=this._plugins.find(Qt=>Qt.supports(be)),!Pe)throw new T.vHH(5101,!1);return this._eventNameToPlugin.set(be,Pe),Pe}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(je),T.LFG(T.R0b))},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class kt{constructor(Ce){this._doc=Ce}}const ge="ng-app-id";let St=(()=>{class _e{constructor(be,Pe,Et,Qt={}){this.doc=be,this.appId=Pe,this.nonce=Et,this.platformId=Qt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,me.PM)(Qt),this.resetHostNodes()}addStyles(be){for(const Pe of be)1===this.changeUsageCount(Pe,1)&&this.onStyleAdded(Pe)}removeStyles(be){for(const Pe of be)this.changeUsageCount(Pe,-1)<=0&&this.onStyleRemoved(Pe)}ngOnDestroy(){const be=this.styleNodesInDOM;be&&(be.forEach(Pe=>Pe.remove()),be.clear());for(const Pe of this.getAllStyles())this.onStyleRemoved(Pe);this.resetHostNodes()}addHost(be){this.hostNodes.add(be);for(const Pe of this.getAllStyles())this.addStyleToHost(be,Pe)}removeHost(be){this.hostNodes.delete(be)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(be){for(const Pe of this.hostNodes)this.addStyleToHost(Pe,be)}onStyleRemoved(be){const Pe=this.styleRef;Pe.get(be)?.elements?.forEach(Et=>Et.remove()),Pe.delete(be)}collectServerRenderedStyles(){const be=this.doc.head?.querySelectorAll(`style[${ge}="${this.appId}"]`);if(be?.length){const Pe=new Map;return be.forEach(Et=>{null!=Et.textContent&&Pe.set(Et.textContent,Et)}),Pe}return null}changeUsageCount(be,Pe){const Et=this.styleRef;if(Et.has(be)){const Qt=Et.get(be);return Qt.usage+=Pe,Qt.usage}return Et.set(be,{usage:Pe,elements:[]}),Pe}getStyleElement(be,Pe){const Et=this.styleNodesInDOM,Qt=Et?.get(Pe);if(Qt?.parentNode===be)return Et.delete(Pe),Qt.removeAttribute(ge),Qt;{const En=this.doc.createElement("style");return this.nonce&&En.setAttribute("nonce",this.nonce),En.textContent=Pe,this.platformIsServer&&En.setAttribute(ge,this.appId),En}}addStyleToHost(be,Pe){const Et=this.getStyleElement(be,Pe);be.appendChild(Et);const Qt=this.styleRef,En=Qt.get(Pe)?.elements;En?En.push(Et):Qt.set(Pe,{elements:[Et],usage:1})}resetHostNodes(){const be=this.hostNodes;be.clear(),be.add(this.doc.head)}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(me.K0),T.LFG(T.AFp),T.LFG(T.Ojb,8),T.LFG(T.Lbi))},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Ee=new T.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function gt(_e,Ce){return Ce.map(be=>be.replace(rt,_e))}let Y=(()=>{class _e{constructor(be,Pe,Et,Qt,En,ve,ye,He=null){this.eventManager=be,this.sharedStylesHost=Pe,this.appId=Et,this.removeStylesOnCompDestroy=Qt,this.doc=En,this.platformId=ve,this.ngZone=ye,this.nonce=He,this.rendererByCompId=new Map,this.platformIsServer=(0,me.PM)(ve),this.defaultRenderer=new oe(be,En,ye,this.platformIsServer)}createRenderer(be,Pe){if(!be||!Pe)return this.defaultRenderer;this.platformIsServer&&Pe.encapsulation===T.ifc.ShadowDom&&(Pe={...Pe,encapsulation:T.ifc.Emulated});const Et=this.getOrCreateRenderer(be,Pe);return Et instanceof pn?Et.applyToHost(be):Et instanceof Xt&&Et.applyStyles(),Et}getOrCreateRenderer(be,Pe){const Et=this.rendererByCompId;let Qt=Et.get(Pe.id);if(!Qt){const En=this.doc,ve=this.ngZone,ye=this.eventManager,He=this.sharedStylesHost,Tt=this.removeStylesOnCompDestroy,ln=this.platformIsServer;switch(Pe.encapsulation){case T.ifc.Emulated:Qt=new pn(ye,He,Pe,this.appId,Tt,En,ve,ln);break;case T.ifc.ShadowDom:return new Gt(ye,He,be,Pe,En,ve,this.nonce,ln);default:Qt=new Xt(ye,He,Pe,Tt,En,ve,ln)}Et.set(Pe.id,Qt)}return Qt}ngOnDestroy(){this.rendererByCompId.clear()}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG($e),T.LFG(St),T.LFG(T.AFp),T.LFG(Ee),T.LFG(me.K0),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(T.Ojb))},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class oe{constructor(Ce,be,Pe,Et){this.eventManager=Ce,this.doc=be,this.ngZone=Pe,this.platformIsServer=Et,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ce,be){return be?this.doc.createElementNS(Ze[be]||be,Ce):this.doc.createElement(Ce)}createComment(Ce){return this.doc.createComment(Ce)}createText(Ce){return this.doc.createTextNode(Ce)}appendChild(Ce,be){(Ht(Ce)?Ce.content:Ce).appendChild(be)}insertBefore(Ce,be,Pe){Ce&&(Ht(Ce)?Ce.content:Ce).insertBefore(be,Pe)}removeChild(Ce,be){Ce&&Ce.removeChild(be)}selectRootElement(Ce,be){let Pe="string"==typeof Ce?this.doc.querySelector(Ce):Ce;if(!Pe)throw new T.vHH(-5104,!1);return be||(Pe.textContent=""),Pe}parentNode(Ce){return Ce.parentNode}nextSibling(Ce){return Ce.nextSibling}setAttribute(Ce,be,Pe,Et){if(Et){be=Et+":"+be;const Qt=Ze[Et];Qt?Ce.setAttributeNS(Qt,be,Pe):Ce.setAttribute(be,Pe)}else Ce.setAttribute(be,Pe)}removeAttribute(Ce,be,Pe){if(Pe){const Et=Ze[Pe];Et?Ce.removeAttributeNS(Et,be):Ce.removeAttribute(`${Pe}:${be}`)}else Ce.removeAttribute(be)}addClass(Ce,be){Ce.classList.add(be)}removeClass(Ce,be){Ce.classList.remove(be)}setStyle(Ce,be,Pe,Et){Et&(T.JOm.DashCase|T.JOm.Important)?Ce.style.setProperty(be,Pe,Et&T.JOm.Important?"important":""):Ce.style[be]=Pe}removeStyle(Ce,be,Pe){Pe&T.JOm.DashCase?Ce.style.removeProperty(be):Ce.style[be]=""}setProperty(Ce,be,Pe){Ce[be]=Pe}setValue(Ce,be){Ce.nodeValue=be}listen(Ce,be,Pe){if("string"==typeof Ce&&!(Ce=(0,me.q)().getGlobalEventTarget(this.doc,Ce)))throw new Error(`Unsupported event target ${Ce} for event ${be}`);return this.eventManager.addEventListener(Ce,be,this.decoratePreventDefault(Pe))}decoratePreventDefault(Ce){return be=>{if("__ngUnwrap__"===be)return Ce;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ce(be)):Ce(be))&&be.preventDefault()}}}function Ht(_e){return"TEMPLATE"===_e.tagName&&void 0!==_e.content}class Gt extends oe{constructor(Ce,be,Pe,Et,Qt,En,ve,ye){super(Ce,Qt,En,ye),this.sharedStylesHost=be,this.hostEl=Pe,this.shadowRoot=Pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const He=gt(Et.id,Et.styles);for(const Tt of He){const ln=document.createElement("style");ve&&ln.setAttribute("nonce",ve),ln.textContent=Tt,this.shadowRoot.appendChild(ln)}}nodeOrShadowRoot(Ce){return Ce===this.hostEl?this.shadowRoot:Ce}appendChild(Ce,be){return super.appendChild(this.nodeOrShadowRoot(Ce),be)}insertBefore(Ce,be,Pe){return super.insertBefore(this.nodeOrShadowRoot(Ce),be,Pe)}removeChild(Ce,be){return super.removeChild(this.nodeOrShadowRoot(Ce),be)}parentNode(Ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ce)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xt extends oe{constructor(Ce,be,Pe,Et,Qt,En,ve,ye){super(Ce,Qt,En,ve),this.sharedStylesHost=be,this.removeStylesOnCompDestroy=Et,this.styles=ye?gt(ye,Pe.styles):Pe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class pn extends Xt{constructor(Ce,be,Pe,Et,Qt,En,ve,ye){const He=Et+"-"+Pe.id;super(Ce,be,Pe,Qt,En,ve,ye,He),this.contentAttr=function Te(_e){return"_ngcontent-%COMP%".replace(rt,_e)}(He),this.hostAttr=function Ae(_e){return"_nghost-%COMP%".replace(rt,_e)}(He)}applyToHost(Ce){this.applyStyles(),this.setAttribute(Ce,this.hostAttr,"")}createElement(Ce,be){const Pe=super.createElement(Ce,be);return super.setAttribute(Pe,this.contentAttr,""),Pe}}let Zt=(()=>{class _e extends kt{constructor(be){super(be)}supports(be){return!0}addEventListener(be,Pe,Et){return be.addEventListener(Pe,Et,!1),()=>this.removeEventListener(be,Pe,Et)}removeEventListener(be,Pe,Et){return be.removeEventListener(Pe,Et)}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(me.K0))},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Yt=["alt","control","meta","shift"],qe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xe={alt:_e=>_e.altKey,control:_e=>_e.ctrlKey,meta:_e=>_e.metaKey,shift:_e=>_e.shiftKey};let ot=(()=>{class _e extends kt{constructor(be){super(be)}supports(be){return null!=_e.parseEventName(be)}addEventListener(be,Pe,Et){const Qt=_e.parseEventName(Pe),En=_e.eventCallback(Qt.fullKey,Et,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,me.q)().onAndCancel(be,Qt.domEventName,En))}static parseEventName(be){const Pe=be.toLowerCase().split("."),Et=Pe.shift();if(0===Pe.length||"keydown"!==Et&&"keyup"!==Et)return null;const Qt=_e._normalizeKey(Pe.pop());let En="",ve=Pe.indexOf("code");if(ve>-1&&(Pe.splice(ve,1),En="code."),Yt.forEach(He=>{const Tt=Pe.indexOf(He);Tt>-1&&(Pe.splice(Tt,1),En+=He+".")}),En+=Qt,0!=Pe.length||0===Qt.length)return null;const ye={};return ye.domEventName=Et,ye.fullKey=En,ye}static matchEventFullKeyCode(be,Pe){let Et=qe[be.key]||be.key,Qt="";return Pe.indexOf("code.")>-1&&(Et=be.code,Qt="code."),!(null==Et||!Et)&&(Et=Et.toLowerCase()," "===Et?Et="space":"."===Et&&(Et="dot"),Yt.forEach(En=>{En!==Et&&(0,Xe[En])(be)&&(Qt+=En+".")}),Qt+=Et,Qt===Pe)}static eventCallback(be,Pe,Et){return Qt=>{_e.matchEventFullKeyCode(Qt,be)&&Et.runGuarded(()=>Pe(Qt))}}static _normalizeKey(be){return"esc"===be?"escape":be}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(me.K0))},_e.\u0275prov=T.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const $n=(0,T.eFA)(T._c5,"browser",[{provide:T.Lbi,useValue:me.bD},{provide:T.g9A,useValue:function zt(){B.makeCurrent()},multi:!0},{provide:me.K0,useFactory:function Tn(){return(0,T.RDi)(document),document},deps:[]}]),Gn=new T.OlP(""),ir=[{provide:T.rWj,useClass:class ut{addToWindow(Ce){T.dqk.getAngularTestability=(Pe,Et=!0)=>{const Qt=Ce.findTestabilityInTree(Pe,Et);if(null==Qt)throw new T.vHH(5103,!1);return Qt},T.dqk.getAllAngularTestabilities=()=>Ce.getAllTestabilities(),T.dqk.getAllAngularRootElements=()=>Ce.getAllRootElements(),T.dqk.frameworkStabilizers||(T.dqk.frameworkStabilizers=[]),T.dqk.frameworkStabilizers.push(Pe=>{const Et=T.dqk.getAllAngularTestabilities();let Qt=Et.length,En=!1;const ve=function(ye){En=En||ye,Qt--,0==Qt&&Pe(En)};Et.forEach(ye=>{ye.whenStable(ve)})})}findTestabilityInTree(Ce,be,Pe){return null==be?null:Ce.getTestability(be)??(Pe?(0,me.q)().isShadowRoot(be)?this.findTestabilityInTree(Ce,be.host,!0):this.findTestabilityInTree(Ce,be.parentElement,!0):null)}},deps:[]},{provide:T.lri,useClass:T.dDg,deps:[T.R0b,T.eoX,T.rWj]},{provide:T.dDg,useClass:T.dDg,deps:[T.R0b,T.eoX,T.rWj]}],Bn=[{provide:T.zSh,useValue:"root"},{provide:T.qLn,useFactory:function In(){return new T.qLn},deps:[]},{provide:je,useClass:Zt,multi:!0,deps:[me.K0,T.R0b,T.Lbi]},{provide:je,useClass:ot,multi:!0,deps:[me.K0]},Y,St,$e,{provide:T.FYo,useExisting:Y},{provide:me.JF,useClass:xe,deps:[]},[]];let dr=(()=>{class _e{constructor(be){}static withServerTransition(be){return{ngModule:_e,providers:[{provide:T.AFp,useValue:be.appId}]}}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(Gn,12))},_e.\u0275mod=T.oAB({type:_e}),_e.\u0275inj=T.cJS({providers:[...Bn,...ir],imports:[me.ez,T.hGG]}),_e})(),Sr=(()=>{class _e{constructor(be){this._doc=be}getTitle(){return this._doc.title}setTitle(be){this._doc.title=be||""}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(me.K0))},_e.\u0275prov=T.Yz7({token:_e,factory:function(be){let Pe=null;return Pe=be?new be:function Gr(){return new Sr((0,T.LFG)(me.K0))}(),Pe},providedIn:"root"}),_e})();typeof window<"u"&&window;let is=(()=>{class _e{}return _e.\u0275fac=function(be){return new(be||_e)},_e.\u0275prov=T.Yz7({token:_e,factory:function(be){let Pe=null;return Pe=be?new(be||_e):T.LFG(Ri),Pe},providedIn:"root"}),_e})(),Ri=(()=>{class _e extends is{constructor(be){super(),this._doc=be}sanitize(be,Pe){if(null==Pe)return null;switch(be){case T.q3G.NONE:return Pe;case T.q3G.HTML:return(0,T.qzn)(Pe,"HTML")?(0,T.z3N)(Pe):(0,T.EiD)(this._doc,String(Pe)).toString();case T.q3G.STYLE:return(0,T.qzn)(Pe,"Style")?(0,T.z3N)(Pe):Pe;case T.q3G.SCRIPT:if((0,T.qzn)(Pe,"Script"))return(0,T.z3N)(Pe);throw new T.vHH(5200,!1);case T.q3G.URL:return(0,T.qzn)(Pe,"URL")?(0,T.z3N)(Pe):(0,T.mCW)(String(Pe));case T.q3G.RESOURCE_URL:if((0,T.qzn)(Pe,"ResourceURL"))return(0,T.z3N)(Pe);throw new T.vHH(5201,!1);default:throw new T.vHH(5202,!1)}}bypassSecurityTrustHtml(be){return(0,T.JVY)(be)}bypassSecurityTrustStyle(be){return(0,T.L6k)(be)}bypassSecurityTrustScript(be){return(0,T.eBb)(be)}bypassSecurityTrustUrl(be){return(0,T.LAX)(be)}bypassSecurityTrustResourceUrl(be){return(0,T.pB0)(be)}}return _e.\u0275fac=function(be){return new(be||_e)(T.LFG(me.K0))},_e.\u0275prov=T.Yz7({token:_e,factory:function(be){let Pe=null;return Pe=be?new be:function ci(_e){return new Ri(_e.get(me.K0))}(T.LFG(T.zs3)),Pe},providedIn:"root"}),_e})()},8076:(tn,ht,z)=>{"use strict";z.d(ht,{gz:()=>Kn,m2:()=>hi,F0:()=>Ds,rH:()=>va,Od:()=>Oc,Bz:()=>rc,lC:()=>jr});var T=z(5879),me=z(5592),le=z(4674),Re=z(2459),Ne=z(2096),Qe=z(5619),at=z(2572),ut=z(6973),xe=z(5211),je=z(4829);function $e(k){return new me.y(R=>{(0,je.Xf)(k()).subscribe(R)})}var kt=z(8407);function ge(k,R){const I=(0,le.m)(k)?k:()=>k,$=de=>de.error(I());return new me.y(R?de=>R.schedule($,0,de):$)}var St=z(6232),Ze=z(7394),rt=z(9360),et=z(8251);function Ke(){return(0,rt.e)((k,R)=>{let I=null;k._refCount++;const $=(0,et.x)(R,void 0,void 0,void 0,()=>{if(!k||k._refCount<=0||0<--k._refCount)return void(I=null);const de=k._connection,Le=I;I=null,de&&(!Le||de===Le)&&de.unsubscribe(),R.unsubscribe()});k.subscribe($),$.closed||(I=k.connect())})}class W extends me.y{constructor(R,I){super(),this.source=R,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,rt.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Ze.w0;const I=this.getSubject();R.add(this.source.subscribe((0,et.x)(I,void 0,()=>{this._teardown(),I.complete()},$=>{this._teardown(),I.error($)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Ze.w0.EMPTY)}return R}refCount(){return Ke()(this)}}var te=z(8645),Ee=z(6814),Te=z(7398),Ae=z(4664),gt=z(8180),Y=z(7921),oe=z(2181),Fe=z(1631),At=z(1374);function Ht(k,R){return(0,le.m)(R)?(0,Fe.z)(k,R,1):(0,Fe.z)(k,1)}var Gt=z(9397);function Xt(k){return(0,rt.e)((R,I)=>{let Le,$=null,de=!1;$=R.subscribe((0,et.x)(I,void 0,void 0,Ue=>{Le=(0,je.Xf)(k(Ue,Xt(k)(R))),$?($.unsubscribe(),$=null,Le.subscribe(I)):de=!0})),de&&($.unsubscribe(),$=null,Le.subscribe(I))})}var pn=z(6699),Zt=z(3572);function Yt(k){return k<=0?()=>St.E:(0,rt.e)((R,I)=>{let $=[];R.subscribe((0,et.x)(I,de=>{$.push(de),k<$.length&&$.shift()},()=>{for(const de of $)I.next(de);I.complete()},void 0,()=>{$=null}))})}var qe=z(3026),Xe=z(2737),dt=z(975);function It(k){return(0,rt.e)((R,I)=>{try{R.subscribe(I)}finally{I.add(k)}})}var ft=z(7537),jt=z(6593);const zt="primary",In=Symbol("RouteTitle");class Tn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I[0]:I}return null}getAll(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function xn(k){return new Tn(k)}function $n(k,R,I){const $=I.path.split("/");if($.length>k.length||"full"===I.pathMatch&&(R.hasChildren()||$.length<k.length))return null;const de={};for(let Le=0;Le<$.length;Le++){const Ue=$[Le],Mt=k[Le];if(Ue.startsWith(":"))de[Ue.substring(1)]=Mt;else if(Ue!==Mt.path)return null}return{consumed:k.slice(0,$.length),posParams:de}}function ir(k,R){const I=k?Object.keys(k):void 0,$=R?Object.keys(R):void 0;if(!I||!$||I.length!=$.length)return!1;let de;for(let Le=0;Le<I.length;Le++)if(de=I[Le],!Bn(k[de],R[de]))return!1;return!0}function Bn(k,R){if(Array.isArray(k)&&Array.isArray(R)){if(k.length!==R.length)return!1;const I=[...k].sort(),$=[...R].sort();return I.every((de,Le)=>$[Le]===de)}return k===R}function dr(k){return k.length>0?k[k.length-1]:null}function xr(k){return function B(k){return!!k&&(k instanceof me.y||(0,le.m)(k.lift)&&(0,le.m)(k.subscribe))}(k)?k:(0,T.QGY)(k)?(0,Re.D)(Promise.resolve(k)):(0,Ne.of)(k)}const hr={exact:function mi(k,R,I){if(!fi(k.segments,R.segments)||!Nn(k.segments,R.segments,I)||k.numberOfChildren!==R.numberOfChildren)return!1;for(const $ in R.children)if(!k.children[$]||!mi(k.children[$],R.children[$],I))return!1;return!0},subset:an},qr={exact:function Sr(k,R){return ir(k,R)},subset:function Rr(k,R){return Object.keys(R).length<=Object.keys(k).length&&Object.keys(R).every(I=>Bn(k[I],R[I]))},ignored:()=>!0};function Gr(k,R,I){return hr[I.paths](k.root,R.root,I.matrixParams)&&qr[I.queryParams](k.queryParams,R.queryParams)&&!("exact"===I.fragment&&k.fragment!==R.fragment)}function an(k,R,I){return Un(k,R,R.segments,I)}function Un(k,R,I,$){if(k.segments.length>I.length){const de=k.segments.slice(0,I.length);return!(!fi(de,I)||R.hasChildren()||!Nn(de,I,$))}if(k.segments.length===I.length){if(!fi(k.segments,I)||!Nn(k.segments,I,$))return!1;for(const de in R.children)if(!k.children[de]||!an(k.children[de],R.children[de],$))return!1;return!0}{const de=I.slice(0,k.segments.length),Le=I.slice(k.segments.length);return!!(fi(k.segments,de)&&Nn(k.segments,de,$)&&k.children[zt])&&Un(k.children[zt],R,Le,$)}}function Nn(k,R,I){return R.every(($,de)=>qr[I](k[de].parameters,$.parameters))}class Dr{constructor(R=new ar([],{}),I={},$=null){this.root=R,this.queryParams=I,this.fragment=$}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xn(this.queryParams)),this._queryParamMap}toString(){return Tr.serialize(this)}}class ar{constructor(R,I){this.segments=R,this.children=I,this.parent=null,Object.values(I).forEach($=>$.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qi(this)}}class Ui{constructor(R,I){this.path=R,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=xn(this.parameters)),this._parameterMap}toString(){return Vi(this)}}function fi(k,R){return k.length===R.length&&k.every((I,$)=>I.path===R[$].path)}let Fr=(()=>{class k{}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:function(){return new Qi},providedIn:"root"}),k})();class Qi{parse(R){const I=new En(R);return new Dr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(R){const I=`/${br(R.root,!0)}`,$=function ls(k){const R=Object.keys(k).map(I=>{const $=k[I];return Array.isArray($)?$.map(de=>`${ci(I)}=${ci(de)}`).join("&"):`${ci(I)}=${ci($)}`}).filter(I=>!!I);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${I}${$}${"string"==typeof R.fragment?`#${function Ri(k){return encodeURI(k)}(R.fragment)}`:""}`}}const Tr=new Qi;function qi(k){return k.segments.map(R=>Vi(R)).join("/")}function br(k,R){if(!k.hasChildren())return qi(k);if(R){const I=k.children[zt]?br(k.children[zt],!1):"",$=[];return Object.entries(k.children).forEach(([de,Le])=>{de!==zt&&$.push(`${de}:${br(Le,!1)}`)}),$.length>0?`${I}(${$.join("//")})`:I}{const I=function eo(k,R){let I=[];return Object.entries(k.children).forEach(([$,de])=>{$===zt&&(I=I.concat(R(de,$)))}),Object.entries(k.children).forEach(([$,de])=>{$!==zt&&(I=I.concat(R(de,$)))}),I}(k,($,de)=>de===zt?[br(k.children[zt],!1)]:[`${de}:${br($,!1)}`]);return 1===Object.keys(k.children).length&&null!=k.children[zt]?`${qi(k)}/${I[0]}`:`${qi(k)}/(${I.join("//")})`}}function is(k){return encodeURIComponent(k).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ci(k){return is(k).replace(/%3B/gi,";")}function li(k){return is(k).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vi(k){return decodeURIComponent(k)}function Nr(k){return vi(k.replace(/\+/g,"%20"))}function Vi(k){return`${li(k.path)}${function Ar(k){return Object.keys(k).map(R=>`;${li(R)}=${li(k[R])}`).join("")}(k.parameters)}`}const mr=/^[^\/()?;#]+/;function lt(k){const R=k.match(mr);return R?R[0]:""}const _e=/^[^\/()?;=#]+/,be=/^[^=?&#]+/,Et=/^[^&#]+/;class En{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ar([],{}):new ar([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let $={};return this.peekStartsWith("(")&&($=this.parseParens(!1)),(R.length>0||Object.keys(I).length>0)&&($[zt]=new ar(R,I)),$}parseSegment(){const R=lt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new T.vHH(4009,!1);return this.capture(R),new Ui(vi(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const I=function Ce(k){const R=k.match(_e);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let $="";if(this.consumeOptional("=")){const de=lt(this.remaining);de&&($=de,this.capture($))}R[vi(I)]=vi($)}parseQueryParam(R){const I=function Pe(k){const R=k.match(be);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let $="";if(this.consumeOptional("=")){const Ue=function Qt(k){const R=k.match(Et);return R?R[0]:""}(this.remaining);Ue&&($=Ue,this.capture($))}const de=Nr(I),Le=Nr($);if(R.hasOwnProperty(de)){let Ue=R[de];Array.isArray(Ue)||(Ue=[Ue],R[de]=Ue),Ue.push(Le)}else R[de]=Le}parseParens(R){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const $=lt(this.remaining),de=this.remaining[$.length];if("/"!==de&&")"!==de&&";"!==de)throw new T.vHH(4010,!1);let Le;$.indexOf(":")>-1?(Le=$.slice(0,$.indexOf(":")),this.capture(Le),this.capture(":")):R&&(Le=zt);const Ue=this.parseChildren();I[Le]=1===Object.keys(Ue).length?Ue[zt]:new ar([],Ue),this.consumeOptional("//")}return I}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new T.vHH(4011,!1)}}function ve(k){return k.segments.length>0?new ar([],{[zt]:k}):k}function ye(k){const R={};for(const $ of Object.keys(k.children)){const Le=ye(k.children[$]);if($===zt&&0===Le.segments.length&&Le.hasChildren())for(const[Ue,Mt]of Object.entries(Le.children))R[Ue]=Mt;else(Le.segments.length>0||Le.hasChildren())&&(R[$]=Le)}return function He(k){if(1===k.numberOfChildren&&k.children[zt]){const R=k.children[zt];return new ar(k.segments.concat(R.segments),R.children)}return k}(new ar(k.segments,R))}function Tt(k){return k instanceof Dr}function Xn(k){let R;const de=ve(function I(Le){const Ue={};for(const sn of Le.children){const er=I(sn);Ue[sn.outlet]=er}const Mt=new ar(Le.url,Ue);return Le===k&&(R=Mt),Mt}(k.root));return R??de}function Hr(k,R,I,$){let de=k;for(;de.parent;)de=de.parent;if(0===R.length)return Pt(de,de,de,I,$);const Le=function Jn(k){if("string"==typeof k[0]&&1===k.length&&"/"===k[0])return new On(!0,0,k);let R=0,I=!1;const $=k.reduce((de,Le,Ue)=>{if("object"==typeof Le&&null!=Le){if(Le.outlets){const Mt={};return Object.entries(Le.outlets).forEach(([sn,er])=>{Mt[sn]="string"==typeof er?er.split("/"):er}),[...de,{outlets:Mt}]}if(Le.segmentPath)return[...de,Le.segmentPath]}return"string"!=typeof Le?[...de,Le]:0===Ue?(Le.split("/").forEach((Mt,sn)=>{0==sn&&"."===Mt||(0==sn&&""===Mt?I=!0:".."===Mt?R++:""!=Mt&&de.push(Mt))}),de):[...de,Le]},[]);return new On(I,R,$)}(R);if(Le.toRoot())return Pt(de,de,new ar([],{}),I,$);const Ue=function Er(k,R,I){if(k.isAbsolute)return new fr(R,!0,0);if(!I)return new fr(R,!1,NaN);if(null===I.parent)return new fr(I,!0,0);const $=ui(k.commands[0])?0:1;return function ri(k,R,I){let $=k,de=R,Le=I;for(;Le>de;){if(Le-=de,$=$.parent,!$)throw new T.vHH(4005,!1);de=$.segments.length}return new fr($,!1,de-Le)}(I,I.segments.length-1+$,k.numberOfDoubleDots)}(Le,de,k),Mt=Ue.processChildren?gs(Ue.segmentGroup,Ue.index,Le.commands):di(Ue.segmentGroup,Ue.index,Le.commands);return Pt(de,Ue.segmentGroup,Mt,I,$)}function ui(k){return"object"==typeof k&&null!=k&&!k.outlets&&!k.segmentPath}function Ut(k){return"object"==typeof k&&null!=k&&k.outlets}function Pt(k,R,I,$,de){let Ue,Le={};$&&Object.entries($).forEach(([sn,er])=>{Le[sn]=Array.isArray(er)?er.map(jn=>`${jn}`):`${er}`}),Ue=k===R?I:nn(k,R,I);const Mt=ve(ye(Ue));return new Dr(Mt,Le,de)}function nn(k,R,I){const $={};return Object.entries(k.children).forEach(([de,Le])=>{$[de]=Le===R?I:nn(Le,R,I)}),new ar(k.segments,$)}class On{constructor(R,I,$){if(this.isAbsolute=R,this.numberOfDoubleDots=I,this.commands=$,R&&$.length>0&&ui($[0]))throw new T.vHH(4003,!1);const de=$.find(Ut);if(de&&de!==dr($))throw new T.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fr{constructor(R,I,$){this.segmentGroup=R,this.processChildren=I,this.index=$}}function di(k,R,I){if(k||(k=new ar([],{})),0===k.segments.length&&k.hasChildren())return gs(k,R,I);const $=function qs(k,R,I){let $=0,de=R;const Le={match:!1,pathIndex:0,commandIndex:0};for(;de<k.segments.length;){if($>=I.length)return Le;const Ue=k.segments[de],Mt=I[$];if(Ut(Mt))break;const sn=`${Mt}`,er=$<I.length-1?I[$+1]:null;if(de>0&&void 0===sn)break;if(sn&&er&&"object"==typeof er&&void 0===er.outlets){if(!cs(sn,er,Ue))return Le;$+=2}else{if(!cs(sn,{},Ue))return Le;$++}de++}return{match:!0,pathIndex:de,commandIndex:$}}(k,R,I),de=I.slice($.commandIndex);if($.match&&$.pathIndex<k.segments.length){const Le=new ar(k.segments.slice(0,$.pathIndex),{});return Le.children[zt]=new ar(k.segments.slice($.pathIndex),k.children),gs(Le,0,de)}return $.match&&0===de.length?new ar(k.segments,{}):$.match&&!k.hasChildren()?Lo(k,R,I):$.match?gs(k,0,de):Lo(k,R,I)}function gs(k,R,I){if(0===I.length)return new ar(k.segments,{});{const $=function pi(k){return Ut(k[0])?k[0].outlets:{[zt]:k}}(I),de={};if(!$[zt]&&k.children[zt]&&1===k.numberOfChildren&&0===k.children[zt].segments.length){const Le=gs(k.children[zt],R,I);return new ar(k.segments,Le.children)}return Object.entries($).forEach(([Le,Ue])=>{"string"==typeof Ue&&(Ue=[Ue]),null!==Ue&&(de[Le]=di(k.children[Le],R,Ue))}),Object.entries(k.children).forEach(([Le,Ue])=>{void 0===$[Le]&&(de[Le]=Ue)}),new ar(k.segments,de)}}function Lo(k,R,I){const $=k.segments.slice(0,R);let de=0;for(;de<I.length;){const Le=I[de];if(Ut(Le)){const sn=si(Le.outlets);return new ar($,sn)}if(0===de&&ui(I[0])){$.push(new Ui(k.segments[R].path,$o(I[0]))),de++;continue}const Ue=Ut(Le)?Le.outlets[zt]:`${Le}`,Mt=de<I.length-1?I[de+1]:null;Ue&&Mt&&ui(Mt)?($.push(new Ui(Ue,$o(Mt))),de+=2):($.push(new Ui(Ue,{})),de++)}return new ar($,{})}function si(k){const R={};return Object.entries(k).forEach(([I,$])=>{"string"==typeof $&&($=[$]),null!==$&&(R[I]=Lo(new ar([],{}),0,$))}),R}function $o(k){const R={};return Object.entries(k).forEach(([I,$])=>R[I]=`${$}`),R}function cs(k,R,I){return k==I.path&&ir(R,I.parameters)}const Go="imperative";class ms{constructor(R,I){this.id=R,this.url=I}}class _i extends ms{constructor(R,I,$="imperative",de=null){super(R,I),this.type=0,this.navigationTrigger=$,this.restoredState=de}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hi extends ms{constructor(R,I,$){super(R,I),this.urlAfterRedirects=$,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class to extends ms{constructor(R,I,$,de){super(R,I),this.reason=$,this.code=de,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ks extends ms{constructor(R,I,$,de){super(R,I),this.reason=$,this.code=de,this.type=16}}class wa extends ms{constructor(R,I,$,de){super(R,I),this.error=$,this.target=de,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Da extends ms{constructor(R,I,$,de){super(R,I),this.urlAfterRedirects=$,this.state=de,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class no extends ms{constructor(R,I,$,de){super(R,I),this.urlAfterRedirects=$,this.state=de,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bs extends ms{constructor(R,I,$,de,Le){super(R,I),this.urlAfterRedirects=$,this.state=de,this.shouldActivate=Le,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ia extends ms{constructor(R,I,$,de){super(R,I),this.urlAfterRedirects=$,this.state=de,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bu extends ms{constructor(R,I,$,de){super(R,I),this.urlAfterRedirects=$,this.state=de,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rs{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xa{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xi{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class du{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class As{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ds{constructor(R,I,$){this.routerEvent=R,this.position=I,this.anchor=$,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Fo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ss,this.attachRef=null}}let ss=(()=>{class k{constructor(){this.contexts=new Map}onChildOutletCreated(I,$){const de=this.getOrCreateContext(I);de.outlet=$,this.contexts.set(I,de)}onChildOutletDestroyed(I){const $=this.getContext(I);$&&($.outlet=null,$.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let $=this.getContext(I);return $||($=new Fo,this.contexts.set(I,$)),$}getContext(I){return this.contexts.get(I)||null}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();class Zs{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const I=this.pathFromRoot(R);return I.length>1?I[I.length-2]:null}children(R){const I=bt(R,this._root);return I?I.children.map($=>$.value):[]}firstChild(R){const I=bt(R,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(R){const I=vt(R,this._root);return I.length<2?[]:I[I.length-2].children.map(de=>de.value).filter(de=>de!==R)}pathFromRoot(R){return vt(R,this._root).map(I=>I.value)}}function bt(k,R){if(k===R.value)return R;for(const I of R.children){const $=bt(k,I);if($)return $}return null}function vt(k,R){if(k===R.value)return[R];for(const I of R.children){const $=vt(k,I);if($.length)return $.unshift(R),$}return[]}class Ot{constructor(R,I){this.value=R,this.children=I}toString(){return`TreeNode(${this.value})`}}function xt(k){const R={};return k&&k.children.forEach(I=>R[I.value.outlet]=I),R}class un extends Zs{constructor(R,I){super(R),this.snapshot=I,Fi(this,R)}toString(){return this.snapshot.toString()}}function Jt(k,R){const I=function Dn(k,R){const Ue=new vs([],{},{},"",{},zt,R,null,{});return new hs("",new Ot(Ue,[]))}(0,R),$=new Qe.X([new Ui("",{})]),de=new Qe.X({}),Le=new Qe.X({}),Ue=new Qe.X({}),Mt=new Qe.X(""),sn=new Kn($,de,Ue,Mt,Le,zt,R,I.root);return sn.snapshot=I.root,new un(new Ot(sn,[]),I)}class Kn{constructor(R,I,$,de,Le,Ue,Mt,sn){this.urlSubject=R,this.paramsSubject=I,this.queryParamsSubject=$,this.fragmentSubject=de,this.dataSubject=Le,this.outlet=Ue,this.component=Mt,this._futureSnapshot=sn,this.title=this.dataSubject?.pipe((0,Te.U)(er=>er[In]))??(0,Ne.of)(void 0),this.url=R,this.params=I,this.queryParams=$,this.fragment=de,this.data=Le}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Te.U)(R=>xn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Te.U)(R=>xn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mr(k,R="emptyOnly"){const I=k.pathFromRoot;let $=0;if("always"!==R)for($=I.length-1;$>=1;){const de=I[$],Le=I[$-1];if(de.routeConfig&&""===de.routeConfig.path)$--;else{if(Le.component)break;$--}}return function Ys(k){return k.reduce((R,I)=>({params:{...R.params,...I.params},data:{...R.data,...I.data},resolve:{...I.data,...R.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice($))}class vs{get title(){return this.data?.[In]}constructor(R,I,$,de,Le,Ue,Mt,sn,er){this.url=R,this.params=I,this.queryParams=$,this.fragment=de,this.data=Le,this.outlet=Ue,this.component=Mt,this.routeConfig=sn,this._resolve=er}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map($=>$.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hs extends Zs{constructor(R,I){super(I),this.url=R,Fi(this,I)}toString(){return ys(this._root)}}function Fi(k,R){R.value._routerState=k,R.children.forEach(I=>Fi(k,I))}function ys(k){const R=k.children.length>0?` { ${k.children.map(ys).join(", ")} } `:"";return`${k.value}${R}`}function Us(k){if(k.snapshot){const R=k.snapshot,I=k._futureSnapshot;k.snapshot=I,ir(R.queryParams,I.queryParams)||k.queryParamsSubject.next(I.queryParams),R.fragment!==I.fragment&&k.fragmentSubject.next(I.fragment),ir(R.params,I.params)||k.paramsSubject.next(I.params),function Gn(k,R){if(k.length!==R.length)return!1;for(let I=0;I<k.length;++I)if(!ir(k[I],R[I]))return!1;return!0}(R.url,I.url)||k.urlSubject.next(I.url),ir(R.data,I.data)||k.dataSubject.next(I.data)}else k.snapshot=k._futureSnapshot,k.dataSubject.next(k._futureSnapshot.data)}function kr(k,R){const I=ir(k.params,R.params)&&function Kr(k,R){return fi(k,R)&&k.every((I,$)=>ir(I.parameters,R[$].parameters))}(k.url,R.url);return I&&!(!k.parent!=!R.parent)&&(!k.parent||kr(k.parent,R.parent))}let jr=(()=>{class k{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.parentContexts=(0,T.f3M)(ss),this.location=(0,T.f3M)(T.s_b),this.changeDetector=(0,T.f3M)(T.sBO),this.environmentInjector=(0,T.f3M)(T.lqb),this.inputBinder=(0,T.f3M)(Es,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:$,previousValue:de}=I.name;if($)return;this.isTrackedInParentContexts(de)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(de)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,$){this.activated=I,this._activatedRoute=$,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,$){if(this.isActivated)throw new T.vHH(4013,!1);this._activatedRoute=I;const de=this.location,Ue=I.snapshot.component,Mt=this.parentContexts.getOrCreateContext(this.name).children,sn=new eu(I,Mt,de.injector);this.activated=de.createComponent(Ue,{index:de.length,injector:sn,environmentInjector:$??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275dir=T.lG2({type:k,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.TTD]}),k})();class eu{constructor(R,I,$){this.route=R,this.childContexts=I,this.parent=$}get(R,I){return R===Kn?this.route:R===ss?this.childContexts:this.parent.get(R,I)}}const Es=new T.OlP("");let Hi=(()=>{class k{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:$}=I,de=(0,at.a)([$.queryParams,$.params,$.data]).pipe((0,Ae.w)(([Le,Ue,Mt],sn)=>(Mt={...Le,...Ue,...Mt},0===sn?(0,Ne.of)(Mt):Promise.resolve(Mt)))).subscribe(Le=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==$||null===$.component)return void this.unsubscribeFromRouteData(I);const Ue=(0,T.qFp)($.component);if(Ue)for(const{templateName:Mt}of Ue.inputs)I.activatedComponentRef.setInput(Mt,Le[Mt]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,de)}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})();function ro(k,R,I){if(I&&k.shouldReuseRoute(R.value,I.value.snapshot)){const $=I.value;$._futureSnapshot=R.value;const de=function go(k,R,I){return R.children.map($=>{for(const de of I.children)if(k.shouldReuseRoute($.value,de.value.snapshot))return ro(k,$,de);return ro(k,$)})}(k,R,I);return new Ot($,de)}{if(k.shouldAttach(R.value)){const Le=k.retrieve(R.value);if(null!==Le){const Ue=Le.route;return Ue.value._futureSnapshot=R.value,Ue.children=R.children.map(Mt=>ro(k,Mt)),Ue}}const $=function ca(k){return new Kn(new Qe.X(k.url),new Qe.X(k.params),new Qe.X(k.queryParams),new Qe.X(k.fragment),new Qe.X(k.data),k.outlet,k.component,k)}(R.value),de=R.children.map(Le=>ro(k,Le));return new Ot($,de)}}const Uu="ngNavigationCancelingError";function Vs(k,R){const{redirectTo:I,navigationBehaviorOptions:$}=Tt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,de=Ti(!1,0,R);return de.url=I,de.navigationBehaviorOptions=$,de}function Ti(k,R,I){const $=new Error("NavigationCancelingError: "+(k||""));return $[Uu]=!0,$.cancellationCode=R,I&&($.url=I),$}function Aa(k){return jo(k)&&Tt(k.url)}function jo(k){return k&&k[Uu]}let $r=(()=>{class k{}return k.\u0275fac=function(I){return new(I||k)},k.\u0275cmp=T.Xpm({type:k,selectors:[["ng-component"]],standalone:!0,features:[T.jDz],decls:1,vars:0,template:function(I,$){1&I&&T._UZ(0,"router-outlet")},dependencies:[jr],encapsulation:2}),k})();function Lr(k){const R=k.children&&k.children.map(Lr),I=R?{...k,children:R}:{...k};return!I.component&&!I.loadComponent&&(R||I.loadChildren)&&I.outlet&&I.outlet!==zt&&(I.component=$r),I}function Ei(k){return k.outlet||zt}function Ji(k){if(!k)return null;if(k.routeConfig?._injector)return k.routeConfig._injector;for(let R=k.parent;R;R=R.parent){const I=R.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class xi{constructor(R,I,$,de,Le){this.routeReuseStrategy=R,this.futureState=I,this.currState=$,this.forwardEvent=de,this.inputBindingEnabled=Le}activate(R){const I=this.futureState._root,$=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,$,R),Us(this.futureState.root),this.activateChildRoutes(I,$,R)}deactivateChildRoutes(R,I,$){const de=xt(I);R.children.forEach(Le=>{const Ue=Le.value.outlet;this.deactivateRoutes(Le,de[Ue],$),delete de[Ue]}),Object.values(de).forEach(Le=>{this.deactivateRouteAndItsChildren(Le,$)})}deactivateRoutes(R,I,$){const de=R.value,Le=I?I.value:null;if(de===Le)if(de.component){const Ue=$.getContext(de.outlet);Ue&&this.deactivateChildRoutes(R,I,Ue.children)}else this.deactivateChildRoutes(R,I,$);else Le&&this.deactivateRouteAndItsChildren(I,$)}deactivateRouteAndItsChildren(R,I){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,I):this.deactivateRouteAndOutlet(R,I)}detachAndStoreRouteSubtree(R,I){const $=I.getContext(R.value.outlet),de=$&&R.value.component?$.children:I,Le=xt(R);for(const Ue of Object.keys(Le))this.deactivateRouteAndItsChildren(Le[Ue],de);if($&&$.outlet){const Ue=$.outlet.detach(),Mt=$.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Ue,route:R,contexts:Mt})}}deactivateRouteAndOutlet(R,I){const $=I.getContext(R.value.outlet),de=$&&R.value.component?$.children:I,Le=xt(R);for(const Ue of Object.keys(Le))this.deactivateRouteAndItsChildren(Le[Ue],de);$&&($.outlet&&($.outlet.deactivate(),$.children.onOutletDeactivated()),$.attachRef=null,$.route=null)}activateChildRoutes(R,I,$){const de=xt(I);R.children.forEach(Le=>{this.activateRoutes(Le,de[Le.value.outlet],$),this.forwardEvent(new Ir(Le.value.snapshot))}),R.children.length&&this.forwardEvent(new du(R.value.snapshot))}activateRoutes(R,I,$){const de=R.value,Le=I?I.value:null;if(Us(de),de===Le)if(de.component){const Ue=$.getOrCreateContext(de.outlet);this.activateChildRoutes(R,I,Ue.children)}else this.activateChildRoutes(R,I,$);else if(de.component){const Ue=$.getOrCreateContext(de.outlet);if(this.routeReuseStrategy.shouldAttach(de.snapshot)){const Mt=this.routeReuseStrategy.retrieve(de.snapshot);this.routeReuseStrategy.store(de.snapshot,null),Ue.children.onOutletReAttached(Mt.contexts),Ue.attachRef=Mt.componentRef,Ue.route=Mt.route.value,Ue.outlet&&Ue.outlet.attach(Mt.componentRef,Mt.route.value),Us(Mt.route.value),this.activateChildRoutes(R,null,Ue.children)}else{const Mt=Ji(de.snapshot);Ue.attachRef=null,Ue.route=de,Ue.injector=Mt,Ue.outlet&&Ue.outlet.activateWith(de,Ue.injector),this.activateChildRoutes(R,null,Ue.children)}}else this.activateChildRoutes(R,null,$)}}class Ai{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class hu{constructor(R,I){this.component=R,this.route=I}}function Vu(k,R,I){const $=k._root;return Ka($,R?R._root:null,I,[$.value])}function Ma(k,R){const I=Symbol(),$=R.get(k,I);return $===I?"function"!=typeof k||(0,T.Z0I)(k)?R.get(k):k:$}function Ka(k,R,I,$,de={canDeactivateChecks:[],canActivateChecks:[]}){const Le=xt(R);return k.children.forEach(Ue=>{(function ul(k,R,I,$,de={canDeactivateChecks:[],canActivateChecks:[]}){const Le=k.value,Ue=R?R.value:null,Mt=I?I.getContext(k.value.outlet):null;if(Ue&&Le.routeConfig===Ue.routeConfig){const sn=function Uo(k,R,I){if("function"==typeof I)return I(k,R);switch(I){case"pathParamsChange":return!fi(k.url,R.url);case"pathParamsOrQueryParamsChange":return!fi(k.url,R.url)||!ir(k.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kr(k,R)||!ir(k.queryParams,R.queryParams);default:return!kr(k,R)}}(Ue,Le,Le.routeConfig.runGuardsAndResolvers);sn?de.canActivateChecks.push(new Ai($)):(Le.data=Ue.data,Le._resolvedData=Ue._resolvedData),Ka(k,R,Le.component?Mt?Mt.children:null:I,$,de),sn&&Mt&&Mt.outlet&&Mt.outlet.isActivated&&de.canDeactivateChecks.push(new hu(Mt.outlet.component,Ue))}else Ue&&ka(R,Mt,de),de.canActivateChecks.push(new Ai($)),Ka(k,null,Le.component?Mt?Mt.children:null:I,$,de)})(Ue,Le[Ue.value.outlet],I,$.concat([Ue.value]),de),delete Le[Ue.value.outlet]}),Object.entries(Le).forEach(([Ue,Mt])=>ka(Mt,I.getContext(Ue),de)),de}function ka(k,R,I){const $=xt(k),de=k.value;Object.entries($).forEach(([Le,Ue])=>{ka(Ue,de.component?R?R.children.getContext(Le):null:R,I)}),I.canDeactivateChecks.push(new hu(de.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,de))}function Pa(k){return"function"==typeof k}function Oe(k){return k instanceof ut.K||"EmptyError"===k?.name}const qt=Symbol("INITIAL_VALUE");function J(){return(0,Ae.w)(k=>(0,at.a)(k.map(R=>R.pipe((0,gt.q)(1),(0,Y.O)(qt)))).pipe((0,Te.U)(R=>{for(const I of R)if(!0!==I){if(I===qt)return qt;if(!1===I||I instanceof Dr)return I}return!0}),(0,oe.h)(R=>R!==qt),(0,gt.q)(1)))}function Zr(k){return(0,kt.z)((0,Gt.b)(R=>{if(Tt(R))throw Vs(0,R)}),(0,Te.U)(R=>!0===R))}class zr{constructor(R){this.segmentGroup=R||null}}class Mi{constructor(R){this.urlTree=R}}function Ln(k){return ge(new zr(k))}function $i(k){return ge(new Mi(k))}class Gs{constructor(R,I){this.urlSerializer=R,this.urlTree=I}noMatchError(R){return new T.vHH(4002,!1)}lineralizeSegments(R,I){let $=[],de=I.root;for(;;){if($=$.concat(de.segments),0===de.numberOfChildren)return(0,Ne.of)($);if(de.numberOfChildren>1||!de.children[zt])return ge(new T.vHH(4e3,!1));de=de.children[zt]}}applyRedirectCommands(R,I,$){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),R,$)}applyRedirectCreateUrlTree(R,I,$,de){const Le=this.createSegmentGroup(R,I.root,$,de);return new Dr(Le,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(R,I){const $={};return Object.entries(R).forEach(([de,Le])=>{if("string"==typeof Le&&Le.startsWith(":")){const Mt=Le.substring(1);$[de]=I[Mt]}else $[de]=Le}),$}createSegmentGroup(R,I,$,de){const Le=this.createSegments(R,I.segments,$,de);let Ue={};return Object.entries(I.children).forEach(([Mt,sn])=>{Ue[Mt]=this.createSegmentGroup(R,sn,$,de)}),new ar(Le,Ue)}createSegments(R,I,$,de){return I.map(Le=>Le.path.startsWith(":")?this.findPosParam(R,Le,de):this.findOrReturn(Le,$))}findPosParam(R,I,$){const de=$[I.path.substring(1)];if(!de)throw new T.vHH(4001,!1);return de}findOrReturn(R,I){let $=0;for(const de of I){if(de.path===R.path)return I.splice($),de;$++}return R}}const Gi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yr(k,R,I,$,de){const Le=zs(k,R,I);return Le.matched?($=function bi(k,R){return k.providers&&!k._injector&&(k._injector=(0,T.MMx)(k.providers,R,`Route: ${k.path}`)),k._injector??R}(R,$),function ii(k,R,I,$){const de=R.canMatch;if(!de||0===de.length)return(0,Ne.of)(!0);const Le=de.map(Ue=>{const Mt=Ma(Ue,k);return xr(function ie(k){return k&&Pa(k.canMatch)}(Mt)?Mt.canMatch(R,I):k.runInContext(()=>Mt(R,I)))});return(0,Ne.of)(Le).pipe(J(),Zr())}($,R,I).pipe((0,Te.U)(Ue=>!0===Ue?Le:{...Gi}))):(0,Ne.of)(Le)}function zs(k,R,I){if(""===R.path)return"full"===R.pathMatch&&(k.hasChildren()||I.length>0)?{...Gi}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const de=(R.matcher||$n)(I,k,R);if(!de)return{...Gi};const Le={};Object.entries(de.posParams??{}).forEach(([Mt,sn])=>{Le[Mt]=sn.path});const Ue=de.consumed.length>0?{...Le,...de.consumed[de.consumed.length-1].parameters}:Le;return{matched:!0,consumedSegments:de.consumed,remainingSegments:I.slice(de.consumed.length),parameters:Ue,positionalParamSegments:de.posParams??{}}}function vo(k,R,I,$){return I.length>0&&function pa(k,R,I){return I.some($=>Hu(k,R,$)&&Ei($)!==zt)}(k,I,$)?{segmentGroup:new ar(R,es($,new ar(I,k.children))),slicedSegments:[]}:0===I.length&&function yo(k,R,I){return I.some($=>Hu(k,R,$))}(k,I,$)?{segmentGroup:new ar(k.segments,Wo(k,0,I,$,k.children)),slicedSegments:I}:{segmentGroup:new ar(k.segments,k.children),slicedSegments:I}}function Wo(k,R,I,$,de){const Le={};for(const Ue of $)if(Hu(k,I,Ue)&&!de[Ei(Ue)]){const Mt=new ar([],{});Le[Ei(Ue)]=Mt}return{...de,...Le}}function es(k,R){const I={};I[zt]=R;for(const $ of k)if(""===$.path&&Ei($)!==zt){const de=new ar([],{});I[Ei($)]=de}return I}function Hu(k,R,I){return(!(k.hasChildren()||R.length>0)||"full"!==I.pathMatch)&&""===I.path}class Eu{constructor(R,I,$,de,Le,Ue,Mt){this.injector=R,this.configLoader=I,this.rootComponentType=$,this.config=de,this.urlTree=Le,this.paramsInheritanceStrategy=Ue,this.urlSerializer=Mt,this.allowRedirects=!0,this.applyRedirects=new Gs(this.urlSerializer,this.urlTree)}noMatchError(R){return new T.vHH(4002,!1)}recognize(){const R=vo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,zt).pipe(Xt(I=>{if(I instanceof Mi)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof zr?this.noMatchError(I):I}),(0,Te.U)(I=>{const $=new vs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,{}),de=new Ot($,I),Le=new hs("",de),Ue=function ln(k,R,I=null,$=null){return Hr(Xn(k),R,I,$)}($,[],this.urlTree.queryParams,this.urlTree.fragment);return Ue.queryParams=this.urlTree.queryParams,Le.url=this.urlSerializer.serialize(Ue),this.inheritParamsAndData(Le._root),{state:Le,tree:Ue}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R.root,zt).pipe(Xt($=>{throw $ instanceof zr?this.noMatchError($):$}))}inheritParamsAndData(R){const I=R.value,$=Mr(I,this.paramsInheritanceStrategy);I.params=Object.freeze($.params),I.data=Object.freeze($.data),R.children.forEach(de=>this.inheritParamsAndData(de))}processSegmentGroup(R,I,$,de){return 0===$.segments.length&&$.hasChildren()?this.processChildren(R,I,$):this.processSegment(R,I,$,$.segments,de,!0)}processChildren(R,I,$){const de=[];for(const Le of Object.keys($.children))"primary"===Le?de.unshift(Le):de.push(Le);return(0,Re.D)(de).pipe(Ht(Le=>{const Ue=$.children[Le],Mt=function mo(k,R){const I=k.filter($=>Ei($)===R);return I.push(...k.filter($=>Ei($)!==R)),I}(I,Le);return this.processSegmentGroup(R,Mt,Ue,Le)}),(0,pn.R)((Le,Ue)=>(Le.push(...Ue),Le)),(0,Zt.d)(null),function ot(k,R){const I=arguments.length>=2;return $=>$.pipe(k?(0,oe.h)((de,Le)=>k(de,Le,$)):Xe.y,Yt(1),I?(0,Zt.d)(R):(0,qe.T)(()=>new ut.K))}(),(0,Fe.z)(Le=>{if(null===Le)return Ln($);const Ue=io(Le);return function ll(k){k.sort((R,I)=>R.value.outlet===zt?-1:I.value.outlet===zt?1:R.value.outlet.localeCompare(I.value.outlet))}(Ue),(0,Ne.of)(Ue)}))}processSegment(R,I,$,de,Le,Ue){return(0,Re.D)(I).pipe(Ht(Mt=>this.processSegmentAgainstRoute(Mt._injector??R,I,Mt,$,de,Le,Ue).pipe(Xt(sn=>{if(sn instanceof zr)return(0,Ne.of)(null);throw sn}))),(0,At.P)(Mt=>!!Mt),Xt(Mt=>{if(Oe(Mt))return function ga(k,R,I){return 0===R.length&&!k.children[I]}($,de,Le)?(0,Ne.of)([]):Ln($);throw Mt}))}processSegmentAgainstRoute(R,I,$,de,Le,Ue,Mt){return function Ql(k,R,I,$){return!!(Ei(k)===$||$!==zt&&Hu(R,I,k))&&("**"===k.path||zs(R,k,I).matched)}($,de,Le,Ue)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(R,de,$,Le,Ue,Mt):Mt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,de,I,$,Le,Ue):Ln(de):Ln(de)}expandSegmentAgainstRouteUsingRedirect(R,I,$,de,Le,Ue){return"**"===de.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,$,de,Ue):this.expandRegularSegmentAgainstRouteUsingRedirect(R,I,$,de,Le,Ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,I,$,de){const Le=this.applyRedirects.applyRedirectCommands([],$.redirectTo,{});return $.redirectTo.startsWith("/")?$i(Le):this.applyRedirects.lineralizeSegments($,Le).pipe((0,Fe.z)(Ue=>{const Mt=new ar(Ue,{});return this.processSegment(R,I,Mt,Ue,de,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,I,$,de,Le,Ue){const{matched:Mt,consumedSegments:sn,remainingSegments:er,positionalParamSegments:jn}=zs(I,de,Le);if(!Mt)return Ln(I);const Li=this.applyRedirects.applyRedirectCommands(sn,de.redirectTo,jn);return de.redirectTo.startsWith("/")?$i(Li):this.applyRedirects.lineralizeSegments(de,Li).pipe((0,Fe.z)(Vo=>this.processSegment(R,$,I,Vo.concat(er),Ue,!1)))}matchSegmentAgainstRoute(R,I,$,de,Le,Ue){let Mt;if("**"===$.path){const sn=de.length>0?dr(de).parameters:{},er=new vs(de,sn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cu($),Ei($),$.component??$._loadedComponent??null,$,Su($));Mt=(0,Ne.of)({snapshot:er,consumedSegments:[],remainingSegments:[]}),I.children={}}else Mt=Yr(I,$,de,R).pipe((0,Te.U)(({matched:sn,consumedSegments:er,remainingSegments:jn,parameters:Li})=>sn?{snapshot:new vs(er,Li,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cu($),Ei($),$.component??$._loadedComponent??null,$,Su($)),consumedSegments:er,remainingSegments:jn}:null));return Mt.pipe((0,Ae.w)(sn=>null===sn?Ln(I):this.getChildConfig(R=$._injector??R,$,de).pipe((0,Ae.w)(({routes:er})=>{const jn=$._loadedInjector??R,{snapshot:Li,consumedSegments:Vo,remainingSegments:Ta}=sn,{segmentGroup:gu,slicedSegments:Je}=vo(I,Vo,Ta,er);if(0===Je.length&&gu.hasChildren())return this.processChildren(jn,er,gu).pipe((0,Te.U)(Ls=>null===Ls?null:[new Ot(Li,Ls)]));if(0===er.length&&0===Je.length)return(0,Ne.of)([new Ot(Li,[])]);const Al=Ei($)===Le;return this.processSegment(jn,er,gu,Je,Al?zt:Le,!0).pipe((0,Te.U)(Ls=>[new Ot(Li,Ls)]))}))))}getChildConfig(R,I,$){return I.children?(0,Ne.of)({routes:I.children,injector:R}):I.loadChildren?void 0!==I._loadedRoutes?(0,Ne.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function pr(k,R,I,$){const de=R.canLoad;if(void 0===de||0===de.length)return(0,Ne.of)(!0);const Le=de.map(Ue=>{const Mt=Ma(Ue,k);return xr(function pu(k){return k&&Pa(k.canLoad)}(Mt)?Mt.canLoad(R,I):k.runInContext(()=>Mt(R,I)))});return(0,Ne.of)(Le).pipe(J(),Zr())}(R,I,$).pipe((0,Fe.z)(de=>de?this.configLoader.loadChildren(R,I).pipe((0,Gt.b)(Le=>{I._loadedRoutes=Le.routes,I._loadedInjector=Le.injector})):function $s(k){return ge(Ti(!1,3))}())):(0,Ne.of)({routes:[],injector:R})}}function Oa(k){const R=k.value.routeConfig;return R&&""===R.path}function io(k){const R=[],I=new Set;for(const $ of k){if(!Oa($)){R.push($);continue}const de=R.find(Le=>$.value.routeConfig===Le.value.routeConfig);void 0!==de?(de.children.push(...$.children),I.add(de)):R.push($)}for(const $ of I){const de=io($.children);R.push(new Ot($.value,de))}return R.filter($=>!I.has($))}function Cu(k){return k.data||{}}function Su(k){return k.resolve||{}}function Jl(k){return"string"==typeof k.title||null===k.title}function Qr(k){return(0,Ae.w)(R=>{const I=k(R);return I?(0,Re.D)(I).pipe((0,Te.U)(()=>R)):(0,Ne.of)(R)})}const ta=new T.OlP("ROUTES");let L=(()=>{class k{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.f3M)(T.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,Ne.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const $=xr(I.loadComponent()).pipe((0,Te.U)(K),(0,Gt.b)(Le=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=Le}),It(()=>{this.componentLoaders.delete(I)})),de=new W($,()=>new te.x).pipe(Ke());return this.componentLoaders.set(I,de),de}loadChildren(I,$){if(this.childrenLoaders.get($))return this.childrenLoaders.get($);if($._loadedRoutes)return(0,Ne.of)({routes:$._loadedRoutes,injector:$._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener($);const Le=this.loadModuleFactoryOrRoutes($.loadChildren).pipe((0,Te.U)(Mt=>{this.onLoadEndListener&&this.onLoadEndListener($);let sn,er;return Array.isArray(Mt)?er=Mt:(sn=Mt.create(I).injector,er=sn.get(ta,[],T.XFs.Self|T.XFs.Optional).flat()),{routes:er.map(Lr),injector:sn}}),It(()=>{this.childrenLoaders.delete($)})),Ue=new W(Le,()=>new te.x).pipe(Ke());return this.childrenLoaders.set($,Ue),Ue}loadModuleFactoryOrRoutes(I){return xr(I()).pipe((0,Te.U)(K),(0,Fe.z)($=>$ instanceof T.YKP||Array.isArray($)?(0,Ne.of)($):(0,Re.D)(this.compiler.compileModuleAsync($))))}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function K(k){return function ce(k){return k&&"object"==typeof k&&"default"in k}(k)?k.default:k}let Se=(()=>{class k{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new te.x,this.configLoader=(0,T.f3M)(L),this.environmentInjector=(0,T.f3M)(T.lqb),this.urlSerializer=(0,T.f3M)(Fr),this.rootContexts=(0,T.f3M)(ss),this.inputBindingEnabled=null!==(0,T.f3M)(Es,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ne.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=de=>this.events.next(new xa(de)),this.configLoader.onLoadStartListener=de=>this.events.next(new Rs(de))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const $=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:$})}setupNavigations(I){return this.transitions=new Qe.X({id:0,currentUrlTree:I.currentUrlTree,currentRawUrl:I.currentUrlTree,extractedUrl:I.urlHandlingStrategy.extract(I.currentUrlTree),urlAfterRedirects:I.urlHandlingStrategy.extract(I.currentUrlTree),rawUrl:I.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Go,restoredState:null,currentSnapshot:I.routerState.snapshot,targetSnapshot:null,currentRouterState:I.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,oe.h)($=>0!==$.id),(0,Te.U)($=>({...$,extractedUrl:I.urlHandlingStrategy.extract($.rawUrl)})),(0,Ae.w)($=>{let de=!1,Le=!1;return(0,Ne.of)($).pipe((0,Gt.b)(Ue=>{this.currentNavigation={id:Ue.id,initialUrl:Ue.rawUrl,extractedUrl:Ue.extractedUrl,trigger:Ue.source,extras:Ue.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ae.w)(Ue=>{const Mt=I.browserUrlTree.toString(),sn=!I.navigated||Ue.extractedUrl.toString()!==Mt||Mt!==I.currentUrlTree.toString();if(!sn&&"reload"!==(Ue.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const jn="";return this.events.next(new Ks(Ue.id,I.serializeUrl($.rawUrl),jn,0)),I.rawUrlTree=Ue.rawUrl,Ue.resolve(null),St.E}if(I.urlHandlingStrategy.shouldProcessUrl(Ue.rawUrl))return it(Ue.source)&&(I.browserUrlTree=Ue.extractedUrl),(0,Ne.of)(Ue).pipe((0,Ae.w)(jn=>{const Li=this.transitions?.getValue();return this.events.next(new _i(jn.id,this.urlSerializer.serialize(jn.extractedUrl),jn.source,jn.restoredState)),Li!==this.transitions?.getValue()?St.E:Promise.resolve(jn)}),function Xl(k,R,I,$,de,Le){return(0,Fe.z)(Ue=>function $u(k,R,I,$,de,Le,Ue="emptyOnly"){return new Eu(k,R,I,$,de,Ue,Le).recognize()}(k,R,I,$,Ue.extractedUrl,de,Le).pipe((0,Te.U)(({state:Mt,tree:sn})=>({...Ue,targetSnapshot:Mt,urlAfterRedirects:sn}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Gt.b)(jn=>{if($.targetSnapshot=jn.targetSnapshot,$.urlAfterRedirects=jn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:jn.urlAfterRedirects},"eager"===I.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const Vo=I.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);I.setBrowserUrl(Vo,jn)}I.browserUrlTree=jn.urlAfterRedirects}const Li=new Da(jn.id,this.urlSerializer.serialize(jn.extractedUrl),this.urlSerializer.serialize(jn.urlAfterRedirects),jn.targetSnapshot);this.events.next(Li)}));if(sn&&I.urlHandlingStrategy.shouldProcessUrl(I.rawUrlTree)){const{id:jn,extractedUrl:Li,source:Vo,restoredState:Ta,extras:gu}=Ue,Je=new _i(jn,this.urlSerializer.serialize(Li),Vo,Ta);this.events.next(Je);const Al=Jt(0,this.rootComponentType).snapshot;return $={...Ue,targetSnapshot:Al,urlAfterRedirects:Li,extras:{...gu,skipLocationChange:!1,replaceUrl:!1}},(0,Ne.of)($)}{const jn="";return this.events.next(new Ks(Ue.id,I.serializeUrl($.extractedUrl),jn,1)),I.rawUrlTree=Ue.rawUrl,Ue.resolve(null),St.E}}),(0,Gt.b)(Ue=>{const Mt=new no(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot);this.events.next(Mt)}),(0,Te.U)(Ue=>$={...Ue,guards:Vu(Ue.targetSnapshot,Ue.currentSnapshot,this.rootContexts)}),function ne(k,R){return(0,Fe.z)(I=>{const{targetSnapshot:$,currentSnapshot:de,guards:{canActivateChecks:Le,canDeactivateChecks:Ue}}=I;return 0===Ue.length&&0===Le.length?(0,Ne.of)({...I,guardsResult:!0}):function Me(k,R,I,$){return(0,Re.D)(k).pipe((0,Fe.z)(de=>function Wn(k,R,I,$,de){const Le=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!Le||0===Le.length)return(0,Ne.of)(!0);const Ue=Le.map(Mt=>{const sn=Ji(R)??de,er=Ma(Mt,sn);return xr(function Za(k){return k&&Pa(k.canDeactivate)}(er)?er.canDeactivate(k,R,I,$):sn.runInContext(()=>er(k,R,I,$))).pipe((0,At.P)())});return(0,Ne.of)(Ue).pipe(J())}(de.component,de.route,I,R,$)),(0,At.P)(de=>!0!==de,!0))}(Ue,$,de,k).pipe((0,Fe.z)(Mt=>Mt&&function nu(k){return"boolean"==typeof k}(Mt)?function tt(k,R,I,$){return(0,Re.D)(R).pipe(Ht(de=>(0,xe.z)(function Vt(k,R){return null!==k&&R&&R(new Xi(k)),(0,Ne.of)(!0)}(de.route.parent,$),function mt(k,R){return null!==k&&R&&R(new As(k)),(0,Ne.of)(!0)}(de.route,$),function Yn(k,R,I){const $=R[R.length-1],Le=R.slice(0,R.length-1).reverse().map(Ue=>function fu(k){const R=k.routeConfig?k.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:k,guards:R}:null}(Ue)).filter(Ue=>null!==Ue).map(Ue=>$e(()=>{const Mt=Ue.guards.map(sn=>{const er=Ji(Ue.node)??I,jn=Ma(sn,er);return xr(function fa(k){return k&&Pa(k.canActivateChild)}(jn)?jn.canActivateChild($,k):er.runInContext(()=>jn($,k))).pipe((0,At.P)())});return(0,Ne.of)(Mt).pipe(J())}));return(0,Ne.of)(Le).pipe(J())}(k,de.path,I),function fn(k,R,I){const $=R.routeConfig?R.routeConfig.canActivate:null;if(!$||0===$.length)return(0,Ne.of)(!0);const de=$.map(Le=>$e(()=>{const Ue=Ji(R)??I,Mt=Ma(Le,Ue);return xr(function lo(k){return k&&Pa(k.canActivate)}(Mt)?Mt.canActivate(R,k):Ue.runInContext(()=>Mt(R,k))).pipe((0,At.P)())}));return(0,Ne.of)(de).pipe(J())}(k,de.route,I))),(0,At.P)(de=>!0!==de,!0))}($,Le,k,R):(0,Ne.of)(Mt)),(0,Te.U)(Mt=>({...I,guardsResult:Mt})))})}(this.environmentInjector,Ue=>this.events.next(Ue)),(0,Gt.b)(Ue=>{if($.guardsResult=Ue.guardsResult,Tt(Ue.guardsResult))throw Vs(0,Ue.guardsResult);const Mt=new bs(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot,!!Ue.guardsResult);this.events.next(Mt)}),(0,oe.h)(Ue=>!!Ue.guardsResult||(I.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"",3),!1)),Qr(Ue=>{if(Ue.guards.canActivateChecks.length)return(0,Ne.of)(Ue).pipe((0,Gt.b)(Mt=>{const sn=new Ia(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(sn)}),(0,Ae.w)(Mt=>{let sn=!1;return(0,Ne.of)(Mt).pipe(function ma(k,R){return(0,Fe.z)(I=>{const{targetSnapshot:$,guards:{canActivateChecks:de}}=I;if(!de.length)return(0,Ne.of)(I);let Le=0;return(0,Re.D)(de).pipe(Ht(Ue=>function _o(k,R,I,$){const de=k.routeConfig,Le=k._resolve;return void 0!==de?.title&&!Jl(de)&&(Le[In]=de.title),function cl(k,R,I,$){const de=function ws(k){return[...Object.keys(k),...Object.getOwnPropertySymbols(k)]}(k);if(0===de.length)return(0,Ne.of)({});const Le={};return(0,Re.D)(de).pipe((0,Fe.z)(Ue=>function ea(k,R,I,$){const de=Ji(R)??$,Le=Ma(k,de);return xr(Le.resolve?Le.resolve(R,I):de.runInContext(()=>Le(R,I)))}(k[Ue],R,I,$).pipe((0,At.P)(),(0,Gt.b)(Mt=>{Le[Ue]=Mt}))),Yt(1),(0,dt.h)(Le),Xt(Ue=>Oe(Ue)?St.E:ge(Ue)))}(Le,k,R,$).pipe((0,Te.U)(Ue=>(k._resolvedData=Ue,k.data=Mr(k,I).resolve,de&&Jl(de)&&(k.data[In]=de.title),null)))}(Ue.route,$,k,R)),(0,Gt.b)(()=>Le++),Yt(1),(0,Fe.z)(Ue=>Le===de.length?(0,Ne.of)(I):St.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Gt.b)({next:()=>sn=!0,complete:()=>{sn||(I.restoreHistory(Mt),this.cancelNavigationTransition(Mt,"",2))}}))}),(0,Gt.b)(Mt=>{const sn=new Bu(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(sn)}))}),Qr(Ue=>{const Mt=sn=>{const er=[];sn.routeConfig?.loadComponent&&!sn.routeConfig._loadedComponent&&er.push(this.configLoader.loadComponent(sn.routeConfig).pipe((0,Gt.b)(jn=>{sn.component=jn}),(0,Te.U)(()=>{})));for(const jn of sn.children)er.push(...Mt(jn));return er};return(0,at.a)(Mt(Ue.targetSnapshot.root)).pipe((0,Zt.d)(),(0,gt.q)(1))}),Qr(()=>this.afterPreactivation()),(0,Te.U)(Ue=>{const Mt=function zo(k,R,I){const $=ro(k,R._root,I?I._root:void 0);return new un($,R)}(I.routeReuseStrategy,Ue.targetSnapshot,Ue.currentRouterState);return $={...Ue,targetRouterState:Mt}}),(0,Gt.b)(Ue=>{I.currentUrlTree=Ue.urlAfterRedirects,I.rawUrlTree=I.urlHandlingStrategy.merge(Ue.urlAfterRedirects,Ue.rawUrl),I.routerState=Ue.targetRouterState,"deferred"===I.urlUpdateStrategy&&(Ue.extras.skipLocationChange||I.setBrowserUrl(I.rawUrlTree,Ue),I.browserUrlTree=Ue.urlAfterRedirects)}),((k,R,I,$)=>(0,Te.U)(de=>(new xi(R,de.targetRouterState,de.currentRouterState,I,$).activate(k),de)))(this.rootContexts,I.routeReuseStrategy,Ue=>this.events.next(Ue),this.inputBindingEnabled),(0,gt.q)(1),(0,Gt.b)({next:Ue=>{de=!0,this.lastSuccessfulNavigation=this.currentNavigation,I.navigated=!0,this.events.next(new hi(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(I.currentUrlTree))),I.titleStrategy?.updateTitle(Ue.targetRouterState.snapshot),Ue.resolve(!0)},complete:()=>{de=!0}}),It(()=>{de||Le||this.cancelNavigationTransition($,"",1),this.currentNavigation?.id===$.id&&(this.currentNavigation=null)}),Xt(Ue=>{if(Le=!0,jo(Ue)){Aa(Ue)||(I.navigated=!0,I.restoreHistory($,!0));const Mt=new to($.id,this.urlSerializer.serialize($.extractedUrl),Ue.message,Ue.cancellationCode);if(this.events.next(Mt),Aa(Ue)){const sn=I.urlHandlingStrategy.merge(Ue.url,I.rawUrlTree),er={skipLocationChange:$.extras.skipLocationChange,replaceUrl:"eager"===I.urlUpdateStrategy||it($.source)};I.scheduleNavigation(sn,Go,null,er,{resolve:$.resolve,reject:$.reject,promise:$.promise})}else $.resolve(!1)}else{I.restoreHistory($,!0);const Mt=new wa($.id,this.urlSerializer.serialize($.extractedUrl),Ue,$.targetSnapshot??void 0);this.events.next(Mt);try{$.resolve(I.errorHandler(Ue))}catch(sn){$.reject(sn)}}return St.E}))}))}cancelNavigationTransition(I,$,de){const Le=new to(I.id,this.urlSerializer.serialize(I.extractedUrl),$,de);this.events.next(Le),I.resolve(!1)}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function it(k){return k!==Go}let wt=(()=>{class k{buildTitle(I){let $,de=I.root;for(;void 0!==de;)$=this.getResolvedTitleForRoute(de)??$,de=de.children.find(Le=>Le.outlet===zt);return $}getResolvedTitleForRoute(I){return I.data[In]}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:function(){return(0,T.f3M)(en)},providedIn:"root"}),k})(),en=(()=>{class k extends wt{constructor(I){super(),this.title=I}updateTitle(I){const $=this.buildTitle(I);void 0!==$&&this.title.setTitle($)}}return k.\u0275fac=function(I){return new(I||k)(T.LFG(jt.Dx))},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),sr=(()=>{class k{}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:function(){return(0,T.f3M)(Pr)},providedIn:"root"}),k})();class Ci{shouldDetach(R){return!1}store(R,I){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,I){return R.routeConfig===I.routeConfig}}let Pr=(()=>{class k extends Ci{}return k.\u0275fac=function(){let R;return function($){return(R||(R=T.n5z(k)))($||k)}}(),k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Vr=new T.OlP("",{providedIn:"root",factory:()=>({})});let wr=(()=>{class k{}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:function(){return(0,T.f3M)(os)},providedIn:"root"}),k})(),os=(()=>{class k{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,$){return I}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var Br=(()=>((Br=Br||{})[Br.COMPLETE=0]="COMPLETE",Br[Br.FAILED=1]="FAILED",Br[Br.REDIRECTING=2]="REDIRECTING",Br))();function Ki(k,R){k.events.pipe((0,oe.h)(I=>I instanceof hi||I instanceof to||I instanceof wa||I instanceof Ks),(0,Te.U)(I=>I instanceof hi||I instanceof Ks?Br.COMPLETE:I instanceof to&&(0===I.code||1===I.code)?Br.REDIRECTING:Br.FAILED),(0,oe.h)(I=>I!==Br.REDIRECTING),(0,gt.q)(1)).subscribe(()=>{R()})}function Ws(k){throw k}function ur(k,R,I){return R.parse("/")}const qo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},na={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ds=(()=>{class k{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,T.f3M)(T.c2e),this.isNgZoneEnabled=!1,this.options=(0,T.f3M)(Vr,{optional:!0})||{},this.pendingTasks=(0,T.f3M)(T.HDt),this.errorHandler=this.options.errorHandler||Ws,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ur,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,T.f3M)(wr),this.routeReuseStrategy=(0,T.f3M)(sr),this.titleStrategy=(0,T.f3M)(wt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,T.f3M)(ta,{optional:!0})?.flat()??[],this.navigationTransitions=(0,T.f3M)(Se),this.urlSerializer=(0,T.f3M)(Fr),this.location=(0,T.f3M)(Ee.Ye),this.componentInputBindingEnabled=!!(0,T.f3M)(Es,{optional:!0}),this.isNgZoneEnabled=(0,T.f3M)(T.R0b)instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Jt(0,null),this.navigationTransitions.setupNavigations(this).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId??0},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Go,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const $="popstate"===I.type?"popstate":"hashchange";"popstate"===$&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,$,I.state)},0)}))}navigateToSyncWithBrowser(I,$,de){const Le={replaceUrl:!0},Ue=de?.navigationId?de:null;if(de){const sn={...de};delete sn.navigationId,delete sn.\u0275routerPageId,0!==Object.keys(sn).length&&(Le.state=sn)}const Mt=this.parseUrl(I);this.scheduleNavigation(Mt,$,Ue,Le)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Lr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,$={}){const{relativeTo:de,queryParams:Le,fragment:Ue,queryParamsHandling:Mt,preserveFragment:sn}=$,er=sn?this.currentUrlTree.fragment:Ue;let Li,jn=null;switch(Mt){case"merge":jn={...this.currentUrlTree.queryParams,...Le};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=Le||null}null!==jn&&(jn=this.removeEmptyProps(jn));try{Li=Xn(de?de.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Li=this.currentUrlTree.root}return Hr(Li,I,jn,er??null)}navigateByUrl(I,$={skipLocationChange:!1}){const de=Tt(I)?I:this.parseUrl(I),Le=this.urlHandlingStrategy.merge(de,this.rawUrlTree);return this.scheduleNavigation(Le,Go,null,$)}navigate(I,$={skipLocationChange:!1}){return function Ko(k){for(let R=0;R<k.length;R++)if(null==k[R])throw new T.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,$),$)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let $;try{$=this.urlSerializer.parse(I)}catch(de){$=this.malformedUriErrorHandler(de,this.urlSerializer,I)}return $}isActive(I,$){let de;if(de=!0===$?{...qo}:!1===$?{...na}:$,Tt(I))return Gr(this.currentUrlTree,I,de);const Le=this.parseUrl(I);return Gr(this.currentUrlTree,Le,de)}removeEmptyProps(I){return Object.keys(I).reduce(($,de)=>{const Le=I[de];return null!=Le&&($[de]=Le),$},{})}scheduleNavigation(I,$,de,Le,Ue){if(this.disposed)return Promise.resolve(!1);let Mt,sn,er;Ue?(Mt=Ue.resolve,sn=Ue.reject,er=Ue.promise):er=new Promise((Li,Vo)=>{Mt=Li,sn=Vo});const jn=this.pendingTasks.add();return Ki(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(jn))}),this.navigationTransitions.handleNavigationRequest({source:$,restoredState:de,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:I,extras:Le,resolve:Mt,reject:sn,promise:er,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),er.catch(Li=>Promise.reject(Li))}setBrowserUrl(I,$){const de=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(de)||$.extras.replaceUrl){const Ue={...$.extras.state,...this.generateNgRouterState($.id,this.browserPageId)};this.location.replaceState(de,"",Ue)}else{const Le={...$.extras.state,...this.generateNgRouterState($.id,(this.browserPageId??0)+1)};this.location.go(de,"",Le)}}restoreHistory(I,$=!1){if("computed"===this.canceledNavigationResolution){const Le=this.currentPageId-(this.browserPageId??this.currentPageId);0!==Le?this.location.historyGo(Le):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Le&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&($&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,$){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:$}:{navigationId:I}}}return k.\u0275fac=function(I){return new(I||k)},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),va=(()=>{class k{constructor(I,$,de,Le,Ue,Mt){this.router=I,this.route=$,this.tabIndexAttribute=de,this.renderer=Le,this.el=Ue,this.locationStrategy=Mt,this.href=null,this.commands=null,this.onChanges=new te.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const sn=Ue.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===sn||"area"===sn,this.isAnchorElement?this.subscription=I.events.subscribe(er=>{er instanceof hi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,$,de,Le,Ue){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||$||de||Le||Ue||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,T.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,$){const de=this.renderer,Le=this.el.nativeElement;null!==$?de.setAttribute(Le,I,$):de.removeAttribute(Le,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return k.\u0275fac=function(I){return new(I||k)(T.Y36(Ds),T.Y36(Kn),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(Ee.S$))},k.\u0275dir=T.lG2({type:k,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(I,$){1&I&&T.NdJ("click",function(Le){return $.onClick(Le.button,Le.ctrlKey,Le.shiftKey,Le.altKey,Le.metaKey)}),2&I&&T.uIk("target",$.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",T.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",T.VuI],replaceUrl:["replaceUrl","replaceUrl",T.VuI],routerLink:"routerLink"},standalone:!0,features:[T.Xq5,T.TTD]}),k})(),Oc=(()=>{class k{get isActive(){return this._isActive}constructor(I,$,de,Le,Ue){this.router=I,this.element=$,this.renderer=de,this.cdr=Le,this.link=Ue,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new T.vpe,this.routerEventsSubscription=I.events.subscribe(Mt=>{Mt instanceof hi&&this.update()})}ngAfterContentInit(){(0,Ne.of)(this.links.changes,(0,Ne.of)(null)).pipe((0,ft.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter($=>!!$).map($=>$.onChanges);this.linkInputChangesSubscription=(0,Re.D)(I).pipe((0,ft.J)()).subscribe($=>{this._isActive!==this.isLinkActive(this.router)($)&&this.update()})}set routerLinkActive(I){const $=Array.isArray(I)?I:I.split(" ");this.classes=$.filter(de=>!!de)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach($=>{I?this.renderer.addClass(this.element.nativeElement,$):this.renderer.removeClass(this.element.nativeElement,$)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const $=function Ra(k){return!!k.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return de=>!!de.urlTree&&I.isActive(de.urlTree,$)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}}return k.\u0275fac=function(I){return new(I||k)(T.Y36(Ds),T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(T.sBO),T.Y36(va,8))},k.\u0275dir=T.lG2({type:k,selectors:[["","routerLinkActive",""]],contentQueries:function(I,$,de){if(1&I&&T.Suo(de,va,5),2&I){let Le;T.iGM(Le=T.CRH())&&($.links=Le)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[T.TTD]}),k})();class Dl{}let xl=(()=>{class k{constructor(I,$,de,Le,Ue){this.router=I,this.injector=de,this.preloadingStrategy=Le,this.loader=Ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,oe.h)(I=>I instanceof hi),Ht(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,$){const de=[];for(const Le of $){Le.providers&&!Le._injector&&(Le._injector=(0,T.MMx)(Le.providers,I,`Route: ${Le.path}`));const Ue=Le._injector??I,Mt=Le._loadedInjector??Ue;(Le.loadChildren&&!Le._loadedRoutes&&void 0===Le.canLoad||Le.loadComponent&&!Le._loadedComponent)&&de.push(this.preloadConfig(Ue,Le)),(Le.children||Le._loadedRoutes)&&de.push(this.processRoutes(Mt,Le.children??Le._loadedRoutes))}return(0,Re.D)(de).pipe((0,ft.J)())}preloadConfig(I,$){return this.preloadingStrategy.preload($,()=>{let de;de=$.loadChildren&&void 0===$.canLoad?this.loader.loadChildren(I,$):(0,Ne.of)(null);const Le=de.pipe((0,Fe.z)(Ue=>null===Ue?(0,Ne.of)(void 0):($._loadedRoutes=Ue.routes,$._loadedInjector=Ue.injector,this.processRoutes(Ue.injector??I,Ue.routes))));if($.loadComponent&&!$._loadedComponent){const Ue=this.loader.loadComponent($);return(0,Re.D)([Le,Ue]).pipe((0,ft.J)())}return Le})}}return k.\u0275fac=function(I){return new(I||k)(T.LFG(Ds),T.LFG(T.Sil),T.LFG(T.lqb),T.LFG(Dl),T.LFG(L))},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const ra=new T.OlP("");let vn=(()=>{class k{constructor(I,$,de,Le,Ue={}){this.urlSerializer=I,this.transitions=$,this.viewportScroller=de,this.zone=Le,this.options=Ue,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ue.scrollPositionRestoration=Ue.scrollPositionRestoration||"disabled",Ue.anchorScrolling=Ue.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof _i?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof hi?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Ks&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ds&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,$){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ds(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,$))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return k.\u0275fac=function(I){T.$Z()},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})();function Ns(k,R){return{\u0275kind:k,\u0275providers:R}}function To(){const k=(0,T.f3M)(T.zs3);return R=>{const I=k.get(T.z2F);if(R!==I.components[0])return;const $=k.get(Ds),de=k.get(ec);1===k.get(An)&&$.initialNavigation(),k.get($t,null,T.XFs.Optional)?.setUpPreloading(),k.get(ra,null,T.XFs.Optional)?.init(),$.resetRootComponentType(I.componentTypes[0]),de.closed||(de.next(),de.complete(),de.unsubscribe())}}const ec=new T.OlP("",{factory:()=>new te.x}),An=new T.OlP("",{providedIn:"root",factory:()=>1}),$t=new T.OlP("");function dn(k){return Ns(0,[{provide:$t,useExisting:xl},{provide:Dl,useExisting:k}])}const so=new T.OlP("ROUTER_FORROOT_GUARD"),ru=[Ee.Ye,{provide:Fr,useClass:Qi},Ds,ss,{provide:Kn,useFactory:function zu(k){return k.routerState.root},deps:[Ds]},L,[]];function dl(){return new T.PXZ("Router",Ds)}let rc=(()=>{class k{constructor(I){}static forRoot(I,$){return{ngModule:k,providers:[ru,[],{provide:ta,multi:!0,useValue:I},{provide:so,useFactory:Cr,deps:[[Ds,new T.FiY,new T.tp0]]},{provide:Vr,useValue:$||{}},$?.useHash?{provide:Ee.S$,useClass:Ee.Do}:{provide:Ee.S$,useClass:Ee.b0},{provide:ra,useFactory:()=>{const k=(0,T.f3M)(Ee.EM),R=(0,T.f3M)(T.R0b),I=(0,T.f3M)(Vr),$=(0,T.f3M)(Se),de=(0,T.f3M)(Fr);return I.scrollOffset&&k.setOffset(I.scrollOffset),new vn(de,$,k,R,I)}},$?.preloadingStrategy?dn($.preloadingStrategy).\u0275providers:[],{provide:T.PXZ,multi:!0,useFactory:dl},$?.initialNavigation?Wu($):[],$?.bindToComponentInputs?Ns(8,[Hi,{provide:Es,useExisting:Hi}]).\u0275providers:[],[{provide:oo,useFactory:To},{provide:T.tb,multi:!0,useExisting:oo}]]}}static forChild(I){return{ngModule:k,providers:[{provide:ta,multi:!0,useValue:I}]}}}return k.\u0275fac=function(I){return new(I||k)(T.LFG(so,8))},k.\u0275mod=T.oAB({type:k}),k.\u0275inj=T.cJS({}),k})();function Cr(k){return"guarded"}function Wu(k){return["disabled"===k.initialNavigation?Ns(3,[{provide:T.ip1,multi:!0,useFactory:()=>{const R=(0,T.f3M)(Ds);return()=>{R.setUpLocationChangeListener()}}},{provide:An,useValue:2}]).\u0275providers:[],"enabledBlocking"===k.initialNavigation?Ns(2,[{provide:An,useValue:0},{provide:T.ip1,multi:!0,deps:[T.zs3],useFactory:R=>{const I=R.get(Ee.V_,Promise.resolve());return()=>I.then(()=>new Promise($=>{const de=R.get(Ds),Le=R.get(ec);Ki(de,()=>{$(!0)}),R.get(Se).afterPreactivation=()=>($(!0),Le.closed?(0,Ne.of)(void 0):Le),de.initialNavigation()}))}}]).\u0275providers:[]]}const oo=new T.OlP("")},3106:(tn,ht,z)=>{"use strict";z.d(ht,{Z:()=>St});var T=z(9058),me=z(4537),le=z(534),B=z(7879);class Re{constructor(rt,et){this._delegate=rt,this.firebase=et,(0,le._addComponent)(rt,new me.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,le.deleteApp)(this._delegate)))}_getService(rt,et=le._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const W=this._delegate.container.getProvider(rt);return!W.isInitialized()&&"EXPLICIT"===(null===(Ke=W.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&W.initialize(),W.getImmediate({identifier:et})}_removeServiceInstance(rt,et=le._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(et)}_addComponent(rt){(0,le._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,le._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qe=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),xe=function ut(){const Ze=function at(Ze){const rt={},et={__esModule:!0,initializeApp:function te(gt,Y={}){const oe=le.initializeApp(gt,Y);if((0,T.r3)(rt,oe.name))return rt[oe.name];const Fe=new Ze(oe,et);return rt[oe.name]=Fe,Fe},app:W,registerVersion:le.registerVersion,setLogLevel:le.setLogLevel,onLog:le.onLog,apps:null,SDK_VERSION:le.SDK_VERSION,INTERNAL:{registerComponent:function Te(gt){const Y=gt.name,oe=Y.replace("-compat","");if(le._registerComponent(gt)&&"PUBLIC"===gt.type){const Fe=(At=W())=>{if("function"!=typeof At[oe])throw Qe.create("invalid-app-argument",{appName:Y});return At[oe]()};void 0!==gt.serviceProps&&(0,T.ZB)(Fe,gt.serviceProps),et[oe]=Fe,Ze.prototype[oe]=function(...At){return this._getService.bind(this,Y).apply(this,gt.multipleInstances?At:[])}}return"PUBLIC"===gt.type?et[oe]:null},removeApp:function Ke(gt){delete rt[gt]},useAsService:function Ae(gt,Y){return"serverAuth"===Y?null:Y},modularAPIs:le}};function W(gt){if(!(0,T.r3)(rt,gt=gt||le._DEFAULT_ENTRY_NAME))throw Qe.create("no-app",{appName:gt});return rt[gt]}return et.default=et,Object.defineProperty(et,"apps",{get:function Ee(){return Object.keys(rt).map(gt=>rt[gt])}}),W.App=Ze,et}(Re);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:ut,extendNamespace:function rt(et){(0,T.ZB)(Ze,et)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),Ze}(),je=new B.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){je.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&je.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const St=xe;!function ge(Ze){(0,le.registerVersion)("@firebase/app-compat","0.2.13",Ze)}()},534:(tn,ht,z)=>{"use strict";z.r(ht),z.d(ht,{FirebaseError:()=>B.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>an,_addComponent:()=>ar,_addOrOverwriteComponent:()=>Ui,_apps:()=>Nn,_clearComponents:()=>Fr,_components:()=>Dr,_getProvider:()=>fi,_registerComponent:()=>Kr,_removeServiceInstance:()=>eo,deleteApp:()=>li,getApp:()=>ci,getApps:()=>Ri,initializeApp:()=>is,onLog:()=>Vi,registerVersion:()=>Nr,setLogLevel:()=>Ar});var T=z(5861),me=z(4537),le=z(7879),B=z(9058);const Re=(Ut,Pt)=>Pt.some(nn=>Ut instanceof nn);let Ne,Qe;const xe=new WeakMap,je=new WeakMap,$e=new WeakMap,kt=new WeakMap,ge=new WeakMap;let rt={get(Ut,Pt,nn){if(Ut instanceof IDBTransaction){if("done"===Pt)return je.get(Ut);if("objectStoreNames"===Pt)return Ut.objectStoreNames||$e.get(Ut);if("store"===Pt)return nn.objectStoreNames[1]?void 0:nn.objectStore(nn.objectStoreNames[0])}return te(Ut[Pt])},set:(Ut,Pt,nn)=>(Ut[Pt]=nn,!0),has:(Ut,Pt)=>Ut instanceof IDBTransaction&&("done"===Pt||"store"===Pt)||Pt in Ut};function W(Ut){return"function"==typeof Ut?function Ke(Ut){return Ut!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ut(){return Qe||(Qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ut)?function(...Pt){return Ut.apply(Ee(this),Pt),te(xe.get(this))}:function(...Pt){return te(Ut.apply(Ee(this),Pt))}:function(Pt,...nn){const On=Ut.call(Ee(this),Pt,...nn);return $e.set(On,Pt.sort?Pt.sort():[Pt]),te(On)}}(Ut):(Ut instanceof IDBTransaction&&function Ze(Ut){if(je.has(Ut))return;const Pt=new Promise((nn,On)=>{const Jn=()=>{Ut.removeEventListener("complete",fr),Ut.removeEventListener("error",Er),Ut.removeEventListener("abort",Er)},fr=()=>{nn(),Jn()},Er=()=>{On(Ut.error||new DOMException("AbortError","AbortError")),Jn()};Ut.addEventListener("complete",fr),Ut.addEventListener("error",Er),Ut.addEventListener("abort",Er)});je.set(Ut,Pt)}(Ut),Re(Ut,function at(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ut,rt):Ut)}function te(Ut){if(Ut instanceof IDBRequest)return function St(Ut){const Pt=new Promise((nn,On)=>{const Jn=()=>{Ut.removeEventListener("success",fr),Ut.removeEventListener("error",Er)},fr=()=>{nn(te(Ut.result)),Jn()},Er=()=>{On(Ut.error),Jn()};Ut.addEventListener("success",fr),Ut.addEventListener("error",Er)});return Pt.then(nn=>{nn instanceof IDBCursor&&xe.set(nn,Ut)}).catch(()=>{}),ge.set(Pt,Ut),Pt}(Ut);if(kt.has(Ut))return kt.get(Ut);const Pt=W(Ut);return Pt!==Ut&&(kt.set(Ut,Pt),ge.set(Pt,Ut)),Pt}const Ee=Ut=>ge.get(Ut),gt=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],oe=new Map;function Fe(Ut,Pt){if(!(Ut instanceof IDBDatabase)||Pt in Ut||"string"!=typeof Pt)return;if(oe.get(Pt))return oe.get(Pt);const nn=Pt.replace(/FromIndex$/,""),On=Pt!==nn,Jn=Y.includes(nn);if(!(nn in(On?IDBIndex:IDBObjectStore).prototype)||!Jn&&!gt.includes(nn))return;const fr=function(){var Er=(0,T.Z)(function*(ri,...pi){const di=this.transaction(ri,Jn?"readwrite":"readonly");let gs=di.store;return On&&(gs=gs.index(pi.shift())),(yield Promise.all([gs[nn](...pi),Jn&&di.done]))[0]});return function(pi){return Er.apply(this,arguments)}}();return oe.set(Pt,fr),fr}!function et(Ut){rt=Ut(rt)}(Ut=>({...Ut,get:(Pt,nn,On)=>Fe(Pt,nn)||Ut.get(Pt,nn,On),has:(Pt,nn)=>!!Fe(Pt,nn)||Ut.has(Pt,nn)}));class At{constructor(Pt){this.container=Pt}getPlatformInfoString(){return this.container.getProviders().map(nn=>{if(function Ht(Ut){const Pt=Ut.getComponent();return"VERSION"===Pt?.type}(nn)){const On=nn.getImmediate();return`${On.library}/${On.version}`}return null}).filter(nn=>nn).join(" ")}}const Gt="@firebase/app",pn=new le.Yd("@firebase/app"),an="[DEFAULT]",Un={[Gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,Dr=new Map;function ar(Ut,Pt){try{Ut.container.addComponent(Pt)}catch(nn){pn.debug(`Component ${Pt.name} failed to register with FirebaseApp ${Ut.name}`,nn)}}function Ui(Ut,Pt){Ut.container.addOrOverwriteComponent(Pt)}function Kr(Ut){const Pt=Ut.name;if(Dr.has(Pt))return pn.debug(`There were multiple attempts to register component ${Pt}.`),!1;Dr.set(Pt,Ut);for(const nn of Nn.values())ar(nn,Ut);return!0}function fi(Ut,Pt){const nn=Ut.container.getProvider("heartbeat").getImmediate({optional:!0});return nn&&nn.triggerHeartbeat(),Ut.container.getProvider(Pt)}function eo(Ut,Pt,nn=an){fi(Ut,Pt).clearInstance(nn)}function Fr(){Dr.clear()}const Tr=new B.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qi{constructor(Pt,nn,On){this._isDeleted=!1,this._options=Object.assign({},Pt),this._config=Object.assign({},nn),this._name=nn.name,this._automaticDataCollectionEnabled=nn.automaticDataCollectionEnabled,this._container=On,this.container.addComponent(new me.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Pt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Pt){this._isDeleted=Pt}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const br="9.23.0";function is(Ut,Pt={}){let nn=Ut;"object"!=typeof Pt&&(Pt={name:Pt});const On=Object.assign({name:an,automaticDataCollectionEnabled:!1},Pt),Jn=On.name;if("string"!=typeof Jn||!Jn)throw Tr.create("bad-app-name",{appName:String(Jn)});if(nn||(nn=(0,B.aH)()),!nn)throw Tr.create("no-options");const fr=Nn.get(Jn);if(fr){if((0,B.vZ)(nn,fr.options)&&(0,B.vZ)(On,fr.config))return fr;throw Tr.create("duplicate-app",{appName:Jn})}const Er=new me.H0(Jn);for(const pi of Dr.values())Er.addComponent(pi);const ri=new qi(nn,On,Er);return Nn.set(Jn,ri),ri}function ci(Ut=an){const Pt=Nn.get(Ut);if(!Pt&&Ut===an&&(0,B.aH)())return is();if(!Pt)throw Tr.create("no-app",{appName:Ut});return Pt}function Ri(){return Array.from(Nn.values())}function li(Ut){return vi.apply(this,arguments)}function vi(){return(vi=(0,T.Z)(function*(Ut){const Pt=Ut.name;Nn.has(Pt)&&(Nn.delete(Pt),yield Promise.all(Ut.container.getProviders().map(nn=>nn.delete())),Ut.isDeleted=!0)})).apply(this,arguments)}function Nr(Ut,Pt,nn){var On;let Jn=null!==(On=Un[Ut])&&void 0!==On?On:Ut;nn&&(Jn+=`-${nn}`);const fr=Jn.match(/\s|\//),Er=Pt.match(/\s|\//);if(fr||Er){const ri=[`Unable to register library "${Jn}" with version "${Pt}":`];return fr&&ri.push(`library name "${Jn}" contains illegal characters (whitespace or "/")`),fr&&Er&&ri.push("and"),Er&&ri.push(`version name "${Pt}" contains illegal characters (whitespace or "/")`),void pn.warn(ri.join(" "))}Kr(new me.wA(`${Jn}-version`,()=>({library:Jn,version:Pt}),"VERSION"))}function Vi(Ut,Pt){if(null!==Ut&&"function"!=typeof Ut)throw Tr.create("invalid-log-argument");(0,le.Am)(Ut,Pt)}function Ar(Ut){(0,le.Ub)(Ut)}const ls="firebase-heartbeat-database",mr=1,lt="firebase-heartbeat-store";let _e=null;function Ce(){return _e||(_e=function Te(Ut,Pt,{blocked:nn,upgrade:On,blocking:Jn,terminated:fr}={}){const Er=indexedDB.open(Ut,Pt),ri=te(Er);return On&&Er.addEventListener("upgradeneeded",pi=>{On(te(Er.result),pi.oldVersion,pi.newVersion,te(Er.transaction),pi)}),nn&&Er.addEventListener("blocked",pi=>nn(pi.oldVersion,pi.newVersion,pi)),ri.then(pi=>{fr&&pi.addEventListener("close",()=>fr()),Jn&&pi.addEventListener("versionchange",di=>Jn(di.oldVersion,di.newVersion,di))}).catch(()=>{}),ri}(ls,mr,{upgrade:(Ut,Pt)=>{0===Pt&&Ut.createObjectStore(lt)}}).catch(Ut=>{throw Tr.create("idb-open",{originalErrorMessage:Ut.message})})),_e}function Pe(){return(Pe=(0,T.Z)(function*(Ut){try{return yield(yield Ce()).transaction(lt).objectStore(lt).get(En(Ut))}catch(Pt){if(Pt instanceof B.ZR)pn.warn(Pt.message);else{const nn=Tr.create("idb-get",{originalErrorMessage:Pt?.message});pn.warn(nn.message)}}})).apply(this,arguments)}function Et(Ut,Pt){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,T.Z)(function*(Ut,Pt){try{const On=(yield Ce()).transaction(lt,"readwrite");yield On.objectStore(lt).put(Pt,En(Ut)),yield On.done}catch(nn){if(nn instanceof B.ZR)pn.warn(nn.message);else{const On=Tr.create("idb-set",{originalErrorMessage:nn?.message});pn.warn(On.message)}}})).apply(this,arguments)}function En(Ut){return`${Ut.name}!${Ut.options.appId}`}class He{constructor(Pt){this.container=Pt,this._heartbeatsCache=null;const nn=this.container.getProvider("app").getImmediate();this._storage=new Xn(nn),this._heartbeatsCachePromise=this._storage.read().then(On=>(this._heartbeatsCache=On,On))}triggerHeartbeat(){var Pt=this;return(0,T.Z)(function*(){const On=Pt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jn=Tt();if(null===Pt._heartbeatsCache&&(Pt._heartbeatsCache=yield Pt._heartbeatsCachePromise),Pt._heartbeatsCache.lastSentHeartbeatDate!==Jn&&!Pt._heartbeatsCache.heartbeats.some(fr=>fr.date===Jn))return Pt._heartbeatsCache.heartbeats.push({date:Jn,agent:On}),Pt._heartbeatsCache.heartbeats=Pt._heartbeatsCache.heartbeats.filter(fr=>{const Er=new Date(fr.date).valueOf();return Date.now()-Er<=2592e6}),Pt._storage.overwrite(Pt._heartbeatsCache)})()}getHeartbeatsHeader(){var Pt=this;return(0,T.Z)(function*(){if(null===Pt._heartbeatsCache&&(yield Pt._heartbeatsCachePromise),null===Pt._heartbeatsCache||0===Pt._heartbeatsCache.heartbeats.length)return"";const nn=Tt(),{heartbeatsToSend:On,unsentEntries:Jn}=function ln(Ut,Pt=1024){const nn=[];let On=Ut.slice();for(const Jn of Ut){const fr=nn.find(Er=>Er.agent===Jn.agent);if(fr){if(fr.dates.push(Jn.date),Hr(nn)>Pt){fr.dates.pop();break}}else if(nn.push({agent:Jn.agent,dates:[Jn.date]}),Hr(nn)>Pt){nn.pop();break}On=On.slice(1)}return{heartbeatsToSend:nn,unsentEntries:On}}(Pt._heartbeatsCache.heartbeats),fr=(0,B.L)(JSON.stringify({version:2,heartbeats:On}));return Pt._heartbeatsCache.lastSentHeartbeatDate=nn,Jn.length>0?(Pt._heartbeatsCache.heartbeats=Jn,yield Pt._storage.overwrite(Pt._heartbeatsCache)):(Pt._heartbeatsCache.heartbeats=[],Pt._storage.overwrite(Pt._heartbeatsCache)),fr})()}}function Tt(){return(new Date).toISOString().substring(0,10)}class Xn{constructor(Pt){this.app=Pt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,B.hl)()&&(0,B.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Pt=this;return(0,T.Z)(function*(){return(yield Pt._canUseIndexedDBPromise)&&(yield function be(Ut){return Pe.apply(this,arguments)}(Pt.app))||{heartbeats:[]}})()}overwrite(Pt){var nn=this;return(0,T.Z)(function*(){var On;if(yield nn._canUseIndexedDBPromise){const fr=yield nn.read();return Et(nn.app,{lastSentHeartbeatDate:null!==(On=Pt.lastSentHeartbeatDate)&&void 0!==On?On:fr.lastSentHeartbeatDate,heartbeats:Pt.heartbeats})}})()}add(Pt){var nn=this;return(0,T.Z)(function*(){var On;if(yield nn._canUseIndexedDBPromise){const fr=yield nn.read();return Et(nn.app,{lastSentHeartbeatDate:null!==(On=Pt.lastSentHeartbeatDate)&&void 0!==On?On:fr.lastSentHeartbeatDate,heartbeats:[...fr.heartbeats,...Pt.heartbeats]})}})()}}function Hr(Ut){return(0,B.L)(JSON.stringify({version:2,heartbeats:Ut})).length}!function ui(Ut){Kr(new me.wA("platform-logger",Pt=>new At(Pt),"PRIVATE")),Kr(new me.wA("heartbeat",Pt=>new He(Pt),"PRIVATE")),Nr(Gt,"0.9.13",Ut),Nr(Gt,"0.9.13","esm2017"),Nr("fire-js","")}("")},4537:(tn,ht,z)=>{"use strict";z.d(ht,{H0:()=>at,wA:()=>le});var T=z(5861),me=z(9058);class le{constructor(xe,je,$e){this.name=xe,this.instanceFactory=je,this.type=$e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(xe){return this.instantiationMode=xe,this}setMultipleInstances(xe){return this.multipleInstances=xe,this}setServiceProps(xe){return this.serviceProps=xe,this}setInstanceCreatedCallback(xe){return this.onInstanceCreated=xe,this}}const B="[DEFAULT]";class Re{constructor(xe,je){this.name=xe,this.container=je,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(xe){const je=this.normalizeInstanceIdentifier(xe);if(!this.instancesDeferred.has(je)){const $e=new me.BH;if(this.instancesDeferred.set(je,$e),this.isInitialized(je)||this.shouldAutoInitialize())try{const kt=this.getOrInitializeService({instanceIdentifier:je});kt&&$e.resolve(kt)}catch{}}return this.instancesDeferred.get(je).promise}getImmediate(xe){var je;const $e=this.normalizeInstanceIdentifier(xe?.identifier),kt=null!==(je=xe?.optional)&&void 0!==je&&je;if(!this.isInitialized($e)&&!this.shouldAutoInitialize()){if(kt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:$e})}catch(ge){if(kt)return null;throw ge}}getComponent(){return this.component}setComponent(xe){if(xe.name!==this.name)throw Error(`Mismatching Component ${xe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=xe,this.shouldAutoInitialize()){if(function Qe(ut){return"EAGER"===ut.instantiationMode}(xe))try{this.getOrInitializeService({instanceIdentifier:B})}catch{}for(const[je,$e]of this.instancesDeferred.entries()){const kt=this.normalizeInstanceIdentifier(je);try{const ge=this.getOrInitializeService({instanceIdentifier:kt});$e.resolve(ge)}catch{}}}}clearInstance(xe=B){this.instancesDeferred.delete(xe),this.instancesOptions.delete(xe),this.instances.delete(xe)}delete(){var xe=this;return(0,T.Z)(function*(){const je=Array.from(xe.instances.values());yield Promise.all([...je.filter($e=>"INTERNAL"in $e).map($e=>$e.INTERNAL.delete()),...je.filter($e=>"_delete"in $e).map($e=>$e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(xe=B){return this.instances.has(xe)}getOptions(xe=B){return this.instancesOptions.get(xe)||{}}initialize(xe={}){const{options:je={}}=xe,$e=this.normalizeInstanceIdentifier(xe.instanceIdentifier);if(this.isInitialized($e))throw Error(`${this.name}(${$e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const kt=this.getOrInitializeService({instanceIdentifier:$e,options:je});for(const[ge,St]of this.instancesDeferred.entries())$e===this.normalizeInstanceIdentifier(ge)&&St.resolve(kt);return kt}onInit(xe,je){var $e;const kt=this.normalizeInstanceIdentifier(je),ge=null!==($e=this.onInitCallbacks.get(kt))&&void 0!==$e?$e:new Set;ge.add(xe),this.onInitCallbacks.set(kt,ge);const St=this.instances.get(kt);return St&&xe(St,kt),()=>{ge.delete(xe)}}invokeOnInitCallbacks(xe,je){const $e=this.onInitCallbacks.get(je);if($e)for(const kt of $e)try{kt(xe,je)}catch{}}getOrInitializeService({instanceIdentifier:xe,options:je={}}){let $e=this.instances.get(xe);if(!$e&&this.component&&($e=this.component.instanceFactory(this.container,{instanceIdentifier:(ut=xe,ut===B?void 0:ut),options:je}),this.instances.set(xe,$e),this.instancesOptions.set(xe,je),this.invokeOnInitCallbacks($e,xe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,xe,$e)}catch{}var ut;return $e||null}normalizeInstanceIdentifier(xe=B){return this.component?this.component.multipleInstances?xe:B:xe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class at{constructor(xe){this.name=xe,this.providers=new Map}addComponent(xe){const je=this.getProvider(xe.name);if(je.isComponentSet())throw new Error(`Component ${xe.name} has already been registered with ${this.name}`);je.setComponent(xe)}addOrOverwriteComponent(xe){this.getProvider(xe.name).isComponentSet()&&this.providers.delete(xe.name),this.addComponent(xe)}getProvider(xe){if(this.providers.has(xe))return this.providers.get(xe);const je=new Re(xe,this);return this.providers.set(xe,je),je}getProviders(){return Array.from(this.providers.values())}}},7879:(tn,ht,z)=>{"use strict";z.d(ht,{Am:()=>ut,Ub:()=>at,Yd:()=>Qe,in:()=>me});const T=[];var me=(()=>((me=me||{})[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",me))();const le={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},B=me.INFO,Re={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Ne=(xe,je,...$e)=>{if(je<xe.logLevel)return;const kt=(new Date).toISOString(),ge=Re[je];if(!ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${je})`);console[ge](`[${kt}]  ${xe.name}:`,...$e)};class Qe{constructor(je){this.name=je,this._logLevel=B,this._logHandler=Ne,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(je){if(!(je in me))throw new TypeError(`Invalid value "${je}" assigned to \`logLevel\``);this._logLevel=je}setLogLevel(je){this._logLevel="string"==typeof je?le[je]:je}get logHandler(){return this._logHandler}set logHandler(je){if("function"!=typeof je)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=je}get userLogHandler(){return this._userLogHandler}set userLogHandler(je){this._userLogHandler=je}debug(...je){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...je),this._logHandler(this,me.DEBUG,...je)}log(...je){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...je),this._logHandler(this,me.VERBOSE,...je)}info(...je){this._userLogHandler&&this._userLogHandler(this,me.INFO,...je),this._logHandler(this,me.INFO,...je)}warn(...je){this._userLogHandler&&this._userLogHandler(this,me.WARN,...je),this._logHandler(this,me.WARN,...je)}error(...je){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...je),this._logHandler(this,me.ERROR,...je)}}function at(xe){T.forEach(je=>{je.setLogLevel(xe)})}function ut(xe,je){for(const $e of T){let kt=null;je&&je.level&&(kt=le[je.level]),$e.userLogHandler=null===xe?null:(ge,St,...Ze)=>{const rt=Ze.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");St>=(kt??ge.logLevel)&&xe({level:me[St].toLowerCase(),message:rt,args:Ze,type:ge.name})}}}},3182:(tn,ht,z)=>{"use strict";z.d(ht,{C6:()=>T.getApps,Mq:()=>T.getApp});var T=z(534);(0,T.registerVersion)("firebase","9.23.0","app")},7142:(tn,ht,z)=>{"use strict";z.d(ht,{Z:()=>T.Z});var T=z(3106);T.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(tn,ht,z)=>{"use strict";z.r(ht);var T=z(5861),me=z(3106),le=z(9058),B=z(534),Re=z(7582),Ne=z(7879),Qe=z(4537);const ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const St=function kt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ze=function ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new le.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new Ne.Yd("@firebase/auth");function te(D,..._){Ke.logLevel<=Ne.in.ERROR&&Ke.error(`Auth (${B.SDK_VERSION}): ${D}`,..._)}function Ee(D,..._){throw Y(D,..._)}function Te(D,..._){return Y(D,..._)}function Ae(D,_,E){const M=Object.assign(Object.assign({},Ze()),{[_]:E});return new le.LL("auth","Firebase",M).create(_,{appName:D.name})}function gt(D,_,E){if(!(_ instanceof E))throw E.name!==_.constructor.name&&Ee(D,"argument-error"),Ae(D,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y(D,..._){if("string"!=typeof D){const E=_[0],M=[..._.slice(1)];return M[0]&&(M[0].appName=D.name),D._errorFactory.create(E,...M)}return rt.create(D,..._)}function oe(D,_,...E){if(!D)throw Y(_,...E)}function Fe(D){const _="INTERNAL ASSERTION FAILED: "+D;throw te(_),new Error(_)}function At(D,_){D||Fe(_)}function Ht(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Gt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Yt{constructor(_,E){this.shortDelay=_,this.longDelay=E,At(E>_,"Short delay should be less than long delay!"),this.isMobile=(0,le.uI)()||(0,le.b$)()}get(){return function pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,le.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qe(D,_){At(D.emulator,"Emulator should always be set here");const{url:E}=D.emulator;return _?`${E}${_.startsWith("/")?_.slice(1):_}`:E}class Xe{static initialize(_,E,M){this.fetchImpl=_,E&&(this.headersImpl=E),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},dt=new Yt(3e4,6e4);function It(D,_){return D.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:D.tenantId}):_}function ft(D,_,E,M){return jt.apply(this,arguments)}function jt(){return(jt=(0,T.Z)(function*(D,_,E,M,se={}){return zt(D,se,(0,T.Z)(function*(){let Z={},st={};M&&("GET"===_?st=M:Z={body:JSON.stringify(M)});const Nt=(0,le.xO)(Object.assign({key:D.config.apiKey},st)).slice(1),mn=yield D._getAdditionalHeaders();return mn["Content-Type"]="application/json",D.languageCode&&(mn["X-Firebase-Locale"]=D.languageCode),Xe.fetch()($n(D,D.config.apiHost,E,Nt),Object.assign({method:_,headers:mn,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function zt(D,_,E){return In.apply(this,arguments)}function In(){return(In=(0,T.Z)(function*(D,_,E){D._canInitEmulator=!1;const M=Object.assign(Object.assign({},ot),_);try{const se=new Gn(D),Z=yield Promise.race([E(),se.promise]);se.clearNetworkTimeout();const st=yield Z.json();if("needConfirmation"in st)throw ir(D,"account-exists-with-different-credential",st);if(Z.ok&&!("errorMessage"in st))return st;{const Nt=Z.ok?st.errorMessage:st.error.message,[mn,Pn]=Nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===mn)throw ir(D,"credential-already-in-use",st);if("EMAIL_EXISTS"===mn)throw ir(D,"email-already-in-use",st);if("USER_DISABLED"===mn)throw ir(D,"user-disabled",st);const zn=M[mn]||mn.toLowerCase().replace(/[_\s]+/g,"-");if(Pn)throw Ae(D,zn,Pn);Ee(D,zn)}}catch(se){if(se instanceof le.ZR)throw se;Ee(D,"network-request-failed",{message:String(se)})}})).apply(this,arguments)}function Tn(D,_,E,M){return xn.apply(this,arguments)}function xn(){return(xn=(0,T.Z)(function*(D,_,E,M,se={}){const Z=yield ft(D,_,E,M,se);return"mfaPendingCredential"in Z&&Ee(D,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function $n(D,_,E,M){const se=`${_}${E}?${M}`;return D.config.emulator?qe(D.config,se):`${D.config.apiScheme}://${se}`}class Gn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((E,M)=>{this.timer=setTimeout(()=>M(Te(this.auth,"network-request-failed")),dt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ir(D,_,E){const M={appName:D.name};E.email&&(M.email=E.email),E.phoneNumber&&(M.phoneNumber=E.phoneNumber);const se=Te(D,_,M);return se.customData._tokenResponse=E,se}function dr(){return(dr=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function hr(){return(hr=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Gr(){return(Gr=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Sr(D){if(D)try{const _=new Date(Number(D));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function an(){return(an=(0,T.Z)(function*(D,_=!1){const E=(0,le.m9)(D),M=yield E.getIdToken(_),se=Nn(M);oe(se&&se.exp&&se.auth_time&&se.iat,E.auth,"internal-error");const Z="object"==typeof se.firebase?se.firebase:void 0,st=Z?.sign_in_provider;return{claims:se,token:M,authTime:Sr(Un(se.auth_time)),issuedAtTime:Sr(Un(se.iat)),expirationTime:Sr(Un(se.exp)),signInProvider:st||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function Un(D){return 1e3*Number(D)}function Nn(D){const[_,E,M]=D.split(".");if(void 0===_||void 0===E||void 0===M)return te("JWT malformed, contained fewer than 3 sections"),null;try{const se=(0,le.tV)(E);return se?JSON.parse(se):(te("Failed to decode base64 JWT payload"),null)}catch(se){return te("Caught error parsing JWT payload as JSON",se?.toString()),null}}function ar(D,_){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,T.Z)(function*(D,_,E=!1){if(E)return _;try{return yield _}catch(M){throw M instanceof le.ZR&&function Kr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(M)&&D.auth.currentUser===D&&(yield D.auth.signOut()),M}})).apply(this,arguments)}class fi{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var E;if(_){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const se=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,se)}}schedule(_=!1){var E=this;if(!this.isRunning)return;const M=this.getInterval(_);this.timerId=setTimeout((0,T.Z)(function*(){yield E.iteration()}),M)}iteration(){var _=this;return(0,T.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&_.schedule(!0))}_.schedule()})()}}class eo{constructor(_,E){this.createdAt=_,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(D){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,T.Z)(function*(D){var _;const E=D.auth,M=yield D.getIdToken(),se=yield ar(D,function qr(D,_){return Gr.apply(this,arguments)}(E,{idToken:M}));oe(se?.users.length,E,"internal-error");const Z=se.users[0];D._notifyReloadListener(Z);const st=null!==(_=Z.providerUserInfo)&&void 0!==_&&_.length?function is(D){return D.map(_=>{var{providerId:E}=_,M=(0,Re._T)(_,["providerId"]);return{providerId:E,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(Z.providerUserInfo):[],Nt=function br(D,_){return[...D.filter(M=>!_.some(se=>se.providerId===M.providerId)),..._]}(D.providerData,st),zn=!!D.isAnonymous&&!(D.email&&Z.passwordHash||Nt?.length),nr={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Nt,metadata:new eo(Z.createdAt,Z.lastLoginAt),isAnonymous:zn};Object.assign(D,nr)}),Qi.apply(this,arguments)}function qi(){return(qi=(0,T.Z)(function*(D){const _=(0,le.m9)(D);yield Fr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Ri(){return(Ri=(0,T.Z)(function*(D,_){const E=yield zt(D,{},(0,T.Z)(function*(){const M=(0,le.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:se,apiKey:Z}=D.config,st=$n(D,se,"/v1/token",`key=${Z}`),Nt=yield D._getAdditionalHeaders();return Nt["Content-Type"]="application/x-www-form-urlencoded",Xe.fetch()(st,{method:"POST",headers:Nt,body:M})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){oe(_.idToken,"internal-error"),oe(typeof _.idToken<"u","internal-error"),oe(typeof _.refreshToken<"u","internal-error");const E="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Dr(D){const _=Nn(D);return oe(_,"internal-error"),oe(typeof _.exp<"u","internal-error"),oe(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,E)}getToken(_,E=!1){var M=this;return(0,T.Z)(function*(){return oe(!M.accessToken||M.refreshToken,_,"user-token-expired"),E||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(_,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,E){var M=this;return(0,T.Z)(function*(){const{accessToken:se,refreshToken:Z,expiresIn:st}=yield function ci(D,_){return Ri.apply(this,arguments)}(_,E);M.updateTokensAndExpiration(se,Z,Number(st))})()}updateTokensAndExpiration(_,E,M){this.refreshToken=E||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(_,E){const{refreshToken:M,accessToken:se,expirationTime:Z}=E,st=new li;return M&&(oe("string"==typeof M,"internal-error",{appName:_}),st.refreshToken=M),se&&(oe("string"==typeof se,"internal-error",{appName:_}),st.accessToken=se),Z&&(oe("number"==typeof Z,"internal-error",{appName:_}),st.expirationTime=Z),st}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Fe("not implemented")}}function vi(D,_){oe("string"==typeof D||typeof D>"u","internal-error",{appName:_})}class Nr{constructor(_){var{uid:E,auth:M,stsTokenManager:se}=_,Z=(0,Re._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=M,this.stsTokenManager=se,this.accessToken=se.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new eo(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(_){var E=this;return(0,T.Z)(function*(){const M=yield ar(E,E.stsTokenManager.getToken(E.auth,_));return oe(M,E.auth,"internal-error"),E.accessToken!==M&&(E.accessToken=M,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),M})()}getIdTokenResult(_){return function Rr(D){return an.apply(this,arguments)}(this,_)}reload(){return function Tr(D){return qi.apply(this,arguments)}(this)}_assign(_){this!==_&&(oe(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(E=>Object.assign({},E)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const E=new Nr(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(_){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,E=!1){var M=this;return(0,T.Z)(function*(){let se=!1;_.idToken&&_.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(_),se=!0),E&&(yield Fr(M)),yield M.auth._persistUserIfCurrent(M),se&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var _=this;return(0,T.Z)(function*(){const E=yield _.getIdToken();return yield ar(_,function Bn(D,_){return dr.apply(this,arguments)}(_.auth,{idToken:E})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,E){var M,se,Z,st,Nt,mn,Pn,zn;const nr=null!==(M=E.displayName)&&void 0!==M?M:void 0,Zi=null!==(se=E.email)&&void 0!==se?se:void 0,Au=null!==(Z=E.phoneNumber)&&void 0!==Z?Z:void 0,Ul=null!==(st=E.photoURL)&&void 0!==st?st:void 0,bd=null!==(Nt=E.tenantId)&&void 0!==Nt?Nt:void 0,Wc=null!==(mn=E._redirectEventId)&&void 0!==mn?mn:void 0,qc=null!==(Pn=E.createdAt)&&void 0!==Pn?Pn:void 0,Kc=null!==(zn=E.lastLoginAt)&&void 0!==zn?zn:void 0,{uid:_c,emailVerified:Mu,isAnonymous:Vf,providerData:Ed,stsTokenManager:lh}=E;oe(_c&&lh,_,"internal-error");const Xh=li.fromJSON(this.name,lh);oe("string"==typeof _c,_,"internal-error"),vi(nr,_.name),vi(Zi,_.name),oe("boolean"==typeof Mu,_,"internal-error"),oe("boolean"==typeof Vf,_,"internal-error"),vi(Au,_.name),vi(Ul,_.name),vi(bd,_.name),vi(Wc,_.name),vi(qc,_.name),vi(Kc,_.name);const Cd=new Nr({uid:_c,auth:_,email:Zi,emailVerified:Mu,displayName:nr,isAnonymous:Vf,photoURL:Ul,phoneNumber:Au,tenantId:bd,stsTokenManager:Xh,createdAt:qc,lastLoginAt:Kc});return Ed&&Array.isArray(Ed)&&(Cd.providerData=Ed.map(ch=>Object.assign({},ch))),Wc&&(Cd._redirectEventId=Wc),Cd}static _fromIdTokenResponse(_,E,M=!1){return(0,T.Z)(function*(){const se=new li;se.updateFromServerResponse(E);const Z=new Nr({uid:E.localId,auth:_,stsTokenManager:se,isAnonymous:M});return yield Fr(Z),Z})()}}const Vi=new Map;function Ar(D){At(D instanceof Function,"Expected a class definition");let _=Vi.get(D);return _?(At(_ instanceof D,"Instance stored in cache mismatched with class"),_):(_=new D,Vi.set(D,_),_)}const mr=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(E,M){var se=this;return(0,T.Z)(function*(){se.storage[E]=M})()}_get(E){var M=this;return(0,T.Z)(function*(){const se=M.storage[E];return void 0===se?null:se})()}_remove(E){var M=this;return(0,T.Z)(function*(){delete M.storage[E]})()}_addListener(E,M){}_removeListener(E,M){}}return D.type="NONE",D})();function lt(D,_,E){return`firebase:${D}:${_}:${E}`}class _e{constructor(_,E,M){this.persistence=_,this.auth=E,this.userKey=M;const{config:se,name:Z}=this.auth;this.fullUserKey=lt(this.userKey,se.apiKey,Z),this.fullPersistenceKey=lt("persistence",se.apiKey,Z),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,T.Z)(function*(){const E=yield _.persistence._get(_.fullUserKey);return E?Nr._fromJSON(_.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var E=this;return(0,T.Z)(function*(){if(E.persistence===_)return;const M=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=_,M?E.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,E,M="authUser"){return(0,T.Z)(function*(){if(!E.length)return new _e(Ar(mr),_,M);const se=(yield Promise.all(E.map(function(){var Pn=(0,T.Z)(function*(zn){if(yield zn._isAvailable())return zn});return function(zn){return Pn.apply(this,arguments)}}()))).filter(Pn=>Pn);let Z=se[0]||Ar(mr);const st=lt(M,_.config.apiKey,_.name);let Nt=null;for(const Pn of E)try{const zn=yield Pn._get(st);if(zn){const nr=Nr._fromJSON(_,zn);Pn!==Z&&(Nt=nr),Z=Pn;break}}catch{}const mn=se.filter(Pn=>Pn._shouldAllowMigration);return Z._shouldAllowMigration&&mn.length?(Z=mn[0],Nt&&(yield Z._set(st,Nt.toJSON())),yield Promise.all(E.map(function(){var Pn=(0,T.Z)(function*(zn){if(zn!==Z)try{yield zn._remove(st)}catch{}});return function(zn){return Pn.apply(this,arguments)}}())),new _e(Z,_,M)):new _e(Z,_,M)})()}}function Ce(D){const _=D.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Qt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(be(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(ve(_))return"Blackberry";if(ye(_))return"Webos";if(Pe(_))return"Safari";if((_.includes("chrome/")||Et(_))&&!_.includes("edge/"))return"Chrome";if(En(_))return"Android";{const M=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function be(D=(0,le.z$)()){return/firefox\//i.test(D)}function Pe(D=(0,le.z$)()){const _=D.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function Et(D=(0,le.z$)()){return/crios\//i.test(D)}function Qt(D=(0,le.z$)()){return/iemobile/i.test(D)}function En(D=(0,le.z$)()){return/android/i.test(D)}function ve(D=(0,le.z$)()){return/blackberry/i.test(D)}function ye(D=(0,le.z$)()){return/webos/i.test(D)}function He(D=(0,le.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Hr(D=(0,le.z$)()){return He(D)||En(D)||ye(D)||ve(D)||/windows phone/i.test(D)||Qt(D)}function Ut(D,_=[]){let E;switch(D){case"Browser":E=Ce((0,le.z$)());break;case"Worker":E=`${Ce((0,le.z$)())}-${D}`;break;default:E=D}const M=_.length?_.join(","):"FirebaseCore-web";return`${E}/JsCore/${B.SDK_VERSION}/${M}`}function nn(){return(nn=(0,T.Z)(function*(D){return(yield ft(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function On(D,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,T.Z)(function*(D,_){return ft(D,"GET","/v2/recaptchaConfig",It(D,_))})).apply(this,arguments)}function fr(D){return void 0!==D&&void 0!==D.getResponse}function Er(D){return void 0!==D&&void 0!==D.enterprise}class ri{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(E=>"EMAIL_PASSWORD_PROVIDER"===E.provider&&"OFF"!==E.enforcementState)}}function di(D){return new Promise((_,E)=>{const M=document.createElement("script");M.setAttribute("src",D),M.onload=_,M.onerror=se=>{const Z=Te("internal-error");Z.customData=se,E(Z)},M.type="text/javascript",M.charset="UTF-8",function pi(){var D,_;return null!==(_=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==_?_:document}().appendChild(M)})}function gs(D){return`__${D}${Math.floor(1e6*Math.random())}`}class $o{constructor(_){this.type="recaptcha-enterprise",this.auth=hi(_)}verify(_="verify",E=!1){var M=this;return(0,T.Z)(function*(){function Z(){return Z=(0,T.Z)(function*(Nt){if(!E){if(null==Nt.tenantId&&null!=Nt._agentRecaptchaConfig)return Nt._agentRecaptchaConfig.siteKey;if(null!=Nt.tenantId&&void 0!==Nt._tenantRecaptchaConfigs[Nt.tenantId])return Nt._tenantRecaptchaConfigs[Nt.tenantId].siteKey}return new Promise(function(){var mn=(0,T.Z)(function*(Pn,zn){On(Nt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nr=>{if(void 0!==nr.recaptchaKey){const Zi=new ri(nr);return null==Nt.tenantId?Nt._agentRecaptchaConfig=Zi:Nt._tenantRecaptchaConfigs[Nt.tenantId]=Zi,Pn(Zi.siteKey)}zn(new Error("recaptcha Enterprise site key undefined"))}).catch(nr=>{zn(nr)})});return function(Pn,zn){return mn.apply(this,arguments)}}())}),Z.apply(this,arguments)}function st(Nt,mn,Pn){const zn=window.grecaptcha;Er(zn)?zn.enterprise.ready(()=>{zn.enterprise.execute(Nt,{action:_}).then(nr=>{mn(nr)}).catch(()=>{mn("NO_RECAPTCHA")})}):Pn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Nt,mn)=>{(function se(Nt){return Z.apply(this,arguments)})(M.auth).then(Pn=>{if(!E&&Er(window.grecaptcha))st(Pn,Nt,mn);else{if(typeof window>"u")return void mn(new Error("RecaptchaVerifier is only supported in browser"));di("https://www.google.com/recaptcha/enterprise.js?render="+Pn).then(()=>{st(Pn,Nt,mn)}).catch(zn=>{mn(zn)})}}).catch(Pn=>{mn(Pn)})})})()}}function cs(D,_,E){return Go.apply(this,arguments)}function Go(){return(Go=(0,T.Z)(function*(D,_,E,M=!1){const se=new $o(D);let Z;try{Z=yield se.verify(E)}catch{Z=yield se.verify(E,!0)}const st=Object.assign({},_);return Object.assign(st,M?{captchaResp:Z}:{captchaResponse:Z}),Object.assign(st,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(st,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),st})).apply(this,arguments)}class ms{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,E){const M=Z=>new Promise((st,Nt)=>{try{st(_(Z))}catch(mn){Nt(mn)}});M.onAbort=E,this.queue.push(M);const se=this.queue.length-1;return()=>{this.queue[se]=()=>Promise.resolve()}}runMiddleware(_){var E=this;return(0,T.Z)(function*(){if(E.auth.currentUser===_)return;const M=[];try{for(const se of E.queue)yield se(_),se.onAbort&&M.push(se.onAbort)}catch(se){M.reverse();for(const Z of M)try{Z()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:se?.message})}})()}}class _i{constructor(_,E,M,se){this.app=_,this.heartbeatServiceProvider=E,this.appCheckServiceProvider=M,this.config=se,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new to(this),this.idTokenSubscription=new to(this),this.beforeStateQueue=new ms(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=se.sdkClientVersion}_initializeWithPersistence(_,E){var M=this;return E&&(this._popupRedirectResolver=Ar(E)),this._initializationPromise=this.queue((0,T.Z)(function*(){var se,Z;if(!M._deleted&&(M.persistenceManager=yield _e.create(M,_),!M._deleted)){if(null!==(se=M._popupRedirectResolver)&&void 0!==se&&se._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(E),M.lastNotifiedUid=(null===(Z=M.currentUser)||void 0===Z?void 0:Z.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,T.Z)(function*(){if(_._deleted)return;const E=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||E){if(_.currentUser&&E&&_.currentUser.uid===E.uid)return _._currentUser._assign(E),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(E,!0)}})()}initializeCurrentUser(_){var E=this;return(0,T.Z)(function*(){var M;const se=yield E.assertedPersistence.getCurrentUser();let Z=se,st=!1;if(_&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Nt=null===(M=E.redirectUser)||void 0===M?void 0:M._redirectEventId,mn=Z?._redirectEventId,Pn=yield E.tryRedirectSignIn(_);(!Nt||Nt===mn)&&Pn?.user&&(Z=Pn.user,st=!0)}if(!Z)return E.directlySetCurrentUser(null);if(!Z._redirectEventId){if(st)try{yield E.beforeStateQueue.runMiddleware(Z)}catch(Nt){Z=se,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Nt))}return Z?E.reloadAndSetCurrentUserOrClear(Z):E.directlySetCurrentUser(null)}return oe(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===Z._redirectEventId?E.directlySetCurrentUser(Z):E.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(_){var E=this;return(0,T.Z)(function*(){let M=null;try{M=yield E._popupRedirectResolver._completeRedirectFn(E,_,!0)}catch{yield E._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(_){var E=this;return(0,T.Z)(function*(){try{yield Fr(_)}catch(M){if("auth/network-request-failed"!==M?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Zt(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var _=this;return(0,T.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var E=this;return(0,T.Z)(function*(){const M=_?(0,le.m9)(_):null;return M&&oe(M.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(M&&M._clone(E))})()}_updateCurrentUser(_,E=!1){var M=this;return(0,T.Z)(function*(){if(!M._deleted)return _&&oe(M.tenantId===_.tenantId,M,"tenant-id-mismatch"),E||(yield M.beforeStateQueue.runMiddleware(_)),M.queue((0,T.Z)(function*(){yield M.directlySetCurrentUser(_),M.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,T.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var E=this;return this.queue((0,T.Z)(function*(){yield E.assertedPersistence.setPersistence(Ar(_))}))}initializeRecaptchaConfig(){var _=this;return(0,T.Z)(function*(){const E=yield On(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),M=new ri(E);null==_.tenantId?_._agentRecaptchaConfig=M:_._tenantRecaptchaConfigs[_.tenantId]=M,M.emailPasswordEnabled&&new $o(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new le.LL("auth","Firebase",_())}onAuthStateChanged(_,E,M){return this.registerStateListener(this.authStateSubscription,_,E,M)}beforeAuthStateChanged(_,E){return this.beforeStateQueue.pushCallback(_,E)}onIdTokenChanged(_,E,M){return this.registerStateListener(this.idTokenSubscription,_,E,M)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,E){var M=this;return(0,T.Z)(function*(){const se=yield M.getOrInitRedirectPersistenceManager(E);return null===_?se.removeCurrentUser():se.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var E=this;return(0,T.Z)(function*(){if(!E.redirectPersistenceManager){const M=_&&Ar(_)||E._popupRedirectResolver;oe(M,E,"argument-error"),E.redirectPersistenceManager=yield _e.create(E,[Ar(M._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(_){var E=this;return(0,T.Z)(function*(){var M,se;return E._isInitialized&&(yield E.queue((0,T.Z)(function*(){}))),(null===(M=E._currentUser)||void 0===M?void 0:M._redirectEventId)===_?E._currentUser:(null===(se=E.redirectUser)||void 0===se?void 0:se._redirectEventId)===_?E.redirectUser:null})()}_persistUserIfCurrent(_){var E=this;return(0,T.Z)(function*(){if(_===E.currentUser)return E.queue((0,T.Z)(function*(){return E.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(E=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,E,M,se){if(this._deleted)return()=>{};const Z="function"==typeof E?E:E.next.bind(E),st=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(st,this,"internal-error"),st.then(()=>Z(this.currentUser)),"function"==typeof E?_.addObserver(E,M,se):_.addObserver(E)}directlySetCurrentUser(_){var E=this;return(0,T.Z)(function*(){E.currentUser&&E.currentUser!==_&&E._currentUser._stopProactiveRefresh(),_&&E.isProactiveRefreshEnabled&&_._startProactiveRefresh(),E.currentUser=_,_?yield E.assertedPersistence.setCurrentUser(_):yield E.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,T.Z)(function*(){var E;const M={"X-Client-Version":_.clientVersion};_.app.options.appId&&(M["X-Firebase-gmpid"]=_.app.options.appId);const se=yield null===(E=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();se&&(M["X-Firebase-Client"]=se);const Z=yield _._getAppCheckToken();return Z&&(M["X-Firebase-AppCheck"]=Z),M})()}_getAppCheckToken(){var _=this;return(0,T.Z)(function*(){var E;const M=yield null===(E=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getToken();return M?.error&&function W(D,..._){Ke.logLevel<=Ne.in.WARN&&Ke.warn(`Auth (${B.SDK_VERSION}): ${D}`,..._)}(`Error while retrieving App Check token: ${M.error}`),M?.token})()}}function hi(D){return(0,le.m9)(D)}class to{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,le.ne)(E=>this.observer=E)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function no(D){const _=D.indexOf(":");return _<0?"":D.substr(0,_+1)}function Ia(D){if(!D)return null;const _=Number(D);return isNaN(_)?null:_}class Rs{constructor(_,E){this.providerId=_,this.signInMethod=E}toJSON(){return Fe("not implemented")}_getIdTokenResponse(_){return Fe("not implemented")}_linkToIdToken(_,E){return Fe("not implemented")}_getReauthenticationResolver(_){return Fe("not implemented")}}function xa(D,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:resetPassword",It(D,_))})).apply(this,arguments)}function du(D,_){return As.apply(this,arguments)}function As(){return(As=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ds(){return(ds=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:update",It(D,_))})).apply(this,arguments)}function yi(D,_){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithPassword",It(D,_))})).apply(this,arguments)}function ss(D,_){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:sendOobCode",It(D,_))})).apply(this,arguments)}function vt(){return(vt=(0,T.Z)(function*(D,_){return ss(D,_)})).apply(this,arguments)}function Ot(D,_){return xt.apply(this,arguments)}function xt(){return(xt=(0,T.Z)(function*(D,_){return ss(D,_)})).apply(this,arguments)}function un(D,_){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,T.Z)(function*(D,_){return ss(D,_)})).apply(this,arguments)}function Kn(){return(Kn=(0,T.Z)(function*(D,_){return ss(D,_)})).apply(this,arguments)}function Ys(){return(Ys=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithEmailLink",It(D,_))})).apply(this,arguments)}function hs(){return(hs=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithEmailLink",It(D,_))})).apply(this,arguments)}class Fi extends Rs{constructor(_,E,M,se=null){super("password",M),this._email=_,this._password=E,this._tenantId=se}static _fromEmailAndPassword(_,E){return new Fi(_,E,"password")}static _fromEmailAndCode(_,E,M=null){return new Fi(_,E,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(_){var E=this;return(0,T.Z)(function*(){var M;switch(E.signInMethod){case"password":const se={returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(M=_._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const Z=yield cs(_,se,"signInWithPassword");return yi(_,Z)}return yi(_,se).catch(function(){var Z=(0,T.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Nt=yield cs(_,se,"signInWithPassword");return yi(_,Nt)}return Promise.reject(st)});return function(st){return Z.apply(this,arguments)}}());case"emailLink":return function Mr(D,_){return Ys.apply(this,arguments)}(_,{email:E._email,oobCode:E._password});default:Ee(_,"internal-error")}})()}_linkToIdToken(_,E){var M=this;return(0,T.Z)(function*(){switch(M.signInMethod){case"password":return du(_,{idToken:E,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function vs(D,_){return hs.apply(this,arguments)}(_,{idToken:E,email:M._email,oobCode:M._password});default:Ee(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function ys(D,_){return Us.apply(this,arguments)}function Us(){return(Us=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithIdp",It(D,_))})).apply(this,arguments)}class jr extends Rs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const E=new jr(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(E.idToken=_.idToken),_.accessToken&&(E.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(E.nonce=_.nonce),_.pendingToken&&(E.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(E.accessToken=_.oauthToken,E.secret=_.oauthTokenSecret):Ee("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_,{providerId:M,signInMethod:se}=E,Z=(0,Re._T)(E,["providerId","signInMethod"]);if(!M||!se)return null;const st=new jr(M,se);return st.idToken=Z.idToken||void 0,st.accessToken=Z.accessToken||void 0,st.secret=Z.secret,st.nonce=Z.nonce,st.pendingToken=Z.pendingToken||null,st}_getIdTokenResponse(_){return ys(_,this.buildRequest())}_linkToIdToken(_,E){const M=this.buildRequest();return M.idToken=E,ys(_,M)}_getReauthenticationResolver(_){const E=this.buildRequest();return E.autoCreate=!1,ys(_,E)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),_.postBody=(0,le.xO)(E)}return _}}function Es(){return(Es=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:sendVerificationCode",It(D,_))})).apply(this,arguments)}function zo(){return(zo=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithPhoneNumber",It(D,_))})).apply(this,arguments)}function go(){return(go=(0,T.Z)(function*(D,_){const E=yield Tn(D,"POST","/v1/accounts:signInWithPhoneNumber",It(D,_));if(E.temporaryProof)throw ir(D,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const ca={USER_NOT_FOUND:"user-not-found"};function Vs(){return(Vs=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithPhoneNumber",It(D,Object.assign(Object.assign({},_),{operation:"REAUTH"})),ca)})).apply(this,arguments)}class Ti extends Rs{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,E){return new Ti({verificationId:_,verificationCode:E})}static _fromTokenResponse(_,E){return new Ti({phoneNumber:_,temporaryProof:E})}_getIdTokenResponse(_){return function Hi(D,_){return zo.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,E){return function ro(D,_){return go.apply(this,arguments)}(_,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Uu(D,_){return Vs.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:E,verificationId:M,verificationCode:se}=this.params;return _&&E?{temporaryProof:_,phoneNumber:E}:{sessionInfo:M,code:se}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:E,verificationCode:M,phoneNumber:se,temporaryProof:Z}=_;return M||E||se||Z?new Ti({verificationId:E,verificationCode:M,phoneNumber:se,temporaryProof:Z}):null}}class $r{constructor(_){var E,M,se,Z,st,Nt;const mn=(0,le.zd)((0,le.pd)(_)),Pn=null!==(E=mn.apiKey)&&void 0!==E?E:null,zn=null!==(M=mn.oobCode)&&void 0!==M?M:null,nr=function Aa(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(se=mn.mode)&&void 0!==se?se:null);oe(Pn&&zn&&nr,"argument-error"),this.apiKey=Pn,this.operation=nr,this.code=zn,this.continueUrl=null!==(Z=mn.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(st=mn.languageCode)&&void 0!==st?st:null,this.tenantId=null!==(Nt=mn.tenantId)&&void 0!==Nt?Nt:null}static parseLink(_){const E=function jo(D){const _=(0,le.zd)((0,le.pd)(D)).link,E=_?(0,le.zd)((0,le.pd)(_)).deep_link_id:null,M=(0,le.zd)((0,le.pd)(D)).deep_link_id;return(M?(0,le.zd)((0,le.pd)(M)).link:null)||M||E||_||D}(_);try{return new $r(E)}catch{return null}}}let da=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(E,M){return Fi._fromEmailAndPassword(E,M)}static credentialWithLink(E,M){const se=$r.parseLink(M);return oe(se,"argument-error"),Fi._fromEmailAndCode(E,se.code,se.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class ji{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class fs extends ji{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Hs extends fs{static credentialFromJSON(_){const E="string"==typeof _?JSON.parse(_):_;return oe("providerId"in E&&"signInMethod"in E,"argument-error"),jr._fromParams(E)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return oe(_.idToken||_.accessToken,"argument-error"),jr._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Hs.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Hs.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:M,oauthTokenSecret:se,pendingToken:Z,nonce:st,providerId:Nt}=_;if(!M&&!se&&!E&&!Z||!Nt)return null;try{return new Hs(Nt)._credential({idToken:E,accessToken:M,nonce:st,pendingToken:Z})}catch{return null}}}let ha=(()=>{class D extends fs{constructor(){super("facebook.com")}static credential(E){return jr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),tu=(()=>{class D extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(E,M){return jr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:M,oauthAccessToken:se}=E;if(!M&&!se)return null;try{return D.credential(M,se)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Cs=(()=>{class D extends fs{constructor(){super("github.com")}static credential(E){return jr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Lr extends Rs{constructor(_,E){super(_,_),this.pendingToken=E}_getIdTokenResponse(_){return ys(_,this.buildRequest())}_linkToIdToken(_,E){const M=this.buildRequest();return M.idToken=E,ys(_,M)}_getReauthenticationResolver(_){const E=this.buildRequest();return E.autoCreate=!1,ys(_,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_,{providerId:M,signInMethod:se,pendingToken:Z}=E;return M&&se&&Z&&M===se?new Lr(M,Z):null}static _create(_,E){return new Lr(_,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mo extends ji{constructor(_){oe(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return mo.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return mo.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const E=Lr.fromJSON(_);return oe(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:E,providerId:M}=_;if(!E||!M)return null;try{return Lr._create(M,E)}catch{return null}}}let Ji=(()=>{class D extends fs{constructor(){super("twitter.com")}static credential(E,M){return jr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:M,oauthTokenSecret:se}=E;if(!M||!se)return null;try{return D.credential(M,se)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Bo(D,_){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signUp",It(D,_))})).apply(this,arguments)}class xi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,E,M,se=!1){return(0,T.Z)(function*(){const Z=yield Nr._fromIdTokenResponse(_,M,se),st=Ai(M);return new xi({user:Z,providerId:st,_tokenResponse:M,operationType:E})})()}static _forOperation(_,E,M){return(0,T.Z)(function*(){yield _._updateTokensIfNecessary(M,!0);const se=Ai(M);return new xi({user:_,providerId:se,_tokenResponse:M,operationType:E})})()}}function Ai(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Vu(){return(Vu=(0,T.Z)(function*(D){var _;const E=hi(D);if(yield E._initializationPromise,null!==(_=E.currentUser)&&void 0!==_&&_.isAnonymous)return new xi({user:E.currentUser,providerId:null,operationType:"signIn"});const M=yield Bo(E,{returnSecureToken:!0}),se=yield xi._fromIdTokenResponse(E,"signIn",M,!0);return yield E._updateCurrentUser(se.user),se})).apply(this,arguments)}class fu extends le.ZR{constructor(_,E,M,se){var Z;super(E.code,E.message),this.operationType=M,this.user=se,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:_.name,tenantId:null!==(Z=_.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:E.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(_,E,M,se){return new fu(_,E,M,se)}}function Ma(D,_,E,M){return("reauthenticate"===_?E._getReauthenticationResolver(D):E._getIdTokenResponse(D)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?fu._fromErrorAndOperation(D,Z,_,M):Z})}function Ka(D){return new Set(D.map(({providerId:_})=>_).filter(_=>!!_))}function Uo(){return Uo=(0,T.Z)(function*(D,_){const E=(0,le.m9)(D);yield nu(!0,E,_);const{providerUserInfo:M}=yield function xr(D,_){return hr.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[_]}),se=Ka(M||[]);return E.providerData=E.providerData.filter(Z=>se.has(Z.providerId)),se.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),Uo.apply(this,arguments)}function ka(D,_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,T.Z)(function*(D,_,E=!1){const M=yield ar(D,_._linkToIdToken(D.auth,yield D.getIdToken()),E);return xi._forOperation(D,"link",M)})).apply(this,arguments)}function nu(D,_,E){return pu.apply(this,arguments)}function pu(){return(pu=(0,T.Z)(function*(D,_,E){yield Fr(_);const se=!1===D?"provider-already-linked":"no-such-provider";oe(Ka(_.providerData).has(E)===D,_.auth,se)})).apply(this,arguments)}function lo(D,_){return fa.apply(this,arguments)}function fa(){return(fa=(0,T.Z)(function*(D,_,E=!1){const{auth:M}=D,se="reauthenticate";try{const Z=yield ar(D,Ma(M,se,_,D),E);oe(Z.idToken,M,"internal-error");const st=Nn(Z.idToken);oe(st,M,"internal-error");const{sub:Nt}=st;return oe(D.uid===Nt,M,"user-mismatch"),xi._forOperation(D,se,Z)}catch(Z){throw"auth/user-not-found"===Z?.code&&Ee(M,"user-mismatch"),Z}})).apply(this,arguments)}function Za(D,_){return ie.apply(this,arguments)}function ie(){return(ie=(0,T.Z)(function*(D,_,E=!1){const M="signIn",se=yield Ma(D,M,_),Z=yield xi._fromIdTokenResponse(D,M,se);return E||(yield D._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Q(D,_){return q.apply(this,arguments)}function q(){return(q=(0,T.Z)(function*(D,_){return Za(hi(D),_)})).apply(this,arguments)}function Oe(D,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,T.Z)(function*(D,_){const E=(0,le.m9)(D);return yield nu(!1,E,_.providerId),ka(E,_)})).apply(this,arguments)}function J(D,_){return ne.apply(this,arguments)}function ne(){return(ne=(0,T.Z)(function*(D,_){return lo((0,le.m9)(D),_)})).apply(this,arguments)}function tt(){return(tt=(0,T.Z)(function*(D,_){return Tn(D,"POST","/v1/accounts:signInWithCustomToken",It(D,_))})).apply(this,arguments)}function Vt(){return Vt=(0,T.Z)(function*(D,_){const E=hi(D),M=yield function Me(D,_){return tt.apply(this,arguments)}(E,{token:_,returnSecureToken:!0}),se=yield xi._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(se.user),se}),Vt.apply(this,arguments)}class fn{constructor(_,E){this.factorId=_,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(_,E){return"phoneInfo"in E?Yn._fromServerResponse(_,E):"totpInfo"in E?Wn._fromServerResponse(_,E):Ee(_,"internal-error")}}class Yn extends fn{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,E){return new Yn(E)}}class Wn extends fn{constructor(_){super("totp",_)}static _fromServerResponse(_,E){return new Wn(E)}}function pr(D,_,E){var M;oe((null===(M=E.url)||void 0===M?void 0:M.length)>0,D,"invalid-continue-uri"),oe(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),_.continueUrl=E.url,_.dynamicLinkDomain=E.dynamicLinkDomain,_.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(oe(E.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),_.iOSBundleId=E.iOS.bundleId),E.android&&(oe(E.android.packageName.length>0,D,"missing-android-pkg-name"),_.androidInstallApp=E.android.installApp,_.androidMinimumVersionCode=E.android.minimumVersion,_.androidPackageName=E.android.packageName)}function ii(){return ii=(0,T.Z)(function*(D,_,E){var M;const se=hi(D),Z={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(M=se._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const st=yield cs(se,Z,"getOobCode",!0);E&&pr(se,st,E),yield Ot(se,st)}else E&&pr(se,Z,E),yield Ot(se,Z).catch(function(){var st=(0,T.Z)(function*(Nt){if("auth/missing-recaptcha-token"!==Nt.code)return Promise.reject(Nt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const mn=yield cs(se,Z,"getOobCode",!0);E&&pr(se,mn,E),yield Ot(se,mn)}});return function(Nt){return st.apply(this,arguments)}}())}),ii.apply(this,arguments)}function Mi(){return(Mi=(0,T.Z)(function*(D,_,E){yield xa((0,le.m9)(D),{oobCode:_,newPassword:E})})).apply(this,arguments)}function $i(){return $i=(0,T.Z)(function*(D,_){yield function Ir(D,_){return ds.apply(this,arguments)}((0,le.m9)(D),{oobCode:_})}),$i.apply(this,arguments)}function _s(D,_){return $s.apply(this,arguments)}function $s(){return($s=(0,T.Z)(function*(D,_){const E=(0,le.m9)(D),M=yield xa(E,{oobCode:_}),se=M.requestType;switch(oe(se,E,"internal-error"),se){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(M.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(M.mfaInfo,E,"internal-error");default:oe(M.email,E,"internal-error")}let Z=null;return M.mfaInfo&&(Z=fn._fromServerResponse(hi(E),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:Z},operation:se}})).apply(this,arguments)}function Gi(){return(Gi=(0,T.Z)(function*(D,_){const{data:E}=yield _s((0,le.m9)(D),_);return E.email})).apply(this,arguments)}function zs(){return zs=(0,T.Z)(function*(D,_,E){var M;const se=hi(D),Z={returnSecureToken:!0,email:_,password:E,clientType:"CLIENT_TYPE_WEB"};let st;if(null!==(M=se._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const Pn=yield cs(se,Z,"signUpPassword");st=Bo(se,Pn)}else st=Bo(se,Z).catch(function(){var Pn=(0,T.Z)(function*(zn){if("auth/missing-recaptcha-token"===zn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nr=yield cs(se,Z,"signUpPassword");return Bo(se,nr)}return Promise.reject(zn)});return function(zn){return Pn.apply(this,arguments)}}());const Nt=yield st.catch(Pn=>Promise.reject(Pn)),mn=yield xi._fromIdTokenResponse(se,"signIn",Nt);return yield se._updateCurrentUser(mn.user),mn}),zs.apply(this,arguments)}function es(){return es=(0,T.Z)(function*(D,_,E){var M;const se=hi(D),Z={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function st(Nt,mn){oe(mn.handleCodeInApp,se,"argument-error"),mn&&pr(se,Nt,mn)}if(null!==(M=se._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const Nt=yield cs(se,Z,"getOobCode",!0);st(Nt,E),yield un(se,Nt)}else st(Z,E),yield un(se,Z).catch(function(){var Nt=(0,T.Z)(function*(mn){if("auth/missing-recaptcha-token"!==mn.code)return Promise.reject(mn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Pn=yield cs(se,Z,"getOobCode",!0);st(Pn,E),yield un(se,Pn)}});return function(mn){return Nt.apply(this,arguments)}}())}),es.apply(this,arguments)}function Hu(){return(Hu=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D),se=da.credentialWithLink(_,E||Ht());return oe(se._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Q(M,se)})).apply(this,arguments)}function ga(){return(ga=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:createAuthUri",It(D,_))})).apply(this,arguments)}function Eu(){return Eu=(0,T.Z)(function*(D,_){const M={identifier:_,continueUri:Gt()?Ht():"http://localhost"},{signinMethods:se}=yield function Ql(D,_){return ga.apply(this,arguments)}((0,le.m9)(D),M);return se||[]}),Eu.apply(this,arguments)}function Oa(){return Oa=(0,T.Z)(function*(D,_){const E=(0,le.m9)(D),se={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};_&&pr(E.auth,se,_);const{email:Z}=yield function bt(D,_){return vt.apply(this,arguments)}(E.auth,se);Z!==D.email&&(yield D.reload())}),Oa.apply(this,arguments)}function Gu(){return Gu=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:_};E&&pr(M.auth,Z,E);const{email:st}=yield function Dn(D,_){return Kn.apply(this,arguments)}(M.auth,Z);st!==D.email&&(yield D.reload())}),Gu.apply(this,arguments)}function Su(){return(Su=(0,T.Z)(function*(D,_){return ft(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ma(){return ma=(0,T.Z)(function*(D,{displayName:_,photoURL:E}){if(void 0===_&&void 0===E)return;const M=(0,le.m9)(D),Z={idToken:yield M.getIdToken(),displayName:_,photoUrl:E,returnSecureToken:!0},st=yield ar(M,function Cu(D,_){return Su.apply(this,arguments)}(M.auth,Z));M.displayName=st.displayName||null,M.photoURL=st.photoUrl||null;const Nt=M.providerData.find(({providerId:mn})=>"password"===mn);Nt&&(Nt.displayName=M.displayName,Nt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(st)}),ma.apply(this,arguments)}function ws(D,_,E){return ea.apply(this,arguments)}function ea(){return(ea=(0,T.Z)(function*(D,_,E){const{auth:M}=D,Z={idToken:yield D.getIdToken(),returnSecureToken:!0};_&&(Z.email=_),E&&(Z.password=E);const st=yield ar(D,du(M,Z));yield D._updateTokensIfNecessary(st,!0)})).apply(this,arguments)}class Qr{constructor(_,E,M={}){this.isNewUser=_,this.providerId=E,this.profile=M}}class ta extends Qr{constructor(_,E,M,se){super(_,E,M),this.username=se}}class L extends Qr{constructor(_,E){super(_,"facebook.com",E)}}class ce extends ta{constructor(_,E){super(_,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class K extends Qr{constructor(_,E){super(_,"google.com",E)}}class Se extends ta{constructor(_,E,M){super(_,"twitter.com",E,M)}}function it(D){const{user:_,_tokenResponse:E}=D;return _.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Jl(D){var _,E;if(!D)return null;const{providerId:M}=D,se=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},Z=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!M&&D?.idToken){const st=null===(E=null===(_=Nn(D.idToken))||void 0===_?void 0:_.firebase)||void 0===E?void 0:E.sign_in_provider;if(st)return new Qr(Z,"anonymous"!==st&&"custom"!==st?st:null)}if(!M)return null;switch(M){case"facebook.com":return new L(Z,se);case"github.com":return new ce(Z,se);case"google.com":return new K(Z,se);case"twitter.com":return new Se(Z,se,D.screenName||null);case"custom":case"anonymous":return new Qr(Z,null);default:return new Qr(Z,M,se)}}(E)}class Ws{constructor(_,E,M){this.type=_,this.credential=E,this.auth=M}static _fromIdtoken(_,E){return new Ws("enroll",_,E)}static _fromMfaPendingCredential(_){return new Ws("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var E,M;if(_?.multiFactorSession){if(null!==(E=_.multiFactorSession)&&void 0!==E&&E.pendingCredential)return Ws._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(M=_.multiFactorSession)&&void 0!==M&&M.idToken)return Ws._fromIdtoken(_.multiFactorSession.idToken)}return null}}class ur{constructor(_,E,M){this.session=_,this.hints=E,this.signInResolver=M}static _fromError(_,E){const M=hi(_),se=E.customData._serverResponse,Z=(se.mfaInfo||[]).map(Nt=>fn._fromServerResponse(M,Nt));oe(se.mfaPendingCredential,M,"internal-error");const st=Ws._fromMfaPendingCredential(se.mfaPendingCredential);return new ur(st,Z,function(){var Nt=(0,T.Z)(function*(mn){const Pn=yield mn._process(M,st);delete se.mfaInfo,delete se.mfaPendingCredential;const zn=Object.assign(Object.assign({},se),{idToken:Pn.idToken,refreshToken:Pn.refreshToken});switch(E.operationType){case"signIn":const nr=yield xi._fromIdTokenResponse(M,E.operationType,zn);return yield M._updateCurrentUser(nr.user),nr;case"reauthenticate":return oe(E.user,M,"internal-error"),xi._forOperation(E.user,E.operationType,zn);default:Ee(M,"internal-error")}});return function(mn){return Nt.apply(this,arguments)}}())}resolveSignIn(_){var E=this;return(0,T.Z)(function*(){return E.signInResolver(_)})()}}class Ra{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(M=>fn._fromServerResponse(_.auth,M)))})}static _fromUser(_){return new Ra(_)}getSession(){var _=this;return(0,T.Z)(function*(){return Ws._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,E){var M=this;return(0,T.Z)(function*(){const se=_,Z=yield M.getSession(),st=yield ar(M.user,se._process(M.user.auth,Z,E));return yield M.user._updateTokensIfNecessary(st),M.user.reload()})()}unenroll(_){var E=this;return(0,T.Z)(function*(){const M="string"==typeof _?_:_.uid,se=yield E.user.getIdToken();try{const Z=yield ar(E.user,function Oc(D,_){return ft(D,"POST","/v2/accounts/mfaEnrollment:withdraw",It(D,_))}(E.user.auth,{idToken:se,mfaEnrollmentId:M}));E.enrolledFactors=E.enrolledFactors.filter(({uid:st})=>st!==M),yield E.user._updateTokensIfNecessary(Z),yield E.user.reload()}catch(Z){throw Z}})()}}const Dl=new WeakMap,Rc="__sak";class xl{constructor(_,E){this.storageRetriever=_,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,E){return this.storage.setItem(_,JSON.stringify(E)),Promise.resolve()}_get(_){const E=this.storage.getItem(_);return Promise.resolve(E?JSON.parse(E):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ns=(()=>{class D extends xl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,M)=>this.onStorageEvent(E,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ra(){const D=(0,le.z$)();return Pe(D)||He(D)}()&&function ui(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const M of Object.keys(this.listeners)){const se=this.storage.getItem(M),Z=this.localCache[M];se!==Z&&E(M,Z,se)}}onStorageEvent(E,M=!1){if(!E.key)return void this.forAllChangedKeys((Nt,mn,Pn)=>{this.notifyListeners(Nt,Pn)});const se=E.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Nt=this.storage.getItem(se);if(E.newValue!==Nt)null!==E.newValue?this.storage.setItem(se,E.newValue):this.storage.removeItem(se);else if(this.localCache[se]===E.newValue&&!M)return}const Z=()=>{const Nt=this.storage.getItem(se);!M&&this.localCache[se]===Nt||this.notifyListeners(se,Nt)},st=this.storage.getItem(se);!function Xn(){return(0,le.w1)()&&10===document.documentMode}()||st===E.newValue||E.newValue===E.oldValue?Z():setTimeout(Z,10)}notifyListeners(E,M){this.localCache[E]=M;const se=this.listeners[E];if(se)for(const Z of Array.from(se))Z(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,M,se)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:M,newValue:se}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,M){var se=()=>super._set,Z=this;return(0,T.Z)(function*(){yield se().call(Z,E,M),Z.localCache[E]=JSON.stringify(M)})()}_get(E){var M=()=>super._get,se=this;return(0,T.Z)(function*(){const Z=yield M().call(se,E);return se.localCache[E]=JSON.stringify(Z),Z})()}_remove(E){var M=()=>super._remove,se=this;return(0,T.Z)(function*(){yield M().call(se,E),delete se.localCache[E]})()}}return D.type="LOCAL",D})(),wu=(()=>{class D extends xl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,M){}_removeListener(E,M){}}return D.type="SESSION",D})();let zi=(()=>{class D{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const M=this.receivers.find(Z=>Z.isListeningto(E));if(M)return M;const se=new D(E);return this.receivers.push(se),se}isListeningto(E){return this.eventTarget===E}handleEvent(E){var M=this;return(0,T.Z)(function*(){const se=E,{eventId:Z,eventType:st,data:Nt}=se.data,mn=M.handlersMap[st];if(!mn?.size)return;se.ports[0].postMessage({status:"ack",eventId:Z,eventType:st});const Pn=Array.from(mn).map(function(){var nr=(0,T.Z)(function*(Zi){return Zi(se.origin,Nt)});return function(Zi){return nr.apply(this,arguments)}}()),zn=yield function Cn(D){return Promise.all(D.map(function(){var _=(0,T.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(M){return{fulfilled:!1,reason:M}}});return function(E){return _.apply(this,arguments)}}()))}(Pn);se.ports[0].postMessage({status:"done",eventId:Z,eventType:st,response:zn})})()}_subscribe(E,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(M)}_unsubscribe(E,M){this.handlersMap[E]&&M&&this.handlersMap[E].delete(M),(!M||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function To(D="",_=10){let E="";for(let M=0;M<_;M++)E+=Math.floor(10*Math.random());return D+E}class ec{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,E,M=50){var se=this;return(0,T.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let st,Nt;return new Promise((mn,Pn)=>{const zn=To("",20);Z.port1.start();const nr=setTimeout(()=>{Pn(new Error("unsupported_event"))},M);Nt={messageChannel:Z,onMessage(Zi){const Au=Zi;if(Au.data.eventId===zn)switch(Au.data.status){case"ack":clearTimeout(nr),st=setTimeout(()=>{Pn(new Error("timeout"))},3e3);break;case"done":clearTimeout(st),mn(Au.data.response);break;default:clearTimeout(nr),clearTimeout(st),Pn(new Error("invalid_response"))}}},se.handlers.add(Nt),Z.port1.addEventListener("message",Nt.onMessage),se.target.postMessage({eventType:_,eventId:zn,data:E},[Z.port2])}).finally(()=>{Nt&&se.removeMessageHandler(Nt)})})()}}function An(){return window}function tc(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function $t(){return($t=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Na="firebaseLocalStorageDb",nc="firebaseLocalStorage",_a="fbase_key";class so{constructor(_){this.request=_}toPromise(){return new Promise((_,E)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function ru(D,_){return D.transaction([nc],_?"readwrite":"readonly").objectStore(nc)}function rc(){const D=indexedDB.open(Na,1);return new Promise((_,E)=>{D.addEventListener("error",()=>{E(D.error)}),D.addEventListener("upgradeneeded",()=>{const M=D.result;try{M.createObjectStore(nc,{keyPath:_a})}catch(se){E(se)}}),D.addEventListener("success",(0,T.Z)(function*(){const M=D.result;M.objectStoreNames.contains(nc)?_(M):(M.close(),yield function dl(){const D=indexedDB.deleteDatabase(Na);return new so(D).toPromise()}(),_(yield rc()))}))})}function ic(D,_,E){return La.apply(this,arguments)}function La(){return(La=(0,T.Z)(function*(D,_,E){const M=ru(D,!0).put({[_a]:_,value:E});return new so(M).toPromise()})).apply(this,arguments)}function Cr(){return(Cr=(0,T.Z)(function*(D,_){const E=ru(D,!1).get(_),M=yield new so(E).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Wu(D,_){const E=ru(D,!0).delete(_);return new so(E).toPromise()}const bo=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,T.Z)(function*(){return E.db||(E.db=yield rc()),E.db})()}_withRetries(E){var M=this;return(0,T.Z)(function*(){let se=0;for(;;)try{const Z=yield M._openDb();return yield E(Z)}catch(Z){if(se++>3)throw Z;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,T.Z)(function*(){return tc()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,T.Z)(function*(){E.receiver=zi._getInstance(function oi(){return tc()?self:null}()),E.receiver._subscribe("keyChanged",function(){var M=(0,T.Z)(function*(se,Z){return{keyProcessed:(yield E._poll()).includes(Z.key)}});return function(se,Z){return M.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var M=(0,T.Z)(function*(se,Z){return["keyChanged"]});return function(se,Z){return M.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,T.Z)(function*(){var M,se;if(E.activeServiceWorker=yield function Sn(){return $t.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new ec(E.activeServiceWorker);const Z=yield E.sender._send("ping",{},800);Z&&null!==(M=Z[0])&&void 0!==M&&M.fulfilled&&null!==(se=Z[0])&&void 0!==se&&se.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var M=this;return(0,T.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function dn(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:E},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const E=yield rc();return yield ic(E,Rc,"1"),yield Wu(E,Rc),!0}catch{}return!1})()}_withPendingWrite(E){var M=this;return(0,T.Z)(function*(){M.pendingWrites++;try{yield E()}finally{M.pendingWrites--}})()}_set(E,M){var se=this;return(0,T.Z)(function*(){return se._withPendingWrite((0,T.Z)(function*(){return yield se._withRetries(Z=>ic(Z,E,M)),se.localCache[E]=M,se.notifyServiceWorker(E)}))})()}_get(E){var M=this;return(0,T.Z)(function*(){const se=yield M._withRetries(Z=>function ts(D,_){return Cr.apply(this,arguments)}(Z,E));return M.localCache[E]=se,se})()}_remove(E){var M=this;return(0,T.Z)(function*(){return M._withPendingWrite((0,T.Z)(function*(){return yield M._withRetries(se=>Wu(se,E)),delete M.localCache[E],M.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,T.Z)(function*(){const M=yield E._withRetries(st=>{const Nt=ru(st,!1).getAll();return new so(Nt).toPromise()});if(!M)return[];if(0!==E.pendingWrites)return[];const se=[],Z=new Set;for(const{fbase_key:st,value:Nt}of M)Z.add(st),JSON.stringify(E.localCache[st])!==JSON.stringify(Nt)&&(E.notifyListeners(st,Nt),se.push(st));for(const st of Object.keys(E.localCache))E.localCache[st]&&!Z.has(st)&&(E.notifyListeners(st,null),se.push(st));return se})()}notifyListeners(E,M){this.localCache[E]=M;const se=this.listeners[E];if(se)for(const Z of Array.from(se))Z(M)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),R=1e12;class I{constructor(_){this.auth=_,this.counter=R,this._widgets=new Map}render(_,E){const M=this.counter;return this._widgets.set(M,new $(_,this.auth.name,E||{})),this.counter++,M}reset(_){var E;const M=_||R;null===(E=this._widgets.get(M))||void 0===E||E.delete(),this._widgets.delete(M)}getResponse(_){var E;return(null===(E=this._widgets.get(_||R))||void 0===E?void 0:E.getResponse())||""}execute(_){var E=this;return(0,T.Z)(function*(){var M;return null===(M=E._widgets.get(_||R))||void 0===M||M.execute(),""})()}}class ${constructor(_,E,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const se="string"==typeof _?document.getElementById(_):_;oe(se,"argument-error",{appName:E}),this.container=se,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function de(D){const _=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<D;M++)_.push(E.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":E}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Le=gs("rcb"),Ue=new Yt(3e4,6e4);class sn{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=An().grecaptcha)||void 0===_||!_.render)}load(_,E=""){return oe(function er(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(E),_,"argument-error"),this.shouldResolveImmediately(E)&&fr(An().grecaptcha)?Promise.resolve(An().grecaptcha):new Promise((M,se)=>{const Z=An().setTimeout(()=>{se(Te(_,"network-request-failed"))},Ue.get());An()[Le]=()=>{An().clearTimeout(Z),delete An()[Le];const Nt=An().grecaptcha;if(!Nt||!fr(Nt))return void se(Te(_,"internal-error"));const mn=Nt.render;Nt.render=(Pn,zn)=>{const nr=mn(Pn,zn);return this.counter++,nr},this.hostLanguage=E,M(Nt)},di(`https://www.google.com/recaptcha/api.js??${(0,le.xO)({onload:Le,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(Z),se(Te(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var E;return!(null===(E=An().grecaptcha)||void 0===E||!E.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jn{load(_){return(0,T.Z)(function*(){return new I(_)})()}clearedOneInstance(){}}const Li="recaptcha",Vo={theme:"light",type:"image"};class Ta{constructor(_,E=Object.assign({},Vo),M){this.parameters=E,this.type=Li,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hi(M),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const se="string"==typeof _?document.getElementById(_):_;oe(se,this.auth,"argument-error"),this.container=se,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jn:new sn,this.validateStartingState()}verify(){var _=this;return(0,T.Z)(function*(){_.assertNotDestroyed();const E=yield _.render(),M=_.getAssertedRecaptcha();return M.getResponse(E)||new Promise(Z=>{const st=Nt=>{Nt&&(_.tokenChangeListeners.delete(st),Z(Nt))};_.tokenChangeListeners.add(st),_.isInvisible&&M.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return E=>{if(this.tokenChangeListeners.forEach(M=>M(E)),"function"==typeof _)_(E);else if("string"==typeof _){const M=An()[_];"function"==typeof M&&M(E)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,T.Z)(function*(){if(yield _.init(),!_.widgetId){let E=_.container;if(!_.isInvisible){const M=document.createElement("div");E.appendChild(M),E=M}_.widgetId=_.getAssertedRecaptcha().render(E,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,T.Z)(function*(){oe(Gt()&&!tc(),_.auth,"internal-error"),yield function gu(){let D=null;return new Promise(_=>{"complete"!==document.readyState?(D=()=>_(),window.addEventListener("load",D)):_()}).catch(_=>{throw D&&window.removeEventListener("load",D),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const E=yield function Pt(D){return nn.apply(this,arguments)}(_.auth);oe(E,_.auth,"internal-error"),_.parameters.sitekey=E})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Je{constructor(_,E){this.verificationId=_,this.onConfirmation=E}confirm(_){const E=Ti._fromVerification(this.verificationId,_);return this.onConfirmation(E)}}function Ls(){return(Ls=(0,T.Z)(function*(D,_,E){const M=hi(D),se=yield ja(M,_,(0,le.m9)(E));return new Je(se,Z=>Q(M,Z))})).apply(this,arguments)}function Fa(){return(Fa=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D);yield nu(!1,M,"phone");const se=yield ja(M.auth,_,(0,le.m9)(E));return new Je(se,Z=>Oe(M,Z))})).apply(this,arguments)}function Do(){return(Do=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D),se=yield ja(M.auth,_,(0,le.m9)(E));return new Je(se,Z=>J(M,Z))})).apply(this,arguments)}function ja(D,_,E){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,T.Z)(function*(D,_,E){var M;const se=yield E.verify();try{let Z;if(oe("string"==typeof se,D,"argument-error"),oe(E.type===Li,D,"argument-error"),Z="string"==typeof _?{phoneNumber:_}:_,"session"in Z){const st=Z.session;if("phoneNumber"in Z)return oe("enroll"===st.type,D,"internal-error"),(yield function na(D,_){return ft(D,"POST","/v2/accounts/mfaEnrollment:start",It(D,_))}(D,{idToken:st.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:se}})).phoneSessionInfo.sessionInfo;{oe("signin"===st.type,D,"internal-error");const Nt=(null===(M=Z.multiFactorHint)||void 0===M?void 0:M.uid)||Z.multiFactorUid;return oe(Nt,D,"missing-multi-factor-info"),(yield function Ni(D,_){return ft(D,"POST","/v2/accounts/mfaSignIn:start",It(D,_))}(D,{mfaPendingCredential:st.credential,mfaEnrollmentId:Nt,phoneSignInInfo:{recaptchaToken:se}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:st}=yield function eu(D,_){return Es.apply(this,arguments)}(D,{phoneNumber:Z.phoneNumber,recaptchaToken:se});return st}}finally{E._reset()}}),Ml.apply(this,arguments)}function Kd(){return(Kd=(0,T.Z)(function*(D,_){yield ka((0,le.m9)(D),_)})).apply(this,arguments)}let Nc=(()=>{class D{constructor(E){this.providerId=D.PROVIDER_ID,this.auth=hi(E)}verifyPhoneNumber(E,M){return ja(this.auth,E,(0,le.m9)(M))}static credential(E,M){return Ti._fromVerification(E,M)}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:M,temporaryProof:se}=E;return M&&se?Ti._fromTokenResponse(M,se):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Io(D,_){return _?Ar(_):(oe(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class xo extends Rs{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return ys(_,this._buildIdpRequest())}_linkToIdToken(_,E){return ys(_,this._buildIdpRequest(E))}_getReauthenticationResolver(_){return ys(_,this._buildIdpRequest())}_buildIdpRequest(_){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(E.idToken=_),E}}function kl(D){return Za(D.auth,new xo(D),D.bypassAuthState)}function Du(D){const{auth:_,user:E}=D;return oe(E,_,"internal-error"),lo(E,new xo(D),D.bypassAuthState)}function Fs(D){return oc.apply(this,arguments)}function oc(){return(oc=(0,T.Z)(function*(D){const{auth:_,user:E}=D;return oe(E,_,"internal-error"),ka(E,new xo(D),D.bypassAuthState)})).apply(this,arguments)}class od{constructor(_,E,M,se,Z=!1){this.auth=_,this.resolver=M,this.user=se,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var _=this;return new Promise(function(){var E=(0,T.Z)(function*(M,se){_.pendingPromise={resolve:M,reject:se};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(Z){_.reject(Z)}});return function(M,se){return E.apply(this,arguments)}}())}onAuthEvent(_){var E=this;return(0,T.Z)(function*(){const{urlResponse:M,sessionId:se,postBody:Z,tenantId:st,error:Nt,type:mn}=_;if(Nt)return void E.reject(Nt);const Pn={auth:E.auth,requestUri:M,sessionId:se,tenantId:st||void 0,postBody:Z||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(mn)(Pn))}catch(zn){E.reject(zn)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return kl;case"linkViaPopup":case"linkViaRedirect":return Fs;case"reauthViaPopup":case"reauthViaRedirect":return Du;default:Ee(this.auth,"internal-error")}}resolve(_){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ao=new Yt(2e3,1e4);function ad(){return(ad=(0,T.Z)(function*(D,_,E){const M=hi(D);gt(D,_,ji);const se=Io(M,E);return new Yd(M,"signInViaPopup",_,se).executeNotNull()})).apply(this,arguments)}function Fh(){return(Fh=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D);gt(M.auth,_,ji);const se=Io(M.auth,E);return new Yd(M.auth,"reauthViaPopup",_,se,M).executeNotNull()})).apply(this,arguments)}function ud(){return(ud=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D);gt(M.auth,_,ji);const se=Io(M.auth,E);return new Yd(M.auth,"linkViaPopup",_,se,M).executeNotNull()})).apply(this,arguments)}let Yd=(()=>{class D extends od{constructor(E,M,se,Z,st){super(E,M,Z,st),this.provider=se,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var E=this;return(0,T.Z)(function*(){const M=yield E.execute();return oe(M,E.auth,"internal-error"),M})()}onExecution(){var E=this;return(0,T.Z)(function*(){At(1===E.filter.length,"Popup operations only handle one event");const M=To();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],M),E.authWindow.associatedEvent=M,E.resolver._originValidation(E.auth).catch(se=>{E.reject(se)}),E.resolver._isIframeWebStorageSupported(E.auth,se=>{se||E.reject(Te(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const E=()=>{var M,se;this.pollId=null!==(se=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==se&&se.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(E,Ao.get())};E()}}return D.currentPopupAction=null,D})();const ld="pendingRedirect",uc=new Map;class Nf extends od{constructor(_,E,M=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,M),this.eventId=null}execute(){var _=()=>super.execute,E=this;return(0,T.Z)(function*(){let M=uc.get(E.auth._key());if(!M){try{const Z=(yield function Lc(D,_){return Qd.apply(this,arguments)}(E.resolver,E.auth))?yield _().call(E):null;M=()=>Promise.resolve(Z)}catch(se){M=()=>Promise.reject(se)}uc.set(E.auth._key(),M)}return E.bypassAuthState||uc.set(E.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(_){var E=()=>super.onAuthEvent,M=this;return(0,T.Z)(function*(){if("signInViaRedirect"===_.type)return E().call(M,_);if("unknown"!==_.type){if(_.eventId){const se=yield M.auth._redirectUserForId(_.eventId);if(se)return M.user=se,E().call(M,_);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Qd(){return(Qd=(0,T.Z)(function*(D,_){const E=cc(_),M=Pl(D);if(!(yield M._isAvailable()))return!1;const se="true"===(yield M._get(E));return yield M._remove(E),se})).apply(this,arguments)}function cd(D,_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,T.Z)(function*(D,_){return Pl(D)._set(cc(_),"true")})).apply(this,arguments)}function lc(D,_){uc.set(D._key(),_)}function Pl(D){return Ar(D._redirectPersistence)}function cc(D){return lt(ld,D.config.apiKey,D.name)}function dd(D,_,E){return function jh(D,_,E){return Ku.apply(this,arguments)}(D,_,E)}function Ku(){return(Ku=(0,T.Z)(function*(D,_,E){const M=hi(D);gt(D,_,ji),yield M._initializationPromise;const se=Io(M,E);return yield cd(se,M),se._openRedirect(M,_,"signInViaRedirect")})).apply(this,arguments)}function Lf(D,_,E){return function Bh(D,_,E){return dc.apply(this,arguments)}(D,_,E)}function dc(){return(dc=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D);gt(M.auth,_,ji),yield M.auth._initializationPromise;const se=Io(M.auth,E);yield cd(se,M.auth);const Z=yield ns(M);return se._openRedirect(M.auth,_,"reauthViaRedirect",Z)})).apply(this,arguments)}function ao(D,_,E){return function iu(D,_,E){return ia.apply(this,arguments)}(D,_,E)}function ia(){return(ia=(0,T.Z)(function*(D,_,E){const M=(0,le.m9)(D);gt(M.auth,_,ji),yield M.auth._initializationPromise;const se=Io(M.auth,E);yield nu(!1,M,_.providerId),yield cd(se,M.auth);const Z=yield ns(M);return se._openRedirect(M.auth,_,"linkViaRedirect",Z)})).apply(this,arguments)}function Wi(){return(Wi=(0,T.Z)(function*(D,_){return yield hi(D)._initializationPromise,ki(D,_,!1)})).apply(this,arguments)}function ki(D,_){return js.apply(this,arguments)}function js(){return(js=(0,T.Z)(function*(D,_,E=!1){const M=hi(D),se=Io(M,_),st=yield new Nf(M,se,E).execute();return st&&!E&&(delete st.user._redirectEventId,yield M._persistUserIfCurrent(st.user),yield M._setRedirectUser(null,_)),st})).apply(this,arguments)}function ns(D){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,T.Z)(function*(D){const _=To(`${D.uid}:::`);return D._redirectEventId=_,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),_})).apply(this,arguments)}class sa{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let E=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(_,M)&&(E=!0,this.sendToConsumer(_,M),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Mo(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uh(D);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=_,E=!0)),E}sendToConsumer(_,E){var M;if(_.error&&!Uh(_)){const se=(null===(M=_.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";E.onError(Te(this.auth,se))}else E.onAuthEvent(_)}isEventForConsumer(_,E){const M=null===E.eventId||!!_.eventId&&_.eventId===E.eventId;return E.filter.includes(_.type)&&M}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xd(_))}saveEventToCache(_){this.cachedEventUids.add(Xd(_)),this.lastProcessedEventTime=Date.now()}}function Xd(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(_=>_).join("-")}function Uh({type:D,error:_}){return"unknown"===D&&"auth/no-auth-event"===_?.code}function Dp(D){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,T.Z)(function*(D,_={}){return ft(D,"GET","/v1/projects",_)})).apply(this,arguments)}const ko=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xa=/^https?/;function Zu(){return(Zu=(0,T.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:_}=yield Dp(D);for(const E of _)try{if(Qs(E))return}catch{}Ee(D,"unauthorized-domain")})).apply(this,arguments)}function Qs(D){const _=Ht(),{protocol:E,hostname:M}=new URL(_);if(D.startsWith("chrome-extension://")){const st=new URL(D);return""===st.hostname&&""===M?"chrome-extension:"===E&&D.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===E&&st.hostname===M}if(!Xa.test(E))return!1;if(ko.test(D))return M===D;const se=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+se+"|"+se+")$","i").test(M)}const Ip=new Yt(3e4,6e4);function Ho(){const D=An().___jsl;if(D?.H)for(const _ of Object.keys(D.H))if(D.H[_].r=D.H[_].r||[],D.H[_].L=D.H[_].L||[],D.H[_].r=[...D.H[_].L],D.CP)for(let E=0;E<D.CP.length;E++)D.CP[E]=null}let Co=null;const Iu=new Yt(5e3,15e3),Rl="__/auth/iframe",su="emulator/auth/iframe",fd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ou(D){const _=D.config;oe(_.authDomain,D,"auth-domain-config-required");const E=_.emulator?qe(_,su):`https://${D.config.authDomain}/${Rl}`,M={apiKey:_.apiKey,appName:D.name,v:B.SDK_VERSION},se=pd.get(D.config.apiHost);se&&(M.eid=se);const Z=D._getFrameworks();return Z.length&&(M.fw=Z.join(",")),`${E}?${(0,le.xO)(M).slice(1)}`}function H(){return H=(0,T.Z)(function*(D){const _=yield function Zo(D){return Co=Co||function Ja(D){return new Promise((_,E)=>{var M,se,Z;function st(){Ho(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Ho(),E(Te(D,"network-request-failed"))},timeout:Ip.get()})}if(null!==(se=null===(M=An().gapi)||void 0===M?void 0:M.iframes)&&void 0!==se&&se.Iframe)_(gapi.iframes.getContext());else{if(null===(Z=An().gapi)||void 0===Z||!Z.load){const Nt=gs("iframefcb");return An()[Nt]=()=>{gapi.load?st():E(Te(D,"network-request-failed"))},di(`https://apis.google.com/js/api.js?onload=${Nt}`).catch(mn=>E(mn))}st()}}).catch(_=>{throw Co=null,_})}(D),Co}(D),E=An().gapi;return oe(E,D,"internal-error"),_.open({where:document.body,url:ou(D),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fd,dontclear:!0},M=>new Promise(function(){var se=(0,T.Z)(function*(Z,st){yield M.restyle({setHideOnLeave:!1});const Nt=Te(D,"network-request-failed"),mn=An().setTimeout(()=>{st(Nt)},Iu.get());function Pn(){An().clearTimeout(mn),Z(M)}M.ping(Pn).then(Pn,()=>{st(Nt)})});return function(Z,st){return se.apply(this,arguments)}}()))}),H.apply(this,arguments)}const fe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vn{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ei="__/auth/handler",Xr="emulator/auth/handler",Ba=encodeURIComponent("fac");function Si(D,_,E,M,se,Z){return vu.apply(this,arguments)}function vu(){return(vu=(0,T.Z)(function*(D,_,E,M,se,Z){oe(D.config.authDomain,D,"auth-domain-config-required"),oe(D.config.apiKey,D,"invalid-api-key");const st={apiKey:D.config.apiKey,appName:D.name,authType:E,redirectUrl:M,v:B.SDK_VERSION,eventId:se};if(_ instanceof ji){_.setDefaultLanguage(D.languageCode),st.providerId=_.providerId||"",(0,le.xb)(_.getCustomParameters())||(st.customParameters=JSON.stringify(_.getCustomParameters()));for(const[zn,nr]of Object.entries(Z||{}))st[zn]=nr}if(_ instanceof fs){const zn=_.getScopes().filter(nr=>""!==nr);zn.length>0&&(st.scopes=zn.join(","))}D.tenantId&&(st.tid=D.tenantId);const Nt=st;for(const zn of Object.keys(Nt))void 0===Nt[zn]&&delete Nt[zn];const mn=yield D._getAppCheckToken(),Pn=mn?`#${Ba}=${encodeURIComponent(mn)}`:"";return`${function Bi({config:D}){return D.emulator?qe(D,Xr):`https://${D.authDomain}/${ei}`}(D)}?${(0,le.xO)(Nt).slice(1)}${Pn}`})).apply(this,arguments)}const ba="webStorageSupport",Yu=class oa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wu,this._completeRedirectFn=ki,this._overrideRedirectResult=lc}_openPopup(_,E,M,se){var Z=this;return(0,T.Z)(function*(){var st;At(null===(st=Z.eventManagers[_._key()])||void 0===st?void 0:st.manager,"_initialize() not called before _openPopup()");const Nt=yield Si(_,E,M,Ht(),se);return function Hn(D,_,E,M=500,se=600){const Z=Math.max((window.screen.availHeight-se)/2,0).toString(),st=Math.max((window.screen.availWidth-M)/2,0).toString();let Nt="";const mn=Object.assign(Object.assign({},fe),{width:M.toString(),height:se.toString(),top:Z,left:st}),Pn=(0,le.z$)().toLowerCase();E&&(Nt=Et(Pn)?"_blank":E),be(Pn)&&(_=_||"http://localhost",mn.scrollbars="yes");const zn=Object.entries(mn).reduce((Zi,[Au,Ul])=>`${Zi}${Au}=${Ul},`,"");if(function ln(D=(0,le.z$)()){var _;return He(D)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Pn)&&"_self"!==Nt)return function yr(D,_){const E=document.createElement("a");E.href=D,E.target=_;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(M)}(_||"",Nt),new Vn(null);const nr=window.open(_||"",Nt,zn);oe(nr,D,"popup-blocked");try{nr.focus()}catch{}return new Vn(nr)}(_,Nt,To())})()}_openRedirect(_,E,M,se){var Z=this;return(0,T.Z)(function*(){return yield Z._originValidation(_),function lr(D){An().location.href=D}(yield Si(_,E,M,Ht(),se)),new Promise(()=>{})})()}_initialize(_){const E=_._key();if(this.eventManagers[E]){const{manager:se,promise:Z}=this.eventManagers[E];return se?Promise.resolve(se):(At(Z,"If manager is not set, promise should be"),Z)}const M=this.initAndGetManager(_);return this.eventManagers[E]={promise:M},M.catch(()=>{delete this.eventManagers[E]}),M}initAndGetManager(_){var E=this;return(0,T.Z)(function*(){const M=yield function O(D){return H.apply(this,arguments)}(_),se=new sa(_);return M.register("authEvent",Z=>(oe(Z?.authEvent,_,"invalid-auth-event"),{status:se.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[_._key()]={manager:se},E.iframes[_._key()]=M,se})()}_isIframeWebStorageSupported(_,E){this.iframes[_._key()].send(ba,{type:ba},se=>{var Z;const st=null===(Z=se?.[0])||void 0===Z?void 0:Z[ba];void 0!==st&&E(!!st),Ee(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const E=_._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function hd(D){return Zu.apply(this,arguments)}(_)),this.originValidationPromises[E]}get _shouldInitProactively(){return Hr()||Pe()||He()}};class Qu{constructor(_){this.factorId=_}_process(_,E,M){switch(E.type){case"enroll":return this._finalizeEnroll(_,E.credential,M);case"signin":return this._finalizeSignIn(_,E.credential);default:return Fe("unexpected MultiFactorSessionType")}}}class Vh extends Qu{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Vh(_)}_finalizeEnroll(_,E,M){return function Ds(D,_){return ft(D,"POST","/v2/accounts/mfaEnrollment:finalize",It(D,_))}(_,{idToken:E,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,E){return function qd(D,_){return ft(D,"POST","/v2/accounts/mfaSignIn:finalize",It(D,_))}(_,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jd=(()=>{class D{constructor(){}static assertion(E){return Vh._fromCredential(E)}}return D.FACTOR_ID="phone",D})();var jc="@firebase/auth";class xp{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var E=this;return(0,T.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const E=this.auth.onIdTokenChanged(M=>{_(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,E),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const E=this.internalListeners.get(_);E&&(this.internalListeners.delete(_),E(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bc(){return window}(0,le.Pz)("authIdTokenMaxAge"),function Ap(D){(0,B._registerComponent)(new Qe.wA("auth",(_,{options:E})=>{const M=_.getProvider("app").getImmediate(),se=_.getProvider("heartbeat"),Z=_.getProvider("app-check-internal"),{apiKey:st,authDomain:Nt}=M.options;oe(st&&!st.includes(":"),"invalid-api-key",{appName:M.name});const mn={apiKey:st,authDomain:Nt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ut(D)},Pn=new _i(M,se,Z,mn);return function wa(D,_){const E=_?.persistence||[],M=(Array.isArray(E)?E:[E]).map(Ar);_?.errorMap&&D._updateErrorMap(_.errorMap),D._initializeWithPersistence(M,_?.popupRedirectResolver)}(Pn,E),Pn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,E,M)=>{_.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new Qe.wA("auth-internal",_=>{const E=hi(_.getProvider("auth").getImmediate());return new xp(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(jc,"0.23.2",function eh(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,B.registerVersion)(jc,"0.23.2","esm2017")}("Browser");function $h(){return $h=(0,T.Z)(function*(D,_,E){var M;const{BuildInfo:se}=Bc();At(_.sessionId,"AuthEvent did not contain a session ID");const Z=yield function Rp(D){return nh.apply(this,arguments)}(_.sessionId),st={};return He()?st.ibi=se.packageName:En()?st.apn=se.packageName:Ee(D,"operation-not-supported-in-this-environment"),se.displayName&&(st.appDisplayName=se.displayName),st.sessionId=Z,Si(D,E,_.type,void 0,null!==(M=_.eventId)&&void 0!==M?M:void 0,st)}),$h.apply(this,arguments)}function jf(){return(jf=(0,T.Z)(function*(D){const{BuildInfo:_}=Bc(),E={};He()?E.iosBundleId=_.packageName:En()?E.androidPackageName=_.packageName:Ee(D,"operation-not-supported-in-this-environment"),yield Dp(D,E)})).apply(this,arguments)}function pc(){return(pc=(0,T.Z)(function*(D,_,E){const{cordova:M}=Bc();let se=()=>{};try{yield new Promise((Z,st)=>{let Nt=null;function mn(){var nr;Z();const Zi=null===(nr=M.plugins.browsertab)||void 0===nr?void 0:nr.close;"function"==typeof Zi&&Zi(),"function"==typeof E?.close&&E.close()}function Pn(){Nt||(Nt=window.setTimeout(()=>{st(Te(D,"redirect-cancelled-by-user"))},2e3))}function zn(){"visible"===document?.visibilityState&&Pn()}_.addPassiveListener(mn),document.addEventListener("resume",Pn,!1),En()&&document.addEventListener("visibilitychange",zn,!1),se=()=>{_.removePassiveListener(mn),document.removeEventListener("resume",Pn,!1),document.removeEventListener("visibilitychange",zn,!1),Nt&&window.clearTimeout(Nt)}})}finally{se()}})).apply(this,arguments)}function nh(){return(nh=(0,T.Z)(function*(D){const _=function Xu(D){if(At(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const _=new ArrayBuffer(D.length),E=new Uint8Array(_);for(let M=0;M<D.length;M++)E[M]=D.charCodeAt(M);return E}(D),E=yield crypto.subtle.digest("SHA-256",_);return Array.from(new Uint8Array(E)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class rh extends sa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(_=>{this.resolveInialized=_})}addPassiveListener(_){this.passiveListeners.add(_)}removePassiveListener(_){this.passiveListeners.delete(_)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(_){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(_)),super.onEvent(_)}initialized(){var _=this;return(0,T.Z)(function*(){yield _.initPromise})()}}function gd(D){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,T.Z)(function*(D){const _=yield Vc()._get(Hc(D));return _&&(yield Vc()._remove(Hc(D))),_})).apply(this,arguments)}function Ea(){const D=[];for(let E=0;E<20;E++){const M=Math.floor(62*Math.random());D.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(M))}return D.join("")}function Vc(){return Ar(Ns)}function Hc(D){return lt("authEvent",D.config.apiKey,D.name)}function $c(D){if(!D?.includes("?"))return{};const[_,...E]=D.split("?");return(0,le.zd)(E.join("?"))}const tl=class sh{constructor(){this._redirectPersistence=wu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ki,this._overrideRedirectResult=lc}_initialize(_){var E=this;return(0,T.Z)(function*(){const M=_._key();let se=E.eventManagers.get(M);return se||(se=new rh(_),E.eventManagers.set(M,se),E.attachCallbackListeners(_,se)),se})()}_openPopup(_){Ee(_,"operation-not-supported-in-this-environment")}_openRedirect(_,E,M,se){var Z=this;return(0,T.Z)(function*(){!function Gh(D){var _,E,M,se,Z,st,Nt,mn,Pn,zn;const nr=Bc();oe("function"==typeof(null===(_=nr?.universalLinks)||void 0===_?void 0:_.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(E=nr?.BuildInfo)||void 0===E?void 0:E.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(Z=null===(se=null===(M=nr?.cordova)||void 0===M?void 0:M.plugins)||void 0===se?void 0:se.browsertab)||void 0===Z?void 0:Z.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(mn=null===(Nt=null===(st=nr?.cordova)||void 0===st?void 0:st.plugins)||void 0===Nt?void 0:Nt.browsertab)||void 0===mn?void 0:mn.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(zn=null===(Pn=nr?.cordova)||void 0===Pn?void 0:Pn.InAppBrowser)||void 0===zn?void 0:zn.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(_);const st=yield Z._initialize(_);yield st.initialized(),st.resetRedirect(),function Mg(){uc.clear()}(),yield Z._originValidation(_);const Nt=function ih(D,_,E=null){return{type:_,eventId:E,urlResponse:null,sessionId:Ea(),postBody:null,tenantId:D.tenantId,error:Te(D,"no-auth-event")}}(_,M,se);yield function Np(D,_){return Vc()._set(Hc(D),_)}(_,Nt);const mn=yield function Pp(D,_,E){return $h.apply(this,arguments)}(_,Nt,E),Pn=yield function Uc(D){const{cordova:_}=Bc();return new Promise(E=>{_.plugins.browsertab.isAvailable(M=>{let se=null;M?_.plugins.browsertab.openUrl(D):se=_.InAppBrowser.open(D,function Tt(D=(0,le.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),E(se)})})}(mn);return function th(D,_,E){return pc.apply(this,arguments)}(_,st,Pn)})()}_isIframeWebStorageSupported(_,E){throw new Error("Method not implemented.")}_originValidation(_){const E=_._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Op(D){return jf.apply(this,arguments)}(_)),this.originValidationPromises[E]}attachCallbackListeners(_,E){const{universalLinks:M,handleOpenURL:se,BuildInfo:Z}=Bc(),st=setTimeout((0,T.Z)(function*(){yield gd(_),E.onEvent(Rg())}),500),Nt=function(){var zn=(0,T.Z)(function*(nr){clearTimeout(st);const Zi=yield gd(_);let Au=null;Zi&&nr?.url&&(Au=function Ju(D,_){var E,M;const se=function Bf(D){const _=$c(D),E=_.link?decodeURIComponent(_.link):void 0,M=$c(E).link,se=_.deep_link_id?decodeURIComponent(_.deep_link_id):void 0;return $c(se).link||se||M||E||D}(_);if(se.includes("/__/auth/callback")){const Z=$c(se),st=Z.firebaseError?function el(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Nt=null===(M=null===(E=st?.code)||void 0===E?void 0:E.split("auth/"))||void 0===M?void 0:M[1],mn=Nt?Te(Nt):null;return mn?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:mn,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:se,postBody:null}}return null}(Zi,nr.url)),E.onEvent(Au||Rg())});return function(Zi){return zn.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,Nt);const mn=se,Pn=`${Z.packageName.toLowerCase()}://`;Bc().handleOpenURL=function(){var zn=(0,T.Z)(function*(nr){if(nr.toLowerCase().startsWith(Pn)&&Nt({url:nr}),"function"==typeof mn)try{mn(nr)}catch(Zi){console.error(Zi)}});return function(nr){return zn.apply(this,arguments)}}()}};function Rg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Fl(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function rl(D=(0,le.z$)()){return!("file:"!==Fl()&&"ionic:"!==Fl()&&"capacitor:"!==Fl()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function ai(){try{const D=self.localStorage,_=To();if(D)return D.setItem(_,"1"),D.removeItem(_),!function au(D=(0,le.z$)()){return function oh(){return(0,le.w1)()&&11===document?.documentMode}()||function Lg(D=(0,le.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,le.hl)()}catch{return ah()&&(0,le.hl)()}return!1}function ah(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gc(){return(function Lp(){return"http:"===Fl()||"https:"===Fl()}()||(0,le.ru)()||rl())&&!function Uf(){return(0,le.b$)()||(0,le.UG)()}()&&ai()&&!ah()}function co(){return rl()&&typeof document<"u"}function qh(){return(qh=(0,T.Z)(function*(){return!!co()&&new Promise(D=>{const _=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(_),D(!0)})})})).apply(this,arguments)}const xu={LOCAL:"local",NONE:"none",SESSION:"session"},uh=oe,Fp="persistence";function fl(D){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,T.Z)(function*(D){yield D._initializationPromise;const _=jp(),E=lt(Fp,D.config.apiKey,D.name);_&&_.setItem(E,D._getPersistence())})).apply(this,arguments)}function jp(){var D;try{return(null===(D=function Kh(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const gc=oe;class pl{constructor(){this.browserResolver=Ar(Yu),this.cordovaResolver=Ar(tl),this.underlyingResolver=null,this._redirectPersistence=wu,this._completeRedirectFn=ki,this._overrideRedirectResult=lc}_initialize(_){var E=this;return(0,T.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(_)})()}_openPopup(_,E,M,se){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(_,E,M,se)})()}_openRedirect(_,E,M,se){var Z=this;return(0,T.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(_,E,M,se)})()}_isIframeWebStorageSupported(_,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(_,E)}_originValidation(_){return this.assertedUnderlyingResolver._originValidation(_)}get _shouldInitProactively(){return co()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var _=this;return(0,T.Z)(function*(){if(_.underlyingResolver)return;const E=yield function md(){return qh.apply(this,arguments)}();_.underlyingResolver=E?_.cordovaResolver:_.browserResolver})()}}function Bp(D){return D.unwrap()}function Up(D){return Ms(D)}function Ms(D){const{_tokenResponse:_}=D instanceof le.ZR?D.customData:D;if(!_)return null;if(!(D instanceof le.ZR)&&"temporaryProof"in _&&"phoneNumber"in _)return Nc.credentialFromResult(D);const E=_.providerId;if(!E||E===ut.PASSWORD)return null;let M;switch(E){case ut.GOOGLE:M=tu;break;case ut.FACEBOOK:M=ha;break;case ut.GITHUB:M=Cs;break;case ut.TWITTER:M=Ji;break;default:const{oauthIdToken:se,oauthAccessToken:Z,oauthTokenSecret:st,pendingToken:Nt,nonce:mn}=_;return Z||st||se||Nt?Nt?E.startsWith("saml.")?Lr._create(E,Nt):jr._fromParams({providerId:E,signInMethod:E,pendingToken:Nt,idToken:se,accessToken:Z}):new Hs(E).credential({idToken:se,accessToken:Z,rawNonce:mn}):null}return D instanceof le.ZR?M.credentialFromError(D):M.credentialFromResult(D)}function aa(D,_){return _.catch(E=>{throw E instanceof le.ZR&&function gr(D,_){var E;const M=null===(E=_.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===_?.code)_.resolver=new yd(D,function qo(D,_){var E;const M=(0,le.m9)(D),se=_;return oe(_.customData.operationType,M,"argument-error"),oe(null===(E=se.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,M,"argument-error"),ur._fromError(M,se)}(D,_));else if(M){const se=Ms(_),Z=_;se&&(Z.credential=se,Z.tenantId=M.tenantId||void 0,Z.email=M.email||void 0,Z.phoneNumber=M.phoneNumber||void 0)}}(D,E),E}).then(E=>{const se=E.user;return{operationType:E.operationType,credential:Up(E),additionalUserInfo:it(E),user:yu.getOrCreate(se)}})}function vc(D,_){return gl.apply(this,arguments)}function gl(){return(gl=(0,T.Z)(function*(D,_){const E=yield _;return{verificationId:E.verificationId,confirm:M=>aa(D,E.confirm(M))}})).apply(this,arguments)}class yd{constructor(_,E){this.resolver=E,this.auth=function mc(D){return D.wrapped()}(_)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(_){return aa(Bp(this.auth),this.resolver.resolveSignIn(_))}}class yu{constructor(_){this._delegate=_,this.multiFactor=function Il(D){const _=(0,le.m9)(D);return Dl.has(_)||Dl.set(_,Ra._fromUser(_)),Dl.get(_)}(_)}static getOrCreate(_){return yu.USER_MAP.has(_)||yu.USER_MAP.set(_,new yu(_)),yu.USER_MAP.get(_)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(_){return this._delegate.getIdTokenResult(_)}getIdToken(_){return this._delegate.getIdToken(_)}linkAndRetrieveDataWithCredential(_){return this.linkWithCredential(_)}linkWithCredential(_){var E=this;return(0,T.Z)(function*(){return aa(E.auth,Oe(E._delegate,_))})()}linkWithPhoneNumber(_,E){var M=this;return(0,T.Z)(function*(){return vc(M.auth,function sc(D,_,E){return Fa.apply(this,arguments)}(M._delegate,_,E))})()}linkWithPopup(_){var E=this;return(0,T.Z)(function*(){return aa(E.auth,function Zd(D,_,E){return ud.apply(this,arguments)}(E._delegate,_,pl))})()}linkWithRedirect(_){var E=this;return(0,T.Z)(function*(){return yield fl(hi(E.auth)),ao(E._delegate,_,pl)})()}reauthenticateAndRetrieveDataWithCredential(_){return this.reauthenticateWithCredential(_)}reauthenticateWithCredential(_){var E=this;return(0,T.Z)(function*(){return aa(E.auth,J(E._delegate,_))})()}reauthenticateWithPhoneNumber(_,E){return vc(this.auth,function qu(D,_,E){return Do.apply(this,arguments)}(this._delegate,_,E))}reauthenticateWithPopup(_){return aa(this.auth,function mu(D,_,E){return Fh.apply(this,arguments)}(this._delegate,_,pl))}reauthenticateWithRedirect(_){var E=this;return(0,T.Z)(function*(){return yield fl(hi(E.auth)),Lf(E._delegate,_,pl)})()}sendEmailVerification(_){return function ll(D,_){return Oa.apply(this,arguments)}(this._delegate,_)}unlink(_){var E=this;return(0,T.Z)(function*(){return yield function ul(D,_){return Uo.apply(this,arguments)}(E._delegate,_),E})()}updateEmail(_){return function _o(D,_){return ws((0,le.m9)(D),_,null)}(this._delegate,_)}updatePassword(_){return function cl(D,_){return ws((0,le.m9)(D),null,_)}(this._delegate,_)}updatePhoneNumber(_){return function Ya(D,_){return Kd.apply(this,arguments)}(this._delegate,_)}updateProfile(_){return function Xl(D,_){return ma.apply(this,arguments)}(this._delegate,_)}verifyBeforeUpdateEmail(_,E){return function io(D,_,E){return Gu.apply(this,arguments)}(this._delegate,_,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yu.USER_MAP=new WeakMap;const Xs=oe;let jl=(()=>{class D{constructor(E,M){if(this.app=E,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=E.options;Xs(se,"invalid-api-key",{appName:E.name}),Xs(se,"invalid-api-key",{appName:E.name});const Z=typeof window<"u"?pl:void 0;this._delegate=M.initialize({options:{persistence:_u(se,E.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(St),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,M){!function Da(D,_,E){const M=hi(D);oe(M._canInitEmulator,M,"emulator-config-failed"),oe(/^https?:\/\//.test(_),M,"invalid-emulator-scheme");const se=!!E?.disableWarnings,Z=no(_),{host:st,port:Nt}=function bs(D){const _=no(D),E=/(\/\/)?([^?#/]+)/.exec(D.substr(_.length));if(!E)return{host:"",port:null};const M=E[2].split("@").pop()||"",se=/^(\[[^\]]+\])(:|$)/.exec(M);if(se){const Z=se[1];return{host:Z,port:Ia(M.substr(Z.length+1))}}{const[Z,st]=M.split(":");return{host:Z,port:Ia(st)}}}(_);M.config.emulator={url:`${Z}//${st}${null===Nt?"":`:${Nt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:st,port:Nt,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:se})}),se||function Bu(){function D(){const _=document.createElement("p"),E=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,E,M)}applyActionCode(E){return function Ln(D,_){return $i.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return _s(this._delegate,E)}confirmPasswordReset(E,M){return function zr(D,_,E){return Mi.apply(this,arguments)}(this._delegate,E,M)}createUserWithEmailAndPassword(E,M){var se=this;return(0,T.Z)(function*(){return aa(se._delegate,function Yr(D,_,E){return zs.apply(this,arguments)}(se._delegate,E,M))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function $u(D,_){return Eu.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function pa(D,_){const E=$r.parseLink(_);return"EMAIL_SIGNIN"===E?.operation}(0,E)}getRedirectResult(){var E=this;return(0,T.Z)(function*(){Xs(Gc(),E._delegate,"operation-not-supported-in-this-environment");const M=yield function Eo(D,_){return Wi.apply(this,arguments)}(E._delegate,pl);return M?aa(E._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function nl(D,_){hi(D)._logFramework(_)}(this._delegate,E)}onAuthStateChanged(E,M,se){const{next:Z,error:st,complete:Nt}=Bl(E,M,se);return this._delegate.onAuthStateChanged(Z,st,Nt)}onIdTokenChanged(E,M,se){const{next:Z,error:st,complete:Nt}=Bl(E,M,se);return this._delegate.onIdTokenChanged(Z,st,Nt)}sendSignInLinkToEmail(E,M){return function Wo(D,_,E){return es.apply(this,arguments)}(this._delegate,E,M)}sendPasswordResetEmail(E,M){return function Zr(D,_,E){return ii.apply(this,arguments)}(this._delegate,E,M||void 0)}setPersistence(E){var M=this;return(0,T.Z)(function*(){let se;switch(function vd(D,_){uh(Object.values(xu).includes(_),D,"invalid-persistence-type"),(0,le.b$)()?uh(_!==xu.SESSION,D,"unsupported-persistence-type"):(0,le.UG)()?uh(_===xu.NONE,D,"unsupported-persistence-type"):ah()?uh(_===xu.NONE||_===xu.LOCAL&&(0,le.hl)(),D,"unsupported-persistence-type"):uh(_===xu.NONE||ai(),D,"unsupported-persistence-type")}(M._delegate,E),E){case xu.SESSION:se=wu;break;case xu.LOCAL:se=(yield Ar(bo)._isAvailable())?bo:Ns;break;case xu.NONE:se=mr;break;default:return Ee("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return aa(this._delegate,function hu(D){return Vu.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return aa(this._delegate,Q(this._delegate,E))}signInWithCustomToken(E){return aa(this._delegate,function mt(D,_){return Vt.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,M){return aa(this._delegate,function vo(D,_,E){return Q((0,le.m9)(D),da.credential(_,E))}(this._delegate,E,M))}signInWithEmailLink(E,M){return aa(this._delegate,function yo(D,_,E){return Hu.apply(this,arguments)}(this._delegate,E,M))}signInWithPhoneNumber(E,M){return vc(this._delegate,function Al(D,_,E){return Ls.apply(this,arguments)}(this._delegate,E,M))}signInWithPopup(E){var M=this;return(0,T.Z)(function*(){return Xs(Gc(),M._delegate,"operation-not-supported-in-this-environment"),aa(M._delegate,function ac(D,_,E){return ad.apply(this,arguments)}(M._delegate,E,pl))})()}signInWithRedirect(E){var M=this;return(0,T.Z)(function*(){return Xs(Gc(),M._delegate,"operation-not-supported-in-this-environment"),yield fl(M._delegate),dd(M._delegate,E,pl)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function Gs(D,_){return Gi.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=xu,D})();function Bl(D,_,E){let M=D;"function"!=typeof D&&({next:M,error:_,complete:E}=D);const se=M;return{next:st=>se(st&&yu.getOrCreate(st)),error:_,complete:E}}function _u(D,_){const E=function zc(D,_){const E=jp();if(!E)return[];const M=lt(Fp,D,_);switch(E.getItem(M)){case xu.NONE:return[mr];case xu.LOCAL:return[bo,wu];case xu.SESSION:return[wu];default:return[]}}(D,_);if(typeof self<"u"&&!E.includes(bo)&&E.push(bo),typeof window<"u")for(const M of[Ns,wu])E.includes(M)||E.push(M);return E.includes(mr)||E.push(mr),E}class yc{constructor(){this.providerId="phone",this._delegate=new Nc(Bp(me.Z.auth()))}static credential(_,E){return Nc.credential(_,E)}verifyPhoneNumber(_,E){return this._delegate.verifyPhoneNumber(_,E)}unwrap(){return this._delegate}}yc.PHONE_SIGN_IN_METHOD=Nc.PHONE_SIGN_IN_METHOD,yc.PROVIDER_ID=Nc.PROVIDER_ID;const Yh=oe;class Qh{constructor(_,E,M=me.Z.app()){var se;Yh(null===(se=M.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new Ta(_,E,M.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Td(D){D.INTERNAL.registerComponent(new Qe.wA("auth-compat",_=>{const E=_.getProvider("app-compat").getImmediate(),M=_.getProvider("auth");return new jl(E,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:da,FacebookAuthProvider:ha,GithubAuthProvider:Cs,GoogleAuthProvider:tu,OAuthProvider:Hs,SAMLAuthProvider:mo,PhoneAuthProvider:yc,PhoneMultiFactorGenerator:Jd,RecaptchaVerifier:Qh,TwitterAuthProvider:Ji,Auth:jl,AuthCredential:Rs,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.2")}(me.Z)},3735:(tn,ht,z)=>{"use strict";z.d(ht,{Z6:()=>Ze,e$:()=>ge});var T=z(5861),me=z(5879),le=z(6814),B=z(6223);const Re=new me.OlP("ngx-mask config"),Ne=new me.OlP("new ngx-mask config"),Qe=new me.OlP("initial ngx-mask config"),at={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,leadZero:!1,triggerOnMaskChange:!1,maskFilled:new me.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},ut=["Hh:m0:s0","Hh:m0","m0:s0"],xe=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let je=(()=>{class et{constructor(){this._config=(0,me.f3M)(Re),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this._shift=new Set,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(W,te,Ee,Te)=>{let Ae=[],gt="";if(Array.isArray(Ee)){const Ht=new RegExp(Ee.map(Gt=>"[\\^$.|?*+()".indexOf(Gt)>=0?`\\${Gt}`:Gt).join("|"));Ae=W.split(Ht),gt=W.match(Ht)?.[0]??""}else Ae=W.split(Ee),gt=Ee;const Y=Ae.length>1?`${gt}${Ae[1]}`:"";let oe=Ae[0]??"";const Fe=this.separatorLimit.replace(/\s/g,"");Fe&&+Fe&&(oe="-"===oe[0]?`-${oe.slice(1,oe.length).slice(0,Fe.length)}`:oe.slice(0,Fe.length));const At=/(\d+)(\d{3})/;for(;te&&At.test(oe);)oe=oe.replace(At,"$1"+te+"$2");return void 0===Te?oe+Y:0===Te?oe:oe+Y.substring(0,Te+1)},this.percentage=W=>Number(W)>=0&&Number(W)<=100,this.getPrecision=W=>{const te=W.split(".");return te.length>1?Number(te[te.length-1]):1/0},this.checkAndRemoveSuffix=W=>{for(let te=this.suffix?.length-1;te>=0;te--){const Ee=this.suffix.substring(te,this.suffix?.length);if(W.includes(Ee)&&te!==this.suffix?.length-1&&(te-1<0||!W.includes(this.suffix.substring(te-1,this.suffix?.length))))return W.replace(Ee,"")}return W},this.checkInputPrecision=(W,te,Ee)=>{if(te<1/0){if(Array.isArray(Ee)){const Y=Ee.find(oe=>oe!==this.thousandSeparator);Ee=Y||Ee[0]}const Te=new RegExp(this._charToRegExpExpression(Ee)+`\\d{${te}}.*$`),Ae=W.match(Te),gt=(Ae&&Ae[0]?.length)??0;gt-1>te&&(W=W.substring(0,W.length-(gt-1-te))),0===te&&this._compareOrIncludes(W[W.length-1],Ee,this.thousandSeparator)&&(W=W.substring(0,W.length-1))}return W}}applyMaskWithPattern(W,te){const[Ee,Te]=te;return this.customPattern=Te,this.applyMask(W,Ee)}applyMask(W,te,Ee=0,Te=!1,Ae=!1,gt=(()=>{})){if(!te||"string"!=typeof W)return"";let Y=0,oe="",Fe=!1,At=!1,Ht=1,Gt=!1;W.slice(0,this.prefix.length)===this.prefix&&(W=W.slice(this.prefix.length,W.length)),this.suffix&&W?.length>0&&(W=this.checkAndRemoveSuffix(W)),"("===W&&this.prefix&&(W="");const Xt=W.toString().split("");if(this.allowNegativeNumbers&&"-"===W.slice(Y,Y+1)&&(oe+=W.slice(Y,Y+1)),"IP"===te){const ot=W.split(".");this.ipError=this._validIP(ot),te="099.099.099.099"}const pn=[];for(let ot=0;ot<W.length;ot++)W[ot]?.match("\\d")&&pn.push(W[ot]??"");if("CPF_CNPJ"===te&&(this.cpfCnpjError=11!==pn.length&&14!==pn.length,te=pn.length>11?"00.000.000/0000-00":"000.000.000-00"),te.startsWith("percent")){if(W.match("[a-z]|[A-Z]")||W.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){W=this._stripToDecimal(W);const dt=this.getPrecision(te);W=this.checkInputPrecision(W,dt,this.decimalMarker)}if(W.indexOf(".")>0&&!this.percentage(W.substring(0,W.indexOf(".")))){let dt=W.substring(0,W.indexOf(".")-1);this.allowNegativeNumbers&&"-"===W.slice(Y,Y+1)&&(dt=W.substring(0,W.indexOf("."))),W=`${dt}${W.substring(W.indexOf("."),W.length)}`}let ot="";ot=this.allowNegativeNumbers&&"-"===W.slice(Y,Y+1)?W.slice(Y+1,Y+W.length):W,oe=this.percentage(ot)?this._splitPercentZero(W):this._splitPercentZero(W.substring(0,W.length-1))}else if(te.startsWith("separator")){(W.match("[w\u0430-\u044f\u0410-\u042f]")||W.match("[\u0401\u0451\u0410-\u044f]")||W.match("[a-z]|[A-Z]")||W.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||W.match("[^A-Za-z0-9,]"))&&(W=this._stripToDecimal(W)),W=W.length>1&&"0"===W[0]&&W[1]!==this.thousandSeparator&&!this._compareOrIncludes(W[1],this.decimalMarker,this.thousandSeparator)&&!Ae?W.slice(0,W.length-1):W,Ae&&(W=this._compareOrIncludes(W[W.length-1],this.decimalMarker,this.thousandSeparator)?W.slice(0,W.length-1):W);const ot=this._charToRegExpExpression(this.thousandSeparator);let dt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(ot,"");if(Array.isArray(this.decimalMarker))for(const Tn of this.decimalMarker)dt=dt.replace(this._charToRegExpExpression(Tn),"");else dt=dt.replace(this._charToRegExpExpression(this.decimalMarker),"");const It=new RegExp("["+dt+"]");(W.match(It)||1===W.length&&this._compareOrIncludes(W,this.decimalMarker,this.thousandSeparator))&&(W=W.substring(0,W.length-1));const ft=this.getPrecision(te),jt=(W=this.checkInputPrecision(W,ft,this.decimalMarker)).replace(new RegExp(ot,"g"),"");oe=this._formatWithSeparators(jt,this.thousandSeparator,this.decimalMarker,ft);const zt=oe.indexOf(",")-W.indexOf(","),In=oe.length-W.length;if(In>0&&oe[Ee]!==this.thousandSeparator){At=!0;let Tn=0;do{this._shift.add(Ee+Tn),Tn++}while(Tn<In)}else 0!==zt&&Ee>0&&!(oe.indexOf(",")>=Ee&&Ee>3)||!(oe.indexOf(".")>=Ee&&Ee>3)&&In<=0?(this._shift.clear(),At=!0,Ht=In,this._shift.add(Ee+=In)):this._shift.clear()}else for(let ot=0,dt=Xt[0];ot<Xt.length&&Y!==te.length;ot++,dt=Xt[ot]??""){const It="*"in this.patterns;if(this._checkSymbolMask(dt,te[Y]??"")&&"?"===te[Y+1])oe+=dt,Y+=2;else if("*"===te[Y+1]&&Fe&&this._checkSymbolMask(dt,te[Y+2]??""))oe+=dt,Y+=3,Fe=!1;else if(this._checkSymbolMask(dt,te[Y]??"")&&"*"===te[Y+1]&&!It)oe+=dt,Fe=!0;else if("?"===te[Y+1]&&this._checkSymbolMask(dt,te[Y+2]??""))oe+=dt,Y+=3;else if(this._checkSymbolMask(dt,te[Y]??"")){if("H"===te[Y]&&Number(dt)>2){Ee+=1,Y+=1,this._shiftStep(te,Y,Xt.length),ot--,this.leadZeroDateTime&&(oe+="0");continue}if("h"===te[Y]&&("2"===oe&&Number(dt)>3||("2"===oe.slice(Y-2,Y)||"2"===oe.slice(Y-3,Y)||"2"===oe.slice(Y-4,Y)||"2"===oe.slice(Y-1,Y))&&Number(dt)>3&&Y>10)){Ee+=1,Y+=1,ot--;continue}if(("m"===te[Y]||"s"===te[Y])&&Number(dt)>5){Ee+=1,Y+=1,this._shiftStep(te,Y,Xt.length),ot--,this.leadZeroDateTime&&(oe+="0");continue}const ft=31,jt=W[Y],zt=W[Y+1],In=W[Y+2],Tn=W[Y-1],xn=W[Y-2],$n=W[Y-3],Gn=W.slice(Y-3,Y-1),ir=W.slice(Y-1,Y+1),Bn=W.slice(Y,Y+2),dr=W.slice(Y-2,Y);if("d"===te[Y]){const xr="M0"===te.slice(0,2),hr="M0"===te.slice(0,2)&&this.specialCharacters.includes(xn);if(Number(dt)>3&&this.leadZeroDateTime||!xr&&(Number(Bn)>ft||Number(ir)>ft||this.specialCharacters.includes(zt))||(hr?Number(ir)>ft||!this.specialCharacters.includes(jt)&&this.specialCharacters.includes(In)||this.specialCharacters.includes(jt):Number(Bn)>ft||this.specialCharacters.includes(zt))){Ee+=1,Y+=1,this._shiftStep(te,Y,Xt.length),ot--,this.leadZeroDateTime&&(oe+="0");continue}}if("M"===te[Y]){const hr=0===Y&&(Number(dt)>2||Number(Bn)>12||this.specialCharacters.includes(zt)),qr=te.slice(Y+2,Y+3),Gr=Gn.includes(qr)&&(this.specialCharacters.includes(xn)&&Number(ir)>12&&!this.specialCharacters.includes(jt)||this.specialCharacters.includes(jt)||this.specialCharacters.includes($n)&&Number(dr)>12&&!this.specialCharacters.includes(Tn)||this.specialCharacters.includes(Tn)),Sr=Number(Gn)<=ft&&!this.specialCharacters.includes(Gn)&&this.specialCharacters.includes(Tn)&&(Number(Bn)>12||this.specialCharacters.includes(zt)),mi=Number(Bn)>12&&5===Y||this.specialCharacters.includes(zt)&&5===Y,Rr=Number(Gn)>ft&&!this.specialCharacters.includes(Gn)&&!this.specialCharacters.includes(dr)&&Number(dr)>12,an=Number(Gn)<=ft&&!this.specialCharacters.includes(Gn)&&!this.specialCharacters.includes(Tn)&&Number(ir)>12;if(Number(dt)>1&&this.leadZeroDateTime||hr||Gr||an||Rr||Sr||mi){Ee+=1,Y+=1,this._shiftStep(te,Y,Xt.length),ot--,this.leadZeroDateTime&&(oe+="0");continue}}oe+=dt,Y++}else" "===dt&&" "===te[Y]||"/"===dt&&"/"===te[Y]?(oe+=dt,Y++):-1!==this.specialCharacters.indexOf(te[Y]??"")?(oe+=te[Y],Y++,this._shiftStep(te,Y,Xt.length),ot--):"9"===te[Y]&&this.showMaskTyped?this._shiftStep(te,Y,Xt.length):this.patterns[te[Y]??""]&&this.patterns[te[Y]??""]?.optional?(Xt[Y]&&"099.099.099.099"!==te&&"000.000.000-00"!==te&&"00.000.000/0000-00"!==te&&!te.match(/^9+\.0+$/)&&!this.patterns[te[Y]??""]?.optional&&(oe+=Xt[Y]),te.includes("9*")&&te.includes("0*")&&Y++,Y++,ot--):"*"===this.maskExpression[Y+1]&&this._findSpecialChar(this.maskExpression[Y+2]??"")&&this._findSpecialChar(dt)===this.maskExpression[Y+2]&&Fe||"?"===this.maskExpression[Y+1]&&this._findSpecialChar(this.maskExpression[Y+2]??"")&&this._findSpecialChar(dt)===this.maskExpression[Y+2]&&Fe?(Y+=3,oe+=dt):this.showMaskTyped&&this.specialCharacters.indexOf(dt)<0&&dt!==this.placeHolderCharacter&&1===this.placeHolderCharacter.length&&(Gt=!0)}oe.length+1===te.length&&-1!==this.specialCharacters.indexOf(te[te.length-1]??"")&&(oe+=te[te.length-1]);let Zt=Ee+1;for(;this._shift.has(Zt);)Ht++,Zt++;let Yt=Te&&!te.startsWith("separator")?Y:this._shift.has(Ee)?Ht:0;Gt&&Yt--,gt(Yt,At),Ht<0&&this._shift.clear();let qe=!1;Ae&&(qe=Xt.every(ot=>this.specialCharacters.includes(ot)));let Xe=`${this.prefix}${qe?"":oe}${this.suffix}`;return 0===oe.length&&(Xe=this.dropSpecialCharacters?`${oe}`:`${this.prefix}${oe}`),Xe}_findSpecialChar(W){return this.specialCharacters.find(te=>te===W)}_checkSymbolMask(W,te){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[te]?.pattern&&this.patterns[te]?.pattern.test(W))??!1}_stripToDecimal(W){return W.split("").filter((te,Ee)=>{const Te="string"==typeof this.decimalMarker?te===this.decimalMarker:this.decimalMarker.includes(te);return te.match("^-?\\d")||te===this.thousandSeparator||Te||"-"===te&&0===Ee&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(W){return W&&(" "===W?"\\s":"[\\^$.|?*+()".indexOf(W)>=0?`\\${W}`:W)}_shiftStep(W,te,Ee){const Te=/[*?]/g.test(W.slice(0,te))?Ee:te;this._shift.add(Te+this.prefix.length||0)}_compareOrIncludes(W,te,Ee){return Array.isArray(te)?te.filter(Te=>Te!==Ee).includes(W):W===te}_validIP(W){return!(4===W.length&&!W.some((te,Ee)=>W.length!==Ee+1?""===te||Number(te)>255:""===te||Number(te.substring(0,3))>255))}_splitPercentZero(W){const te=W.indexOf(".");if(-1===te){const Ee=parseInt(W,10);return isNaN(Ee)?"":Ee.toString()}{const Ee=parseInt(W.substring(0,te),10),Te=W.substring(te+1),Ae=isNaN(Ee)?"":Ee.toString();return""===Ae?"":Ae+"."+Te}}}return et.\u0275fac=function(W){return new(W||et)},et.\u0275prov=me.Yz7({token:et,factory:et.\u0275fac}),et})(),$e=(()=>{class et extends je{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this._emitValue=!1,this._previousValue="",this._currentValue="",this.onChange=W=>{},this.document=(0,me.f3M)(le.K0),this._config=(0,me.f3M)(Re),this._elementRef=(0,me.f3M)(me.SBq,{optional:!0}),this._renderer=(0,me.f3M)(me.Qsj,{optional:!0})}applyMask(W,te,Ee=0,Te=!1,Ae=!1,gt=(()=>{})){if(!te)return W!==this.actualValue?this.actualValue:W;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(W||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(W||"#")),!W&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Y=W&&"number"==typeof this.selStart?W[this.selStart]??"":"";let oe="";if(void 0!==this.hiddenInput&&!this.writingValue){let Gt=this.actualValue.split("");"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):""!==W&&Gt.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(W.length>Gt.length?Gt.splice(this.selStart,0,Y):W.length<Gt.length&&(Gt.length-W.length==1?Gt.splice(Ae?this.selStart-1:W.length-1,1):Gt.splice(this.selStart,this.selEnd-this.selStart))):Gt=[],this.showMaskTyped&&(this.hiddenInput||(W=this.removeMask(W))),oe=this.actualValue.length&&Gt.length<=W.length?this.shiftTypedSymbols(Gt.join("")):W}Te&&this.hiddenInput&&(oe=W),this.deletedSpecialCharacter&&Ee&&(this.specialCharacters.includes(this.actualValue.slice(Ee,Ee+1))?Ee+=1:"M0"!==te.slice(Ee-1,Ee+1)&&(Ee-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&1===this.placeHolderCharacter.length&&(W=this.removeMask(W)),oe=this.maskChanged?W:oe&&oe.length?oe:W;const Fe=super.applyMask(oe,te,Ee,Te,Ae,gt);if(this.actualValue=this.getActualValue(Fe),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(Gt=>!this._compareOrIncludes(Gt,this.decimalMarker,this.thousandSeparator))),(Fe||""===Fe)&&(this._previousValue=this._currentValue,this._currentValue=Fe,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged),this._emitValue&&this.formControlResult(Fe),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?Ae?this.hideInput(Fe,this.maskExpression):this.hideInput(Fe,this.maskExpression)+this.maskIsShown.slice(Fe.length):Fe;const At=Fe.length,Ht=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Gt=this._numberSkipedSymbols(Fe);return Fe+Ht.slice(At+Gt)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Fe+Ht:Fe+Ht.slice(At)}_numberSkipedSymbols(W){const te=/(^|\D)(\d\D)/g;let Ee=te.exec(W),Te=0;for(;null!=Ee;)Te+=1,Ee=te.exec(W);return Te}applyValueChanges(W,te,Ee,Te=(()=>{})){const Ae=this._elementRef?.nativeElement;Ae&&(Ae.value=this.applyMask(Ae.value,this.maskExpression,W,te,Ee,Te),Ae!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(W,te){return W.split("").map((Ee,Te)=>this.patterns&&this.patterns[te[Te]??""]&&this.patterns[te[Te]??""]?.symbol?this.patterns[te[Te]??""]?.symbol:Ee).join("")}getActualValue(W){const te=W.split("").filter((Ee,Te)=>{const Ae=this.maskExpression[Te]??"";return this._checkSymbolMask(Ee,Ae)||this.specialCharacters.includes(Ae)&&Ee===Ae});return te.join("")===W?te.join(""):W}shiftTypedSymbols(W){let te="";return(W&&W.split("").map((Te,Ae)=>{if(this.specialCharacters.includes(W[Ae+1]??"")&&W[Ae+1]!==this.maskExpression[Ae+1])return te=Te,W[Ae+1];if(te.length){const gt=te;return te="",gt}return Te})||[]).join("")}numberToString(W){return!W&&0!==W||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(W).length>14?String(W):Number(W).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(W){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(W){if("IP"===this.maskExpression)return this._checkForIp(W);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(W)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const W=this._elementRef?.nativeElement;W&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==W.value.replace(this.placeHolderCharacter,"").length&&(this.formElementProperty=["value",""],this.applyMask("",this.maskExpression))}set formElementProperty([W,te]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,W,te))}checkSpecialCharAmount(W){return W.split("").filter(Ee=>this._findSpecialChar(Ee)).length}removeMask(W){return this._removeMask(this._removeSuffix(this._removePrefix(W)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(W){if("#"===W)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const te=[];for(let Ee=0;Ee<W.length;Ee++){const Te=W[Ee]??"";Te&&Te.match("\\d")&&te.push(Te)}return te.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:te.length>3&&te.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:te.length>6&&te.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(W){const te=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,Ee=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===W)return te;const Te=[];for(let Ae=0;Ae<W.length;Ae++){const gt=W[Ae]??"";gt&&gt.match("\\d")&&Te.push(gt)}return Te.length<=3?te.slice(Te.length,te.length):Te.length>3&&Te.length<=6?te.slice(Te.length+1,te.length):Te.length>6&&Te.length<=9?te.slice(Te.length+2,te.length):Te.length>9&&Te.length<11?te.slice(Te.length+3,te.length):11===Te.length?"":12===Te.length?Ee.slice(17===W.length?16:15,Ee.length):Te.length>12&&Te.length<=14?Ee.slice(Te.length+4,Ee.length):""}_getActiveElement(W=this.document){const te=W?.activeElement?.shadowRoot;return te?.activeElement?this._getActiveElement(te):W.activeElement}formControlResult(W){if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged)return this.maskChanged&&this.onChange(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(W))))),void(this.maskChanged=!1);Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(W)),this.dropSpecialCharacters)))):this.onChange(this._toNumber(this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===W?this._checkSymbols(this._removeSuffix(this._removePrefix(W))):W))}_toNumber(W){if(!this.isNumberValue||""===W||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return W;if(String(W).length>16&&this.separatorLimit.length>14)return String(W);const te=Number(W);return Number.isNaN(te)?W:te}_removeMask(W,te){return this.maskExpression.startsWith("percent")&&W.includes(".")?W:W&&W.replace(this._regExpForRemove(te),"")}_removePrefix(W){return this.prefix?W&&W.replace(this.prefix,""):W}_removeSuffix(W){return this.suffix?W&&W.replace(this.suffix,""):W}_retrieveSeparatorValue(W){const te=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(Ee=>this.dropSpecialCharacters.includes(Ee)):this.specialCharacters;return this._removeMask(W,te)}_regExpForRemove(W){return new RegExp(W.map(te=>`\\${te}`).join("|"),"gi")}_replaceDecimalMarkerToDot(W){const te=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return W.replace(this._regExpForRemove(te),".")}_checkSymbols(W){if(""===W)return W;const te=this._retrieveSeparatorPrecision(this.maskExpression),Ee=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(W));return this.isNumberValue&&te?W===this.decimalMarker?null:this.separatorLimit.length>14?String(Ee):this._checkPrecision(this.maskExpression,Ee):Ee}_retrieveSeparatorPrecision(W){const te=W.match(new RegExp("^separator\\.([^d]*)"));return te?Number(te[1]):null}_checkPrecision(W,te){const Ee=W.slice(10,11);return W.indexOf("2")>0||this.leadZero&&Number(Ee)>1?this.leadZero?Number(te).toFixed(Number(Ee)):Number(te).toFixed(2):this.numberToString(te)}_repeatPatternSymbols(W){return W.match(/{[0-9]+}/)&&W.split("").reduce((te,Ee,Te)=>{if(this._start="{"===Ee?Te:this._start,"}"!==Ee)return this._findSpecialChar(Ee)?te+Ee:te;this._end=Te;const Ae=Number(W.slice(this._start+1,this._end)),gt=new Array(Ae+1).join(W[this._start-1]);if(W.slice(0,this._start).length>1&&W.includes("S")){const Y=W.slice(0,this._start-1);return Y.includes("{")?te+gt:Y+te+gt}return te+gt},"")||W}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}}return et.\u0275fac=function(){let Ke;return function(te){return(Ke||(Ke=me.n5z(et)))(te||et)}}(),et.\u0275prov=me.Yz7({token:et,factory:et.\u0275fac}),et})();function kt(){const et=(0,me.f3M)(Qe),Ke=(0,me.f3M)(Ne);return Ke instanceof Function?{...et,...Ke()}:{...et,...Ke}}function ge(et){return[{provide:Ne,useValue:et},{provide:Qe,useValue:at},{provide:Re,useFactory:kt},$e]}let Ze=(()=>{class et{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.maskFilled=new me.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this._isComposing=!1,this.document=(0,me.f3M)(le.K0),this._maskService=(0,me.f3M)($e,{self:!0}),this._config=(0,me.f3M)(Re),this.onChange=W=>{},this.onTouch=()=>{}}ngOnChanges(W){const{maskExpression:te,specialCharacters:Ee,patterns:Te,prefix:Ae,suffix:gt,thousandSeparator:Y,decimalMarker:oe,dropSpecialCharacters:Fe,hiddenInput:At,showMaskTyped:Ht,placeHolderCharacter:Gt,shownMaskExpression:Xt,showTemplate:pn,clearIfNotMatch:Zt,validation:Yt,separatorLimit:qe,allowNegativeNumbers:Xe,leadZeroDateTime:ot,leadZero:dt,triggerOnMaskChange:It}=W;if(te&&(te.currentValue!==te.previousValue&&!te.firstChange&&(this._maskService.maskChanged=!0),Xe&&(this._maskService.allowNegativeNumbers=Xe.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(ft=>"-"!==ft))),te.currentValue&&te.currentValue.split("||").length>1?(this._maskExpressionArray=te.currentValue.split("||").sort((ft,jt)=>ft.length-jt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=te.currentValue||"",this._maskService.maskExpression=this._maskValue)),Ee){if(!Ee.currentValue||!Array.isArray(Ee.currentValue))return;this._maskService.specialCharacters=Ee.currentValue||[]}Te&&Te.currentValue&&(this._maskService.patterns=Te.currentValue),Ae&&(this._maskService.prefix=Ae.currentValue),gt&&(this._maskService.suffix=gt.currentValue),Y&&(this._maskService.thousandSeparator=Y.currentValue),oe&&(this._maskService.decimalMarker=oe.currentValue),Fe&&(this._maskService.dropSpecialCharacters=Fe.currentValue),At&&(this._maskService.hiddenInput=At.currentValue),Ht&&(this._maskService.showMaskTyped=Ht.currentValue),Gt&&(this._maskService.placeHolderCharacter=Gt.currentValue),Xt&&(this._maskService.shownMaskExpression=Xt.currentValue),pn&&(this._maskService.showTemplate=pn.currentValue),Zt&&(this._maskService.clearIfNotMatch=Zt.currentValue),Yt&&(this._maskService.validation=Yt.currentValue),qe&&(this._maskService.separatorLimit=qe.currentValue),ot&&(this._maskService.leadZeroDateTime=ot.currentValue),dt&&(this._maskService.leadZero=dt.currentValue),It&&(this._maskService.triggerOnMaskChange=It.currentValue),this._applyMask()}validate({value:W}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(W);if(this._maskService.cpfCnpjError)return this._createValidationError(W);if(this._maskValue.startsWith("separator")||xe.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(ut.includes(this._maskValue))return this._validateTime(W);if(W&&W.toString().length>=1){let te=0;if(this._maskValue.startsWith("percent"))return null;for(const Ee in this._maskService.patterns)if(this._maskService.patterns[Ee]?.optional&&(this._maskValue.indexOf(Ee)!==this._maskValue.lastIndexOf(Ee)?te+=this._maskValue.split("").filter(Ae=>Ae===Ee).join("").length:-1!==this._maskValue.indexOf(Ee)&&te++,-1!==this._maskValue.indexOf(Ee)&&W.toString().length>=this._maskValue.indexOf(Ee)||te===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&W.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4)return null;if(this._maskValue.indexOf("*")>1&&W.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&W.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(W);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const Ee=this._maskValue.split("*"),Te=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-te:this.prefix?this._maskValue.length+this.prefix.length-te:this._maskValue.length-te;if(1===Ee.length&&W.toString().length<Te)return this._createValidationError(W);if(Ee.length>1){const Ae=Ee[Ee.length-1];if(Ae&&this._maskService.specialCharacters.includes(Ae[0])&&W.includes(Ae[0])&&!this.dropSpecialCharacters){const gt=W.split(Ae[0]);return gt[gt.length-1].length===Ae.length-1?null:this._createValidationError(W)}return(Ae&&!this._maskService.specialCharacters.includes(Ae[0])||!Ae||this._maskService.dropSpecialCharacters)&&W.length>=Te?null:this._createValidationError(W)}}if(1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null}return W&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(W){(""===W||null==W)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(W){if(this._isComposing)return;const te=W.target;if(this._inputValue=te.value,this._setMask(),!this._maskValue)return void this.onChange(te.value);let Ee=1===te.selectionStart?te.selectionStart+this._maskService.prefix.length:te.selectionStart,Te=0,Ae=!1;if("Delete"===this._code&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&"Backspace"!==this._code&&"d0/M0/0000"===this._maskService.maskExpression&&Ee<10){const Y=this._inputValue.slice(Ee-1,Ee);te.value=this._inputValue.slice(0,Ee-1)+Y+this._inputValue.slice(Ee+1)}if(this._maskService.applyValueChanges(Ee,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Y,oe)=>{this._justPasted=!1,Te=Y,Ae=oe}),this._getActiveElement()!==te)return;this._maskExpressionArray.length&&(Ee="Backspace"===this._code?this.specialCharacters.includes(this._inputValue.slice(Ee-1,Ee))?Ee-1:Ee:1===te.selectionStart?te.selectionStart+this._maskService.prefix.length:te.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let gt=this._position?this._inputValue.length+Ee+Te:Ee+("Backspace"!==this._code||Ae?Te:0);gt>this._getActualInputLength()&&(gt=this._getActualInputLength()),gt<0&&(gt=0),te.setSelectionRange(gt,gt),this._position=null}onCompositionStart(){this._isComposing=!0}onCompositionEnd(W){this._isComposing=!1,this._justPasted=!0,this.onInput(W)}onBlur(W){if(this._maskValue){const te=W.target;if(this.leadZero&&te.value.length>0&&"string"==typeof this.decimalMarker){const Ee=this._maskService.maskExpression,Te=Number(this._maskService.maskExpression.slice(Ee.length-1,Ee.length));if(Te>1){te.value=this.suffix?te.value.split(this.suffix).join(""):te.value;const Ae=te.value.split(this.decimalMarker)[1];te.value=te.value.includes(this.decimalMarker)?te.value+"0".repeat(Te-Ae.length)+this.suffix:te.value+this.decimalMarker+"0".repeat(Te)+this.suffix,this._maskService.actualValue=te.value}}this._maskService.clearIfNotMatchFn()}this.onTouch()}onClick(W){if(!this._maskValue)return;const te=W.target;null!==te&&null!==te.selectionStart&&te.selectionStart===te.selectionEnd&&te.selectionStart>this._maskService.prefix.length&&38!==W.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),te.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===te.value?(te.focus(),te.setSelectionRange(0,0)):te.selectionStart>this._maskService.actualValue.length&&te.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ae=te&&(te.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:te.value);te&&te.value!==Ae&&(te.value=Ae),te&&(te.selectionStart||te.selectionEnd)<=this._maskService.prefix.length?te.selectionStart=this._maskService.prefix.length:te&&te.selectionEnd>this._getActualInputLength()&&(te.selectionEnd=this._getActualInputLength())}onKeyDown(W){if(!this._maskValue)return;if(this._isComposing)return void("Enter"===W.key&&this.onCompositionEnd(W));this._code=W.code?W.code:W.key;const te=W.target;if(this._inputValue=te.value,this._setMask(),"ArrowUp"===W.key&&W.preventDefault(),"ArrowLeft"===W.key||"Backspace"===W.key||"Delete"===W.key){if("Backspace"===W.key&&0===te.value.length&&(te.selectionStart=te.selectionEnd),"Backspace"===W.key&&0!==te.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&te.selectionStart<=this.prefix.length)te.setSelectionRange(this.prefix.length,te.selectionEnd);else if(this._inputValue.length!==te.selectionStart&&1!==te.selectionStart)for(;this.specialCharacters.includes((this._inputValue[te.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&te.selectionStart>this.prefix.length||0===this.prefix.length);)te.setSelectionRange(te.selectionStart-1,te.selectionEnd);this.checkSelectionOnDeletion(te),this._maskService.prefix.length&&te.selectionStart<=this._maskService.prefix.length&&te.selectionEnd<=this._maskService.prefix.length&&W.preventDefault(),"Backspace"===W.key&&!te.readOnly&&0===te.selectionStart&&te.selectionEnd===te.value.length&&0!==te.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<te.selectionStart?te.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):("KeyA"===W.code&&W.ctrlKey||"KeyA"===W.code&&W.metaKey)&&(te.setSelectionRange(0,this._getActualInputLength()),W.preventDefault()),this._maskService.selStart=te.selectionStart,this._maskService.selEnd=te.selectionEnd}writeValue(W){var te=this;return(0,T.Z)(function*(){if("object"==typeof W&&null!==W&&"value"in W&&("disable"in W&&te.setDisabledState(!!W.disable),W=W.value),"number"==typeof W||te._maskValue.startsWith("separator")){W=String(W);const Ee=te._maskService.currentLocaleDecimalMarker();Array.isArray(te._maskService.decimalMarker)||(W=te._maskService.decimalMarker!==Ee?W.replace(Ee,te._maskService.decimalMarker):W),te._maskService.leadZero&&W&&te.maskExpression&&!1!==te.dropSpecialCharacters&&(W=te._maskService._checkPrecision(te.maskExpression.toString(),W)),","===te._maskService.decimalMarker&&(W=W.toString().replace(".",",")),te.maskExpression?.startsWith("separator")&&te.leadZero&&requestAnimationFrame(()=>{te._maskService.applyMask(W.toString(),te._maskService.maskExpression)}),te._maskService.isNumberValue=!0}"string"!=typeof W&&(W=""),te._inputValue=W,te._setMask(),W&&te._maskService.maskExpression||te._maskService.maskExpression&&(te._maskService.prefix||te._maskService.showMaskTyped)?(te._maskService.writingValue=!0,te._maskService.formElementProperty=["value",te._maskService.applyMask(W,te._maskService.maskExpression)],te._maskService.writingValue=!1):te._maskService.formElementProperty=["value",W],te._inputValue=W})()}registerOnChange(W){this._maskService.onChange=this.onChange=W}registerOnTouched(W){this.onTouch=W}_getActiveElement(W=this.document){const te=W?.activeElement?.shadowRoot;return te?.activeElement?this._getActiveElement(te):W.activeElement}checkSelectionOnDeletion(W){W.selectionStart=Math.min(Math.max(this.prefix.length,W.selectionStart),this._inputValue.length-this.suffix.length),W.selectionEnd=Math.min(Math.max(this.prefix.length,W.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(W){this._maskService.formElementProperty=["disabled",W]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(W){const te=this._maskValue.split("").filter(Ee=>":"!==Ee).length;return W&&(0==+(W[W.length-1]??-1)&&W.length<te||W.length<=te-2)?this._createValidationError(W):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(W){return{mask:{requiredMask:this._maskValue,actualValue:W}}}_setMask(){this._maskExpressionArray.some(W=>{if(W.split("").some(Ee=>this._maskService.specialCharacters.includes(Ee))&&this._inputValue&&!W.includes("S")||W.includes("{")){const Ee=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(W)?.length;if(Ee)return this._maskValue=this.maskExpression=this._maskService.maskExpression=W.includes("{")?this._maskService._repeatPatternSymbols(W):W,Ee;{const Te=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this._maskValue=this.maskExpression=this._maskService.maskExpression=Te.includes("{")?this._maskService._repeatPatternSymbols(Te):Te}}else{const Ee=this._inputValue?.split("").every((Te,Ae)=>{const gt=W.charAt(Ae);return this._maskService._checkSymbolMask(Te,gt)});if(Ee)return this._maskValue=this.maskExpression=this._maskService.maskExpression=W,Ee}})}}return et.\u0275fac=function(W){return new(W||et)},et.\u0275dir=me.lG2({type:et,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(W,te){1&W&&me.NdJ("paste",function(){return te.onPaste()})("ngModelChange",function(Te){return te.onModelChange(Te)})("input",function(Te){return te.onInput(Te)})("compositionstart",function(Te){return te.onCompositionStart(Te)})("compositionend",function(Te){return te.onCompositionEnd(Te)})("blur",function(Te){return te.onBlur(Te)})("click",function(Te){return te.onClick(Te)})("keydown",function(Te){return te.onKeyDown(Te)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[me._Bn([{provide:B.JU,useExisting:et,multi:!0},{provide:B.Cf,useExisting:et,multi:!0},$e]),me.TTD]}),et})()},5861:(tn,ht,z)=>{"use strict";function T(le,B,Re,Ne,Qe,at,ut){try{var xe=le[at](ut),je=xe.value}catch($e){return void Re($e)}xe.done?B(je):Promise.resolve(je).then(Ne,Qe)}function me(le){return function(){var B=this,Re=arguments;return new Promise(function(Ne,Qe){var at=le.apply(B,Re);function ut(je){T(at,Ne,Qe,ut,xe,"next",je)}function xe(je){T(at,Ne,Qe,ut,xe,"throw",je)}ut(void 0)})}}z.d(ht,{Z:()=>me})},7582:(tn,ht,z)=>{"use strict";function B(qe,Xe){var ot={};for(var dt in qe)Object.prototype.hasOwnProperty.call(qe,dt)&&Xe.indexOf(dt)<0&&(ot[dt]=qe[dt]);if(null!=qe&&"function"==typeof Object.getOwnPropertySymbols){var It=0;for(dt=Object.getOwnPropertySymbols(qe);It<dt.length;It++)Xe.indexOf(dt[It])<0&&Object.prototype.propertyIsEnumerable.call(qe,dt[It])&&(ot[dt[It]]=qe[dt[It]])}return ot}function $e(qe,Xe,ot,dt){return new(ot||(ot=Promise))(function(ft,jt){function zt(xn){try{Tn(dt.next(xn))}catch($n){jt($n)}}function In(xn){try{Tn(dt.throw(xn))}catch($n){jt($n)}}function Tn(xn){xn.done?ft(xn.value):function It(ft){return ft instanceof ot?ft:new ot(function(jt){jt(ft)})}(xn.value).then(zt,In)}Tn((dt=dt.apply(qe,Xe||[])).next())})}function te(qe){return this instanceof te?(this.v=qe,this):new te(qe)}function Ee(qe,Xe,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var It,dt=ot.apply(qe,Xe||[]),ft=[];return It={},jt("next"),jt("throw"),jt("return"),It[Symbol.asyncIterator]=function(){return this},It;function jt(Gn){dt[Gn]&&(It[Gn]=function(ir){return new Promise(function(Bn,dr){ft.push([Gn,ir,Bn,dr])>1||zt(Gn,ir)})})}function zt(Gn,ir){try{!function In(Gn){Gn.value instanceof te?Promise.resolve(Gn.value.v).then(Tn,xn):$n(ft[0][2],Gn)}(dt[Gn](ir))}catch(Bn){$n(ft[0][3],Bn)}}function Tn(Gn){zt("next",Gn)}function xn(Gn){zt("throw",Gn)}function $n(Gn,ir){Gn(ir),ft.shift(),ft.length&&zt(ft[0][0],ft[0][1])}}function Ae(qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,Xe=qe[Symbol.asyncIterator];return Xe?Xe.call(qe):(qe=function Ze(qe){var Xe="function"==typeof Symbol&&Symbol.iterator,ot=Xe&&qe[Xe],dt=0;if(ot)return ot.call(qe);if(qe&&"number"==typeof qe.length)return{next:function(){return qe&&dt>=qe.length&&(qe=void 0),{value:qe&&qe[dt++],done:!qe}}};throw new TypeError(Xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(qe),ot={},dt("next"),dt("throw"),dt("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function dt(ft){ot[ft]=qe[ft]&&function(jt){return new Promise(function(zt,In){!function It(ft,jt,zt,In){Promise.resolve(In).then(function(Tn){ft({value:Tn,done:zt})},jt)}(zt,In,(jt=qe[ft](jt)).done,jt.value)})}}}z.d(ht,{FC:()=>Ee,KL:()=>Ae,_T:()=>B,mG:()=>$e,qq:()=>te}),"function"==typeof SuppressedError&&SuppressedError}},tn=>{tn(tn.s=4724)}]);